window.__require=function t(e,o,n){function i(a,u){if(!o[a]){if(!e[a]){var c=a.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!u&&l)return l(c,!0);if(r)return r(c,!0);throw new Error("Cannot find module '"+a+"'")}a=c}var s=o[a]={exports:{}};e[a][0].call(s.exports,function(t){return i(e[a][1][t]||t)},s,s.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({FRUITCmd:[function(t,e,o){"use strict";cc._RF.push(e,"8cc60WJZW9GLpcXDMFG9dXn","FRUITCmd"),Object.defineProperty(o,"__esModule",{value:!0}),o.FruitCmd="214_0",o.ProtocolFuritCmd={ErrorResp:o.FruitCmd+"_err_res",GameErrorResp:o.FruitCmd+"_game_err_res",GameInitResp:o.FruitCmd+"_game_init_res",GameStartResp:o.FruitCmd+"_game_start_res",GameChangeScoreResp:o.FruitCmd+"_game_change_score_res",GameBonusResp:o.FruitCmd+"_game_bonus_res",GameInOrderNotify:o.FruitCmd+"_game_in_order_notify"},cc._RF.pop()},{}],FruitBetItem:[function(t,e,o){"use strict";cc._RF.push(e,"762cd3X79hIs7B0tYfP2C3m","FruitBetItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/utils/Utils"),a=t("../../../manager/AudioManager"),u=t("../../../manager/EventManager"),c=t("../../../manager/UIManager"),l=t("../FruitDefine"),s=cc._decorator,p=s.ccclass,_=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_bet=null,e.fruit_id=0,e}return n(e,t),e.prototype.onLoad=function(){r.default.addClickEventEND(this.btn_bet.node,this.onFruitBet.bind(this),{customAudio:!0})},e.prototype.onFruitBet=function(){if(this.btn_bet.interactable&&(a.AudioManager.playGameSFX("fruit_bt"+this.fruit_id),!l.default.IS_START)){l.default.IS_RESTART_BET&&(console.log("%c \u91cd\u65b0\u4e0b\u6ce8\u6e05\u7a7a","font-size:22px;color:red;"),u.EventManager.emit(l.FruitEvent.CLEAR_ALL_BET));var t=0;if(l.default.FRUIT_BET_ID.forEach(function(e,o){t+=e.bet_value}),(t+=l.default.SINGLE_BET_NUM)>1*l.default.GAME_MONEY)c.UIManager.showTips("\u91d1\u5e01\u4e0d\u8db3");else{for(var e=0;e<l.default.FRUIT_BET_ID.length;e++){var o=l.default.FRUIT_BET_ID[e];if(o.fruit_id==this.fruit_id){o.bet_value=o.bet_value+l.default.SINGLE_BET_NUM,u.EventManager.emit(l.FruitEvent.FRUIT_BET_EVENT,{fruit_id:this.fruit_id,betNum:o.bet_value}),l.default.GAME_HOLD_MONEY=l.default.GAME_HOLD_MONEY-l.default.SINGLE_BET_NUM;break}}u.EventManager.emit(l.FruitEvent.UPDATE_SCORE)}}},e.prototype.setBtnState=function(t){this.btn_bet.interactable=t},i([_(cc.Button)],e.prototype,"btn_bet",void 0),i([_()],e.prototype,"fruit_id",void 0),e=i([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/AudioManager":void 0,"../../../manager/EventManager":void 0,"../../../manager/UIManager":void 0,"../FruitDefine":"FruitDefine"}],FruitDefine:[function(t,e,o){"use strict";cc._RF.push(e,"a159cL9i81EAL3ngI6ruG6k","FruitDefine"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.zeroMemory=function(t){for(var e=[],o=0;o<t;o++)e[o]=0;return e},t.clone=function(t){return JSON.parse(JSON.stringify(t))},t.INVALE_CHAIR=255,t.GAME_SCENE_FREE=100,t.GAME_SCENE_PLAYING=101,t.GAME_PLAYER=3,t.FLutter_POS=cc.v2(0,120),t.MY_SEAT=-1,t.MY_ID=-1,t.PLAYER_DATAS=[],t.MY_DATA=[],t.FRUIT_BET_ID=[{fruit_id:1,bet_value:0},{fruit_id:2,bet_value:0},{fruit_id:3,bet_value:0},{fruit_id:4,bet_value:0},{fruit_id:5,bet_value:0},{fruit_id:6,bet_value:0},{fruit_id:7,bet_value:0},{fruit_id:8,bet_value:0}],t.SINGLE_ARR=[],t.SINGLE_BET_NUM=0,t.WIN_SCORE=0,t.BIG_SMALL_NUM=0,t.Fruit_FRAME_NAME={1:"img_pingguo",2:"img_chengzi",3:"img_ningmeng",4:"img_lingdang",5:"img_xigua",6:"img_xingxing",7:"img_77",8:"img_bar"},t.IS_START=!1,t.IS_BONUS=!1,t.IS_RESTART_BET=!0,t.IS_PLAY_EFFECT=!1,t.IS_BONUS_SCROLL=!1,t.IS_AUTO_START=!1,t.GAME_HOLD_MONEY=0,t.GAME_MONEY=0,t.NEED_FLUSH=!1,t}();o.default=n,o.FruitEvent={CLEAR_ALL_BET:"clear_all_bet",FRUIT_BET_EVENT:"fruit_bet_event",UPDATE_SCORE:"fruit_update_score"},o.FruitSkin=["chengzi","lingdang","bar*50","bar","pingguo","pingguo*3","ningmeng","xigua","xigua*3","","pingguo","chengzi*3","chengzi","lingdang*3","77*3","77","pingguo","ningmeng*3","ningmeng","xing*3","xing","","pingguo","lingdang*3"],o.FruitSound=["fruit_chengzi","fruit_lingdang","fruit_bar*50","fruit_bar","fruit_pingguo","fruit_pingguo*3","fruit_ningmeng","fruit_xigua","fruit_xigua*3","","fruit_pingguo","fruit_chengzi*3","fruit_chengzi","fruit_lingdang*3","fruit_77*3","fruit_77","fruit_pingguo","fruit_ningmeng*3","fruit_ningmeng","fruit_xing*3","fruit_xing","","fruit_pingguo","fruit_lingdang*3"],cc._RF.pop()},{}],FruitGameScene:[function(t,e,o){"use strict";cc._RF.push(e,"bfe1444xIZHUqA29EYXbRXY","FruitGameScene");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./FruitGameView"),a=t("../../../manager/EventManager"),u=t("../protocol/FRUITCmd"),c=t("../../../net/NetCmd"),l=t("../../../manager/UIManager"),s=t("../../../Define"),p=t("../../../common/log/LogWrap"),_=cc._decorator,d=_.ccclass,h=_.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.GameView=null,e}return n(e,t),e.prototype.onLoad=function(){this.GameView.GameScene=this,this.initEvent(),l.UIManager.hideMarquee()},e.prototype.onDestroy=function(){a.EventManager.off(this)},e.prototype.initEvent=function(){a.EventManager.on(this,c.ProtocolGameCmd.GameLoginResp,this.onGameLoginResp.bind(this)),a.EventManager.on(this,u.ProtocolFuritCmd.GameInitResp,this.onGameInitResp.bind(this)),a.EventManager.on(this,u.ProtocolFuritCmd.GameStartResp,this.onGameStartResp.bind(this)),a.EventManager.on(this,u.ProtocolFuritCmd.GameChangeScoreResp,this.onGameChangeScoreResp.bind(this)),a.EventManager.on(this,u.ProtocolFuritCmd.GameBonusResp,this.onGameBonusResp.bind(this)),a.EventManager.on(this,u.ProtocolFuritCmd.GameErrorResp,this.onGameErrorResp.bind(this)),a.EventManager.on(this,s.EventDef.UpdateUserGold,this.onUpdateUserScore.bind(this))},e.prototype.onGameLoginResp=function(t){},e.prototype.onLeaveRoomResp=function(t){this.GameView.onSubLeaveRoom(t)},e.prototype.onGameKickoutNotify=function(t){this.GameView.onSubKickOutRoom(t)},e.prototype.onGameInitResp=function(t){this.GameView.initView(t)},e.prototype.onGameStartResp=function(t){this.GameView.onSubStartTurn(t)},e.prototype.onGameChangeScoreResp=function(t){this.GameView.onSubChangeScore(t)},e.prototype.onGameBonusResp=function(t){this.GameView.onSubGameBonus(t)},e.prototype.onGameErrorResp=function(t){this.GameView.onSubGameError(t)},e.prototype.onUpdateUserScore=function(){p.LogWrap.log("\u73a9\u5bb6\u91d1\u5e01\u53d1\u751f\u6539\u53d8"),this.GameView.onUpdateUserScore()},i([h(r.default)],e.prototype,"GameView",void 0),e=i([d],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../Define":void 0,"../../../common/log/LogWrap":void 0,"../../../manager/EventManager":void 0,"../../../manager/UIManager":void 0,"../../../net/NetCmd":void 0,"../protocol/FRUITCmd":"FRUITCmd","./FruitGameView":"FruitGameView"}],FruitGameView:[function(t,e,o){"use strict";cc._RF.push(e,"24661pWKntCx6fMYuzU+ic4","FruitGameView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{c(n.next(t))}catch(t){r(t)}}function u(t){try{c(n.throw(t))}catch(t){r(t)}}function c(t){t.done?i(t.value):new o(function(e){e(t.value)}).then(a,u)}c((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function u(t){return function(e){return c([t,e])}}function c(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var u=t("./Fruit_TopPanel"),c=t("./Fruit_TurnTable"),l=t("./Fruit_ScorePanel"),s=t("./Fruit_Bonus"),p=t("./Fruit_DownBet"),_=t("../FruitDefine"),d=t("../../../manager/AudioManager"),h=t("../../../manager/UIManager"),f=t("../../../manager/NetManager"),m=t("../../../Define"),g=t("../../../manager/ResManager"),y=t("../../../manager/DataManager"),v=t("./FruitPlayer"),b=t("./Fruit_SingleBet"),S=t("./FruitShowBetArea"),T=t("../../../common/log/LogWrap"),F=t("../../../manager/EventManager"),E=t("../FruitDefine"),A=t("./FruitRecordList"),O=t("../../../view/common/GameChat"),I=cc._decorator,N=I.ccclass,B=I.property,w=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.FruitTopPanel=null,e.FruitPlayer=null,e.FruitTurnTable=null,e.FruitScorePanel=null,e.FruitBonus=null,e.FruitDownBet=null,e.FruitSingleBet=null,e.FruitShowBetArea=null,e.FruitRecordList=null,e.UINode=null,e.skeleton_bigwin=null,e.skeleton_megawin=null,e.skeleton_bitfruit=null,e.GameScene=null,e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.FruitTopPanel.GameView=this,this.FruitTurnTable.GameView=this,this.FruitDownBet.GameView=this,this.FruitSingleBet.GameView=this,this.FruitBonus.GameView=this,this.FruitScorePanel.GameView=this,F.EventManager.on(this,E.FruitEvent.UPDATE_SCORE,function(e){t.FruitPlayer.setUserScore(_.default.GAME_HOLD_MONEY)}),d.AudioManager.playGameBGM("fruit_bgm.mp3"),this.initChat()},e.prototype.onDestroy=function(){F.EventManager.off(this)},e.prototype.initChat=function(){return r(this,void 0,void 0,function(){var t,e;return a(this,function(o){switch(o.label){case 0:return[4,g.ResManager.loadResAsync("prefabs/common/GameChat",cc.Prefab,!1)];case 1:return(t=o.sent())&&cc.isValid(this.node)&&!this.node.getChildByName("GameChat")&&(e=cc.instantiate(t),this.node.addChild(e),e.getComponent(O.default).setTalkPositionX(.02,!1)),[2]}})})},e.prototype.initData=function(){_.default.IS_START=!1,_.default.IS_BONUS=!1,_.default.IS_RESTART_BET=!0,_.default.IS_PLAY_EFFECT=!1,_.default.IS_BONUS_SCROLL=!1,_.default.IS_AUTO_START=!1},e.prototype.initView=function(t){this.initData(),_.default.NEED_FLUSH=!1,_.default.GAME_MONEY=t.player_info.gold,_.default.GAME_HOLD_MONEY=t.player_info.gold,this.FruitPlayer.setUserInfo(y.DataManager.userInfo),this.FruitPlayer.setUserScore(t.player_info.gold);for(var e=0;e<t.last_bet_info.length;e++)for(var o=t.last_bet_info[e],n=0;n<_.default.FRUIT_BET_ID.length;n++){var i=_.default.FRUIT_BET_ID[n];if(o.fruit_id==i.fruit_id){i.bet_value=o.bet_value;break}}if(T.LogWrap.log("\u6c34\u679c\u4e0b\u6ce8\u56fe\u6807\u6570\u7ec4",t.last_bet_info),this.FruitShowBetArea.initShowItem(t.last_bet_info),_.default.SINGLE_ARR=t.single_bet_info,_.default.SINGLE_BET_NUM=t.single_bet,this.FruitSingleBet.initSingleNum(),this.FruitSingleBet.setBtnState(1==t.game_station),this.FruitTurnTable.clearActionAndTimer(),this.FruitTurnTable.turn_toIndex=t.last_stop_idx,9!=t.last_stop_idx&&21!=t.last_stop_idx&&this.FruitTurnTable.onItemBlink(),1!=t.game_station&&(this.FruitTurnTable.showFruitLamp(t.last_stop_idx),this.FruitTurnTable.hideItemBlink(t.last_stop_idx)),t.lucky_idx_arr.length>0)for(e=0;e<t.lucky_idx_arr.length;e++)this.FruitTurnTable.onItemLight(t.lucky_idx_arr[e],!0);this.FruitTurnTable.showFruitBill(1==t.game_station),this.FruitTurnTable.showLamp(t.game_station),this.FruitScorePanel.initScoreNum(t.score_value),this.FruitBonus.initBonusNum(t.bonus_value),this.FruitDownBet.initStartButton(t.game_station),this.FruitBonus.showBonus(2==t.game_station)},e.prototype.onSubStartTurn=function(t){this.FruitBonus.showBonus(!1),this.FruitSingleBet.setBtnState(!1),this.FruitDownBet.setBtnTurnState(),this.FruitTurnTable.onStartTurn(t),_.default.IS_RESTART_BET=!0,_.default.GAME_MONEY=t.gold,_.default.GAME_HOLD_MONEY=t.gold,this.FruitPlayer.setUserScore(t.gold)},e.prototype.playWinEffect=function(t){var e=this,o=new cc.Node;o.addComponent(sp.Skeleton);var n=o.getComponent(sp.Skeleton);2==t?n.skeletonData=this.skeleton_bigwin:3==t&&(n.skeletonData=this.skeleton_megawin),this.UINode.addChild(o),n.loop=!1,n.animation="animation",_.default.IS_PLAY_EFFECT=!0,n.setCompleteListener(function(){_.default.IS_PLAY_EFFECT=!1,o.removeFromParent(),e.FruitDownBet.setGameBtnState(2),_.default.IS_AUTO_START&&(f.NetManager.getGameProtocol().sendChangeScore(!0,!1),e.FruitDownBet.onClickStart(!0))})},e.prototype.playBitFruit=function(t){var e=this;if(9==t||21==t)return T.LogWrap.log("%c Lucky\u4e2d\u5230\u666e\u901a\u6c34\u679c\u6548\u679c","color:red"),this.FruitDownBet.setGameBtnState(2),void(_.default.IS_AUTO_START&&(f.NetManager.getGameProtocol().sendChangeScore(!0,!1),this.FruitDownBet.onClickStart(!0)));var o=new cc.Node;o.addComponent(sp.Skeleton);var n=o.getComponent(sp.Skeleton);n.skeletonData=this.skeleton_bitfruit,this.UINode.addChild(o),n.loop=!1,n.setSkin(_.FruitSkin[t]),n.animation="animation",_.default.IS_PLAY_EFFECT=!0,n.setCompleteListener(function(){_.default.IS_PLAY_EFFECT=!1,o.removeFromParent(),e.FruitDownBet.setGameBtnState(2),_.default.IS_AUTO_START&&(f.NetManager.getGameProtocol().sendChangeScore(!0,!1),e.FruitDownBet.onClickStart(!0))})},e.prototype.onSubChangeScore=function(t){this.FruitScorePanel.initScoreNum(t.score_value),_.default.GAME_MONEY=t.gold,_.default.GAME_HOLD_MONEY=t.gold,this.FruitPlayer.setUserScore(t.gold),this.FruitDownBet.initStartButton(t.next_game_station),_.default.IS_AUTO_START&&this.FruitDownBet.setBtnTurnState()},e.prototype.onSubGameBonus=function(t){var e=this,o=t.is_win;this.FruitBonus.scrollBonusNum(t.bonus_value,function(){o&&(d.AudioManager.playGameSFX("fruit_drop_money"),e.FruitBonus.showWinBonus(!0)),d.AudioManager.playGameSFX(t.bonus_value>=8?"fruit_big":"fruit_small"),d.AudioManager.stopEffect("fruit_bonus"),e.FruitDownBet.btn_down_gold.interactable=!0,T.LogWrap.log("\u6eda\u52a8\u7ed3\u675f"),e.FruitScorePanel.initScoreNum(t.score_value),e.FruitDownBet.initStartButton(t.next_game_station)})},e.prototype.upDateGameList=function(t){for(var e=[],o=0;o<t.length;o++){var n=t[o],i=this.FruitTurnTable.node_fruit.children[n];e.push(i)}this.FruitRecordList.showRecord(e)},e.prototype.onSubGameError=function(t){1==t.err_id?(_.default.IS_START=!1,h.UIManager.showTips("\u91d1\u5e01\u4e0d\u8db3,\u65e0\u6cd5\u5f00\u59cb\u6e38\u620f")):2==t.err_id?h.UIManager.showTips("\u72b6\u6001\u9519\u8bef"):3==t.err_id?(_.default.IS_START=!1,h.UIManager.showTips("\u7cfb\u7edf\u51fa\u9519")):4==t.err_id&&(_.default.IS_START=!1,h.UIManager.showTips("\u8bf7\u5148\u4e0b\u6ce8"))},e.prototype.onSubLeaveRoom=function(t){1!=t.game_state?(f.NetManager.close(m.SocketType.Game),h.UIManager.open("prefabs/HallView")):h.UIManager.showTips("\u6b63\u5728\u6e38\u620f\u4e2d,\u4e0d\u80fd\u9000\u51fa\u623f\u95f4")},e.prototype.onSubKickOutRoom=function(t){h.UIManager.showTipsPopup("\u4f60\u5df2\u88ab\u8e22\u51fa\u623f\u95f4",function(){f.NetManager.close(m.SocketType.Game),h.UIManager.open("prefabs/HallView")})},e.prototype.onUpdateUserScore=function(){_.default.NEED_FLUSH=!0,_.default.IS_BONUS||_.default.IS_START||_.default.IS_PLAY_EFFECT||(this.FruitDownBet.clearAllBet(),this.FruitDownBet.setGameBtnState(1),_.default.GAME_MONEY=y.DataManager.userInfo.gold,_.default.GAME_HOLD_MONEY=_.default.GAME_MONEY,_.default.NEED_FLUSH=!1,this.FruitPlayer.setUserScore(_.default.GAME_HOLD_MONEY))},i([B(u.default)],e.prototype,"FruitTopPanel",void 0),i([B(v.default)],e.prototype,"FruitPlayer",void 0),i([B(c.default)],e.prototype,"FruitTurnTable",void 0),i([B(l.default)],e.prototype,"FruitScorePanel",void 0),i([B(s.default)],e.prototype,"FruitBonus",void 0),i([B(p.default)],e.prototype,"FruitDownBet",void 0),i([B(b.default)],e.prototype,"FruitSingleBet",void 0),i([B(S.default)],e.prototype,"FruitShowBetArea",void 0),i([B(A.default)],e.prototype,"FruitRecordList",void 0),i([B(cc.Node)],e.prototype,"UINode",void 0),i([B(sp.SkeletonData)],e.prototype,"skeleton_bigwin",void 0),i([B(sp.SkeletonData)],e.prototype,"skeleton_megawin",void 0),i([B(sp.SkeletonData)],e.prototype,"skeleton_bitfruit",void 0),e=i([N],e)}(cc.Component);o.default=w,cc._RF.pop()},{"../../../Define":void 0,"../../../common/log/LogWrap":void 0,"../../../manager/AudioManager":void 0,"../../../manager/DataManager":void 0,"../../../manager/EventManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/ResManager":void 0,"../../../manager/UIManager":void 0,"../../../view/common/GameChat":void 0,"../FruitDefine":"FruitDefine","./FruitPlayer":"FruitPlayer","./FruitRecordList":"FruitRecordList","./FruitShowBetArea":"FruitShowBetArea","./Fruit_Bonus":"Fruit_Bonus","./Fruit_DownBet":"Fruit_DownBet","./Fruit_ScorePanel":"Fruit_ScorePanel","./Fruit_SingleBet":"Fruit_SingleBet","./Fruit_TopPanel":"Fruit_TopPanel","./Fruit_TurnTable":"Fruit_TurnTable"}],FruitNumScroll:[function(t,e,o){"use strict";cc._RF.push(e,"7c9e8rFBcBLBLpfbk/nUc60","FruitNumScroll");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,u=r.property;o.ShowItemType=cc.Enum({LABEL:0,SPRITE:1}),o.Direction=cc.Enum({TOP_TO_BOTTOM:0,BOTTOM_TO_TOP:1}),o.Sort=cc.Enum({ASC:0,DESC:1});var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showType=o.ShowItemType.LABEL,e.itemSort=o.Sort.ASC,e.scrollDirection=o.Direction.TOP_TO_BOTTOM,e.label=null,e.spriteList=[],e.labelLineHeight=40,e.fontColor=cc.color(255,255,255,255),e.labelMinNum=0,e.labelMaxNum=9,e.rollSpeed=300,e.rollRound=1,e.speed=300,e.isAutoRoll=!0,e.curNum=0,e.curNumIdx=0,e.maxNum=9,e.minNum=0,e.time=0,e.totalTime=0,e.lineHeight=0,e.labelLineCount=0,e.labelHeight=0,e.av=0,e.rolling=!1,e.numArray=[],e}return n(e,t),e.prototype.onLoad=function(){this.initLabel()},e.prototype.resetScrollNumber=function(t,e,o,n,i){this.showType=t,this.itemSort=e,this.scrollDirection=o,this.minNum=n,this.maxNum=this.maxNum,this.initLabel()},e.prototype.initLabel=function(){var t="";if(this.numArray=[],this.label.node.removeAllChildren(),this.showType==o.ShowItemType.SPRITE){if(this.spriteList&&0!=this.spriteList.length||cc.log("\u8bf7\u8bbe\u7f6e\u56fe\u7247\u96c6"),this.label.lineHeight=this.spriteList[0].getRect().height,this.itemSort==o.Sort.DESC){for(var e=(n=this.spriteList.length)-1;e>=0;e--)this.addSprite(this.spriteList[e],this.label.node,e);this.addSprite(this.spriteList[n-1],this.label.node,n-1)}else if(this.itemSort==o.Sort.ASC){var n=this.spriteList.length;for(e=0;e<n;e++)this.addSprite(this.spriteList[e],this.label.node,e);this.addSprite(this.spriteList[0],this.label.node,0)}this.label.node.getComponent(cc.Layout).updateLayout(),this.minNum=0,this.maxNum=this.spriteList.length-1}if(this.itemSort==o.Sort.DESC){for(e=this.maxNum;e>=this.minNum;e--)t+=e+"\n";t+=this.maxNum}else if(this.itemSort==o.Sort.ASC){for(e=this.minNum;e<=this.maxNum;e++)t+=e+"\n";t+=this.minNum}this.showType==o.ShowItemType.LABEL?(this.minNum=this.labelMinNum,this.maxNum=this.labelMaxNum,this.label.lineHeight=this.labelLineHeight,this.label.string=t,this.label.node.color=this.fontColor):this.showType==o.ShowItemType.SPRITE&&(this.label.string="",this.label.node.color=cc.color(255,255,255,255)),this.numArray=t.split("\n"),this.lineHeight=this.label.lineHeight,this.label.node.parent.height=this.lineHeight;var i=this.maxNum-this.minNum;this.labelLineCount=i+2,this.label.node.height=this.labelLineCount*this.lineHeight,this.labelHeight=this.label.node.height;var r=this.getCurNumIdx(this.curNum);this.curNumIdx=r||0,this.curNum=this.getCurNum(),this.label.node.y=this.getCurNumPositionY(this.curNum)},e.prototype.addSprite=function(t,e,o){var n=new cc.Node;if(n.addComponent(cc.Sprite).spriteFrame=t,cc.debug&&null!=o){var i=new cc.Node;i.color=cc.Color.RED,i.addComponent(cc.Label).string=o,i.parent=n}e.addChild(n)},e.prototype.getCurNumIdx=function(t){for(var e=0;e<this.numArray.length;e++)if(this.numArray[e]==t)return e},e.prototype.getCurNum=function(){return this.numArray[this.curNumIdx]},e.prototype.getCurNumPositionY=function(t){var e=this.getCurNumIdx(t);return this.lineHeight*(e-(this.labelLineCount/2-.5))},e.prototype.updateCurNumByPosY=function(t){var e=t/this.lineHeight;this.curNumIdx=this.labelLineCount/2-.5+e,this.curNumIdx==this.labelLineCount&&(this.curNumIdx=0),this.curNumIdx=this.getIntegerNumIdx(),this.curNum=this.numArray[this.curNumIdx]},e.prototype.getIntegerNumIdx=function(){var t=Math.round(this.curNumIdx);return t>=this.maxNum-this.minNum+1&&(t=0),t},e.prototype.getLastPosY=function(){var t;return this.scrollDirection==o.Direction.TOP_TO_BOTTOM?t=-(this.labelLineCount*this.label.node.anchorY-.5)*this.lineHeight:this.scrollDirection==o.Direction.BOTTOM_TO_TOP&&(t=(this.labelLineCount*this.label.node.anchorY-.5)*this.lineHeight),t},e.prototype.getStartPosY=function(){var t;return this.scrollDirection==o.Direction.TOP_TO_BOTTOM?t=(this.labelLineCount*this.label.node.anchorY-.5)*this.lineHeight:this.scrollDirection==o.Direction.BOTTOM_TO_TOP&&(t=-(this.labelLineCount*this.label.node.anchorY-.5)*this.lineHeight),t},e.prototype.scrollTo=function(t,e){if(!this.rolling){var n=this.getCurNumIdx(t);if(null!=t&&null!=n){this.isAutoRoll=!1,this.speed=this.rollSpeed,this.time=0,this.rolling=!0;var i,r=(this.labelLineCount-1)*this.lineHeight;i=this.label.node.y-this.getCurNumPositionY(this.curNum);var a=0,u=0;this.scrollDirection==o.Direction.TOP_TO_BOTTOM?(a=(this.curNumIdx+1)*this.lineHeight-i,u=(this.labelLineCount-1-(n+1))*this.lineHeight):this.scrollDirection==o.Direction.BOTTOM_TO_TOP&&(a=(this.labelLineCount-1-(this.curNumIdx+1))*this.lineHeight-i,u=(n+1)*this.lineHeight);var c=r*this.rollRound+u+a;return this.totalTime=2*c/this.speed,this.av=-this.speed/this.totalTime,e&&this.node.runAction(cc.sequence(cc.delayTime(this.totalTime),cc.callFunc(function(){console.log("\u6eda\u52a8\u7ed3\u675f, \u8fdb\u5165\u56de\u8c03"),e()}))),this.totalTime}}},e.prototype.setCurNum=function(t){t+="",-1!=this.numArray.indexOf(t)?(this.curNumIdx=this.numArray.indexOf(t),this.curNum=this.numArray[this.curNumIdx],this.label.node.y=this.getCurNumPositionY(this.curNum)):console.log("\u6ca1\u6709\u8be5\u6570\u5b57")},e.prototype.update=function(t){if(!this.isAutoRoll||0==this.speed){if(!this.rolling)return;this.time+=t,this.time>=this.totalTime&&(t-=this.time-this.totalTime,this.rolling=!1);var e=this.speed*t+this.av*t*t*.5;return this.updateLabel(e),void(this.speed+=this.av*t)}e=this.rollSpeed*t;this.updateLabel(e)},e.prototype.stopScroll=function(){this.rolling=!1},e.prototype.updateLabel=function(t){if(this.scrollDirection==o.Direction.TOP_TO_BOTTOM)(e=this.label.node.y-t-this.getLastPosY())<0?this.label.node.y=this.getStartPosY()+e:this.label.node.y-=t;else if(this.scrollDirection==o.Direction.BOTTOM_TO_TOP){var e;(e=this.label.node.y+t-this.getLastPosY())>0?this.label.node.y=this.getStartPosY()+e:this.label.node.y+=t}this.updateCurNumByPosY(this.label.node.y)},i([u({tooltip:"\u663e\u793a\u7c7b\u578b: \u6570\u5b57\u6216\u56fe\u7247\u9009\u9879,\u8bbe\u7f6e\u4e3a\u6587\u5b57\u65f6\u4f1a\u8c03\u7528 label, \u8bbe\u7f6e\u56fe\u7247\u65f6 \u9700\u8981\u8bbe\u7f6e spriteList \u7cbe\u7075\u5e27",type:o.ShowItemType})],e.prototype,"showType",void 0),i([u({tooltip:"\u6570\u5b57\u6216\u56fe\u7247\u9009\u9879\u7684\u5c55\u793a\u65b9\u5411",type:o.Sort})],e.prototype,"itemSort",void 0),i([u({tooltip:"\u6570\u5b57\u6216\u56fe\u7247\u9009\u9879\u7684\u6eda\u52a8\u65b9\u5411",type:o.Direction})],e.prototype,"scrollDirection",void 0),i([u({tooltip:"\u6570\u5b57\u663e\u793a\u533a",type:cc.Label,visible:function(){return this.showType==o.ShowItemType.LABEL}})],e.prototype,"label",void 0),i([u({tooltip:"\u56fe\u7247\u96c6,\u56fe\u7247\u5927\u5c0f\u8bf7\u4fdd\u6301\u4e00\u81f4,\u5426\u5219\u6eda\u52a8\u6570\u636e\u4e0d\u51c6\u786e",type:[cc.SpriteFrame],visible:function(){return this.showType==o.ShowItemType.SPRITE}})],e.prototype,"spriteList",void 0),i([u({tooltip:"\u884c\u9ad8",visible:function(){return this.showType==o.ShowItemType.LABEL}})],e.prototype,"labelLineHeight",void 0),i([u({tooltip:"\u5b57\u4f53\u989c\u8272",visible:function(){return this.showType==o.ShowItemType.LABEL}})],e.prototype,"fontColor",void 0),i([u({tooltip:"\u6700\u5c0f\u6eda\u52a8\u503c",visible:function(){return this.showType==o.ShowItemType.LABEL}})],e.prototype,"labelMinNum",void 0),i([u({tooltip:"\u6700\u5927\u6eda\u52a8\u503c",visible:function(){return this.showType==o.ShowItemType.LABEL}})],e.prototype,"labelMaxNum",void 0),i([u({tooltip:"\u6570\u5b57\u6eda\u52a8\u901f\u5ea6"})],e.prototype,"rollSpeed",void 0),i([u({tooltip:"\u62bd\u53d6\u968f\u673a\u6570\u64ad\u653e\u6eda\u52a8\u52a8\u753b\u65f6,\u6eda\u52a8\u5b8c\u5f53\u524d\u5708\u540e\u518d\u6b21\u591a\u6eda\u52a8\u7684\u5708\u6570"})],e.prototype,"rollRound",void 0),i([u({tooltip:"\u81ea\u52a8\u6eda\u52a8\u5f00\u5173"})],e.prototype,"isAutoRoll",void 0),i([u({tooltip:"\u5f53\u524d\u663e\u793a\u7684\u6570\u5b57 maxMum",visible:function(){return this.showType==o.ShowItemType.LABEL}})],e.prototype,"curNum",void 0),e=i([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],FruitPlayer:[function(t,e,o){"use strict";cc._RF.push(e,"10b6bLs7qNHZavInyYNCfBF","FruitPlayer");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/UIHelper"),a=t("../../../common/utils/Utils"),u=cc._decorator,c=u.ccclass,l=u.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.user_head=null,e.vip_frame=null,e.vip_level=null,e.user_name=null,e.user_money=null,e}return n(e,t),e.prototype.setUserInfo=function(t){var e=a.default.getSubStringLengTxt(t.nickname)||a.default.getReplaceStrToStar(t.userid);this.user_name.string=e,this.setUserHead(t.headimg_id),this.setVipFrame(t.vip_level),this.setVipLevel(t.vip_level),this.node.active=!0},e.prototype.setUserHead=function(t){r.default.setHeadIcon(t,this.user_head)},e.prototype.setVipFrame=function(t){r.default.setHeadFrame(t,this.vip_frame)},e.prototype.setVipLevel=function(t){r.default.setVipLevel(t,this.vip_level)},e.prototype.setUserScore=function(t){this.user_money.string=a.default.getFormatGold(t)},i([l(cc.Node)],e.prototype,"user_head",void 0),i([l(cc.Node)],e.prototype,"vip_frame",void 0),i([l(cc.Node)],e.prototype,"vip_level",void 0),i([l(cc.Label)],e.prototype,"user_name",void 0),i([l(cc.Label)],e.prototype,"user_money",void 0),e=i([c],e)}(cc.Component);o.default=s,cc._RF.pop()},{"../../../common/UIHelper":void 0,"../../../common/utils/Utils":void 0}],FruitRecordList:[function(t,e,o){"use strict";cc._RF.push(e,"1b726ASvlNENqFKuzQWOWOo","FruitRecordList");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,u=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.listLayout=null,e.item_fruit=null,e}return n(e,t),e.prototype.showRecord=function(t){for(var e=0;e<t.length;e++){var o=cc.instantiate(t[e]);o.scale=.82,this.listLayout.insertChild(o,0)}t=[];var n=this.listLayout.childrenCount;for(e=6;e<n;e++){console.log("\u5220\u6389\u6b21\u6570"),this.listLayout.children[this.listLayout.childrenCount-1].destroy()}},i([u(cc.Node)],e.prototype,"listLayout",void 0),i([u(cc.Node)],e.prototype,"item_fruit",void 0),e=i([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],FruitRule:[function(t,e,o){"use strict";cc._RF.push(e,"3f5f21BvuJEWKwweJNSsvEC","FruitRule");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../view/base/PopupView"),a=cc._decorator,u=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_close=null,e}return n(e,t),e.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this))},e.prototype.onClickClose=function(){this.close()},i([c(cc.Node)],e.prototype,"btn_close",void 0),e=i([u],e)}(r.default);o.default=l,cc._RF.pop()},{"../../../view/base/PopupView":void 0}],FruitShowBetArea:[function(t,e,o){"use strict";cc._RF.push(e,"a6c28NZ6T1NSKBYNss8dagu","FruitShowBetArea");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./FruitShowItem"),a=cc._decorator,u=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.showArea=null,e}return n(e,t),e.prototype.setBetArea=function(t,e){for(var o=this.showArea.childrenCount,n=0;n<o;n++){var i=this.showArea.children[n].getComponent(r.default);if(i.item_id==t){i.showBetNum(e);break}}},e.prototype.setBetBlink=function(t){for(var e=this.showArea.childrenCount,o=0;o<e;o++){var n=this.showArea.children[o].getComponent(r.default);n.showBlink(n.item_id==t)}},e.prototype.hideBetBlink=function(){for(var t=this.showArea.childrenCount,e=0;e<t;e++){this.showArea.children[e].getComponent(r.default).showBlink(!1)}},e.prototype.clearBetArea=function(){for(var t=this.showArea.childrenCount,e=0;e<t;e++){var o=this.showArea.children[e].getComponent(r.default);o.showBlink(!1),o.showBetNum(0)}},e.prototype.initShowItem=function(t){for(var e=this.showArea.childrenCount,o=0;o<e;o++){var n=t[o],i=this.showArea.children[o].getComponent(r.default);i.item_id==n.fruit_id&&i.init(n)}},i([c(cc.Node)],e.prototype,"showArea",void 0),e=i([u],e)}(cc.Component);o.default=l,cc._RF.pop()},{"./FruitShowItem":"FruitShowItem"}],FruitShowItem:[function(t,e,o){"use strict";cc._RF.push(e,"26ffdZqeKtACYrOR6FbSi99","FruitShowItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,u=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label_multiple=null,e.bet_num=null,e.bet_blink=null,e.item_id=0,e}return n(e,t),e.prototype.init=function(t){this.label_multiple.string="x"+t.fruit_bet;var e=t.bet_value;this.bet_num.string=e>0?e+"":"0",this.bet_blink.active=!1},e.prototype.showBetNum=function(t){this.bet_num.string=t+""},e.prototype.showBlink=function(t){this.bet_blink.active=t},i([u(cc.Label)],e.prototype,"label_multiple",void 0),i([u(cc.Label)],e.prototype,"bet_num",void 0),i([u(cc.Node)],e.prototype,"bet_blink",void 0),i([u()],e.prototype,"item_id",void 0),e=i([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],FruitTool:[function(t,e,o){"use strict";cc._RF.push(e,"614fdhqOntDA4pwVflzMXrw","FruitTool");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./FruitDefine"),a=cc._decorator,u=a.ccclass,c=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.getInstance=function(){return null==this.instance&&(this.instance=new o),this.instance},e.prototype.getLocalIndex=function(t){var e=r.default.MY_SEAT,o=t,n=r.default.GAME_PLAYER;return(o-e+n)%n},e.prototype.getUserSexByID=function(t){for(var e=0;e<r.default.PLAYER_DATAS.length;e++){var o=r.default.PLAYER_DATAS[e];if(o.seat_id==t)return o.sex}},e=o=i([u],e)}(cc.Component));o.default=c,cc._RF.pop()},{"./FruitDefine":"FruitDefine"}],Fruit_Bonus:[function(t,e,o){"use strict";cc._RF.push(e,"81beeIQ7chFJYIlO/FpJiuz","Fruit_Bonus");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../FruitDefine"),a=t("../../../common/utils/Utils"),u=t("../../../manager/NetManager"),c=t("../FruitNumScroll"),l=t("../../../manager/AudioManager"),s=cc._decorator,p=s.ccclass,_=s.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scrollNum=[],e.btnBlink=[],e.btn_small=null,e.btn_big=null,e.spine_marquee=null,e.skeleton_run=null,e.skeleton_over=null,e.spine_win=null,e.spine_roll=null,e.GameView=null,e.lScrollOver=!1,e.rScrollOver=!1,e}return n(e,t),e.prototype.start=function(){this.node.active=!1,this.addEvenListener()},e.prototype.addEvenListener=function(){a.default.addClickEventEND(this.btn_small.node,this.onSmallScoreEvent.bind(this),{customAudio:!0}),a.default.addClickEventEND(this.btn_big.node,this.onBigScoreEvent.bind(this),{customAudio:!0})},e.prototype.onBigScoreEvent=function(){if(l.AudioManager.playGameSFX("fruit_add"),r.default.IS_BONUS){if(r.default.IS_BONUS_SCROLL)return;if(r.default.IS_PLAY_EFFECT)return;u.NetManager.getGameProtocol().sendGameBouns(2)}},e.prototype.onSmallScoreEvent=function(){if(l.AudioManager.playGameSFX("fruit_sub"),r.default.IS_BONUS){if(r.default.IS_BONUS_SCROLL)return;if(r.default.IS_PLAY_EFFECT)return;u.NetManager.getGameProtocol().sendGameBouns(1)}},e.prototype.showBonus=function(t,e){if(void 0===e&&(e=!1),this.spine_win.node.active=!1,this.spine_marquee.node.active=!1,this.lScrollOver=!1,this.rScrollOver=!1,this.btnBlink.forEach(function(t){t.stopAllActions(),t.active=!1}),this.scrollNum[0].stopScroll(),this.scrollNum[1].stopScroll(),this.node.active=t,this.node.stopAllActions(),this.node.scale=1,e){this.node.active=!0,this.node.scale=t?0:1;var o=cc.scaleTo(.2,t?1:0);this.node.runAction(o)}},e.prototype.showWinBonus=function(t){this.spine_win.node.active=t,t&&(this.spine_win.setAnimation(0,"animation",!1),this.spine_marquee.node.active=!0,this.spine_marquee.clearTracks(),this.spine_marquee.skeletonData=this.skeleton_over,this.spine_marquee.setAnimation(0,"animation",!0))},e.prototype.initBonusNum=function(t){(t*=1)>0&&t<10?(this.scrollNum[0].setCurNum(0),this.scrollNum[1].setCurNum(t)):t>=10?(this.scrollNum[0].setCurNum(Math.floor(t/10)),this.scrollNum[1].setCurNum(t%10)):this.node.active=!1},e.prototype.scrollBonusNum=function(t,e){var o=this;r.default.IS_BONUS_SCROLL=!0,this.spine_marquee.node.active=!0,this.spine_marquee.clearTracks(),this.spine_marquee.skeletonData=this.skeleton_run,this.spine_marquee.setAnimation(0,"animation",!0),this.spine_roll.setAnimation(0,"animation",!1),this.GameView.FruitDownBet.btn_down_gold.interactable=!1,this.lScrollOver=!1,this.rScrollOver=!1,this.scrollNum[0].stopScroll(),this.scrollNum[1].stopScroll();var n=0;if((t*=1)>0&&t<10){var i=this.scrollNum[0].scrollTo(0,function(){o.lScrollOver=!0,o.checkTurnOver(e)}),a=this.scrollNum[1].scrollTo(t,function(){o.rScrollOver=!0,o.checkTurnOver(e)});n=Math.max(i,a)}else if(t>=10){i=this.scrollNum[0].scrollTo(Math.floor(t/10),function(){o.lScrollOver=!0,o.checkTurnOver(e)}),a=this.scrollNum[1].scrollTo(t%10,function(){o.rScrollOver=!0,o.checkTurnOver(e)});n=Math.max(i,a)}var u=t>=8?1:0;this.showBlink(n,u),l.AudioManager.playGameSFX("fruit_bonus")},e.prototype.showBlink=function(t,e){var o=this;this.btnBlink.forEach(function(t){t.stopAllActions(),t.active=!1});var n=cc.sequence(cc.delayTime(t),cc.callFunc(function(){o.btnBlink[e].active=!0,o.btnBlink[e].runAction(cc.repeatForever(cc.blink(1,4)))}));this.node.runAction(n)},e.prototype.checkTurnOver=function(t){1==this.lScrollOver&&1==this.rScrollOver&&(this.spine_marquee.clearTracks(),this.spine_marquee.node.active=!1,r.default.IS_BONUS_SCROLL=!1,t())},i([_({displayName:"\u6eda\u52a8\u7684\u8282\u70b9",type:c.default})],e.prototype,"scrollNum",void 0),i([_({displayName:"\u95ea\u70c1\u7684\u6309\u94ae",type:cc.Node})],e.prototype,"btnBlink",void 0),i([_(cc.Button)],e.prototype,"btn_small",void 0),i([_(cc.Button)],e.prototype,"btn_big",void 0),i([_(sp.Skeleton)],e.prototype,"spine_marquee",void 0),i([_(sp.SkeletonData)],e.prototype,"skeleton_run",void 0),i([_(sp.SkeletonData)],e.prototype,"skeleton_over",void 0),i([_(sp.Skeleton)],e.prototype,"spine_win",void 0),i([_(sp.Skeleton)],e.prototype,"spine_roll",void 0),e=i([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/AudioManager":void 0,"../../../manager/NetManager":void 0,"../FruitDefine":"FruitDefine","../FruitNumScroll":"FruitNumScroll"}],Fruit_DownBet:[function(t,e,o){"use strict";cc._RF.push(e,"fe90chD5nJHy7TSaQdTbggW","Fruit_DownBet");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../manager/AudioManager"),a=t("../FruitDefine"),u=t("../../../manager/NetManager"),c=t("../../../manager/UIManager"),l=t("../../../manager/EventManager"),s=t("../../../common/log/LogWrap"),p=cc._decorator,_=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fruit_bet_area=null,e.btn_auto_start=null,e.btn_cancel_start=null,e.btn_all_in=null,e.btn_clear=null,e.btn_down_gold=null,e.GameView=null,e.delayAction=null,e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.btn_cancel_start.node.on(cc.Node.EventType.TOUCH_END,function(){s.LogWrap.log("%c \u53d6\u6d88\u81ea\u52a8\u6a21\u5f0f","color:red;font-size:34px"),t.btn_cancel_start.node.active=!1,t.delayAction&&(s.LogWrap.log("\u53d6\u6d88\u5ef6\u8fdfAction"),t.node.stopAction(t.delayAction),t.delayAction=null),a.default.IS_AUTO_START=!1,a.default.IS_START?(s.LogWrap.log("\u5904\u5728\u6e38\u620f\u4e2d!!!!!!!!!!"),a.default.IS_BONUS?(s.LogWrap.log("\u6b63\u5728Bonus\u754c\u9762"),t.btn_down_gold.node.active=!0,t.GameView.FruitTurnTable.showFruitBill(!1),t.GameView.FruitBonus.showBonus(!0,!0)):(s.LogWrap.log("\u975eBonus\u754c\u9762"),t.btn_auto_start.node.active=!0,t.btn_auto_start.interactable=!1),a.default.IS_BONUS_SCROLL||a.default.IS_PLAY_EFFECT?(s.LogWrap.log("\u64ad\u7740\u7279\u6548\u6216\u8005\u5728\u6eda\u52a8BONUS\u4e2d"),t.btn_down_gold.interactable=!1):t.btn_down_gold.interactable=!0):(s.LogWrap.log("\u4e0d\u5728\u6e38\u620f\u4e2d \u6062\u590d\u6b63\u5e38\u6309\u94ae\u72b6\u6001!!!!!!!!!!"),t.setGameBtnState(1))}),this.btn_down_gold.node.on(cc.Node.EventType.TOUCH_END,function(){a.default.IS_BONUS_SCROLL||t.btn_down_gold.interactable&&(r.AudioManager.playSFX("button_click"),a.default.IS_BONUS&&u.NetManager.getGameProtocol().sendChangeScore(!0,!1))}),this.btn_all_in.node.on(cc.Node.EventType.TOUCH_END,function(){if(t.btn_all_in.interactable&&(r.AudioManager.playGameSFX("fruit_all_bet"),!a.default.IS_START)){a.default.IS_RESTART_BET&&(s.LogWrap.log("%c \u91cd\u65b0\u4e0b\u6ce8\u6e05\u7a7a","font-size:22px;color:red;"),t.clearAllBet());var e=0;a.default.FRUIT_BET_ID.forEach(function(t,o){var n=t.bet_value+a.default.SINGLE_BET_NUM;e+=n}),e>1*a.default.GAME_MONEY?c.UIManager.showTips("\u5168\u62bc\u91d1\u5e01\u4e0d\u8db3\uff0c\u8bf7\u524d\u5f80\u5927\u5385\u5145\u503c"):(t.btn_clear.interactable=!0,t.btn_auto_start.interactable=!0,a.default.FRUIT_BET_ID.forEach(function(e,o){e.bet_value=e.bet_value+a.default.SINGLE_BET_NUM,t.updateBetNum(e.fruit_id,e.bet_value),a.default.GAME_HOLD_MONEY=a.default.GAME_HOLD_MONEY-a.default.SINGLE_BET_NUM}),t.GameView.FruitPlayer.setUserScore(a.default.GAME_HOLD_MONEY))}}),this.btn_clear.node.on(cc.Node.EventType.TOUCH_END,function(){t.btn_clear.interactable&&(r.AudioManager.playGameSFX("fruit_clear"),a.default.IS_START||(t.btn_clear.interactable=!1,t.btn_auto_start.interactable=!1,a.default.GAME_HOLD_MONEY=a.default.GAME_MONEY,t.GameView.FruitPlayer.setUserScore(a.default.GAME_HOLD_MONEY),a.default.FRUIT_BET_ID.forEach(function(t,e){t.bet_value=0}),t.GameView.FruitShowBetArea.clearBetArea()))}),l.EventManager.on(this,a.FruitEvent.CLEAR_ALL_BET,function(){t.clearAllBet()}),l.EventManager.on(this,a.FruitEvent.FRUIT_BET_EVENT,function(e){t.btn_clear.interactable=!0,t.btn_auto_start.interactable=!0,t.updateBetNum(e.fruit_id,e.betNum),t.setBlinkBet(e.fruit_id)})},e.prototype.onAutoStartEvent=function(t){this.btn_auto_start.interactable&&(r.AudioManager.playSFX("button_click"),a.default.IS_START?s.LogWrap.log("\u6e38\u620f\u5df2\u5f00\u59cb"):a.default.IS_PLAY_EFFECT?s.LogWrap.log("\u6b63\u5728\u64ad\u653e\u6548\u679c"):(t?(s.LogWrap.log("%c \u8fdb\u5165\u81ea\u52a8\u5f00\u59cb\u6e38\u620f\u6a21\u5f0f","color:red;font-size:34px"),a.default.IS_AUTO_START=!0):s.LogWrap.log("\u6b63\u5e38\u5f00\u59cb\u6e38\u620f\u6a21\u5f0f"),this.onClickStart()))},e.prototype.setBtnTurnState=function(){this.btn_clear.interactable=!1,this.btn_auto_start.interactable=!1,this.btn_all_in.interactable=!1,this.setBetBtnState(!1)},e.prototype.onClickStart=function(t){var e=this;if(void 0===t&&(t=!1),t)return this.btn_auto_start.node.active=!1,this.btn_cancel_start.node.active=!0,this.setBtnTurnState(),s.LogWrap.log("\u5ef6\u8fdf0.5\u79d2\u81ea\u52a8\u5f00\u59cb"),this.delayAction=cc.sequence(cc.delayTime(1),cc.callFunc(function(){e.delayAction=null,e.onClickStart()})),void this.node.runAction(this.delayAction);a.default.IS_AUTO_START&&(this.btn_auto_start.node.active=!1,this.btn_cancel_start.node.active=!0),this.setBtnTurnState(),a.default.IS_START=!0;var o=a.default.FRUIT_BET_ID;s.LogWrap.log("\u4e0b\u6ce8\u4fe1\u606f",o);var n=a.default.SINGLE_BET_NUM;s.LogWrap.log("\u5355\u6ce8\u503c\u4e3a",n),u.NetManager.getGameProtocol().sendGameStart(o,n)},e.prototype.onDestroy=function(){l.EventManager.off(this)},e.prototype.updateBetNum=function(t,e){this.GameView.FruitShowBetArea.setBetArea(t,e)},e.prototype.setBlinkBet=function(t){this.GameView.FruitShowBetArea.setBetBlink(t)},e.prototype.initStartButton=function(t){if(1==t){a.default.IS_START=!1,a.default.IS_BONUS=!1,this.btn_auto_start.node.active=!a.default.IS_AUTO_START,this.btn_cancel_start.node.active=a.default.IS_AUTO_START,this.btn_down_gold.node.active=!1;for(var e=!1,o=0;o<a.default.FRUIT_BET_ID.length;o++){if(a.default.FRUIT_BET_ID[o].bet_value>0){e=!0;break}}if(this.btn_auto_start.interactable=e,this.btn_clear.interactable=e,this.btn_all_in.interactable=!0,this.setBetBtnState(!0),this.GameView.FruitSingleBet.setBtnState(!0),u.NetManager.protocolGameCommon.needFlushGold){u.NetManager.protocolGameCommon.needFlushGold=!1,a.default.NEED_FLUSH=!1;var n=parseFloat(u.NetManager.protocolGameCommon.flushGold);this.GameView.FruitPlayer.setUserScore(n),a.default.GAME_MONEY=n,a.default.GAME_HOLD_MONEY=n}}else 2==t&&(a.default.IS_START=!0,a.default.IS_BONUS=!0,this.btn_auto_start.node.active=!1,this.btn_down_gold.node.active=!a.default.IS_AUTO_START,this.btn_cancel_start.node.active=a.default.IS_AUTO_START,this.btn_auto_start.interactable=!1,this.btn_clear.interactable=!1,this.btn_all_in.interactable=!1,this.setBetBtnState(!1))},e.prototype.setGameBtnState=function(t){if(1==t){this.btn_auto_start.node.active=!a.default.IS_AUTO_START,this.btn_cancel_start.node.active=a.default.IS_AUTO_START,this.btn_down_gold.node.active=!1;for(var e=!1,o=0;o<a.default.FRUIT_BET_ID.length;o++){if(a.default.FRUIT_BET_ID[o].bet_value>0){e=!0;break}}this.btn_auto_start.interactable=e,this.btn_clear.interactable=e,this.btn_all_in.interactable=!0,this.setBetBtnState(!0),this.GameView.FruitSingleBet.setBtnState(!0)}else 2==t&&(this.btn_auto_start.node.active=!1,this.btn_down_gold.node.active=!a.default.IS_AUTO_START,this.btn_cancel_start.node.active=a.default.IS_AUTO_START,this.btn_down_gold.interactable=!0,this.btn_auto_start.interactable=!1,this.btn_clear.interactable=!1,this.btn_all_in.interactable=!1,this.setBetBtnState(!1))},e.prototype.clearAllBet=function(){a.default.IS_RESTART_BET=!1,a.default.FRUIT_BET_ID.forEach(function(t,e){t.bet_value=0}),this.GameView.FruitShowBetArea.clearBetArea()},e.prototype.setBetBtnState=function(t){for(var e=this.fruit_bet_area.childrenCount,o=0;o<e;o++){this.fruit_bet_area.children[o].getComponent(cc.Button).interactable=t}},i([d(cc.Node)],e.prototype,"fruit_bet_area",void 0),i([d(cc.Button)],e.prototype,"btn_auto_start",void 0),i([d(cc.Button)],e.prototype,"btn_cancel_start",void 0),i([d(cc.Button)],e.prototype,"btn_all_in",void 0),i([d(cc.Button)],e.prototype,"btn_clear",void 0),i([d(cc.Button)],e.prototype,"btn_down_gold",void 0),e=i([_],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../common/log/LogWrap":void 0,"../../../manager/AudioManager":void 0,"../../../manager/EventManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"../FruitDefine":"FruitDefine"}],Fruit_Item:[function(t,e,o){"use strict";cc._RF.push(e,"50b95UUOBZOKrrd9u2XKXu8","Fruit_Item");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/utils/Utils"),a=t("../../../manager/AudioManager"),u=t("../FruitDefine"),c=t("../../../manager/UIManager"),l=cc._decorator,s=l.ccclass,p=l.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.fruit_bet=null,e.led_num=null,e.bet_num=null,e.btn_bet=null,e.spr_fruit=null,e.fruit_atlas=null,e.FruitDownBet=null,e.GameView=null,e.fruit_id=null,e}return n(e,t),e.prototype.init=function(t,e,o){this.FruitDownBet=e,this.GameView=o,this.fruit_id=t.fruit_id;var n=t.bet_value;t.bet_value>0?this.bet_num.string=n:this.bet_num.string="0",this.fruit_bet.string=t.fruit_bet,this.spr_fruit.spriteFrame=this.fruit_atlas.getSpriteFrame(u.default.Fruit_FRAME_NAME[this.fruit_id]),r.default.addClickEventEND(this.btn_bet.node,this.onFruitBet.bind(this),{customAudio:!0})},e.prototype.onFruitBet=function(){if(a.AudioManager.playGameSFX("fruit_bt"+this.fruit_id),!u.default.IS_START){u.default.IS_RESTART_BET&&(console.log("%c \u91cd\u65b0\u4e0b\u6ce8\u6e05\u7a7a","font-size:22px;color:red;"),this.FruitDownBet.clearAllBet());var t=0;if(u.default.FRUIT_BET_ID.forEach(function(e,o){t+=e.bet_value}),(t+=u.default.SINGLE_BET_NUM)>1*u.default.GAME_MONEY)c.UIManager.showTips("\u91d1\u5e01\u4e0d\u8db3");else{for(var e=0;e<u.default.FRUIT_BET_ID.length;e++){var o=u.default.FRUIT_BET_ID[e];if(o.fruit_id==this.fruit_id){o.bet_value=o.bet_value+u.default.SINGLE_BET_NUM,this.bet_num.string=o.bet_value+"",u.default.GAME_HOLD_MONEY=u.default.GAME_HOLD_MONEY-u.default.SINGLE_BET_NUM;break}}this.GameView.FruitPlayer.setUserScore(u.default.GAME_HOLD_MONEY)}}},e.prototype.initBetNum=function(t){this.bet_num.string=t+""},i([p({displayName:"\u6c34\u679c\u500d\u6570",type:cc.Label,tooltip:"fruit_bet"})],e.prototype,"fruit_bet",void 0),i([p({displayName:"LED\u80cc\u666f\u6570\u5b57\u8282\u70b9",type:cc.Node,tooltip:"led_num"})],e.prototype,"led_num",void 0),i([p({displayName:"\u4e0b\u6ce8\u500d\u6570",type:cc.Label,tooltip:"bet_num"})],e.prototype,"bet_num",void 0),i([p(cc.Button)],e.prototype,"btn_bet",void 0),i([p({displayName:"\u6c34\u679c\u56fe\u6807",type:cc.Sprite,tooltip:"spr_fruit"})],e.prototype,"spr_fruit",void 0),i([p(cc.SpriteAtlas)],e.prototype,"fruit_atlas",void 0),e=i([s],e)}(cc.Component);o.default=_,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/AudioManager":void 0,"../../../manager/UIManager":void 0,"../FruitDefine":"FruitDefine"}],Fruit_Record:[function(t,e,o){"use strict";cc._RF.push(e,"6de29hJXFJDXb6QlfC8sLP/","Fruit_Record");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/utils/Utils"),a=t("../../../manager/UIManager"),u=t("../../../common/Device"),c=t("../../../view/base/PopupView"),l=cc._decorator,s=l.ccclass,p=l.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.item_record=null,e.record_none=null,e.recordContent=null,e.btn_close=null,e}return n(e,t),e.prototype.start=function(){this.showRecordView(this.data)},e.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this))},e.prototype.onClickClose=function(){this.close()},e.prototype.showRecordView=function(t){var e=this,o=t.game_record_detail;this.record_none.active=0==o.length,this.recordContent.destroyAllChildren();for(var n=function(t){var n=cc.instantiate(i.item_record);n.active=!0,r.default.addClickEventEND(n,function(){e.onCopyRoomCode(o[t].room_code)}),n.getChildByName("spr").active=t%2==0;var a=n.getChildByName("record_num"),u=t+1+"";a.getComponent(cc.Label).string=u,n.getChildByName("record_code").getComponent(cc.Label).string=o[t].room_code,n.getChildByName("room_level").getComponent(cc.Label).string=o[t].room_name||"-",n.getChildByName("game_profit").getComponent(cc.Label).string=o[t].score;var c=n.getChildByName("game_time"),l=o[t].conclude_time,s=new RegExp("-","g"),p=r.default.timestampToTime(l).replace(s,".");p=p.slice(0,p.length-3),c.getComponent(cc.Label).string=p,i.recordContent.addChild(n)},i=this,a=0;a<o.length;a++)n(a)},e.prototype.onCopyRoomCode=function(t){if(cc.sys.isNative){var e=t;u.default.setClipBoard(e)?a.UIManager.showTips("\u590d\u5236\u6210\u529f"):a.UIManager.showTips("\u590d\u5236\u5931\u8d25")}},i([p(cc.Node)],e.prototype,"item_record",void 0),i([p(cc.Node)],e.prototype,"record_none",void 0),i([p(cc.Node)],e.prototype,"recordContent",void 0),i([p(cc.Node)],e.prototype,"btn_close",void 0),e=i([s],e)}(c.default);o.default=_,cc._RF.pop()},{"../../../common/Device":void 0,"../../../common/utils/Utils":void 0,"../../../manager/UIManager":void 0,"../../../view/base/PopupView":void 0}],Fruit_Rule:[function(t,e,o){"use strict";cc._RF.push(e,"baddfIsMspJ6pQU4P/LNIZf","Fruit_Rule");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../view/base/PopupView"),a=cc._decorator,u=a.ccclass,c=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_close=null,e}return n(e,t),e.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this))},e.prototype.onClickClose=function(){this.close()},i([c(cc.Node)],e.prototype,"btn_close",void 0),e=i([u],e)}(r.default);o.default=l,cc._RF.pop()},{"../../../view/base/PopupView":void 0}],Fruit_ScorePanel:[function(t,e,o){"use strict";cc._RF.push(e,"abe48t1gClKu7PX8xp3vmyw","Fruit_ScorePanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/utils/Utils"),a=t("../FruitDefine"),u=t("../../../manager/NetManager"),c=t("../../../manager/AudioManager"),l=cc._decorator,s=l.ccclass,p=l.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.score_num=null,e.btn_sub=null,e.btn_add=null,e.GameView=null,e}return n(e,t),e.prototype.onLoad=function(){this.score_num.string=""},e.prototype.start=function(){this.addEvenListener()},e.prototype.addEvenListener=function(){r.default.addClickEventEND(this.btn_add.node,this.onAddScoreEvent.bind(this),{customAudio:!0}),r.default.addClickEventEND(this.btn_sub.node,this.onSubScoreEvent.bind(this),{customAudio:!0})},e.prototype.onAddScoreEvent=function(){if(c.AudioManager.playGameSFX("fruit_add"),a.default.IS_BONUS){if(a.default.IS_BONUS_SCROLL)return;u.NetManager.getGameProtocol().sendChangeScore(!1,!0)}},e.prototype.onSubScoreEvent=function(){if(c.AudioManager.playGameSFX("fruit_sub"),a.default.IS_BONUS){if(a.default.IS_BONUS_SCROLL)return;u.NetManager.getGameProtocol().sendChangeScore(!1,!1)}},e.prototype.initScoreNum=function(t){t*=1,this.unscheduleAllCallbacks(),this.score_num.node.stopAllActions(),this.score_num.string=t>0?t.toFixed(2):"0.00"},e.prototype.flutterScore=function(t){var e=this;if(!(t<=0)){var o=Math.abs(t),n=o/parseFloat(50..toFixed(2)),i=0,r="",a=function(){r=(i+=n).toFixed(2),e.score_num.string=r,i>=o&&(r=o.toString(),e.score_num.string=parseFloat(r).toFixed(2),e.unschedule(a))};this.schedule(a,.01,cc.macro.REPEAT_FOREVER)}},i([p({displayName:"\u5f97\u5206\u680f\u5f97\u5206\u503c",type:cc.Label,tooltip:"score_num"})],e.prototype,"score_num",void 0),i([p(cc.Button)],e.prototype,"btn_sub",void 0),i([p(cc.Button)],e.prototype,"btn_add",void 0),e=i([s],e)}(cc.Component);o.default=_,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/AudioManager":void 0,"../../../manager/NetManager":void 0,"../FruitDefine":"FruitDefine"}],Fruit_SingleBet:[function(t,e,o){"use strict";cc._RF.push(e,"e023bAv4MNNUq6W/SLmCAzx","Fruit_SingleBet");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/utils/Utils"),a=t("../FruitDefine"),u=t("../../../manager/AudioManager"),c=cc._decorator,l=c.ccclass,s=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_sub=null,e.btn_add=null,e.single_num=null,e.GameView=null,e.can_click=!0,e}return n(e,t),e.prototype.start=function(){this.addEvenListener()},e.prototype.addEvenListener=function(){r.default.addClickEventEND(this.btn_sub.node,this.onClickEvent.bind(this),{customAudio:!0}),r.default.addClickEventEND(this.btn_add.node,this.onClickEvent.bind(this),{customAudio:!0})},e.prototype.onClickEvent=function(t){if(!a.default.IS_START&&this.can_click){var e=t.name;"btn_sub"==e?(u.AudioManager.playGameSFX("fruit_sub"),this.onSetSingle(0)):"btn_add"==e&&(u.AudioManager.playGameSFX("fruit_add"),this.onSetSingle(1))}},e.prototype.setBtnState=function(t){this.can_click=t,this.btn_sub.interactable=t,this.btn_add.interactable=t},e.prototype.initSingleNum=function(){this.single_num.string=a.default.SINGLE_BET_NUM+""},e.prototype.onSetSingle=function(t){var e=a.default.SINGLE_ARR.length-1,o=a.default.SINGLE_ARR.indexOf(a.default.SINGLE_BET_NUM);a.default.SINGLE_BET_NUM=0==t?0==o?a.default.SINGLE_ARR[e]:a.default.SINGLE_ARR[o-1]:o==e?a.default.SINGLE_ARR[0]:a.default.SINGLE_ARR[o+1],this.initSingleNum()},i([s(cc.Button)],e.prototype,"btn_sub",void 0),i([s(cc.Button)],e.prototype,"btn_add",void 0),i([s({displayName:"\u5355\u6ce8\u4e0b\u6ce8\u500d\u6570\u6587\u5b57",type:cc.Label,tooltip:"single_num"})],e.prototype,"single_num",void 0),e=i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/AudioManager":void 0,"../FruitDefine":"FruitDefine"}],Fruit_TopPanel:[function(t,e,o){"use strict";cc._RF.push(e,"e0e5e/4OnBPmZBZ3hBDpT/D","Fruit_TopPanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/utils/Utils"),a=t("../FruitDefine"),u=t("../../../manager/NetManager"),c=t("../../../manager/DataManager"),l=t("../../../manager/UIManager"),s=t("../../../common/Text"),p=t("../../../manager/EventManager"),_=t("../../../net/NetCmd"),d=cc._decorator,h=d.ccclass,f=d.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_cancel=null,e.btn_set=null,e.btn_back=null,e.btn_rule=null,e.btn_record=null,e.btn_menu=null,e.panel=null,e.GameView=null,e.room_id=null,e}return n(e,t),e.prototype.onLoad=function(){p.EventManager.on(this,_.ProtocolHallCmd.GetGameRecordDetailResp,this.onGetGameRecordDetailResp.bind(this)),this.panel.active=!1,this.btn_cancel.node.active=!1},e.prototype.onGetGameRecordDetailResp=function(t){l.UIManager.popup("game/fruit/Fruit_Record",t)},e.prototype.start=function(){r.default.addClickEventEND(this.btn_set.node,this.onEvenClickButton.bind(this)),r.default.addClickEventEND(this.btn_back.node,this.onEvenClickButton.bind(this)),r.default.addClickEventEND(this.btn_rule.node,this.onEvenClickButton.bind(this)),r.default.addClickEventEND(this.btn_record.node,this.onEvenClickButton.bind(this)),r.default.addClickEventEND(this.btn_menu.node,this.onEvenClickButton.bind(this)),r.default.addClickEventEND(this.btn_cancel.node,this.onEvenClickButton.bind(this))},e.prototype.onEvenClickButton=function(t){var e=t.name;if("btn_back"==e){if(a.default.IS_START)return void l.UIManager.showTips("\u8bf7\u7b49\u5f85\u672c\u8f6e\u6e38\u620f\u7ed3\u675f");var o=parseFloat(this.room_id)||0;u.NetManager.protocolGameCommon.sendLeaveGame(o)}else if("btn_rule"==e)l.UIManager.popup("game/fruit/rule/FruitRule");else if("btn_record"==e){if(!c.DataManager.userSafeInfo.has_bind_phone)return void l.UIManager.showTipsPopup(s.Tips.BindPhone);u.NetManager.protocolHall.sendGetGameRecordDetail(c.DataManager.gameType)}else"btn_menu"==e?(this.panel.active=!this.panel.active,this.btn_cancel.node.active=this.panel.active):"btn_cancel"==e?(this.panel.active=!1,this.btn_cancel.node.active=!1):"btn_set"==e&&l.UIManager.popup("prefabs/hall/HallSetting")},e.prototype.onDestroy=function(){p.EventManager.off(this)},i([f(cc.Button)],e.prototype,"btn_cancel",void 0),i([f(cc.Button)],e.prototype,"btn_set",void 0),i([f(cc.Button)],e.prototype,"btn_back",void 0),i([f(cc.Button)],e.prototype,"btn_rule",void 0),i([f(cc.Button)],e.prototype,"btn_record",void 0),i([f(cc.Button)],e.prototype,"btn_menu",void 0),i([f(cc.Node)],e.prototype,"panel",void 0),e=i([h],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../../../common/Text":void 0,"../../../common/utils/Utils":void 0,"../../../manager/DataManager":void 0,"../../../manager/EventManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"../../../net/NetCmd":void 0,"../FruitDefine":"FruitDefine"}],Fruit_TurnTable:[function(t,e,o){"use strict";cc._RF.push(e,"4632cNArYFGrIIUTxSQBUtC","Fruit_TurnTable");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../manager/AudioManager"),a=t("../../../common/utils/Utils"),u=t("../FruitDefine"),c=t("../../../manager/DataManager"),l=t("../../../common/log/LogWrap"),s=5,p=1,_=0,d=0,h=0,f=0,m=10,g=3,y=0,v=0,b=0,S=0,T=0,F=0,E=!0,A=cc._decorator,O=A.ccclass,I=A.property,N=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_fruit=null,e.node_blink=null,e.spine_haibao=null,e.spine_deng=null,e.turn_toIndex=0,e.lucky_toIndex=0,e.GameView=null,e.GAME_DATA=null,e.fruit_lamps=[],e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.node_fruit.children.forEach(function(e){var o=e.getChildByName("fruit_lamp");o.active=!1,t.fruit_lamps.push(o)}),this.showFruitBill(!1)},e.prototype.showLamp=function(t){this.spine_deng.setAnimation(0,1==t?"animation":"zhongjiang",!0)},e.prototype.showFruitBill=function(t,e){if(void 0===e&&(e=!1),(!this.spine_haibao.node.active||!t)&&(this.spine_haibao.node.active=t,this.spine_haibao.node.stopAllActions(),this.spine_haibao.node.scale=1,e)){this.spine_haibao.node.scale=t?0:1;var o=cc.scaleTo(.2,t?1:0);this.spine_haibao.node.runAction(o)}},e.prototype.showFruitLamp=function(t){this.fruit_lamps[t].active=!0},e.prototype.hideFruitLamp=function(){this.fruit_lamps.forEach(function(t){t.active=!1})},e.prototype.onItmeFade=function(t,e,o){e=e||.2;var n=this.node_blink.children[t];255!=n.opacity&&(n.opacity=255),n.runAction(cc.sequence(cc.delayTime(e),cc.fadeOut(o)))},e.prototype.onItemBlink=function(){var t=this.node_blink.children[this.turn_toIndex];t.stopAllActions(),t.opacity=255;var e=cc.repeatForever(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5),cc.fadeOut(.5),cc.fadeIn(.5)));t.runAction(e)},e.prototype.hideItemBlink=function(t){var e=this.node_blink.children[t];e.stopAllActions(),e.opacity=0},e.prototype.onItemLight=function(t,e){void 0===e&&(e=!1);var o=this.node_blink.children[t];if(o.stopAllActions(),o.opacity=255,e){var n=cc.repeatForever(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5),cc.fadeOut(.5),cc.fadeIn(.5)));o.runAction(n)}},e.prototype.clearFruitLight=function(){for(var t=this.node_blink.childrenCount,e=0;e<t;e++){var o=this.node_blink.children[e];o.stopAllActions(),o.opacity=0}},e.prototype.onStartTurn=function(t){this.GameView.FruitShowBetArea.hideBetBlink(),this.showFruitBill(!0,!0),this.hideFruitLamp(),this.GAME_DATA=t,s=5,p=1,_=0,f=0,y=0;var e=this.turn_toIndex,o=t.stop_idx;this.caculteStateNum(e,o),this.clearFruitLight(),console.log("\u5f00\u59cb\u4f4d\u7f6e",this.turn_toIndex),console.log("\u7ec8\u70b9\u4f4d\u7f6e",o),console.log("\u7b2c\u4e00\u9636\u6bb5\u5f00\u59cb\u65f6\u95f4",(new Date).toISOString()),this.schedule(this.onTurnSlowTimer,p/s),r.AudioManager.playGameSFX("fruit_turn")},e.prototype.onTurnSlowTimer=function(){this.onItmeFade(this.turn_toIndex,null,.3),_+=1,this.turn_toIndex++,this.turn_toIndex=this.turn_toIndex%24,_>=5&&(_=0,h=.02*d,this.unscheduleAllCallbacks(),console.log("\u5f00\u59cb\u7b2c\u4e8c\u9636\u6bb5"),console.log("\u7b2c\u4e8c\u9636\u6bb5\u5f00\u59cb\u65f6\u95f4",(new Date).toISOString()),this.schedule(this.onTurnFastTimer,h/d))},e.prototype.onTurnFastTimer=function(){this.onItmeFade(this.turn_toIndex,.02,.1),f++,this.turn_toIndex++,this.turn_toIndex=this.turn_toIndex%24,f>=d&&(r.AudioManager.stopEffect("fruit_turn"),r.AudioManager.playGameSFX("fruit_last_turn"),f=0,g=.4*m,this.unscheduleAllCallbacks(),console.log("\u5f00\u59cb\u7b2c\u4e09\u9636\u6bb5"),console.log("\u7b2c\u4e09\u9636\u6bb5\u5f00\u59cb\u65f6\u95f4",(new Date).toISOString()),this.schedule(this.onTurnEndTimer,g/m,cc.macro.REPEAT_FOREVER,.01))},e.prototype.onTurnEndTimer=function(){var t=this;this.onItmeFade(this.turn_toIndex,.3,.2),y+=1,this.turn_toIndex++,this.turn_toIndex=this.turn_toIndex%24,y>=m&&(y=0,this.unscheduleAllCallbacks(),this.schedule(function(){9!=t.GAME_DATA.stop_idx&&21!=t.GAME_DATA.stop_idx&&t.onItemBlink(),r.AudioManager.stopEffect("fruit_last_turn"),r.AudioManager.playGameSFX("fruit_bat"),t.onTriggerLucky()},0,0,.45),console.log("\u7ed3\u675f\u65f6\u95f4",(new Date).toISOString()),console.log("\u7ed3\u675f\u4f4d\u7f6e",this.turn_toIndex))},e.prototype.onTurnBlueLuckyTimer=function(){if(++T>S){if(T=0,2==(F+=1)){var t=this.GAME_DATA.lucky_idx_arr[0],e=this.GAME_DATA.lucky_idx_arr[1];(o=this.caculteDisCount(t,e))<=12?(o=24-o,E=!1):E=!0,S=o,console.log("\u7b2c\u4e8c\u9636\u6bb5\u8dd1\u51e0\u4e2a",S),console.log("\u662f\u5426\u987a\u65f6\u9488\u8dd1",E)}else if(3==F){var o;t=this.GAME_DATA.lucky_idx_arr[1],e=this.GAME_DATA.lucky_idx_arr[2];(o=this.caculteDisCount(t,e))<=12?(o=24-o,E=!1):E=!0,S=o,console.log("\u7b2c\u4e09\u9636\u6bb5\u8dd1\u51e0\u4e2a",S),console.log("\u662f\u5426\u987a\u65f6\u9488\u8dd1",E)}this.unscheduleAllCallbacks(),4==F?(r.AudioManager.stopEffect("fruit_special"),this.onItemLight(this.GAME_DATA.lucky_idx_arr[0],!0),this.onItemLight(this.GAME_DATA.lucky_idx_arr[1],!0),this.onItemLight(this.GAME_DATA.lucky_idx_arr[2],!0),F=0,this.onGameEnd()):(console.log("\u7b2c"+F+"\u9636\u6bb5"),console.log("\u9636\u6bb5\u503c",this.GAME_DATA.lucky_idx_arr[F-1]),this.schedule(this.onTurnBlueLuckyTimer,.1))}else 2==F?this.onItemLight(this.GAME_DATA.lucky_idx_arr[0]):3==F&&(this.onItemLight(this.GAME_DATA.lucky_idx_arr[0]),this.onItemLight(this.GAME_DATA.lucky_idx_arr[1])),E?(this.lucky_toIndex++,this.lucky_toIndex=this.lucky_toIndex%24):(this.lucky_toIndex--,this.lucky_toIndex<0&&(this.lucky_toIndex=(this.lucky_toIndex+24)%24)),this.onItmeFade(this.lucky_toIndex,.1,.1)},e.prototype.onTurnColorLuckyTimer=function(){if((b+=1)>v){b=0,console.log("\u7ed3\u675f\u5f69\u8272Lucky");for(var t=0;t<this.GAME_DATA.lucky_idx_arr.length;t++){var e=this.GAME_DATA.lucky_idx_arr[t];this.onItemLight(e,!0)}r.AudioManager.stopEffect("fruit_special"),this.unscheduleAllCallbacks(),this.onGameEnd()}else this.lucky_toIndex++,this.lucky_toIndex=this.lucky_toIndex%24,this.onItmeFade(this.lucky_toIndex,.3,0)},e.prototype.onTriggerLucky=function(){var t=this.GAME_DATA,e=t.lucky_idx_arr;if(e.length>0){if(this.lucky_toIndex=t.stop_idx,9==t.stop_idx){T=0;var o=e[0],n=this.caculteDisCount(t.stop_idx,o);S=n>12?n:n+24,E=!0,F=1,console.log("\u7b2c"+F+"\u9636\u6bb5"),console.log("\u9636\u6bb5\u503c",o),this.schedule(this.onTurnBlueLuckyTimer,.1)}else if(21==t.stop_idx){b=0;var i=e[e.length-1];n=this.caculteDisCount(t.stop_idx,i);v=n>12?n:n+24,this.schedule(this.onTurnColorLuckyTimer,.1)}r.AudioManager.playGameSFX("fruit_special",!0)}else this.onGameEnd()},e.prototype.onGameEnd=function(){var t=this.GAME_DATA,e=t.next_game_station;1==e?(u.default.IS_START=!1,this.spine_deng.setAnimation(0,"animation",!0),u.default.NEED_FLUSH&&(l.LogWrap.log("\u5237\u65b0\u5b8c\u6210"),u.default.NEED_FLUSH=!1,this.GameView.FruitPlayer.setUserScore(c.DataManager.userInfo.gold)),this.GameView.FruitDownBet.setGameBtnState(e),u.default.IS_AUTO_START&&this.GameView.FruitDownBet.onClickStart(!0)):(u.default.IS_START=!0,u.default.IS_BONUS=!0,u.default.IS_AUTO_START||this.showFruitBill(!1),this.spine_deng.setAnimation(0,"zhongjiang",!0),this.GameView.FruitScorePanel.flutterScore(t.score_value),u.default.IS_AUTO_START||this.GameView.FruitBonus.showBonus(!0,!0));var o=[];o=o.concat(t.stop_idx),this.GameView.upDateGameList(o),0!=t.win_type&&(this.showFruitLamp(t.stop_idx),this.hideItemBlink(t.stop_idx)),1==t.win_type?(this.GameView.playBitFruit(t.stop_idx),r.AudioManager.playGameSFX("fruit_reward")):2==t.win_type?(this.GameView.playWinEffect(t.win_type),r.AudioManager.playGameSFX("fruit_reward1")):3==t.win_type&&(this.GameView.playWinEffect(t.win_type),r.AudioManager.playGameSFX("fruit_reward2"))},e.prototype.caculteDisCount=function(t,e){return(e+24-t)%24},e.prototype.caculteStateNum=function(t,e){m=a.default.getRandomInt(3,5);var o=(t+s)%24,n=e-m>=0?e-m:e-m+24,i=this.caculteDisCount(o,n);d=i>12?i+72:i+96,console.log("\u7b2c\u4e00\u9636\u6bb5\u6570\u76ee",s),console.log("\u7b2c\u4e8c\u9636\u6bb5\u6570\u76ee",d),console.log("\u7b2c\u4e09\u9636\u6bb5\u6570\u76ee",m)},e.prototype.clearActionAndTimer=function(){this.unscheduleAllCallbacks(),this.clearFruitLight()},i([I(cc.Node)],e.prototype,"node_fruit",void 0),i([I(cc.Node)],e.prototype,"node_blink",void 0),i([I(sp.Skeleton)],e.prototype,"spine_haibao",void 0),i([I(sp.Skeleton)],e.prototype,"spine_deng",void 0),e=i([O],e)}(cc.Component);o.default=N,cc._RF.pop()},{"../../../common/log/LogWrap":void 0,"../../../common/utils/Utils":void 0,"../../../manager/AudioManager":void 0,"../../../manager/DataManager":void 0,"../FruitDefine":"FruitDefine"}],LongTouchComponent:[function(t,e,o){"use strict";cc._RF.push(e,"25f74/94tBG5pvyh1RYjwug","LongTouchComponent");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,u=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.longTouchEvents=[],e.touchInterval=.3,e.touchFlag=!1,e.isLongTouch=!1,e.touchStartTime=null,e}return n(e,t),e.prototype.onLoad=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.touchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.touchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.touchCancel,this)},e.prototype.touchStart=function(){this.touchFlag=!0,this.isLongTouch=!1,this.touchStartTime=new Date},e.prototype.touchHold=function(){this.touchFlag&&null!=this.touchStartTime&&((new Date).getTime()-this.touchStartTime.getTime()>1e3*this.touchInterval&&(this.touchFlag=!1,this.isLongTouch=!0))},e.prototype.touchEnd=function(){var t=this;this.touchFlag=!1,this.touchStartTime=null,this.longTouchEvents.forEach(function(e){e.emit([t.isLongTouch])})},e.prototype.touchCancel=function(){var t=this;this.touchFlag=!1,this.touchStartTime=null,this.longTouchEvents.forEach(function(e){e.emit([t.isLongTouch])})},e.prototype.update=function(t){this.touchFlag&&this.touchHold()},i([u({type:[cc.Component.EventHandler],tooltip:"\u56de\u8c03\u4e8b\u4ef6\u6570\u7ec4\uff0c\u6bcf\u95f4\u9694 ${toucheInterval}s \u56de\u8c03\u4e00\u6b21"})],e.prototype,"longTouchEvents",void 0),i([u({tooltip:"\u957f\u6309\u89e6\u53d1\u4e8b\u4ef6"})],e.prototype,"touchInterval",void 0),e=i([a],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],ProtocolFRUIT:[function(t,e,o){"use strict";cc._RF.push(e,"e21a4PP7RxDc68s3N2ixf72","ProtocolFRUIT");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../net/ProtocolBase"),r=t("../../../manager/EventManager"),a=t("./FRUITCmd"),u=t("../../../common/log/LogWrap"),c=t("../../../Define"),l=t("../../../manager/DataManager"),s=t("../../../manager/NetManager"),p=function(t){function e(){var e=t.call(this,"game/fruit/pb")||this;return e.cmd=a.FruitCmd,e.type=c.SocketType.Game,e.pbName="SGJ",r.EventManager.on(e,a.ProtocolFuritCmd.ErrorResp,e.onErrorResp.bind(e)),r.EventManager.on(e,a.ProtocolFuritCmd.GameInOrderNotify,e.onGameInOrderNotify.bind(e)),e}return n(e,t),e.prototype.sendGameInit=function(){var t={player_id:l.DataManager.userInfo.userid};this.send(t,"game_init_req"),console.log("============>\u53d1\u9001\u6e38\u620f\u521d\u59cb\u5316\u8bf7\u6c42")},e.prototype.sendGameStart=function(t,e){var o={bet_info:t,single_bet:e};this.send(o,"game_start_req"),console.log("============>\u53d1\u9001\u6e38\u620f\u5f00\u59cb\u6307\u4ee4")},e.prototype.sendChangeScore=function(t,e){var o={is_get_score:t,is_add:e};this.send(o,"game_change_score_req"),console.log("============>\u53d1\u9001\u6539\u53d8\u5f97\u5206\u680f\u6307\u4ee4")},e.prototype.sendGameBouns=function(t){var e={bet_pos:t};this.send(e,"game_bonus_req"),console.log("============>\u53d1\u9001\u731c\u5927\u5c0f\u8bf7\u6c42")},e.prototype.onErrorResp=function(t){u.LogWrap.log("\u9519\u8bef\u4fe1\u606f->>>>",t)},e.prototype.onGameInOrderNotify=function(t){u.LogWrap.log("\u6c34\u679c\u673a\u6e38\u620f\u5c31\u7eea\u901a\u77e5!!!!"),this.sendGameInit()},e}(i.default);o.default=p,s.NetManager.protocolCache.ProtocolFRUIT=p,cc._RF.pop()},{"../../../Define":void 0,"../../../common/log/LogWrap":void 0,"../../../manager/DataManager":void 0,"../../../manager/EventManager":void 0,"../../../manager/NetManager":void 0,"../../../net/ProtocolBase":void 0,"./FRUITCmd":"FRUITCmd"}]},{},["FruitDefine","FruitNumScroll","FruitTool","LongTouchComponent","FRUITCmd","ProtocolFRUIT","FruitBetItem","FruitGameScene","FruitGameView","FruitPlayer","FruitRecordList","FruitRule","FruitShowBetArea","FruitShowItem","Fruit_Bonus","Fruit_DownBet","Fruit_Item","Fruit_Record","Fruit_Rule","Fruit_ScorePanel","Fruit_SingleBet","Fruit_TopPanel","Fruit_TurnTable"]);