window.__require=function t(e,o,n){function i(a,c){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var u=o[a]={exports:{}};e[a][0].call(u.exports,function(t){return i(e[a][1][t]||t)},u,u.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({JSYSAdapter:[function(t,e,o){"use strict";cc._RF.push(e,"cb791P0WApNroAq6fjbyGqZ","JSYSAdapter");var n=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../common/utils/Utils"),r=cc._decorator,a=r.ccclass,c=(r.property,function(){function t(){}var e;return e=t,t.prototype.getRandomInt=function(t,e){return i.default.getRandomInt(t,e)},t.prototype.addClickEventEND=function(t,e,o){return i.default.addClickEventEND(t,e,o)},t.prototype.getFormatGold=function(t){return i.default.getFormatGold(t)},t.prototype.getSubStringLengTxt=function(t){return i.default.getSubStringLengTxt(t)},t.prototype.getReplaceStrToStar=function(t){return i.default.getReplaceStrToStar(t)},t.instance=new e,t=e=n([a],t)}());o.JSYSAdapter=c.instance,cc._RF.pop()},{"../../../common/utils/Utils":void 0}],JSYSAutoView:[function(t,e,o){"use strict";cc._RF.push(e,"66f61N45lhOb5h0BFpkhp6f","JSYSAutoView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../manager/NetManager"),a=t("../../../view/base/PopupView"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bet_content=null,e.item=null,e.icon_frames=[],e}return n(e,t),e.prototype.start=function(){this.showAutoView(this.data)},e.prototype.initComponent=function(){var t=this;this.getItem("btn_cancel").registerClick(function(){t.close()}),this.getItem("btn_confirm").registerClick(function(){r.NetManager.getGameProtocol().sendTuoguanConfirmReq(1),t.close()})},e.prototype.showAutoView=function(t){var e=this;this.bet_content.removeAllChildren(),t.bet_value_info.forEach(function(t,o){var n=t.loc-1,i=t.bet_value;if(i>0){var r=cc.instantiate(e.item);r.active=!0,r.getChildByName("spr_icon").getComponent(cc.Sprite).spriteFrame=e.icon_frames[n],r.getChildByName("bet_num").getComponent(cc.Label).string=i+"",e.bet_content.addChild(r)}})},i([l(cc.Node)],e.prototype,"bet_content",void 0),i([l(cc.Node)],e.prototype,"item",void 0),i([l(cc.SpriteFrame)],e.prototype,"icon_frames",void 0),e=i([s],e)}(a.default);o.default=u,cc._RF.pop()},{"../../../manager/NetManager":void 0,"../../../view/base/PopupView":void 0}],JSYSBalance:[function(t,e,o){"use strict";cc._RF.push(e,"d7c9eXECdJEeIcapjW1X84I","JSYSBalance");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../JSYSDefine"),a=t("./JSYSAdapter"),c=t("../../../view/base/PopupView"),s=t("../../../manager/EventManager"),l=cc._decorator,u=l.ccclass,p=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popup=null,e.title=null,e.text_none=null,e.spr_light=null,e.spr_title=null,e.balance_num=null,e.bet_detail=null,e.win_result=null,e.bet_item=null,e.result_item=null,e.btn_continue=null,e.bet_icon_frame=[],e.detail_icon_frame=[],e.light_frame=[],e.title_frame=[],e.spine_idx=null,e.interVal=null,e}return n(e,t),e.prototype.initComponent=function(){this.title.active=!1,this.text_none.active=!1,this.popup.active=!1,a.JSYSAdapter.addClickEventEND(this.btn_continue,this.onClickEvent.bind(this))},e.prototype.initEvent=function(){var t=this;s.EventManager.on(this,r.EventDefine.HideBalanceView,function(){t.close()})},e.prototype.start=function(){var t=this.data.result_msg_info,e=this.data.balanceScore,o=this.data.detail_arr;this.showBalance(t,e,o)},e.prototype.onClickEvent=function(){this.close()},e.prototype.showBalance=function(t,e,o){console.log("\u663e\u793a\u7ed3\u7b97\u5f39\u7a97"),this.popup.active=!0,this.showWinResult(t),this.showBalanceNum(e),this.showBetDetail(o),o.length>0&&this.showTitleAni(e>0)},e.prototype.showWinResult=function(t){this.win_result.removeAllChildren();for(var e=0;e<t.length;e++){var o=t[e].loc_type-1,n=t[e].val_betValue,i=cc.instantiate(this.result_item);this.win_result.addChild(i),i.active=!0,i.getChildByName("spr_icon").getComponent(cc.Sprite).spriteFrame=this.bet_icon_frame[o],i.getChildByName("num").getComponent(cc.Label).string="bx"+n}},e.prototype.showBalanceNum=function(t){var e=this;if(0!=(t=parseFloat(t))){var o="";t>0?o="+":t<0&&(o="-");var n=Math.abs(t),i=n/parseFloat(50..toFixed(2)),r=0,a="";this.interVal=function(){a=(r+=i).toFixed(2),e.balance_num.string=o+a,r>=n&&(a=n.toString(),e.balance_num.string=o+parseFloat(a).toFixed(2),e.unschedule(e.interVal))},this.schedule(this.interVal,.01,cc.macro.REPEAT_FOREVER)}else this.balance_num.string=t+""},e.prototype.showBetDetail=function(t){if(0==t.length)return this.text_none.active=!0,this.title.active=!0,this.bet_detail.active=!1,this.spr_title.node.active=!1,this.spr_light.node.active=!1,this.spr_title.node.stopAllActions(),void this.spr_light.node.stopAllActions();this.title.active=!1,this.text_none.active=!1,this.bet_detail.active=!0,this.bet_detail.removeAllChildren();for(var e=0;e<t.length;e++){var o=t[e];if(o>0){var n=cc.instantiate(this.bet_item);this.bet_detail.addChild(n),n.active=!0,n.getChildByName("spr_icon").getComponent(cc.Sprite).spriteFrame=this.detail_icon_frame[e],n.getChildByName("num").getComponent(cc.Label).string=o}}},e.prototype.showTitleAni=function(t){var e=this;this.spr_title.node.active=!0,this.spr_light.node.active=!0,this.spr_title.spriteFrame=this.title_frame[t?1:0],this.spr_light.spriteFrame=this.light_frame[t?1:0],this.spr_title.node.scale=0,this.spr_title.node.opacity=0,this.spr_light.node.scale=0,this.spr_light.node.opacity=0,this.spr_title.node.stopAllActions(),this.spr_light.node.stopAllActions();var o=cc.repeatForever(cc.rotateBy(1,270)),n=cc.sequence(cc.spawn(cc.fadeTo(.3,255),cc.scaleTo(.3,1,1)),cc.callFunc(function(){e.spr_light.node.runAction(o)})),i=cc.spawn(cc.fadeTo(.3,255),cc.scaleTo(.3,1,1));this.spr_light.node.runAction(n),this.spr_title.node.runAction(i)},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.unschedule(this.interVal),this.interVal=null},i([p(cc.Node)],e.prototype,"popup",void 0),i([p(cc.Node)],e.prototype,"title",void 0),i([p(cc.Node)],e.prototype,"text_none",void 0),i([p(cc.Sprite)],e.prototype,"spr_light",void 0),i([p(cc.Sprite)],e.prototype,"spr_title",void 0),i([p(cc.Label)],e.prototype,"balance_num",void 0),i([p(cc.Node)],e.prototype,"bet_detail",void 0),i([p(cc.Node)],e.prototype,"win_result",void 0),i([p(cc.Node)],e.prototype,"bet_item",void 0),i([p(cc.Node)],e.prototype,"result_item",void 0),i([p(cc.Node)],e.prototype,"btn_continue",void 0),i([p(cc.SpriteFrame)],e.prototype,"bet_icon_frame",void 0),i([p(cc.SpriteFrame)],e.prototype,"detail_icon_frame",void 0),i([p(cc.SpriteFrame)],e.prototype,"light_frame",void 0),i([p(cc.SpriteFrame)],e.prototype,"title_frame",void 0),e=i([u],e)}(c.default);o.default=h,cc._RF.pop()},{"../../../manager/EventManager":void 0,"../../../view/base/PopupView":void 0,"../JSYSDefine":"JSYSDefine","./JSYSAdapter":"JSYSAdapter"}],JSYSBetDetail:[function(t,e,o){"use strict";cc._RF.push(e,"e1d31hLlQhOYploNIEAS23m","JSYSBetDetail");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./JSYSAdapter"),a=t("../../../manager/UIManager"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cancel=null,e.spr=null,e.arrow=null,e.btn_click=null,e.detail_panel=null,e.ScrollView=null,e.node_item=null,e.icon_frames=[],e.is_move_out=!1,e.is_done=!0,e.GameView=null,e}return n(e,t),e.prototype.start=function(){var t=this;r.JSYSAdapter.addClickEventEND(this.btn_click,function(){t.onClickEvent()}),r.JSYSAdapter.addClickEventEND(this.cancel,function(){t.onCancelEvent()})},e.prototype.onClickEvent=function(){var t=this;if(this.is_done){if(0==this.GameView.BET_DETAIL_NUM.length){console.log("\u65e0\u4e0b\u6ce8\u660e\u7ec6\u6570\u636e"),this.is_done=!1;var e=cc.sequence(cc.moveBy(.2,cc.v2(10,0)),cc.moveBy(.2,cc.v2(-10,0)),cc.callFunc(function(){t.is_done=!0}));return this.spr.stopAllActions(),this.spr.runAction(e),void a.UIManager.showTips("\u672c\u5c40\u65e0\u4e0b\u6ce8\u4fe1\u606f")}this.is_done=!1,this.is_move_out?this.playMoveBack():(this.showBetDetail(this.GameView.BET_DETAIL_NUM),this.playMoveOut())}else console.log("\u52a8\u753b\u8fd8\u672a\u7ed3\u675f \u4e0d\u53ef\u70b9\u51fb")},e.prototype.onCancelEvent=function(){this.is_done?this.is_move_out?(this.is_done=!1,this.playMoveBack()):console.log("\u672a\u79fb\u52a8\u51fa\u53bb"):console.log("\u52a8\u753b\u8fd8\u672a\u7ed3\u675f \u4e0d\u53ef\u70b9\u51fb")},e.prototype.playMoveOut=function(){var t=this;this.detail_panel.active=!0,this.arrow.scaleX=-1,this.is_move_out=!0;var e=cc.sequence(cc.moveBy(.5,cc.v2(-this.detail_panel.width,0)),cc.callFunc(function(){t.is_done=!0}));this.spr.runAction(e)},e.prototype.playMoveBack=function(){var t=this;this.arrow.scaleX=1;var e=cc.sequence(cc.moveBy(.5,cc.v2(this.detail_panel.width,0)),cc.callFunc(function(){t.detail_panel.active=!1,t.is_done=!0,t.is_move_out=!1}));this.spr.runAction(e)},e.prototype.showBetDetail=function(t){for(var e=this.ScrollView.content,o=0,n=0;n<t.length;n++){if(t[n]>0){var i=null;e.children[o]?i=e.children[o]:(i=cc.instantiate(this.node_item),e.addChild(i)),i.active=!0,i.getChildByName("spr_icon").getComponent(cc.Sprite).spriteFrame=this.icon_frames[n],i.getChildByName("bet_num").getComponent(cc.Label).string="x "+t[n],o++}}},e.prototype.clearBetDetail=function(){this.ScrollView.content.removeAllChildren(!0)},i([l(cc.Node)],e.prototype,"cancel",void 0),i([l(cc.Node)],e.prototype,"spr",void 0),i([l(cc.Node)],e.prototype,"arrow",void 0),i([l(cc.Node)],e.prototype,"btn_click",void 0),i([l(cc.Node)],e.prototype,"detail_panel",void 0),i([l(cc.ScrollView)],e.prototype,"ScrollView",void 0),i([l(cc.Node)],e.prototype,"node_item",void 0),i([l(cc.SpriteFrame)],e.prototype,"icon_frames",void 0),e=i([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../manager/UIManager":void 0,"./JSYSAdapter":"JSYSAdapter"}],JSYSBetPanel:[function(t,e,o){"use strict";cc._RF.push(e,"e69c0CLG4NAgZo2XTDxUAF7","JSYSBetPanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./JSYSAdapter"),a=t(".././JSYSDefine"),c=t("./JSYSChrome"),s=t("../../../manager/NetManager"),l=t("../../../manager/UIManager"),u=t("../../../common/UIHelper"),p=cc._decorator,h=p.ccclass,d=p.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SprMask=null,e.panel_parent=null,e.clock_time=null,e.chrome_list=null,e.bet_list=null,e.btn_auto=null,e.btn_cancel_auto=null,e.btn_continue=null,e.limit_num=null,e.richer_head=[],e.richer_account=[],e.node_animal=[],e.chrome_node=null,e.chrome=null,e.gold=null,e.last_click=0,e.CountDown=0,e.open_done=!1,e.is_open=!1,e.GameView=null,e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.bet_list.children.forEach(function(e,o){e.getChildByName("multiple").getComponent(cc.Label).string="",e.getChildByName("bet_num").getComponent(cc.Label).string="",e.getChildByName("blink").active=!1,r.JSYSAdapter.addClickEventEND(e,t.onDownBetEvent.bind(t),o)}),this.chrome_list.children.forEach(function(e,o){var n=e.getChildByName("blink");n.active=!1,0==o&&(n.active=!0),r.JSYSAdapter.addClickEventEND(e,t.onBetClickEvent.bind(t),o)}),r.JSYSAdapter.addClickEventEND(this.btn_auto.getChildByName("active"),this.onAutoClickEvent.bind(this)),r.JSYSAdapter.addClickEventEND(this.btn_cancel_auto,this.onCancelClickEvent.bind(this)),r.JSYSAdapter.addClickEventEND(this.btn_continue.getChildByName("active"),this.onContinueClickEvent.bind(this)),this.node.opacity=255,this.node.active=!1},e.prototype.openBetPanel=function(t){var e=this;if(void 0===t&&(t=!0),console.log("\u6253\u5f00\u9762\u677f"),this.node.active=!0,this.is_open)console.log("\u5df2\u7ecf\u6253\u5f00");else{this.is_open=!0,this.panel_parent.stopAllActions();var o=this.panel_parent.height;if(this.panel_parent.y=o,t){var n=cc.sequence(cc.moveTo(.5,cc.v2(0,0)),cc.callFunc(function(){e.open_done=!0}));this.panel_parent.runAction(n)}else this.panel_parent.position=cc.v2(0,0),this.open_done=!0;this.SprMask.once(cc.Node.EventType.TOUCH_END,this.closeBetPanel.bind(this))}},e.prototype.closeBetPanel=function(){var t=this;this.is_open=!1,console.log("\u5173\u95ed\u9762\u677f"),this.panel_parent.stopAllActions();var e=this.panel_parent.height;this.open_done=!1;var o=cc.sequence(cc.moveTo(.5,cc.v2(0,e)),cc.callFunc(function(){t.node.active=!1}));this.panel_parent.runAction(o)},e.prototype.setRoomLimitNum=function(t){this.limit_num.string=t[0]+"-"+t[1]},e.prototype.setTimeNum=function(t){this.clock_time.string=t},e.prototype.showAnimalMultiple=function(t){var e=this;t.forEach(function(t,o){e.bet_list.children[o].getChildByName("multiple").getComponent(cc.Label).string="x"+t})},e.prototype.showChromeList=function(t){this.chrome_list.children.forEach(function(e,o){var n=e.getChildByName("num").getComponent(cc.Label),i="",r=t[o];i=r>=1e3&&r<1e4?r/1e3+"K":r>=1e4?r/1e4+"W":r+"",n.string=i})},e.prototype.showBtnAuto=function(t){this.btn_auto.active=t,this.btn_cancel_auto.active=!t},e.prototype.setEnableAuto=function(t){this.btn_auto.getChildByName("active").active=t,this.btn_auto.getChildByName("disable").active=!t},e.prototype.setEnableContinue=function(t){this.btn_continue.active=!0,this.btn_continue.getChildByName("active").active=t,this.btn_continue.getChildByName("disable").active=!t},e.prototype.setUserBetNum=function(t,e){this.bet_list.children[e].getChildByName("bet_num").getComponent(cc.Label).string=t},e.prototype.clearAllBetNum=function(){this.bet_list.children.forEach(function(t,e){t.getChildByName("bet_num").getComponent(cc.Label).string=""})},e.prototype.onUserBetAni=function(t,e){var o=cc.instantiate(this.chrome);o.scale=.8,o.active=!0,this.chrome_node.addChild(o),o.getComponent(c.default).setViewChip(t);var n=a.GameCMD.MyChipOrgPos;o.setPosition(cc.v2(n.x,n.y));var i=r.JSYSAdapter.getRandomInt(-360,360),s=this.bet_list.children[e],l=s.parent.convertToWorldSpaceAR(s.position),u=this.chrome_node.convertToNodeSpaceAR(l),p=cc.spawn(cc.moveTo(.2,cc.v2(u.x,u.y)),cc.rotateTo(.3,i)),h=cc.sequence(p,cc.delayTime(.1),cc.callFunc(function(){o.destroy()}));o.runAction(h)},e.prototype.onPlayerBetAni=function(t,e){var o=cc.instantiate(this.chrome);o.active=!0,this.chrome_node.addChild(o);var n=o.getComponent(c.default),i=r.JSYSAdapter.getRandomInt(0,4),l=s.NetManager.getGameProtocol().BET_CHROME_VALUE[i];n.setViewChip(l);var u=r.JSYSAdapter.getRandomInt(a.GameCMD.AreaValue.Min.x,a.GameCMD.AreaValue.Max.x),p=r.JSYSAdapter.getRandomInt(a.GameCMD.AreaValue.Min.y,a.GameCMD.AreaValue.Max.y);o.setPosition(cc.v2(u,p));var h=this.node_animal[e],d=h.parent.convertToWorldSpaceAR(h.position),f=this.chrome_node.convertToNodeSpaceAR(d),_=cc.moveTo(.2,cc.v2(f.x,f.y+5)),m=cc.scaleTo(.2,.4),S=cc.sequence(_,m,cc.callFunc(function(){o.destroy()}));o.runAction(S)},e.prototype.clearFloatGoldAni=function(){this.node_animal.forEach(function(t,e){var o=t.getChildByName("ring");o.stopAllActions(),o.setPosition(a.GameCMD.RingOrgPos),o.active=!1;var n=t.getChildByName("list_gold");n.children.forEach(function(t,e){t.active=!1}),n.active=!1,n.getComponent(cc.Layout).updateLayout();var i=t.getChildByName("sum_num");i.position=a.GameCMD.SumNumPos,i.getComponent(cc.Label).string="0",i.active=!0})},e.prototype.showFloatGoldAni=function(t,e,o){var n=this.node_animal[t],i=n.getChildByName("ring");i.active=!0,i.stopAllActions(),i.setPosition(a.GameCMD.RingOrgPos);var r=n.getChildByName("list_gold");r.active=!0;for(var c=0;c<e;c++)if(!r.children[c]){var s=cc.instantiate(this.gold);r.addChild(s)}r.children.forEach(function(t,o){t.active=o<e}),r.getComponent(cc.Layout).updateLayout();var l=n.getChildByName("sum_num");if(l.active=!0,l.getComponent(cc.Label).string=o,0!=e){var u=r.children[e-1],p=u.parent.convertToWorldSpaceAR(u.position),h=i.parent.convertToNodeSpaceAR(p),d=i.position,f=cc.sequence(cc.moveTo(.4,cc.v2(h.x,h.y+6)),cc.callFunc(function(){i.position=cc.v2(d.x,d.y)})),_=cc.repeatForever(f);i.runAction(_),l.position=cc.v2(0,h.y+15)}else l.position=a.GameCMD.SumNumPos},e.prototype.onDownBetEvent=function(t,e){if(this.GameView.CAN_BET)if(this.GameView.IS_AUTO)l.UIManager.showTips("\u6258\u7ba1\u4e2d\u65e0\u6cd5\u624b\u52a8\u4e0b\u6ce8\uff0c\u8bf7\u53d6\u6d88\u6258\u7ba1\u540e\u91cd\u8bd5");else{var o=e+1;console.log("\u4e0b\u6ce8\u4f4d\u7f6e",o),this.showUserBetBlink(e);var n=s.NetManager.getGameProtocol().BET_CHROME_VALUE[this.last_click];console.log("\u4e0b\u6ce8\u6570\u91cf",n),s.NetManager.getGameProtocol().sendBetReq(n,o)}else l.UIManager.showTips("\u975e\u4e0b\u6ce8\u72b6\u6001, \u8bf7\u7b49\u5f85")},e.prototype.onBetClickEvent=function(t,e){this.last_click!=e&&(this.chrome_list.children.forEach(function(t,o){var n=t.getChildByName("blink");n.active=!1,e==o&&(n.active=!0)}),this.last_click=e)},e.prototype.onAutoClickEvent=function(){s.NetManager.getGameProtocol().sendTuoguanReq()},e.prototype.onCancelClickEvent=function(){s.NetManager.getGameProtocol().sendTuoguanConfirmReq(2)},e.prototype.onContinueClickEvent=function(){s.NetManager.getGameProtocol().sendContinueBetReq()},e.prototype.showUserBetBlink=function(t){var e=this.bet_list.children[t].getChildByName("blink");e.active=!0;var o=e.getComponent(sp.Skeleton);o.clearTracks(),o.setToSetupPose(),o.setAnimation(0,"animation",!1),o.setCompleteListener(function(t,n){o.clearTracks(),e.active=!1})},e.prototype.refRichList=function(t){var e=this;t.forEach(function(t,o){var n=t.headimg_id;u.default.setHeadIcon(n,e.richer_head[o].node);var i=t.player_id,a=t.username;e.richer_account[o].string=r.JSYSAdapter.getSubStringLengTxt(a)||r.JSYSAdapter.getReplaceStrToStar(i)})},i([d(cc.Node)],e.prototype,"SprMask",void 0),i([d(cc.Node)],e.prototype,"panel_parent",void 0),i([d(cc.Label)],e.prototype,"clock_time",void 0),i([d(cc.Node)],e.prototype,"chrome_list",void 0),i([d(cc.Node)],e.prototype,"bet_list",void 0),i([d(cc.Node)],e.prototype,"btn_auto",void 0),i([d(cc.Node)],e.prototype,"btn_cancel_auto",void 0),i([d(cc.Node)],e.prototype,"btn_continue",void 0),i([d(cc.Label)],e.prototype,"limit_num",void 0),i([d(cc.Sprite)],e.prototype,"richer_head",void 0),i([d(cc.Label)],e.prototype,"richer_account",void 0),i([d(cc.Node)],e.prototype,"node_animal",void 0),i([d(cc.Node)],e.prototype,"chrome_node",void 0),i([d(cc.Prefab)],e.prototype,"chrome",void 0),i([d(cc.Node)],e.prototype,"gold",void 0),e=i([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../common/UIHelper":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,".././JSYSDefine":"JSYSDefine","./JSYSAdapter":"JSYSAdapter","./JSYSChrome":"JSYSChrome"}],JSYSChrome:[function(t,e,o){"use strict";cc._RF.push(e,"e73d21MPZdGBp8YzedafmI/","JSYSChrome");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../manager/NetManager"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ttf_font=null,e.fnt_bg=null,e.fnt_num=null,e.FNT_NUM_LIST=["Z","X","C","V","B"],e}return n(e,t),e.prototype.setViewChip=function(t){var e=this.node.getChildByName("num_node");e&&this.node.removeChild(e);var o="";o=t>=1e3&&t<1e4?(t/1e3).toString().slice(0,3)+"K":t>=1e4?(t/1e4).toString().slice(0,3)+"W":t,this.fnt_num.string=o;for(var n=r.NetManager.getGameProtocol().BET_CHROME_VALUE,i=0;i<n.length;i++){if(t==n[i]){this.fnt_bg.string=this.FNT_NUM_LIST[i];break}}},i([s(cc.Font)],e.prototype,"ttf_font",void 0),i([s(cc.Label)],e.prototype,"fnt_bg",void 0),i([s(cc.Label)],e.prototype,"fnt_num",void 0),e=i([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../manager/NetManager":void 0}],JSYSCmd:[function(t,e,o){"use strict";cc._RF.push(e,"51f00QfDslFMI3ShBagFUDG","JSYSCmd"),Object.defineProperty(o,"__esModule",{value:!0}),o.JSYSCmd="216_0",o.ProtocolJSYSCmd={GameStartNotify:o.JSYSCmd+"_game_start_notify",StartBetNotify:o.JSYSCmd+"_start_bet_notify",BetNotify:o.JSYSCmd+"_bet_notify",OtherBetNotify:o.JSYSCmd+"_other_bet_notify",ShowResultNotify:o.JSYSCmd+"_show_result_notify",GameConcludeNotify:o.JSYSCmd+"_game_conclude_notify",GameReconnectInfo:o.JSYSCmd+"_game_reconnect_info",PlayerListRes:o.JSYSCmd+"_player_list_res",ContinueBetRes:o.JSYSCmd+"_continue_bet_res",TuoguanRes:o.JSYSCmd+"_tuo_guan_res",TuoguanConfirmRes:o.JSYSCmd+"_tuoguan_confirm_res"},cc._RF.pop()},{}],JSYSDefine:[function(t,e,o){"use strict";var n,i;cc._RF.push(e,"1cada1m48xKV5yWMGBX2xJu","JSYSDefine"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameCMD={RingOrgPos:cc.v2(0,32),SumNumPos:cc.v2(0,50),MyChipOrgPos:cc.v2(-480,-310),AreaValue:{Min:cc.v2(-405,-245),Max:cc.v2(-345,125)}},o.EventDefine={HideBalanceView:"HideBalanceView"};var r,a="game/jsys/effect/";(function(t){t[t.SilveryShark=1]="SilveryShark",t[t.GoldShark=2]="GoldShark",t[t.Rabbit=4]="Rabbit",t[t.Monkey=5]="Monkey",t[t.Panda=6]="Panda",t[t.Lion=7]="Lion",t[t.Swallow=8]="Swallow",t[t.Dove=9]="Dove",t[t.Peacock=10]="Peacock",t[t.Eagle=11]="Eagle"})(r||(r={})),o.AudioName=((n={})[r.SilveryShark]="jsys_silvershark",n[r.GoldShark]="jsys_goldenshark",n[r.Rabbit]="jsys_rabbit",n[r.Monkey]="jsys_monkey",n[r.Panda]="jsys_panda",n[r.Lion]="jsys_lion",n[r.Swallow]="jsys_swallow",n[r.Dove]="jsys_dove",n[r.Peacock]="jsys_peacock",n[r.Eagle]="jsys_eagle",n),o.SpineUrl=((i={})[r.SilveryShark]=a+"yinsha/yinsha",i[r.GoldShark]=a+"jinsha/jinsha",i[r.Rabbit]=a+"tuzi/tuzi",i[r.Monkey]=a+"houzi/houzi",i[r.Panda]=a+"xiongmao/xiongmao",i[r.Lion]=a+"shizi/shizi",i[r.Swallow]=a+"yanzi/yanzi",i[r.Dove]=a+"gezi/gezi",i[r.Peacock]=a+"kongque/kongque",i[r.Eagle]=a+"laoying/laoying",i),cc._RF.pop()},{}],JSYSEndResult:[function(t,e,o){"use strict";cc._RF.push(e,"a6dab7lNwVEIrJooV3sMZWm","JSYSEndResult");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(t){r(t)}}function c(t){try{s(n.throw(t))}catch(t){r(t)}}function s(t){t.done?i(t.value):new o(function(e){e(t.value)}).then(a,c)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../view/base/PopupView"),s=t("../../../manager/AudioManager"),l=t("../JSYSDefine"),u=t("../../../manager/ResManager"),p=t("../../../manager/EventManager"),h=cc._decorator,d=h.ccclass,f=h.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spine=null,e}return n(e,t),e.prototype.initEvent=function(){var t=this;p.EventManager.on(this,l.EventDefine.HideBalanceView,function(){t.close()})},e.prototype.start=function(){var t=this.data.animal_idx,e=this.data.callFunc;this.showSpine(t,e)},e.prototype.showSpine=function(t,e){return r(this,void 0,void 0,function(){var o,n=this;return a(this,function(i){switch(i.label){case 0:return this.node.active=!0,this.node.opacity=255,this.spine.node.active=!0,[4,u.ResManager.loadResAsync(l.SpineUrl[t],sp.SkeletonData)];case 1:return o=i.sent(),this.spine.clearTracks(),this.spine.setToSetupPose(),this.spine.skeletonData=o,this.spine.setAnimation(0,"animation",!1),this.node.runAction(cc.sequence(cc.delayTime(1.5),cc.callFunc(function(){console.log("\u64ad\u653e\u9aa8\u9abc\u7279\u6548\u5b8c\u6210"),n.close(),e&&e()}))),s.AudioManager.playGameSFX(l.AudioName[t]),[2]}})})},i([f(sp.Skeleton)],e.prototype,"spine",void 0),e=i([d],e)}(c.default);o.default=_,cc._RF.pop()},{"../../../manager/AudioManager":void 0,"../../../manager/EventManager":void 0,"../../../manager/ResManager":void 0,"../../../view/base/PopupView":void 0,"../JSYSDefine":"JSYSDefine"}],JSYSFooter:[function(t,e,o){"use strict";cc._RF.push(e,"45df5JlW65IOpuVzp9q/0Te","JSYSFooter");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./JSYSAdapter"),a=t("../../../common/UIHelper"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.user_head=null,e.user_name=null,e.user_money=null,e.btn_bet=null,e.spr_auto=null,e.GameView=null,e}return n(e,t),e.prototype.onLoad=function(){r.JSYSAdapter.addClickEventEND(this.btn_bet,this.onClickEvent.bind(this))},e.prototype.setUserHead=function(t){a.default.setHeadIcon(t,this.user_head.node)},e.prototype.setUserScore=function(t){this.user_money.string=r.JSYSAdapter.getFormatGold(t)},e.prototype.setUserInfo=function(t){var e=t,o=r.JSYSAdapter.getSubStringLengTxt(t.username)||r.JSYSAdapter.getReplaceStrToStar(t.player_id);this.user_name.string=o,this.setUserHead(t.headimg_id),this.setUserScore(e.gold)},e.prototype.onClickEvent=function(t){this.GameView.JSYSBetPanel.openBetPanel()},e.prototype.showAutoIng=function(t){this.spr_auto.active=t},i([l(cc.Sprite)],e.prototype,"user_head",void 0),i([l(cc.Label)],e.prototype,"user_name",void 0),i([l(cc.Label)],e.prototype,"user_money",void 0),i([l(cc.Node)],e.prototype,"btn_bet",void 0),i([l(cc.Node)],e.prototype,"spr_auto",void 0),e=i([s],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../common/UIHelper":void 0,"./JSYSAdapter":"JSYSAdapter"}],JSYSGameScene:[function(t,e,o){"use strict";cc._RF.push(e,"d1662AvYrFFgLhsmvZ3UcRX","JSYSGameScene");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./JSYSGameView"),a=t("../../../manager/EventManager"),c=t("../../../net/NetCmd"),s=t("../protocol/JSYSCmd"),l=t("../../../manager/UIManager"),u=cc._decorator,p=u.ccclass,h=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.GameView=null,e}return n(e,t),e.prototype.onLoad=function(){this.GameView.GameScene=this,this.initData(),this.initEvent(),l.UIManager.hideMarquee()},e.prototype.initData=function(){},e.prototype.initEvent=function(){a.EventManager.on(this,c.ProtocolGameCmd.GameLoginResp,this.onGameLoginResp.bind(this)),a.EventManager.on(this,c.ProtocolGameCmd.LoginFriendRoomResp,this.onLoginFriendRoomResp.bind(this)),a.EventManager.on(this,c.ProtocolGameCmd.SendBankInfo,this.onSendBankInfo.bind(this)),a.EventManager.on(this,s.ProtocolJSYSCmd.GameStartNotify,this.onGameStart.bind(this)),a.EventManager.on(this,s.ProtocolJSYSCmd.StartBetNotify,this.onStartBetNotify.bind(this)),a.EventManager.on(this,s.ProtocolJSYSCmd.BetNotify,this.onBetNotify.bind(this)),a.EventManager.on(this,s.ProtocolJSYSCmd.OtherBetNotify,this.onOtherBetNotify.bind(this)),a.EventManager.on(this,s.ProtocolJSYSCmd.ShowResultNotify,this.onShowResultNotify.bind(this)),a.EventManager.on(this,s.ProtocolJSYSCmd.GameConcludeNotify,this.onGameConcludeNotify.bind(this)),a.EventManager.on(this,s.ProtocolJSYSCmd.GameReconnectInfo,this.onSubJoinRoom.bind(this)),a.EventManager.on(this,s.ProtocolJSYSCmd.PlayerListRes,this.onPlayerListRes.bind(this)),a.EventManager.on(this,s.ProtocolJSYSCmd.ContinueBetRes,this.onContinueBetRes.bind(this)),a.EventManager.on(this,s.ProtocolJSYSCmd.TuoguanRes,this.onTuoguanRes.bind(this)),a.EventManager.on(this,s.ProtocolJSYSCmd.TuoguanConfirmRes,this.onTuoguanConfirmRes.bind(this)),a.EventManager.on(this,c.GameCommonEvent.UpdateUserScore,this.onUpdateUserScore.bind(this))},e.prototype.onGameLoginResp=function(t){console.log("\u6548\u9a8c\u6210\u529f====>",t),this.GameView.initUserInfo()},e.prototype.onLoginFriendRoomResp=function(t){console.log("\u597d\u53cb\u623f\u6548\u9a8c\u6210\u529f====>",t),this.GameView.initUserInfo(),this.GameView.IsFriendRoom=!0,this.GameView.setRoomId(t.room_id),this.GameView.showFriendBtn()},e.prototype.onSendBankInfo=function(t){var e=t.bank_list_item;this.GameView.showStartGrey(0==e.length),0!=e.length&&this.GameView.IsCheck&&this.GameView.onSetStartCountDown(!0)},e.prototype.onGameStart=function(t){console.log("\u6e38\u620f\u5f00\u59cb"),this.GameView.onGameStart(t)},e.prototype.onStartBetNotify=function(t){console.log("\u901a\u77e5\u5f00\u59cb\u4e0b\u6ce8"),this.GameView.onStartBet(t)},e.prototype.onBetNotify=function(t){this.GameView.onBetNotify(t)},e.prototype.onOtherBetNotify=function(t){this.GameView.onOtherBetNotify(t)},e.prototype.onShowResultNotify=function(t){console.log("\u8f6c\u52a8\u7ed3\u679c\u901a\u77e5",t),this.GameView.onShowResultNotify(t)},e.prototype.onGameConcludeNotify=function(t){console.log("\u7ed3\u7b97\u901a\u77e5",t),this.GameView.onGameConcludeNotify(t)},e.prototype.onSubJoinRoom=function(t){console.log("%c \u52a0\u5165\u623f\u95f4\u901a\u77e5","color:green;font-size:34px",t),this.GameView.onSubJoinRoom(t)},e.prototype.onPlayerListRes=function(t){console.log("\u83b7\u53d6\u5728\u7ebf\u73a9\u5bb6\u5217\u8868\u56de\u5e94",t),this.GameView.onGetPlayerListRes(t)},e.prototype.onContinueBetRes=function(t){console.log("\u7eed\u6295\u56de\u5e94",t),this.GameView.onContinueBetRes(t)},e.prototype.onTuoguanRes=function(t){console.log("\u6258\u7ba1\u8fd4\u56de\uff0c\u8fd4\u56de\u662f\u4e0b\u6ce8\u4fe1\u606f",t),this.GameView.onTuoguanRes(t)},e.prototype.onTuoguanConfirmRes=function(t){console.log("\u6258\u7ba1\u56de\u5e94",t),this.GameView.onTuoguanConfirmRes(t)},e.prototype.onUpdateUserScore=function(t){this.GameView.onUpdateUserScore(t)},e.prototype.onDestroy=function(){a.EventManager.off(this)},i([h(r.default)],e.prototype,"GameView",void 0),e=i([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../manager/EventManager":void 0,"../../../manager/UIManager":void 0,"../../../net/NetCmd":void 0,"../protocol/JSYSCmd":"JSYSCmd","./JSYSGameView":"JSYSGameView"}],JSYSGameView:[function(t,e,o){"use strict";cc._RF.push(e,"37c51nkk3pELaoI9J0q9J3v","JSYSGameView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(t){r(t)}}function c(t){try{s(n.throw(t))}catch(t){r(t)}}function s(t){t.done?i(t.value):new o(function(e){e(t.value)}).then(a,c)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./JSYSFooter"),s=t("./JSYSRecord"),l=t("./JSYSBetDetail"),u=t("./JSYSOnlinePlayer"),p=t("./JSYSTopPanel"),h=t("./JSYSBetPanel"),d=t("./JSYSTurnTable"),f=t("./JSYSAdapter"),_=t("../../../manager/DataManager"),m=t("../../../manager/NetManager"),S=t("../../../manager/AudioManager"),y=t("../../../manager/UIManager"),v=t("../../../manager/EventManager"),g=t("../JSYSDefine"),b=t("../../../common/Device"),w=t("../../../net/NetCmd"),C=t("../../../manager/ResManager"),J=t("../../../view/common/GameChat"),A=t("../../../common/utils/Utils"),B=t("../../../common/log/LogWrap"),Y=t("../../../Define"),T=cc._decorator,E=T.ccclass,P=T.property,M=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.JSYSTopPanel=null,e.JSYSRecord=null,e.JSYSTurnTable=null,e.JSYSOnlinePlayer=null,e.JSYSBetDetail=null,e.JSYSFooter=null,e.JSYSBetPanel=null,e.node_state=null,e.start_bet=null,e.stop_bet=null,e.state_frame=[],e.node_friend_start=null,e.btn_friend_start=null,e.grey_friend_start=null,e.label_startTime=null,e.toggle_ready=null,e.room_id=null,e.room_id_node=null,e.GameScene=null,e.LIMIT_BET_NUM=[],e.BET_DETAIL_NUM=[],e.BET_TIME=null,e.IS_AUTO=!1,e.CAN_BET=!1,e.playAudio=!1,e.vibrate=!1,e.IsCheck=!1,e.IsFriendRoom=!1,e.canStartFriend=!1,e.onStartSchedule=null,e}return n(e,t),e.prototype.onLoad=function(){this.JSYSTurnTable.GameView=this,this.JSYSBetDetail.GameView=this,this.JSYSFooter.GameView=this,this.JSYSBetPanel.GameView=this,this.initChat(),A.default.addClickEventEND(this.btn_friend_start,this.clickFriend.bind(this)),this.toggle_ready.on("toggle",this.onClickToggle.bind(this)),this.toggle_ready.getComponent(cc.Toggle).isChecked=!1},e.prototype.onDestroy=function(){this.onStartSchedule&&(this.unschedule(this.onStartSchedule),this.onStartSchedule=null)},e.prototype.setRoomId=function(t){void 0===t&&(t=""),this.room_id_node.active=!0,this.room_id.string=t},e.prototype.showFriendBtn=function(){this.node_friend_start.active=!0,_.DataManager.isCreaterUser&&(this.toggle_ready.active=!0)},e.prototype.hideFriendBtn=function(){this.node_friend_start.active=!1,this.toggle_ready.active=!1},e.prototype.showStartGrey=function(t){this.canStartFriend=!t,this.btn_friend_start.active=!t,this.grey_friend_start.active=t},e.prototype.clickFriend=function(){this.onSetStartCountDown(!1);var t=_.DataManager.friendRoomId;m.NetManager.protocolGameCommon.sendStartFriendGame(parseFloat(t)||null)},e.prototype.onClickToggle=function(){var t=this.toggle_ready.getComponent(cc.Toggle).isChecked;this.IsCheck=t,_.DataManager.isCreaterUser&&this.canStartFriend&&this.onSetStartCountDown(t)},e.prototype.onSetStartCountDown=function(t){var e=this;if(void 0===t&&(t=!0),t){var o=5;this.label_startTime.node.active=!0,this.label_startTime.string=o+"",null!=this.onStartSchedule&&this.unschedule(this.onStartSchedule),this.onStartSchedule=function(){if(o--,B.LogWrap.log("\u5012\u8ba1\u65f6\u65f6\u95f4",o),e.label_startTime.string=o+"",o<=0){B.LogWrap.log("\u5012\u8ba1\u65f6\u7ed3\u675f, \u53d1\u9001\u597d\u53cb\u623f\u5f00\u59cb\u6e38\u620f\u6307\u4ee4");var t=_.DataManager.friendRoomId;return m.NetManager.protocolGameCommon.sendStartFriendGame(parseFloat(t)||null),e.label_startTime.node.active=!1,void e.unschedule(e.onStartSchedule)}},this.schedule(this.onStartSchedule,1,cc.macro.REPEAT_FOREVER)}else this.onStartSchedule&&(this.label_startTime.node.active=!1,this.unschedule(this.onStartSchedule))},e.prototype.initChat=function(){return r(this,void 0,void 0,function(){var t,e;return a(this,function(o){switch(o.label){case 0:return[4,C.ResManager.loadResAsync("prefabs/common/GameChat",cc.Prefab,!1)];case 1:return(t=o.sent())&&cc.isValid(this.node)&&!this.node.getChildByName("GameChat")&&(e=cc.instantiate(t),this.node.addChild(e),e.getComponent(J.default).setTalkPositionY(2)),[2]}})})},e.prototype.initUserInfo=function(){var t={username:f.JSYSAdapter.getSubStringLengTxt(_.DataManager.userInfo.nickname)||f.JSYSAdapter.getReplaceStrToStar(_.DataManager.userInfo.userid),gold:_.DataManager.userInfo.gold,headimg_id:_.DataManager.userInfo.headimgurl};this.JSYSFooter.setUserInfo(t)},e.prototype.onSubJoinRoom=function(t){var e=this,o=t.game_state;this.IsFriendRoom&&this.showFriendBtn(),v.EventManager.emit(g.EventDefine.HideBalanceView),this.JSYSTopPanel.setRoomInfo(t.room_info.room_code),this.JSYSFooter.setUserScore(t.gold);var n=t.type_value;this.JSYSBetPanel.showAnimalMultiple(n),this.LIMIT_BET_NUM=t.limit_bet,this.JSYSBetPanel.setRoomLimitNum(t.litmitNumber),m.NetManager.getGameProtocol().BET_CHROME_VALUE=t.bet_value_arr,this.JSYSBetPanel.showChromeList(t.bet_value_arr),this.JSYSBetPanel.clearAllBetNum(),this.BET_DETAIL_NUM=[];var i=t.max_bet_num,r=0;t.bet_num_info.forEach(function(t,o){var n=t.user_bet_num;n>0&&(e.BET_DETAIL_NUM[o]=n,e.JSYSBetPanel.setUserBetNum(n,o));var a=t.sum_bet_num;if(r+=a,a>0&&i>0){var c=Math.ceil(a/i*15);e.JSYSBetPanel.showFloatGoldAni(o,c,a)}}),v.EventManager.emit(w.GameCommonEvent.UpdateAllBet,r),console.log("\u4e0b\u6ce8\u660e\u7ec6\u6570\u7ec4",this.BET_DETAIL_NUM);var a=t.history;this.JSYSRecord.recoverRecord(a),this.JSYSTurnTable.clearActionAndTimer();var c=t.last_stop_loc-1,s=t.now_stop_loc-1;console.log("%c\u672c\u5c40\u505c\u7559\u5750\u6807","color:red;font-size:34px",s),this.JSYSTurnTable.turn_toIndex=c,this.JSYSTurnTable.onItemLight(s);var l=t.can_xutou;this.JSYSBetPanel.setEnableContinue(0==l&&2==o),this.IS_AUTO=!1,this.JSYSFooter.showAutoIng(!1),this.JSYSBetPanel.showBtnAuto(!0);var u=t.can_tuoguan;this.JSYSBetPanel.setEnableAuto(0==u);var p=t.spec_player_list;if(this.JSYSBetPanel.refRichList(p),this.CAN_BET=!1,2==o)this.CAN_BET=!0,console.log("\u4e0b\u6ce8\u9636\u6bb5"),this.JSYSBetPanel.openBetPanel(!1),this.setClockTime(t.time_out),this.showGameState(0);else if(3==o){console.log("\u5f00\u5956\u9636\u6bb5"),this.JSYSTurnTable.clearIconLight();var h=t.time_out;this.JSYSTurnTable.recoverTurnState(c,s,h),this.showGameState(1)}else if(4==o){console.log("\u7ed3\u7b97\u9636\u6bb5");var d={result_msg_info:t.result_msg_info,balanceScore:t.score,detail_arr:this.BET_DETAIL_NUM};y.UIManager.popup("game/jsys/prefab/JSYSBalance",d),this.showGameState(2)}0==o&&(this.node_state.active=!1),1==o||2==o?S.AudioManager.playGameBGM("jsys_bgm1"):3==o?S.AudioManager.playGameBGM("jsys_bgm2"):S.AudioManager.playGameBGM("jsys_bgm4")},e.prototype.onGameStart=function(t){_.DataManager.roomType!=Y.RoomType.Match&&this.hideFriendBtn(),m.NetManager.protocolGameCommon.needFlushGold=!1,this.JSYSBetDetail.clearBetDetail(),this.BET_DETAIL_NUM=[],this.JSYSTopPanel.setRoomInfo(t.room_info.room_code),v.EventManager.emit(g.EventDefine.HideBalanceView),this.JSYSBetPanel.closeBetPanel(),this.JSYSBetPanel.clearFloatGoldAni(),this.JSYSBetPanel.clearAllBetNum(),this.JSYSBetDetail.onCancelEvent();var e=t.spec_player_list;this.JSYSBetPanel.refRichList(e),S.AudioManager.playGameBGM("jsys_bgm1")},e.prototype.showStartBetAni=function(){var t=this,e=cc.view.getVisibleSize(),o=cc.instantiate(this.start_bet),n=-(e.width+o.width)/2;o.position=cc.v2(n,0),cc.tween(o).to(.5,{position:cc.v2(0,0)}).to(.5,{opacity:0}).start(),this.node.addChild(o),this.scheduleOnce(function(){t.JSYSBetPanel.openBetPanel(),t.node.removeChild(o)},1)},e.prototype.onStartBet=function(t){this.CAN_BET=!0,this.showStartBetAni();var e=t.can_xutou;this.JSYSBetPanel.setEnableContinue(0==e),this.JSYSBetPanel.showBtnAuto(!this.IS_AUTO);var o=t.can_tuoguan;this.JSYSBetPanel.setEnableAuto(0==o),this.setClockTime(t.time_out),this.showGameState(0),S.AudioManager.playGameSFX("jsys_startbets")},e.prototype.onBetNotify=function(t){var e=this;if(1==t.result){_.DataManager.userInfo.gold=t.gold,this.JSYSFooter.setUserScore(t.gold);var o=t.bet_value_info,n=o.loc-1,i=o.bet_value;this.BET_DETAIL_NUM[n]||(this.BET_DETAIL_NUM[n]=0),this.BET_DETAIL_NUM[n]+=i;var r=0,a=t.bet_num_info;if(a.forEach(function(t,o){var n=t.user_bet_num;n>0&&e.JSYSBetPanel.setUserBetNum(n,o),r+=t.sum_bet_num}),v.EventManager.emit(w.GameCommonEvent.UpdateAllBet,r),this.JSYSBetPanel.open_done){var c=t.max_bet_num;c>0&&a.forEach(function(t,o){var n=t.sum_bet_num;if(n>0){var i=Math.ceil(n/c*15);e.JSYSBetPanel.showFloatGoldAni(o,i,n)}}),this.JSYSBetPanel.onUserBetAni(i,n)}this.JSYSBetPanel.setEnableContinue(!1),this.IS_AUTO||this.JSYSBetPanel.setEnableAuto(!0),this.pauseAudio(),this.pauseVibrate(),S.AudioManager.playSFX("flychip")}else 2==t.result?y.UIManager.showTips("\u8be5\u533a\u57df\u8fbe\u5230\u9650\u5236"):3==t.result?y.UIManager.showTips("\u91d1\u5e01\u4e0d\u8db3"):4==t.result?y.UIManager.showTips("\u975e\u4e0b\u6ce8\u72b6\u6001, \u8bf7\u7b49\u5f85"):5==t.result?y.UIManager.showTips("\u60a8\u662f\u5e84\u5bb6\uff0c\u8bf7\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u4e0b\u6ce8"):6==t.result&&y.UIManager.showTips("\u672c\u533a\u57df\u5e84\u5bb6\u53ef\u63a5\u53d7\u62bc\u6ce8\u91d1\u989d\u5df2\u8fbe\u4e0a\u9650, \u8bf7\u9009\u62e9\u5176\u4ed6\u533a\u57df\u6216\u7b49\u5f85\u6e38\u620f\u5f00\u59cb")},e.prototype.onOtherBetNotify=function(t){var e=this,o=t.bet_num_info,n=0;if(o.forEach(function(t,e){var o=t.sum_bet_num;n+=o}),v.EventManager.emit(w.GameCommonEvent.UpdateAllBet,n),this.JSYSBetPanel.open_done){t.bet_value_info.forEach(function(t,o){var n=t.loc-1,i=t.bet_value;i>0&&e.JSYSBetPanel.onPlayerBetAni(i,n)});var i=t.max_bet_num;i>0&&o.forEach(function(t,o){var n=t.sum_bet_num;if(n>0){var r=Math.ceil(n/i*15);e.JSYSBetPanel.showFloatGoldAni(o,r,n)}}),S.AudioManager.playSFX("flychip")}},e.prototype.showEndBetAni=function(){var t=this,e=cc.view.getVisibleSize(),o=cc.instantiate(this.stop_bet),n=-(e.width+o.width)/2;o.position=cc.v2(n,0),cc.tween(o).to(.5,{position:cc.v2(0,0)}).to(.5,{opacity:0}).start(),this.node.addChild(o),this.scheduleOnce(function(){t.node.removeChild(o)},1)},e.prototype.onShowResultNotify=function(t){this.CAN_BET=!1,this.showEndBetAni(),this.JSYSBetPanel.closeBetPanel(),this.JSYSBetPanel.setEnableContinue(!1),this.JSYSTurnTable.onStartTurn(t),this.showGameState(1),S.AudioManager.playGameSFX("jsys_endbet"),S.AudioManager.playGameBGM("jsys_bgm2")},e.prototype.onGameConcludeNotify=function(t){var e,o=this;this.JSYSBetDetail.onCancelEvent();for(var n=t.result_msg_info,i=0;i<n.length;i++){var r=n[i];1!=r.loc_type&&4!=r.loc_type&&(e=r.loc_type-1)}this.JSYSRecord.showRecord(e);var a={animal_idx:e,callFunc:function(){cc.log("\u7ed3\u7b97\u66f4\u65b0\u73a9\u5bb6\u91d1\u5e01"),o.JSYSFooter.setUserScore(t.gold);var e={result_msg_info:n,balanceScore:t.score,detail_arr:o.BET_DETAIL_NUM};y.UIManager.popup("game/jsys/prefab/JSYSBalance",e)}};y.UIManager.popup("game/jsys/prefab/JSYSEndResult",a),this.showGameState(2),parseFloat(t.score)>0?S.AudioManager.playGameSFX("jsys_winning"):parseFloat(t.score)<0&&S.AudioManager.playGameSFX("jsys_fail"),S.AudioManager.playGameBGM("jsys_bgm4")},e.prototype.onGetPlayerListRes=function(t){this.JSYSOnlinePlayer.refPeopleTips(t.totalplayers),this.JSYSOnlinePlayer.refUserList(t.player_list),this.JSYSOnlinePlayer.playMoveOut()},e.prototype.onContinueBetRes=function(t){0==t.result?(console.log("\u7eed\u6295\u6210\u529f"),this.JSYSBetPanel.setEnableContinue(!1)):y.UIManager.showTips(t.showMsg)},e.prototype.onTuoguanRes=function(t){y.UIManager.popup("game/jsys/prefab/JSYSAutoView",t)},e.prototype.onTuoguanConfirmRes=function(t){var e=t.result;1==e?(this.IS_AUTO=!0,this.JSYSBetPanel.showBtnAuto(!1),this.JSYSFooter.showAutoIng(!0)):2==e?(this.IS_AUTO=!1,this.JSYSBetPanel.showBtnAuto(!0),this.JSYSBetPanel.setEnableAuto(!0),this.JSYSFooter.showAutoIng(!1)):3==e?y.UIManager.showTips(t.showMsg):4==e&&(this.IS_AUTO=!1,this.JSYSBetPanel.showBtnAuto(!0),this.JSYSBetPanel.setEnableAuto(!1),this.JSYSFooter.showAutoIng(!1))},e.prototype.showGameState=function(t){this.node_state.getChildByName("spr_state").getComponent(cc.Sprite).spriteFrame=this.state_frame[t],this.node_state.active=!0},e.prototype.onUpdateTimer=function(){if(this.BET_TIME--,this.BET_TIME<0)return this.unschedule(this.onUpdateTimer),void this.JSYSBetPanel.setTimeNum("");this.BET_TIME<=3&&(1==this.playAudio&&S.AudioManager.playGameSFX("jsys_countdown"),1==this.vibrate&&b.default.vibrate()),this.JSYSBetPanel.setTimeNum(this.BET_TIME)},e.prototype.setClockTime=function(t){this.BET_TIME=t,this.playAudio=!0,this.vibrate=!0,this.JSYSBetPanel.setTimeNum(this.BET_TIME),this.schedule(this.onUpdateTimer,1)},e.prototype.killClockTime=function(){this.unschedule(this.onUpdateTimer)},e.prototype.pauseAudio=function(){this.playAudio=!1},e.prototype.pauseVibrate=function(){this.vibrate=!1},e.prototype.onUpdateUserScore=function(t){var e=t.gold;this.JSYSFooter.setUserScore(e)},i([P(p.default)],e.prototype,"JSYSTopPanel",void 0),i([P(s.default)],e.prototype,"JSYSRecord",void 0),i([P(d.default)],e.prototype,"JSYSTurnTable",void 0),i([P(u.default)],e.prototype,"JSYSOnlinePlayer",void 0),i([P(l.default)],e.prototype,"JSYSBetDetail",void 0),i([P(c.default)],e.prototype,"JSYSFooter",void 0),i([P(h.default)],e.prototype,"JSYSBetPanel",void 0),i([P(cc.Node)],e.prototype,"node_state",void 0),i([P(cc.Prefab)],e.prototype,"start_bet",void 0),i([P(cc.Prefab)],e.prototype,"stop_bet",void 0),i([P(cc.SpriteFrame)],e.prototype,"state_frame",void 0),i([P(cc.Node)],e.prototype,"node_friend_start",void 0),i([P(cc.Node)],e.prototype,"btn_friend_start",void 0),i([P(cc.Node)],e.prototype,"grey_friend_start",void 0),i([P(cc.Label)],e.prototype,"label_startTime",void 0),i([P(cc.Node)],e.prototype,"toggle_ready",void 0),i([P(cc.Label)],e.prototype,"room_id",void 0),i([P(cc.Node)],e.prototype,"room_id_node",void 0),e=i([E],e)}(cc.Component);o.default=M,cc._RF.pop()},{"../../../Define":void 0,"../../../common/Device":void 0,"../../../common/log/LogWrap":void 0,"../../../common/utils/Utils":void 0,"../../../manager/AudioManager":void 0,"../../../manager/DataManager":void 0,"../../../manager/EventManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/ResManager":void 0,"../../../manager/UIManager":void 0,"../../../net/NetCmd":void 0,"../../../view/common/GameChat":void 0,"../JSYSDefine":"JSYSDefine","./JSYSAdapter":"JSYSAdapter","./JSYSBetDetail":"JSYSBetDetail","./JSYSBetPanel":"JSYSBetPanel","./JSYSFooter":"JSYSFooter","./JSYSOnlinePlayer":"JSYSOnlinePlayer","./JSYSRecord":"JSYSRecord","./JSYSTopPanel":"JSYSTopPanel","./JSYSTurnTable":"JSYSTurnTable"}],JSYSOnlinePlayer:[function(t,e,o){"use strict";cc._RF.push(e,"4f468aLPZVHaJ3g/KdPdprY","JSYSOnlinePlayer");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./JSYSAdapter"),a=t("../../../manager/NetManager"),c=t("../../../common/UIHelper"),s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cancel=null,e.spr=null,e.arrow=null,e.btn_click=null,e.user_panel=null,e.tips=null,e.ScrollView=null,e.user_item=null,e.is_move_out=!1,e.is_done=!0,e}return n(e,t),e.prototype.start=function(){var t=this;r.JSYSAdapter.addClickEventEND(this.btn_click,function(){t.onClickEvent()}),r.JSYSAdapter.addClickEventEND(this.cancel,function(){t.onCancelEvent()})},e.prototype.onClickEvent=function(){this.is_done?(this.is_done=!1,this.is_move_out?this.playMoveBack():a.NetManager.getGameProtocol().sendGetOnlineUser()):console.log("\u52a8\u753b\u8fd8\u672a\u7ed3\u675f \u4e0d\u53ef\u70b9\u51fb")},e.prototype.onCancelEvent=function(){this.is_done?this.is_move_out?(this.is_done=!1,this.playMoveBack()):console.log("\u672a\u79fb\u52a8\u51fa\u53bb"):console.log("\u52a8\u753b\u8fd8\u672a\u7ed3\u675f \u4e0d\u53ef\u70b9\u51fb")},e.prototype.playMoveOut=function(){var t=this;this.user_panel.active=!0,this.arrow.scaleX=-1,this.is_move_out=!0;var e=cc.sequence(cc.moveBy(.5,cc.v2(this.user_panel.width,0)),cc.callFunc(function(){t.is_done=!0}));this.spr.runAction(e)},e.prototype.playMoveBack=function(){var t=this;this.arrow.scaleX=1;var e=cc.sequence(cc.moveBy(.5,cc.v2(-this.user_panel.width,0)),cc.callFunc(function(){t.user_panel.active=!1,t.is_done=!0,t.is_move_out=!1}));this.spr.runAction(e)},e.prototype.refPeopleTips=function(t){this.tips.string="\u672c\u684c\u5171"+t+"\u4eba\u968f\u673a\n\u663e\u793a\u4e0a\u5c4020\u540d\u4e0b\u6ce8\u73a9\u5bb6"},e.prototype.refUserList=function(t){var e=this,o=cc.find("view/content",this.ScrollView);o.removeAllChildren(),t.forEach(function(t,n){var i=cc.instantiate(e.user_item);i.active=!0;var a=i.getChildByName("head"),s=i.getChildByName("name"),l=i.getChildByName("gold");c.default.setHeadIcon(t.headimg_id,a),s.getComponent(cc.Label).string=r.JSYSAdapter.getSubStringLengTxt(t.username)||r.JSYSAdapter.getReplaceStrToStar(t.player_id),l.getComponent(cc.Label).string=parseFloat(t.gold).toFixed(2),o.addChild(i)})},i([u(cc.Node)],e.prototype,"cancel",void 0),i([u(cc.Node)],e.prototype,"spr",void 0),i([u(cc.Node)],e.prototype,"arrow",void 0),i([u(cc.Node)],e.prototype,"btn_click",void 0),i([u(cc.Node)],e.prototype,"user_panel",void 0),i([u(cc.Label)],e.prototype,"tips",void 0),i([u(cc.Node)],e.prototype,"ScrollView",void 0),i([u(cc.Node)],e.prototype,"user_item",void 0),e=i([l],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../common/UIHelper":void 0,"../../../manager/NetManager":void 0,"./JSYSAdapter":"JSYSAdapter"}],JSYSRecord:[function(t,e,o){"use strict";cc._RF.push(e,"95f66A0+HlOOYaS8Z8uXv1t","JSYSRecord");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.icon_animal=null,e.animal_frames=[],e}return n(e,t),e.prototype.showRecord=function(t){var e=this;this.content.stopAllActions(),this.content.x=291,this.content.children.forEach(function(t,e){t.getChildByName("spr_new").active=!1});var o=cc.instantiate(this.icon_animal);o.active=!0,this.content.addChild(o),o.getChildByName("spr_icon").getComponent(cc.Sprite).spriteFrame=this.animal_frames[t];var n=o.getChildByName("spr_new");if(n.active=!0,this.content.childrenCount>10){var i=this.content.children[0];i.opacity=0,n.active=!1;var r=cc.sequence(cc.moveBy(.5,cc.v2(60,0)),cc.callFunc(function(){e.content.x=291,i.destroy(),n.active=!0}));this.content.runAction(r)}},e.prototype.recoverRecord=function(t){var e=this;this.content.removeAllChildren(),this.content.stopAllActions(),t.forEach(function(o,n){var i=o-1,r=cc.instantiate(e.icon_animal);r.active=!0,e.content.addChild(r),r.getChildByName("spr_icon").getComponent(cc.Sprite).spriteFrame=e.animal_frames[i];var a=r.getChildByName("spr_new");n==t.length-1&&(a.active=!0)})},i([c(cc.Node)],e.prototype,"content",void 0),i([c(cc.Node)],e.prototype,"icon_animal",void 0),i([c(cc.SpriteFrame)],e.prototype,"animal_frames",void 0),e=i([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],JSYSRoomView:[function(t,e,o){"use strict";cc._RF.push(e,"2ac00+gIddIdrx7HxfQ3TkX","JSYSRoomView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../view/RoomView"),a=t("../../../view/common/componet/ButtonEx"),c=[[-20],[-20,-20],[-20,40,-20],[-20,40,-20,40],[40,-20,40,-20,40],[40,-20,40,-20,40,-20]],s=cc._decorator,l=s.ccclass,u=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spr_piao=null,e.distance=210,e}return n(e,t),e.prototype.initEvent=function(){t.prototype.initEvent.call(this)},e.prototype.showRoomList=function(t){var e=t.game_room_lists.length;this.spr_piao.active=e>=5;for(var o=Math.ceil(e/6),n=1;n<o;n++){(u=cc.instantiate(this.page_item)).active=!0,this.PageView.addPage(u)}var i=this.PageView.content;for(n=0;n<i.childrenCount;n++){var r=Math.floor(n/6);(u=i.children[r]).children.forEach(function(t){t.active=!1})}var s=[];for(n=0;n<e;n++){var l=t.game_room_lists[n],u=(r=Math.floor(n/6),i.children[r]);s[r]?s[r]++:(s[r]=0,s[r]++),(h=u.children[l.room_level-1]).active=!0;var p=h.getChildByName("limit_num").getComponent(cc.Label);l.bet_limit.length>0?p.string=l.bet_limit[0]+"-"+l.bet_limit[1]:p.string=""+l.room_base_note,h.getChildByName("permit_num").getComponent(cc.Label).string=""+l.room_min_entrance,h.getComponent(a.default).disabledScale(),h.getComponent(a.default).registerClick(this.onChooseGameRoom.bind(this,l))}this.PageView.getComponent(cc.Widget).updateAlignment(),this.PageView.node.children[0].getComponent(cc.Widget).updateAlignment(),this.PageView.content.getComponent(cc.Widget).updateAlignment();for(n=0;n<e;n++){l=t.game_room_lists[n],r=Math.floor(n/6);var h=(u=i.children[r]).children[l.room_level-1],d=s[r],f=cc.winSize.width/2+(-(d-1)/2*this.distance+n%6*this.distance),_=c[d-1][n%6];h.position=cc.v2(f,_)}this.PageView.enabled=o>1},i([u(cc.Node)],e.prototype,"spr_piao",void 0),e=i([l],e)}(r.default);o.default=p,cc._RF.pop()},{"../../../view/RoomView":void 0,"../../../view/common/componet/ButtonEx":void 0}],JSYSTopPanel:[function(t,e,o){"use strict";cc._RF.push(e,"90b117EnfJMK7BHZBXEE+U0","JSYSTopPanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,c=r.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.table_num=null,e}return n(e,t),e.prototype.onLoad=function(){this.initView()},e.prototype.initView=function(){this.table_num.string=""},e.prototype.setRoomInfo=function(t){this.table_num.string=t||""},i([c(cc.Label)],e.prototype,"table_num",void 0),e=i([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],JSYSTurnTable:[function(t,e,o){"use strict";cc._RF.push(e,"78264ZKdKNMaJ5QntSg/0nP","JSYSTurnTable");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../manager/AudioManager"),a=0,c=0,s=0,l=0,u=cc._decorator,p=u.ccclass,h=u.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.jsys_icons=null,e.GameView=null,e.turn_toIndex=0,e.GAME_DATA=null,e.blink_items=[],e}return n(e,t),e.prototype.onLoad=function(){for(var t=0;t<this.jsys_icons.childrenCount;t++){var e=this.jsys_icons.children[t].getChildByName("spr_blink");e.active=!0,e.opacity=0,this.blink_items.push(e)}},e.prototype.onItmeFade=function(t,e,o){e=e||.2;var n=this.blink_items[t];255!=n.opacity&&(n.opacity=255),n.runAction(cc.sequence(cc.delayTime(e),cc.fadeOut(o)))},e.prototype.onItemBlink=function(){var t=this.blink_items[this.turn_toIndex];t.stopAllActions(),t.opacity=255,t.runAction(cc.sequence(cc.fadeOut(.5),cc.fadeIn(.5),cc.fadeOut(.5),cc.fadeIn(.5),cc.callFunc(function(){t.opacity=255})))},e.prototype.onItemLight=function(t){var e=this.blink_items[t];e.stopAllActions(),e.opacity=255},e.prototype.clearIconLight=function(){for(var t=this.blink_items.length,e=0;e<t;e++){var o=this.blink_items[e];o.stopAllActions(),o.opacity=0}},e.prototype.caculteDisCount=function(t,e){return(e+28-t)%28},e.prototype.caculteStateNum=function(t,e){var o=(t+5)%28,n=e-5>=0?e-5:e-5+28,i=this.caculteDisCount(o,n);c=i>14?i+56:i+84,console.log("\u7b2c\u4e00\u9636\u6bb5\u6570\u76ee",5),console.log("\u7b2c\u4e8c\u9636\u6bb5\u6570\u76ee",c),console.log("\u7b2c\u4e09\u9636\u6bb5\u6570\u76ee",5)},e.prototype.recoverTurnState=function(t,e,o){var n,i,r;this.clearStateIdx(),this.caculteStateNum(t,e);o<=1.5?(n=4-o-2.5,r=.3,i=Math.ceil(n/r),l+=i,this.turn_toIndex=(i+c+5+t)%28-1,this.schedule(this.onTurnEndTimer,.3,cc.macro.REPEAT_FOREVER,.01)):o<=3.5?(n=4-o-.5,r=2/c,i=Math.ceil(n/r),s+=i,this.turn_toIndex=(i+5+t)%28,this.schedule(this.onTurnFastTimer,2/c)):(n=4-o-0,r=.1,i=Math.ceil(n/r),a+=i,this.turn_toIndex=(i+t)%28,this.schedule(this.onTurnSlowTimer,.1))},e.prototype.clearActionAndTimer=function(){this.unscheduleAllCallbacks(),this.clearIconLight()},e.prototype.clearStateIdx=function(){a=0,s=0,l=0},e.prototype.onStartTurn=function(t){this.GAME_DATA=t;var e=this.turn_toIndex,o=t.loc-1;this.caculteStateNum(e,o),this.clearIconLight(),this.clearStateIdx(),console.log("\u5f00\u59cb\u4f4d\u7f6e",this.turn_toIndex),console.log("\u7ec8\u70b9\u4f4d\u7f6e",o),console.log("\u7b2c\u4e00\u9636\u6bb5\u5f00\u59cb\u65f6\u95f4",this.printTime()),this.schedule(this.onTurnSlowTimer,.1,cc.macro.REPEAT_FOREVER,.01)},e.prototype.onTurnSlowTimer=function(){this.onItmeFade(this.turn_toIndex,null,.3),a+=1,this.turn_toIndex++,this.turn_toIndex=this.turn_toIndex%28,a>=5&&(a=0,this.unschedule(this.onTurnSlowTimer),console.log("\u5f00\u59cb\u7b2c\u4e8c\u9636\u6bb5"),console.log("\u7b2c\u4e8c\u9636\u6bb5\u5f00\u59cb\u65f6\u95f4",this.printTime()),this.schedule(this.onTurnFastTimer,2/c,cc.macro.REPEAT_FOREVER,.01)),r.AudioManager.playGameSFX("jsys_turn")},e.prototype.onTurnFastTimer=function(){this.onItmeFade(this.turn_toIndex,2/c,.1),s++,this.turn_toIndex++,this.turn_toIndex=this.turn_toIndex%28,s>=c&&(s=0,this.unschedule(this.onTurnFastTimer),console.log("\u5f00\u59cb\u7b2c\u4e09\u9636\u6bb5"),console.log("\u7b2c\u4e09\u9636\u6bb5\u5f00\u59cb\u65f6\u95f4",this.printTime()),this.schedule(this.onTurnEndTimer,.3,cc.macro.REPEAT_FOREVER,.01)),r.AudioManager.playGameSFX("jsys_turn")},e.prototype.onTurnEndTimer=function(){var t=this;this.onItmeFade(this.turn_toIndex,.3,.2),l+=1,this.turn_toIndex++,this.turn_toIndex=this.turn_toIndex%28,l>=5&&(l=0,this.unschedule(this.onTurnEndTimer),this.schedule(function(){t.onItemBlink(),t.onGameEnd()},0,0,.45),console.log("\u7ed3\u675f\u65f6\u95f4",this.printTime()),console.log("\u7ed3\u675f\u4f4d\u7f6e",this.turn_toIndex)),r.AudioManager.playGameSFX("jsys_turn")},e.prototype.onGameEnd=function(){this.GAME_DATA},e.prototype.printTime=function(){return(new Date).getMinutes()+"\u5206"+(new Date).getSeconds()+"\u79d2"+(new Date).getMilliseconds()+"\u6beb\u79d2"},i([h(cc.Node)],e.prototype,"jsys_icons",void 0),e=i([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../manager/AudioManager":void 0}],ProtocolJSYS:[function(t,e,o){"use strict";cc._RF.push(e,"9343fdCIjRJzrBf9TU+cjpj","ProtocolJSYS");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../manager/DataManager"),r=t("../../../net/ProtocolBase"),a=t("../../../manager/NetManager"),c=t("../../../manager/UIManager"),s=t("../../../Define"),l=t("./JSYSCmd"),u=function(t){function e(){var e=t.call(this,"game/jsys/pb")||this;return e.cmd=l.JSYSCmd,e.type=s.SocketType.Game,e.pbName="JSYS",e.BET_CHROME_VALUE=[],e}return n(e,t),e.prototype.sendBetReq=function(t,e){var o={player_id:i.DataManager.userInfo.userid,bet_value:t,loc:e};console.log("============>\u53d1\u9001\u4e0b\u6ce8\u8bf7\u6c42"),this.send(o,"bet_req")},e.prototype.sendGetOnlineUser=function(){var t={player_id:i.DataManager.userInfo.userid};console.log("============>\u53d1\u9001\u83b7\u53d6\u5728\u7ebf\u4eba\u6570\u8bf7\u6c42"),this.send(t,"player_list_req")},e.prototype.sendContinueBetReq=function(){var t={player_id:i.DataManager.userInfo.userid};console.log("============>\u53d1\u9001\u7eed\u6295\u8bf7\u6c42"),this.send(t,"continue_bet_req")},e.prototype.sendTuoguanReq=function(){var t={player_id:i.DataManager.userInfo.userid};console.log("============>\u53d1\u9001\u6258\u7ba1\u9762\u677f\u6570\u636e\u8bf7\u6c42"),this.send(t,"tuo_guan_req")},e.prototype.sendTuoguanConfirmReq=function(t){var e={player_id:i.DataManager.userInfo.userid,is_tuoguan:t};console.log(1==t?"============>\u53d1\u9001\u6258\u7ba1\u8bf7\u6c42":"============>\u53d1\u9001\u53d6\u6d88\u6258\u7ba1\u8bf7\u6c42"),this.send(e,"tuoguan_confirm_req")},e.prototype.dealError=function(t){c.UIManager.showTipsPopup(t.err_msg)},e}(r.default);o.default=u,a.NetManager.protocolCache.ProtocolJSYS=u,cc._RF.pop()},{"../../../Define":void 0,"../../../manager/DataManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"../../../net/ProtocolBase":void 0,"./JSYSCmd":"JSYSCmd"}]},{},["JSYSDefine","JSYSCmd","ProtocolJSYS","JSYSAdapter","JSYSAutoView","JSYSBalance","JSYSBetDetail","JSYSBetPanel","JSYSChrome","JSYSEndResult","JSYSFooter","JSYSGameScene","JSYSGameView","JSYSOnlinePlayer","JSYSRecord","JSYSRoomView","JSYSTopPanel","JSYSTurnTable"]);