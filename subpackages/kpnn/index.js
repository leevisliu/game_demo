window.__require=function e(t,n,o){function a(r,c){if(!n[r]){if(!t[r]){var l=r.split("/");if(l=l[l.length-1],!t[l]){var s="function"==typeof __require&&__require;if(!c&&s)return s(l,!0);if(i)return i(l,!0);throw new Error("Cannot find module '"+r+"'")}r=l}var d=n[r]={exports:{}};t[r][0].call(d.exports,function(e){return a(t[r][1][e]||e)},d,d.exports,e,t,n,o)}return n[r].exports}for(var i="function"==typeof __require&&__require,r=0;r<o.length;r++)a(o[r]);return a}({CMD_KPNN:[function(e,t,n){"use strict";cc._RF.push(t,"82fc4sYE4ZOm4Zjrapsxwdh","CMD_KPNN"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.zeroMemory=function(e){for(var t=[],n=0;n<e;n++)t[n]=0;return t},e.clone=function(e){return JSON.parse(JSON.stringify(e))},e.CARD_POS={MY_CARD_POS:[cc.v2(-250,0),cc.v2(-125,0),cc.v2(0,0),cc.v2(125,0),cc.v2(250,0)],OTHER_CARD_POS:[cc.v2(-70,0),cc.v2(-35,0),cc.v2(0,0),cc.v2(35,0),cc.v2(70,0)]},e.FLutter_POS={MY_FLUTTER_POS:cc.v2(0,120),OTHER_FLUTTER_POS:cc.v2(0,100)},e.START_DEALNUM=0,e.DEAL_CARD_COUNT=5,e.MASK_COLOR=240,e.MASK_VALUE=15,e.INVALE_CHAIR=255,e.GAME_SCENE_FREE=100,e.GAME_SCENE_PLAYING=101,e.GAME_PLAYER=6,e.FAILED=-1,e.LIMIT_FRIEND=-3,e.ROOM_CLOSE=-4,e.EMPTY_DATA=-5,e.MY_SEAT=-1,e.MY_ID=-1,e.PLAYER_DATAS=[],e.MY_DATA=null,e.MAX_CARD_COUNT=5,e}();n.default=o,cc._RF.pop()},{}],KPNNAvatarPanel:[function(e,t,n){"use strict";cc._RF.push(t,"49ae4FmQEdIHrMJKsrl4dcm","KPNNAvatarPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../common/utils/Utils"),r=e("../../../manager/NetManager"),c=e("../../../common/UIHelper"),l=cc._decorator,s=l.ccclass,d=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.blink=null,t.head=null,t.user_name=null,t.money=null,t.banker=null,t.bmfont=null,t.yellow_bmfont=null,t.grey_bmfont=null,t.blue_bmfont=null,t.flutter=null,t.card_type=null,t.niu_bg=null,t.niu_type=null,t.niu_bet=null,t.typeAtlas=null,t.niu_grey_bmfont=null,t.niu_red_bmfont=null,t.niu_yellow_bmfont=null,t.niu_effect=null,t.spDatas=[],t.ready=null,t.offline=null,t.room_owner=null,t.centerPanel=null,t.GameView=null,t.player=null,t.tirenNode=null,t.playerID=null,t}return o(t,e),t.prototype.initzation=function(e,t){this.centerPanel=e,this.GameView=t,this.initView(),this.ready.active=!1,this.offline.active=!1,this.room_owner.active=!1},t.prototype.initView=function(){this.unscheduleAllCallbacks(),this.blink.active=!1,this.user_name.string="",this.money.string="",this.banker.active=!1,this.bmfont.string="",this.card_type.active=!1,this.niu_bg.spriteFrame=null,this.niu_type.spriteFrame=null,this.niu_bet.string="",this.niu_effect.skeletonData=null,this.niu_effect.clearTracks(),this.flutter.string="",this.flutter.node.stopAllActions(),this.node.active=!1},t.prototype.resetMyView=function(){this.unscheduleAllCallbacks(),this.blink.active=!1,this.banker.active=!1,this.bmfont.string="",this.card_type.active=!1,this.niu_bg.spriteFrame=null,this.niu_type.spriteFrame=null,this.niu_bet.string="",this.niu_effect.skeletonData=null,this.niu_effect.clearTracks(),this.flutter.string=""},t.prototype.setUserInfo=function(e){var t=e,n=i.default.getSubStringLengTxt(e.username)||i.default.getReplaceStrToStar(e.player_id);this.user_name.string=n,this.setHeadIcon(e.headimg_id),this.setUserScore(t.gold),this.node.active=!0,1==this.GameView.gameType&&(1==e.state?(this.setReadyIcon(!0),this.setOfflineIcon(!1)):2==e.state?(this.setOfflineIcon(!0),this.setReadyIcon(!1)):3!=e.state&&6!=e.state||(this.setReadyIcon(!1),this.setOfflineIcon(!1)))},t.prototype.setReadyIcon=function(e){this.ready.active=e},t.prototype.setOfflineIcon=function(e){this.offline.active=e},t.prototype.setRoomOwner=function(e){this.room_owner.active=e},t.prototype.setUserEvent=function(e){var t=this;this.playerID=e,this.node.off(cc.Node.EventType.TOUCH_END),this.node.on(cc.Node.EventType.TOUCH_END,function(){r.NetManager.protocolGameCommon.sendLookPlayerInfoReq(t.playerID)})},t.prototype.setHeadIcon=function(e){c.default.setHeadIcon(e,this.head.node)},t.prototype.getNodePosition=function(){return this.node.getPosition()},t.prototype.setUserScore=function(e){this.money.string=i.default.getFormatGold(e)},t.prototype.setUserGrabMultiple=function(e){this.bmfont.node.stopAllActions(),this.bmfont.node.scale=1,this.bmfont.font=this.yellow_bmfont,this.bmfont.string=0==e?"\u4e0d\u62a2":"\u62a2"+e+"\u500d";var t=cc.sequence(cc.scaleTo(.1,1.3,1.3),cc.scaleTo(.1,.9,.9),cc.scaleTo(.05,1,1));this.bmfont.node.runAction(t)},t.prototype.hideUserGrab=function(){this.bmfont.string=""},t.prototype.setViewBankerSign=function(e){this.banker.active=e},t.prototype.setUserBetMultiple=function(e){this.bmfont.node.stopAllActions(),this.bmfont.node.scale=1,this.bmfont.font=this.blue_bmfont,this.bmfont.string="\u4e0b"+e+"\u500d";var t=cc.sequence(cc.scaleTo(.1,1.3,1.3),cc.scaleTo(.1,.9,.9),cc.scaleTo(.05,1,1));this.bmfont.node.runAction(t)},t.prototype.setTypeSprite=function(e,t){var n=this;this.card_type.active=!0;var o,a=null,i=null;0==e?(a=this.typeAtlas.getSpriteFrame("img_grey"),i=this.niu_grey_bmfont):e<=6?(a=this.typeAtlas.getSpriteFrame("img_red"),i=this.niu_red_bmfont):e<=10?(a=this.typeAtlas.getSpriteFrame("img_yellow"),i=this.niu_yellow_bmfont):(a=this.typeAtlas.getSpriteFrame("img_purple"),i=this.niu_yellow_bmfont),o=this.typeAtlas.getSpriteFrame("niu_"+e),this.niu_bg.spriteFrame=a,this.niu_type.spriteFrame=o,this.niu_bet.font=i,this.niu_bet.string="x"+t+"\u500d",this.niu_bg.node.x=-200,this.niu_bg.node.opacity=0,this.niu_type.node.scale=0,this.niu_bet.node.scale=0,this.niu_bg.node.stopAllActions(),this.niu_type.node.stopAllActions(),this.niu_bet.node.stopAllActions(),this.niu_effect.skeletonData=null,this.niu_effect.clearTracks();var r=cc.sequence(cc.spawn(cc.moveTo(.1,cc.v2(0,0)),cc.fadeIn(.05)),cc.callFunc(function(){var t=cc.sequence(cc.scaleTo(.1,1.3,1.3),cc.scaleTo(.1,.9,.9),cc.scaleTo(.05,1,1)),o=cc.sequence(cc.scaleTo(.1,1.3,1.3),cc.scaleTo(.1,.9,.9),cc.scaleTo(.05,1,1));n.niu_type.node.runAction(t),n.niu_bet.node.runAction(o),0==e?n.niu_effect.skeletonData=n.spDatas[0]:10==e?n.niu_effect.skeletonData=n.spDatas[1]:24==e?n.niu_effect.skeletonData=n.spDatas[2]:25==e?n.niu_effect.skeletonData=n.spDatas[3]:14!=e&&15!=e||(n.niu_effect.skeletonData=n.spDatas[4]),n.niu_effect.skeletonData&&(n.niu_effect.animation="animation")}));this.niu_bg.node.runAction(r)},t.prototype.flutterScore=function(e,t,n){var o=this;this.flutter.node.position=cc.v2(0,0);var a="";e>=0?(this.flutter.font=this.yellow_bmfont,a="+"):(this.flutter.font=this.grey_bmfont,a="-");var i=Math.abs(e),r=i/parseFloat(50..toFixed(2)),c=0,l="",s=function(){l=(c+=r).toFixed(2),o.flutter.string=a+l,c>=i&&(l=i.toString(),o.flutter.string=a+parseFloat(l).toFixed(2),o.unschedule(s))};this.schedule(s,.01,cc.macro.REPEAT_FOREVER);var d=cc.moveTo(.5,t),u=cc.sequence(d,cc.delayTime(.5),cc.callFunc(function(){n&&n()}));this.flutter.node.runAction(u)},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},a([d(cc.Node)],t.prototype,"blink",void 0),a([d(cc.Sprite)],t.prototype,"head",void 0),a([d(cc.Label)],t.prototype,"user_name",void 0),a([d(cc.Label)],t.prototype,"money",void 0),a([d(cc.Node)],t.prototype,"banker",void 0),a([d(cc.Label)],t.prototype,"bmfont",void 0),a([d(cc.Font)],t.prototype,"yellow_bmfont",void 0),a([d(cc.Font)],t.prototype,"grey_bmfont",void 0),a([d(cc.Font)],t.prototype,"blue_bmfont",void 0),a([d(cc.Label)],t.prototype,"flutter",void 0),a([d(cc.Node)],t.prototype,"card_type",void 0),a([d(cc.Sprite)],t.prototype,"niu_bg",void 0),a([d(cc.Sprite)],t.prototype,"niu_type",void 0),a([d(cc.Label)],t.prototype,"niu_bet",void 0),a([d(cc.SpriteAtlas)],t.prototype,"typeAtlas",void 0),a([d(cc.Font)],t.prototype,"niu_grey_bmfont",void 0),a([d(cc.Font)],t.prototype,"niu_red_bmfont",void 0),a([d(cc.Font)],t.prototype,"niu_yellow_bmfont",void 0),a([d(sp.Skeleton)],t.prototype,"niu_effect",void 0),a([d(sp.SkeletonData)],t.prototype,"spDatas",void 0),a([d(cc.Node)],t.prototype,"ready",void 0),a([d(cc.Node)],t.prototype,"offline",void 0),a([d(cc.Node)],t.prototype,"room_owner",void 0),t=a([s],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../common/UIHelper":void 0,"../../../common/utils/Utils":void 0,"../../../manager/NetManager":void 0}],KPNNCenterPanel:[function(e,t,n){"use strict";cc._RF.push(t,"ac0a0Y8+4tDaa8Zc3og54Ji","KPNNCenterPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../public/TimeClock"),r=e("../../../common/utils/Utils"),c=e("../../../manager/UIManager"),l=e("../../../manager/NetManager"),s=e("../model/CMD_KPNN"),d=e("../../../common/log/LogWrap"),u=e("../../../manager/DataManager"),p=e("../../../Define"),h=cc._decorator,f=h.ccclass,_=h.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alarm_clock=null,t.bth_start=null,t.bth_dissolution=null,t.bth_frined_start=null,t.toggle_ready=null,t.btn_club_invite=null,t.btn_ready=null,t.btn_cancel_ready=null,t.label_startTime=null,t.node_grab=null,t.node_bet=null,t.node_tips=null,t.label_tips=null,t.node_fill=null,t.node_show=null,t.btn_bull=null,t.btn_none=null,t.winSp=null,t.failSp=null,t._isAuto=!1,t.bet_btns=[],t.grab_btns=[],t.GameView=null,t.onStartSchedule=null,t}return o(t,e),t.prototype.initzation=function(e){this.GameView=e,this.initView(),this.initNode()},t.prototype.initNode=function(){r.default.addClickEventEND(this.bth_start,this.onClickEvent.bind(this)),r.default.addClickEventEND(this.bth_dissolution,this.clickDiss.bind(this)),r.default.addClickEventEND(this.bth_frined_start,this.clickFriend.bind(this)),r.default.addClickEventEND(this.btn_bull,this.onShowCardEvent.bind(this)),r.default.addClickEventEND(this.btn_none,this.onShowCardEvent.bind(this)),this.toggle_ready.on("toggle",this.onClickToggle.bind(this)),this.toggle_ready.getComponent(cc.Toggle).isChecked=!1,this.grab_btns=this.node_grab.children,this.bet_btns=this.node_bet.children,r.default.addClickEventEND(this.btn_ready,this.onClickReadyEvent.bind(this)),r.default.addClickEventEND(this.btn_cancel_ready,this.onClickReadyEvent.bind(this)),r.default.addClickEventEND(this.btn_club_invite,this.onClubInviteEvent.bind(this))},t.prototype.initView=function(){this.node_grab.active=!1,this.node_bet.active=!1,this.node_tips.active=!1,this.node_fill.active=!1,this.node_show.active=!1,this.label_tips.string="",this.bth_start.active=!1,this.toggle_ready.active=!1,this.alarm_clock.onKillTimer(),this.resetCardValue(),this.onSetStartCountDown(!1)},t.prototype.onClickToggle=function(){var e=this.toggle_ready.getComponent(cc.Toggle).isChecked;this._isAuto=e,1==this.GameView.gameType&&u.DataManager.isCreaterUser&&this.onSetStartCountDown(e)},t.prototype.setChecked=function(e){this.toggle_ready.getComponent(cc.Toggle).isChecked=e,this._isAuto=e},t.prototype.onClickEvent=function(e){"bth_start"==e.name&&this.sendMatchReq()},t.prototype.sendMatchReq=function(){c.UIManager.showLoading("\u6b63\u5728\u5feb\u901f\u5339\u914d\u4e2d...",!0,function(){l.NetManager.protocolGameCommon.sendCancelMatch()}),this.GameView.resetGameView(),l.NetManager.protocolGameCommon.sendMatchReq(),this.bth_start.active=!1,this.toggle_ready.active=!1},t.prototype.clickDiss=function(){var e=this.GameView.topPanel.room_id.string;l.NetManager.protocolGameCommon.sendDismissFriendInquiry(parseFloat(e)||null)},t.prototype.clickFriend=function(){this.onSetStartCountDown(!1);var e=this.GameView.topPanel.room_id.string;l.NetManager.protocolGameCommon.sendStartFriendGame(parseFloat(e)||null)},t.prototype.setGameTimer=function(e){this.alarm_clock.setGameTimer(e)},t.prototype.onKillTimer=function(){this.alarm_clock.onKillTimer()},t.prototype.pauseAudio=function(){this.alarm_clock.pauseAudio()},t.prototype.pauseVibrate=function(){this.alarm_clock.pauseVibrate()},t.prototype.onShowCardEvent=function(e){var t,n,o=e.name;"btn_bull"==o?(t=!0,n=this.GameView.onValid(t)):"btn_none"==o&&(t=!1,n=this.GameView.onValid(t)),n?(l.NetManager.getGameProtocol().sendShowCard(),this.node_show.active=!1,this.node_fill.active=!1):c.UIManager.showTips("\u724c\u578b\u6709\u8bef")},t.prototype.onGrabClickEvent=function(e,t){var n=t.clickTag;console.log("========>\u62a2\u5e84\u500d\u6570",n),l.NetManager.getGameProtocol().sendGrabReq(n),e.parent.active=!1},t.prototype.onBetClickEvent=function(e,t){var n=t.clickTag;console.log("========>\u4e0b\u6ce8\u500d\u6570",n),l.NetManager.getGameProtocol().sendBetReq(n),e.parent.active=!1},t.prototype.onClubInviteEvent=function(){l.NetManager.protocolChat.sendClubRoomReq()},t.prototype.onClickReadyEvent=function(e){var t=e.name,n=null;"btn_ready"==t?n=0:"btn_cancel_ready"==t&&(n=1),l.NetManager.protocolGameCommon.sendFriendReadyReq(n)},t.prototype.showReadyBtn=function(){this.hideReadyBtn(),0==this.GameView.gameType&&(this.bth_start.active=!0,this.toggle_ready.active=!0)},t.prototype.hideReadyBtn=function(){this.bth_start.active=!1,this.toggle_ready.active=!1},t.prototype.showFriendBtn=function(){this.hideFriendBtn(),this.toggle_ready.active=!0,u.DataManager.isCreaterUser?(this.bth_dissolution.active=!0,this.bth_frined_start.active=!0,this.toggle_ready.getChildByName("label").getComponent(cc.Label).string="\u6240\u6709\u73a9\u5bb6\u51c6\u5907\u5b8c\u6210\u540e\u81ea\u52a8\u5f00\u59cb",u.DataManager.roomType==p.RoomType.Club&&(this.bth_dissolution.active=!1,this.btn_club_invite.active=!0)):(this.btn_ready.active=6==s.default.MY_DATA.state,this.btn_cancel_ready.active=1==s.default.MY_DATA.state,this.toggle_ready.getChildByName("label").getComponent(cc.Label).string="\u6e38\u620f\u7ed3\u675f\u540e\u81ea\u52a8\u51c6\u5907",u.DataManager.roomType==p.RoomType.Club&&(this.btn_club_invite.active=!0))},t.prototype.showFriendReadyBtn=function(){this.btn_ready.active=!0,this.toggle_ready.active=!0,u.DataManager.roomType==p.RoomType.Club&&(this.btn_club_invite.active=!0)},t.prototype.hideFriendBtn=function(){this.bth_dissolution.active=!1,this.bth_frined_start.active=!1,this.btn_ready.active=!1,this.btn_cancel_ready.active=!1,this.toggle_ready.active=!1,this.btn_club_invite.active=!1},t.prototype.onSetStartCountDown=function(e){var t=this;if(void 0===e&&(e=!0),e){var n=5;this.label_startTime.node.active=!0,this.label_startTime.string=n+"";var o=function(){if(n--,d.LogWrap.log("\u5012\u8ba1\u65f6\u65f6\u95f4",n),t.label_startTime.string=n+"",n<=0){d.LogWrap.log("\u5012\u8ba1\u65f6\u7ed3\u675f, \u53d1\u9001\u597d\u53cb\u623f\u5f00\u59cb\u6e38\u620f\u6307\u4ee4");var e=u.DataManager.friendRoomId;return l.NetManager.protocolGameCommon.sendStartFriendGame(parseFloat(e)||null),t.label_startTime.node.active=!1,void t.unschedule(t.onStartSchedule)}};this.onStartSchedule=o,this.schedule(o,1,cc.macro.REPEAT_FOREVER)}else this.onStartSchedule&&(this.label_startTime.node.active=!1,this.unschedule(this.onStartSchedule))},t.prototype.showGrabBtn=function(e){this.node_grab.active=!0,this.grab_btns.forEach(function(e,t){e.active=!1,r.default.removeClickEvent(e)});for(var t=0;t<e.length;t++){var n=this.grab_btns[t];n.active=!0,n.getChildByName("label").getComponent(cc.Label).string=0==t?"\u4e0d\u62a2":e[t]+"\u500d",r.default.addClickEventEND(n,this.onGrabClickEvent.bind(this),{clickTag:e[t]})}},t.prototype.showBetBtn=function(e){this.node_bet.active=!0,this.bet_btns.forEach(function(e,t){e.active=!1,r.default.removeClickEvent(e)});for(var t=0;t<e.length;t++){var n=this.bet_btns[t];n.active=!0,n.getChildByName("label").getComponent(cc.Label).string=e[t]+"\u500d",r.default.addClickEventEND(n,this.onBetClickEvent.bind(this),{clickTag:e[t]})}},t.prototype.hideGrabBetBtn=function(){this.node_grab.active=!1,this.node_bet.active=!1},t.prototype.hideShowCard=function(){this.node_fill.active=!1,this.node_show.active=!1},t.prototype.setViewTips=function(e){this.node_tips.active=!0,this.label_tips.string=e},t.prototype.hideViewTips=function(){this.node_tips.active=!1,this.label_tips.string=""},t.prototype.setCardValueTips=function(e){for(var t=0,n=0;n<3;n++){var o=this.node_fill.getChildByName("card_num"+n).getComponent(cc.Label);o.string="",11==e[n]?(o.string="J",t+=10):12==e[n]?(o.string="Q",t+=10):13==e[n]?(o.string="K",t+=10):e[n]<=10&&(o.string=e[n],t+=e[n])}var a=this.node_fill.getChildByName("sum_num").getComponent(cc.Label);3==e.length?a.string=t.toString():a.string=""},t.prototype.resetCardValue=function(){this.node_fill.children.forEach(function(e,t){e.getComponent(cc.Label).string=""})},t.prototype.showResultSpine=function(e,t){void 0===e&&(e=0),this.winSp.node.active=!e,this.failSp.node.active=!!e;var n=0==e?this.winSp:this.failSp,o=n.animation;n.setAnimation(0,o,!1)&&n.setCompleteListener(function(e,n){t&&t()})},a([_(i.default)],t.prototype,"alarm_clock",void 0),a([_(cc.Node)],t.prototype,"bth_start",void 0),a([_(cc.Node)],t.prototype,"bth_dissolution",void 0),a([_(cc.Node)],t.prototype,"bth_frined_start",void 0),a([_(cc.Node)],t.prototype,"toggle_ready",void 0),a([_(cc.Node)],t.prototype,"btn_club_invite",void 0),a([_(cc.Node)],t.prototype,"btn_ready",void 0),a([_(cc.Node)],t.prototype,"btn_cancel_ready",void 0),a([_(cc.Label)],t.prototype,"label_startTime",void 0),a([_(cc.Node)],t.prototype,"node_grab",void 0),a([_(cc.Node)],t.prototype,"node_bet",void 0),a([_(cc.Node)],t.prototype,"node_tips",void 0),a([_(cc.Label)],t.prototype,"label_tips",void 0),a([_(cc.Node)],t.prototype,"node_fill",void 0),a([_(cc.Node)],t.prototype,"node_show",void 0),a([_(cc.Node)],t.prototype,"btn_bull",void 0),a([_(cc.Node)],t.prototype,"btn_none",void 0),a([_(sp.Skeleton)],t.prototype,"winSp",void 0),a([_(sp.Skeleton)],t.prototype,"failSp",void 0),t=a([f],t)}(cc.Component);n.default=m,cc._RF.pop()},{"../../../Define":void 0,"../../../common/log/LogWrap":void 0,"../../../common/utils/Utils":void 0,"../../../manager/DataManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"../../public/TimeClock":void 0,"../model/CMD_KPNN":"CMD_KPNN"}],KPNNCmd:[function(e,t,n){"use strict";cc._RF.push(t,"1bfadY3/mhJPrOeecyIyzzb","KPNNCmd"),Object.defineProperty(n,"__esModule",{value:!0}),n.KPNNCmd="25_0",n.ProtocolKPNNCmd={ErrorResp:n.KPNNCmd+"_err_res",GameStartNotify:n.KPNNCmd+"_game_start_notify",GrabBankRes:n.KPNNCmd+"_grab_bank_res",GameConfirmBankNotify:n.KPNNCmd+"_game_confirm_bank_notify",StartBetNotify:n.KPNNCmd+"_start_bet_notify",BetRes:n.KPNNCmd+"_bet_res",DealCardNotify:n.KPNNCmd+"_deal_card_notify",CardResultRes:n.KPNNCmd+"_card_result_res",GameConcludeNotify:n.KPNNCmd+"_game_conclude_notify",GameReconnectInfo:n.KPNNCmd+"_game_reconnect_info"},cc._RF.pop()},{}],KPNNGameScene:[function(e,t,n){"use strict";cc._RF.push(t,"ba189SPIUVEgbSiru9RbQ3K","KPNNGameScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./model/CMD_KPNN"),r=e("./KPNNGameView"),c=e("./KPNNTool"),l=e("../../manager/EventManager"),s=e("../../net/NetCmd"),d=e("../../manager/DataManager"),u=e("../../manager/UIManager"),p=e("./net/KPNNCmd"),h=e("../../Define"),f=cc._decorator,_=f.ccclass,m=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.GameView=null,t}return o(t,e),t.prototype.onLoad=function(){this.GameView.GameScene=this,this.initEvent(),this.initData(),u.UIManager.hideMarquee()},t.prototype.initData=function(){},t.prototype.initEvent=function(){l.EventManager.on(this,s.ProtocolGameCmd.GameLoginResp,this.onGameLoginResp.bind(this)),l.EventManager.on(this,s.ProtocolGameCmd.LoginFriendRoomResp,this.onLoginFriendRoomResp.bind(this)),l.EventManager.on(this,s.ProtocolGameCmd.LoginFriendRoomNotify,this.onLoginFriendRoomNotify.bind(this)),l.EventManager.on(this,s.ProtocolGameCmd.DisconnectRoomNotify,this.onDisconnectRoomNotify.bind(this)),l.EventManager.on(this,s.ProtocolGameCmd.MatchResp,this.onMatchResp.bind(this)),l.EventManager.on(this,s.ProtocolGameCmd.CancelMatchResp,this.onCancelMatchResp.bind(this)),l.EventManager.on(this,s.ProtocolGameCmd.AdJustReadyResp,this.onAdJustReadyResp.bind(this)),l.EventManager.on(this,s.ProtocolGameCmd.ChangeCreaterRes,this.onChangeCreaterRes.bind(this)),l.EventManager.on(this,p.ProtocolKPNNCmd.GameStartNotify,this.onGameStartNotify.bind(this)),l.EventManager.on(this,p.ProtocolKPNNCmd.GrabBankRes,this.onGrabBankRes.bind(this)),l.EventManager.on(this,p.ProtocolKPNNCmd.GameConfirmBankNotify,this.onGameConfirmBankNotify.bind(this)),l.EventManager.on(this,p.ProtocolKPNNCmd.StartBetNotify,this.onStartBetNotify.bind(this)),l.EventManager.on(this,p.ProtocolKPNNCmd.BetRes,this.onBetRes.bind(this)),l.EventManager.on(this,p.ProtocolKPNNCmd.DealCardNotify,this.onDealCardNotify.bind(this)),l.EventManager.on(this,p.ProtocolKPNNCmd.CardResultRes,this.onCardResultRes.bind(this)),l.EventManager.on(this,p.ProtocolKPNNCmd.GameConcludeNotify,this.onGameConcludeNotify.bind(this)),l.EventManager.on(this,p.ProtocolKPNNCmd.GameReconnectInfo,this.onGameReconnectInfo.bind(this)),l.EventManager.on(this,h.EventDef.UpdateUserGold,this.onUpdateUserScore.bind(this))},t.prototype.onGameLoginResp=function(e){this.GameView.resetGameView(),this.GameView.initPrePareGameView(e)},t.prototype.onLoginFriendRoomResp=function(e){var t=this;this.GameView.gameType=1,this.GameView.topPanel.setRoomId(e.room_id),this.GameView.resetGameView(),i.default.PLAYER_DATAS=e.player_info,console.log("%c\u6240\u6709\u7528\u6237\u4fe1\u606f======>","color:green",i.default.PLAYER_DATAS),i.default.PLAYER_DATAS.forEach(function(e,t){e.player_id==d.DataManager.userInfo.userid&&(i.default.MY_DATA=e,i.default.MY_SEAT=e.seat_id,console.log("\u6211\u7684\u7528\u6237\u4fe1\u606f======>",e))});var n=JSON.parse(JSON.stringify(e));n.player_info=i.default.MY_DATA,this.GameView.initPrePareGameView(n),this.GameView.initGameView(),i.default.PLAYER_DATAS.forEach(function(e,n){var o=e.creater_state,a=c.default.getInstance().getLocalIndex(e.seat_id);t.GameView.avatarPanel[a].setRoomOwner(1==o)})},t.prototype.onLoginFriendRoomNotify=function(e){var t=c.default.getInstance().getLocalIndex(e.player_info.seat_id),n=e.player_info;if(e.is_add)console.log("\u6709\u4eba\u52a0\u5165"),i.default.PLAYER_DATAS=i.default.PLAYER_DATAS.concat(n),this.GameView.avatarPanel[t].setUserInfo(n),this.GameView.avatarPanel[t].setUserEvent(n.player_id),this.GameView.showFriendPlayerState(t,n.state);else if(e.is_offline){console.log("\u6709\u4eba\u6389\u7ebf\u56de\u6765");for(var o=0;o<i.default.PLAYER_DATAS.length;o++){if(i.default.PLAYER_DATAS[o].player_id==n.player_id){i.default.PLAYER_DATAS[o]=n;break}}this.GameView.avatarPanel[t].setUserInfo(n),this.GameView.showFriendPlayerState(t,n.state)}else if(e.is_leave){console.log("\u6709\u4eba\u79bb\u5f00\u6216\u8005\u88ab\u8e22");for(o=0;o<i.default.PLAYER_DATAS.length;o++){if(i.default.PLAYER_DATAS[o].player_id==n.player_id){i.default.PLAYER_DATAS.splice(o,1);break}}this.GameView.avatarPanel[t].initView(),this.GameView.cardPanel[t].removeCard()}},t.prototype.onDisconnectRoomNotify=function(e){if(i.default.PLAYER_DATAS)for(var t=0;t<i.default.PLAYER_DATAS.length;t++){var n=i.default.PLAYER_DATAS[t];if(n.player_id==e.userid){var o=c.default.getInstance().getLocalIndex(n.seat_id);n.state=2,this.GameView.avatarPanel[o].setUserInfo(n),this.GameView.showFriendPlayerState(o,n.state);break}}},t.prototype.onMatchResp=function(e){1==e.status?(console.log("\u5339\u914d\u6210\u529f====>",e),u.UIManager.hideLoading()):2==e.status||4==e.status?(u.UIManager.showTips(2==e.status?"\u5339\u914d\u8d85\u65f6":"\u91d1\u5e01\u4e0d\u8db3"),this.GameView.showReady(),u.UIManager.hideLoading()):3==e.status?(console.log("\u5339\u914d\u88ab\u53d6\u6d88"),u.UIManager.hideLoading()):100==e.status&&(u.UIManager.showTips("\u5339\u914d\u5931\u8d25"),this.GameView.showReady(),u.UIManager.hideLoading())},t.prototype.onCancelMatchResp=function(e){u.UIManager.showTips(e.ok?"\u53d6\u6d88\u5339\u914d\u6210\u529f":"\u53d6\u6d88\u5339\u914d\u5931\u8d25"),e.ok&&this.GameView.showReady()},t.prototype.onAdJustReadyResp=function(e){if(i.default.PLAYER_DATAS)for(var t=0;t<i.default.PLAYER_DATAS.length;t++){var n=i.default.PLAYER_DATAS[t];if(n.player_id==e.player_id){var o=c.default.getInstance().getLocalIndex(n.seat_id);n.state=e.ret,this.GameView.showFriendPlayerState(o,n.state),0==o&&this.GameView.showReady();break}}},t.prototype.onChangeCreaterRes=function(e){if(0==e.ret){this.GameView.avatarPanel.forEach(function(e){e.setRoomOwner(!1)});var t=c.default.getInstance().getLocalIndex(e.creater_seat_id);if(this.GameView.avatarPanel[t].setRoomOwner(!0),this.GameView.avatarPanel[t].setReadyIcon(!1),i.default.PLAYER_DATAS){for(var n=0;n<i.default.PLAYER_DATAS.length;n++){if((o=i.default.PLAYER_DATAS[n]).player_id==e.creater_id){o.state=6;break}}for(n=0;n<i.default.PLAYER_DATAS.length;n++){var o;if((o=i.default.PLAYER_DATAS[n]).player_id==e.old_creater_id){o.state=6;break}}d.DataManager.userInfo.userid!=e.old_creater_id&&d.DataManager.userInfo.userid!=e.creater_id||(this.GameView.centerPanel.setChecked(!1),this.GameView.centerPanel.onSetStartCountDown(!1))}this.GameView.showReady()}},t.prototype.onGameStartNotify=function(e){this.GameView.resetGameView(),i.default.PLAYER_DATAS=e.player_list,console.log("%c\u6240\u6709\u7528\u6237\u4fe1\u606f======>","color:green",i.default.PLAYER_DATAS),i.default.PLAYER_DATAS.forEach(function(e,t){e.player_id==d.DataManager.userInfo.userid&&(i.default.MY_DATA=e,i.default.MY_SEAT=e.seat_id,console.log("\u6211\u7684\u7528\u6237\u4fe1\u606f======>",e))}),this.GameView.initGameView(),this.GameView.StartGame(e)},t.prototype.onGrabBankRes=function(e){var t=c.default.getInstance().getLocalIndex(e.seat_id),n=e.grab_multiple;this.GameView.setUserGrabMultiple(t,n)},t.prototype.onGameConfirmBankNotify=function(e){this.GameView.onSubConfirmBank(e)},t.prototype.onStartBetNotify=function(e){this.GameView.onSubStartBet(e)},t.prototype.onBetRes=function(e){var t=c.default.getInstance().getLocalIndex(e.seat_id),n=e.bet_multiple;this.GameView.setUserBetMultiple(t,n)},t.prototype.onDealCardNotify=function(e){this.GameView.onSubSendCard(e)},t.prototype.onCardResultRes=function(e){this.GameView.onSubShowCard(e)},t.prototype.onGameConcludeNotify=function(e){this.GameView.onSubGameEnd(e)},t.prototype.onGameReconnectInfo=function(e){this.GameView.recoverGameView(e)},t.prototype.onUpdateUserScore=function(){this.GameView.onUpdateUserScore()},t.prototype.onDestroy=function(){l.EventManager.off(this)},a([m(r.default)],t.prototype,"GameView",void 0),t=a([_],t)}(cc.Component);n.default=y,cc._RF.pop()},{"../../Define":void 0,"../../manager/DataManager":void 0,"../../manager/EventManager":void 0,"../../manager/UIManager":void 0,"../../net/NetCmd":void 0,"./KPNNGameView":"KPNNGameView","./KPNNTool":"KPNNTool","./model/CMD_KPNN":"CMD_KPNN","./net/KPNNCmd":"KPNNCmd"}],KPNNGameView:[function(e,t,n){"use strict";cc._RF.push(t,"579c9JfvFFJ7L96OzGlqdeV","KPNNGameView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(a,i){function r(e){try{l(o.next(e))}catch(e){i(e)}}function c(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(r,c)}l((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,a,i,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return l([e,t])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=2&i[0]?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){r=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(6===i[0]&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=t.call(e,r)}catch(e){i=[6,e],o=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("./ui/KPNNAvatarPanel"),l=e("./ui/KPNNPokerPanel"),s=e("./model/CMD_KPNN"),d=e("./ui/KPNNTopPanel"),u=e("./ui/KPNNCenterPanel"),p=e("../../manager/AudioManager"),h=e("../../common/utils/Utils"),f=e("./KPNNTool"),_=e("../../manager/DataManager"),m=e("../../manager/ResManager"),y=e("../../view/common/GameChat"),g=e("../../manager/UIManager"),v=e("../../manager/NetManager"),P=cc._decorator,b=P.ccclass,N=P.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.avatarPanel=[],t.cardPanel=[],t.node_top=null,t.node_center=null,t.topPanel=null,t.centerPanel=null,t.node_gold=null,t.UINode=null,t.GameScene=null,t.gold_frame=null,t.start_game=null,t.card_val_type=null,t.gameType=0,t.isStartGame=!1,t}return o(t,e),t.prototype.onLoad=function(){p.AudioManager.playGameBGM("kpnn_bgm.mp3"),this.initView(),this.initNode(),this.initChat()},t.prototype.initChat=function(){return i(this,void 0,void 0,function(){var e,t;return r(this,function(n){switch(n.label){case 0:return[4,m.ResManager.loadResAsync("prefabs/common/GameChat",cc.Prefab,!1)];case 1:return(e=n.sent())&&cc.isValid(this.node)&&!this.node.getChildByName("GameChat")&&(t=cc.instantiate(e),this.node.addChild(t),t.getComponent(y.default).setTalkPositionY()),[2]}})})},t.prototype.initView=function(){var e=this;this.topPanel.initzation(this),this.centerPanel.initzation(this),this.avatarPanel.forEach(function(t,n){t.initzation(e.centerPanel,e)}),this.cardPanel.forEach(function(t,n){t.initzation(e.centerPanel,e)})},t.prototype.initNode=function(){this.node_gold=this.node_center.getChildByName("node_gold")},t.prototype.initData=function(){s.default.PLAYER_DATAS=[],this.card_val_type=null},t.prototype.initPrePareGameView=function(e){var t=e.player_info,n={username:h.default.getSubStringLengTxt(t.username)||h.default.getReplaceStrToStar(t.player_id),gold:t.gold,headimg_id:t.headimg_id},o=e.room_info.room_base_note;this.topPanel.setBasicPot(o),this.avatarPanel[0].setUserInfo(n),this.showReady()},t.prototype.initGameView=function(){var e=this;s.default.PLAYER_DATAS.forEach(function(t,n){var o=f.default.getInstance().getLocalIndex(t.seat_id);e.avatarPanel[o].setUserInfo(t),e.avatarPanel[o].setUserEvent(t.player_id)})},t.prototype.initUserView=function(){this.avatarPanel.forEach(function(e,t){0!=t?e.initView():e.resetMyView()})},t.prototype.recoverGameView=function(e){var t=this,n=e.game_state,o=e.game_start_notify,a=e.grab_bank_res,i=e.start_bet_notify,r=e.bet_res,c=e.deal_card_notify,l=e.card_result_res;if(console.log("%c \u6e38\u620f\u9636\u6bb5\u5206\u4e3a 1 \u62a2\u5e84  2\u4e0b\u6ce8 3\u5f00\u724c=====>>>","color:blue;",n),o){s.default.PLAYER_DATAS=o.player_list,s.default.PLAYER_DATAS.forEach(function(e,t){e.player_id==_.DataManager.userInfo.userid&&(s.default.MY_DATA=e,s.default.MY_SEAT=e.seat_id)}),this.initGameView();var d=o.room_info.room_code;this.topPanel.setRoomInfo(d),1==n||2==n?(s.default.START_DEALNUM=0,s.default.DEAL_CARD_COUNT=3):3!=n&&4!=n||(s.default.START_DEALNUM=0,s.default.DEAL_CARD_COUNT=5),s.default.PLAYER_DATAS.forEach(function(e,n){var o=f.default.getInstance().getLocalIndex(e.seat_id),a=t.cardPanel[o];a.removeCard(),a.initCard(),0!=o&&a.cardBackView()})}if(1==n){var u=!1;a&&(console.log("\u6709\u62a2\u5e84\u6d88\u606f->>>>>>"),a.forEach(function(e,n){var o=f.default.getInstance().getLocalIndex(e.seat_id),a=e.grab_multiple;t.setUserGrabMultiple(o,a),0==o&&(u=!0)}),u||(this.centerPanel.setViewTips("\u8bf7\u9009\u62e9\u62a2\u5e84\u500d\u6570"),this.centerPanel.showGrabBtn(o.grab_multiple_arr))),this.centerPanel.onKillTimer(),this.centerPanel.setGameTimer({limit_time:o.time_out,playAudio:!u,vibrate:!u})}else if(2==n){var p=!1,h=!1;if(r&&(console.log("\u6709\u4e0b\u6ce8\u6d88\u606f->>>>>>"),r.forEach(function(e,n){var o=f.default.getInstance().getLocalIndex(e.seat_id),a=e.bet_multiple;t.setUserBetMultiple(o,a),0==o&&(p=!0)})),i){0==(P=f.default.getInstance().getLocalIndex(i.bank_seat_id))&&(h=!0);var m=i.bank_grab_multiple;this.avatarPanel[P].setUserGrabMultiple(m),this.avatarPanel[P].setViewBankerSign(!0),this.avatarPanel[P].blink.active=!0}p||(h?(console.log("\u6211\u662f\u5e84\u5bb6"),this.centerPanel.setViewTips("\u8bf7\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u4e0b\u6ce8")):(this.centerPanel.showBetBtn(i.bet_multiple_arr),this.centerPanel.setViewTips("\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570")));var y=!1,g=!1;h||p||(y=!0,g=!0),this.centerPanel.onKillTimer(),this.centerPanel.setGameTimer({limit_time:i.time_out,playAudio:y,vibrate:g})}else if(3==n){var v=!1,P=(m=i.bank_grab_multiple,f.default.getInstance().getLocalIndex(i.bank_seat_id));if(this.avatarPanel[P].setUserGrabMultiple(m),this.avatarPanel[P].setViewBankerSign(!0),this.avatarPanel[P].blink.active=!0,r.forEach(function(e,n){var o=f.default.getInstance().getLocalIndex(e.seat_id),a=e.bet_multiple;t.setUserBetMultiple(o,a)}),c){c.card_arr;this.card_val_type=c.val_type,this.cardPanel[0].setCardTouch()}l&&l.forEach(function(e,n){var o=e.card_result,a=f.default.getInstance().getLocalIndex(o.seat_id),i=o.card_arr,r=o.val_type,c=o.val_multiple;t.avatarPanel[a].setTypeSprite(r,c),t.cardPanel[a].openCardView(i),0==a&&(v=!0,t.cardPanel[0].setCardTouch(!1))}),v||(this.centerPanel.node_fill.active=!0,this.centerPanel.node_show.active=!0,this.cardPanel[0].setCardTouch(!0)),this.centerPanel.onKillTimer(),this.centerPanel.setGameTimer({limit_time:c.time_out,playAudio:!v,vibrate:!v})}this.isStartGame=!1,4!=n&&(this.isStartGame=!0,1==this.gameType&&(this.centerPanel.hideFriendBtn(),this.avatarPanel.forEach(function(e,t){e.setReadyIcon(!1)}))),this.cardPanel[0].showPoker(e.my_card_arr),this.centerPanel.hideReadyBtn()},t.prototype.showReady=function(){0==this.gameType?this.centerPanel.showReadyBtn():1==this.gameType&&this.centerPanel.showFriendBtn()},t.prototype.resetGameView=function(){this.unscheduleAllCallbacks(),this.node.stopAllActions(),this.UINode.destroyAllChildren(),this.topPanel.setRoomInfo(),this.centerPanel.initView(),this.avatarPanel.forEach(function(e,t){0!=t?e.initView():e.resetMyView()}),this.cardPanel.forEach(function(e,t){e.removeCard()})},t.prototype.StartGame=function(e){var t=this;g.UIManager.hideLoading(),0==this.gameType?this.centerPanel.hideReadyBtn():1==this.gameType&&this.centerPanel.hideFriendBtn(),v.NetManager.protocolGameCommon.needFlushGold=!1,this.isStartGame=!0,this.cardPanel.forEach(function(e,t){e.removeCard(),e.initCard()}),this.centerPanel.onKillTimer();var n=e.room_info.room_code;this.topPanel.setRoomInfo(n);var o=cc.instantiate(this.start_game);this.UINode.addChild(o),this.scheduleOnce(function(){t.dealCardsAni(1,e.card_arr,function(){t.cardPanel[0].showPoker(e.card_arr),t.centerPanel.setGameTimer({limit_time:e.time_out,playAudio:!0,vibrate:!0}),t.centerPanel.setViewTips("\u8bf7\u9009\u62e9\u62a2\u5e84\u500d\u6570"),t.centerPanel.showGrabBtn(e.grab_multiple_arr)}),t.UINode.removeChild(o)},1),p.AudioManager.playSFX("start_game"),1==this.gameType&&(this.centerPanel.hideFriendBtn(),this.avatarPanel.forEach(function(e,t){e.setReadyIcon(!1)}))},t.prototype.setUserGrabMultiple=function(e,t){0==e&&(this.centerPanel.hideViewTips(),this.centerPanel.hideGrabBetBtn(),this.centerPanel.pauseAudio(),this.centerPanel.pauseVibrate()),this.avatarPanel[e].setUserGrabMultiple(t)},t.prototype.setUserBetMultiple=function(e,t){0==e&&(this.centerPanel.hideViewTips(),this.centerPanel.hideGrabBetBtn(),this.centerPanel.pauseAudio(),this.centerPanel.pauseVibrate()),this.avatarPanel[e].setUserBetMultiple(t)},t.prototype.onSubConfirmBank=function(e){this.centerPanel.onKillTimer(),this.centerPanel.hideGrabBetBtn(),this.onGrabBankerAni(e)},t.prototype.onSubStartBet=function(e){this.centerPanel.onKillTimer();var t=f.default.getInstance().getLocalIndex(e.bank_seat_id);this.centerPanel.setGameTimer({limit_time:e.time_out,playAudio:0!=t,vibrate:0!=t}),this.avatarPanel.forEach(function(n,o){o!=t?n.hideUserGrab():n.setUserGrabMultiple(e.bank_grab_multiple)}),this.avatarPanel[t].setViewBankerSign(!0),console.log("\u6211\u8fdb\u5165\u4e86\u6309\u94ae\u7684\u663e\u793a\u9690\u85cf"),0==t?(console.log("\u6211\u662f\u5e84\u5bb6"),this.centerPanel.setViewTips("\u8bf7\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u4e0b\u6ce8")):(this.centerPanel.showBetBtn(e.bet_multiple_arr),this.centerPanel.setViewTips("\u8bf7\u9009\u62e9\u4e0b\u6ce8\u500d\u6570"))},t.prototype.onGrabBankerAni=function(e,t){for(var n=this,o=[],a=s.default.INVALE_CHAIR,i=0;i<e.higher_grab_multiple_arr.length;i++)o[i]=f.default.getInstance().getLocalIndex(e.higher_grab_multiple_arr[i]);a=f.default.getInstance().getLocalIndex(e.bank_seat_id),this.setViewGrabBankerAni(o,a,function(){console.log("\u5b9a\u5e84\u52a8\u753b\u7ed3\u675f"),n.avatarPanel[a].setViewBankerSign(!0)})},t.prototype.setViewGrabBankerAni=function(e,t,n){var o=e.length;if(o<=1){var a=cc.sequence(cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.1,1,1)),i=this.avatarPanel[t].blink;i.active=!0,i.runAction(a),n&&n()}else{for(var r=[],c=0,l=0;l<o;l++)r[l]=this.avatarPanel[e[l]].blink,t==e[l]&&(c=l);var s=.1,d=20;o<=3&&(s=.2,d=10);var u=0,p=0,h=cc.sequence(cc.delayTime(s),cc.callFunc(function(){for(var e=0;e<o;e++)r[e].active=!1;++p>=d-1?r[c].active=!0:r[u].active=!0,u++,u%=o})),f=cc.sequence(cc.repeat(h,d),cc.delayTime(.1),cc.callFunc(function(){var e=cc.sequence(cc.scaleTo(.1,1.1,1.1),cc.scaleTo(.1,1,1));r[c].runAction(e),n&&n()}));this.node.runAction(f)}},t.prototype.onSubSendCard=function(e){var t=this;this.centerPanel.onKillTimer(),this.centerPanel.hideViewTips(),this.centerPanel.hideGrabBetBtn(),this.card_val_type=e.val_type;var n=e.card_arr;this.dealCardsAni(2,n,function(){t.scheduleOnce(function(){t.centerPanel.setGameTimer({limit_time:e.time_out,playAudio:!0,vibrate:!0}),t.centerPanel.node_fill.active=!0,t.centerPanel.node_show.active=!0,t.cardPanel[0].turnCardAni(n,function(){t.cardPanel[0].setCardTouch(!0)})},.1)})},t.prototype.onValid=function(e){if(null!=this.card_val_type)return e?this.card_val_type>0:0==this.card_val_type;console.log("\u8d4b\u503c\u724c\u578b\u6709\u95ee\u9898 onSubSendCard")},t.prototype.dealCardsAni=function(e,t,n){var o=this,a=this.node_center.convertToWorldSpaceAR(this.node_gold.position),i=0;1==e?(s.default.START_DEALNUM=0,s.default.DEAL_CARD_COUNT=3,i=.3):2==e&&(s.default.START_DEALNUM=3,s.default.DEAL_CARD_COUNT=5,i=.15*1.5);var r=s.default.DEAL_CARD_COUNT;s.default.PLAYER_DATAS.forEach(function(e,t){for(var n=f.default.getInstance().getLocalIndex(e.seat_id),i=o.cardPanel[n],c=i.node.convertToNodeSpaceAR(a),l=0,d=s.default.START_DEALNUM;d<r;d++){var u=i.node.children[d];u.opacity=0,0==n&&(u.scale=1.6),u.active=!0;var p=u.getPosition(),h=.5*l;l++,u.setPosition(c),u.getComponent("createPoker").createPoker(0),u.runAction(cc.sequence(cc.delayTime(.15*h),cc.spawn(cc.moveTo(.15,p),cc.fadeIn(.15))))}}),n&&(console.log("\u5ef6\u65f6\u65f6\u95f4CallBack->>>",i),this.scheduleOnce(function(){n()},i)),p.AudioManager.playSFX("licensing")},t.prototype.onSubShowCard=function(e){var t=this,n=f.default.getInstance().getLocalIndex(e.card_result.seat_id),o=f.default.getInstance().getUserSexByID(e.card_result.seat_id);0==n&&(this.centerPanel.hideShowCard(),this.cardPanel[0].setCardTouch(!1),this.centerPanel.pauseAudio(),this.centerPanel.pauseVibrate());this.showCardAni(e.card_result,function(e,n,a){t.avatarPanel[e].setTypeSprite(n,a);var i=1==o?"male":"female";p.AudioManager.playGameSFX(i+"/cattle_"+n)})},t.prototype.showCardAni=function(e,t){for(var n,o=this,a=s.default.MAX_CARD_COUNT,i=f.default.getInstance().getLocalIndex(e.seat_id),r=f.default.getInstance().getUserSexByID(e.seat_id),c=e.val_type,l=e.val_multiple,d=this.cardPanel[i],u=function(t){(n=d.node.children[t]).opacity=255,n.scale=1.2,n.active=!0,n.position=s.default.CARD_POS.OTHER_CARD_POS[0],n.getComponent("createPoker").createPoker(e.card_arr[t]),n.runAction(cc.sequence(cc.moveTo(.25,s.default.CARD_POS.OTHER_CARD_POS[t]),cc.callFunc(function(){if(t==a-1){o.avatarPanel[i].setTypeSprite(c,l);var e=1==r?"male":"female";p.AudioManager.playGameSFX(e+"/cattle_"+c)}})))},h=0;h<a;h++)u(h);p.AudioManager.playSFX("flop")},t.prototype.onSubGameEnd=function(e){this.centerPanel.onKillTimer(),this.centerPanel.hideShowCard(),this.cardPanel[0].setCardTouch(!1),this.onGameEndAni(e)},t.prototype.onGameEndAni=function(e){var t=this;this.isStartGame=!1;for(var n=0,o=[],a=[],i=f.default.getInstance().getLocalIndex(e.bank_seat_id),r=this.avatarPanel[i].getNodePosition(),c=e.game_conclude,l=0,d=0;d<c.length;d++){var u=f.default.getInstance().getLocalIndex(c[d].seat_id),h=c[d].score;0==u&&h<0&&(l=1),u!=i&&(h<0?o.push(this.avatarPanel[u].getNodePosition()):a.push(this.avatarPanel[u].getNodePosition())),0==u&&(n=h)}if(0==l?p.AudioManager.playSFX("game_win"):p.AudioManager.playSFX("game_lose"),0==this.gameType)if(0==l){g.UIManager.popup("prefabs/game/ShareBalance",{isChecked:this.centerPanel._isAuto,spCallBack:function(){t.initData()},btnCallback:function(e){t.centerPanel.setChecked(e),t.centerPanel.sendMatchReq()},winGold:n||0})}else this.centerPanel.showResultSpine(l,function(){t.initData();var e=t.centerPanel._isAuto;e?t.centerPanel.sendMatchReq():t.showReady(),console.log("\u662f\u5426\u81ea\u52a8\u51c6\u5907",e)});else this.centerPanel.showResultSpine(l,function(){var e=t.centerPanel._isAuto;_.DataManager.isCreaterUser?(t.centerPanel.showFriendBtn(),t.centerPanel.onSetStartCountDown(e)):(t.centerPanel.showFriendReadyBtn(),e&&v.NetManager.protocolGameCommon.sendFriendReadyReq(0))});0==a.length&&o.length>=2&&console.log("\u5e84\u5bb6\u901a\u6740"),0==o.length&&a.length>=2&&console.log("\u5e84\u5bb6\u901a\u8d54"),this.setGoldAnimation(r,o,!0,function(){t.setGoldAnimation(r,a,!1,function(){var e=[];v.NetManager.protocolGameCommon.needFlushGold&&v.NetManager.protocolGameCommon.flushPlayerInfo.forEach(function(t){var n=f.default.getInstance().getLocalIndex(t.seat_id);e[n]=t.gold});for(var n=function(n){var o=f.default.getInstance().getLocalIndex(c[n].seat_id),a=e[o]?e[o]:c[n].gold,i=c[n].score,r=0==o?s.default.FLutter_POS.MY_FLUTTER_POS:s.default.FLutter_POS.OTHER_FLUTTER_POS;t.avatarPanel[o].flutterScore(i,r,function(){t.avatarPanel[o].setUserScore(a),n==c.length-1&&(v.NetManager.protocolGameCommon.needFlushGold=!1)})},o=0;o<c.length;o++)n(o)})})},t.prototype.setGoldAnimation=function(e,t,n,o){var a=this;if(null==t||t.length<=0)o&&o();else{for(var i=e,r=0,c=0;c<t.length;c++)for(var l=t[c],s=l,d=i,u=0;u<10;u++){var h=new cc.Node;h.addComponent(cc.Sprite),h.getComponent(cc.Sprite).spriteFrame=this.gold_frame,n?(s=l,d=i):(s=i,d=l),h.setPosition(s),this.node_gold.addChild(h);var f=[cc.v2(s.x,s.y),cc.v2(s.x,d.y),cc.v2(d.x,d.y)],_=cc.moveTo(.1*u,cc.v2(d.x,d.y)),m=(cc.bezierTo(.12*u,f),cc.sequence(_,cc.callFunc(function(){++r==10*t.length-1&&(a.node_gold.destroyAllChildren(),o&&o())})));h.runAction(m)}p.AudioManager.playSFX("collect_gold")}},t.prototype.onUpdateUserScore=function(){this.isStartGame||this.avatarPanel[0].setUserScore(_.DataManager.userInfo.gold)},t.prototype.showFriendPlayerState=function(e,t){this.avatarPanel[e].setReadyIcon(!1),this.avatarPanel[e].setOfflineIcon(!1),1==t?this.avatarPanel[e].setReadyIcon(!0):2==t?this.avatarPanel[e].setOfflineIcon(!0):3!=t&&6!=t||(this.avatarPanel[e].setReadyIcon(!1),this.avatarPanel[e].setOfflineIcon(!1))},a([N(c.default)],t.prototype,"avatarPanel",void 0),a([N(l.default)],t.prototype,"cardPanel",void 0),a([N(cc.Node)],t.prototype,"node_top",void 0),a([N(cc.Node)],t.prototype,"node_center",void 0),a([N(d.default)],t.prototype,"topPanel",void 0),a([N(u.default)],t.prototype,"centerPanel",void 0),a([N(cc.Node)],t.prototype,"node_gold",void 0),a([N(cc.Node)],t.prototype,"UINode",void 0),a([N(cc.SpriteFrame)],t.prototype,"gold_frame",void 0),a([N(cc.Prefab)],t.prototype,"start_game",void 0),t=a([b],t)}(cc.Component);n.default=C,cc._RF.pop()},{"../../common/utils/Utils":void 0,"../../manager/AudioManager":void 0,"../../manager/DataManager":void 0,"../../manager/NetManager":void 0,"../../manager/ResManager":void 0,"../../manager/UIManager":void 0,"../../view/common/GameChat":void 0,"./KPNNTool":"KPNNTool","./model/CMD_KPNN":"CMD_KPNN","./ui/KPNNAvatarPanel":"KPNNAvatarPanel","./ui/KPNNCenterPanel":"KPNNCenterPanel","./ui/KPNNPokerPanel":"KPNNPokerPanel","./ui/KPNNTopPanel":"KPNNTopPanel"}],KPNNPokerPanel:[function(e,t,n){"use strict";cc._RF.push(t,"bcf6d5+5ZZCCqXlLM+vWd8W","KPNNPokerPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../model/CMD_KPNN"),r=e("../../public/createPoker"),c=cc._decorator,l=c.ccclass,s=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.poker=null,t.local_idx=0,t.centerPanel=null,t._gameView=null,t._clickIdx=0,t._click_Card_Arr=[],t}return o(t,e),t.prototype.initzation=function(e,t){this.centerPanel=e,this._gameView=t},t.prototype.initCard=function(){for(var e=this.local_idx,t=0;t<5;t++){var n=cc.instantiate(this.poker);0==e?(n.position=i.default.CARD_POS.MY_CARD_POS[t],n.scale=1.6):(n.position=i.default.CARD_POS.OTHER_CARD_POS[t],n.scale=1),n.active=!1,this.node.addChild(n)}},t.prototype.showPoker=function(e){console.log("START_DEALNUM->",i.default.START_DEALNUM),console.log("DEAL_CARD_COUNT->",i.default.DEAL_CARD_COUNT);for(var t=i.default.START_DEALNUM;t<i.default.DEAL_CARD_COUNT;t++){var n=this.node.children[t];n.active=!0,n.getComponent("createPoker").createPoker(e[t])}},t.prototype.cardBackView=function(){for(var e=i.default.START_DEALNUM;e<i.default.DEAL_CARD_COUNT;e++){var t=this.node.children[e];t.active=!0,t.getComponent("createPoker").createPoker()}},t.prototype.openCardView=function(e){for(var t=i.default.START_DEALNUM;t<i.default.DEAL_CARD_COUNT;t++){var n=this.node.children[t];n.scale=1.2,n.position=i.default.CARD_POS.OTHER_CARD_POS[t],n.getComponent("createPoker").createPoker(e[t])}},t.prototype.turnCardAni=function(e,t){if(e){for(var n=0,o=i.default.START_DEALNUM;o<i.default.DEAL_CARD_COUNT;o++){this.node.children[o].getComponent(r.default).setCardAni(e[n]),n++}t&&this.scheduleOnce(function(){t()},.5)}else console.log("\u672a\u6709\u724c\u7684\u6570\u636esetTurnCardAni")},t.prototype.setCardTouch=function(e){for(var t=this,n=0;n<i.default.DEAL_CARD_COUNT;n++){(o=this.node.children[n]).off(cc.Node.EventType.TOUCH_END)}for(n=0;n<i.default.DEAL_CARD_COUNT;n++){var o=this.node.children[n];e&&o.on(cc.Node.EventType.TOUCH_END,function(e){t.onClickCard(e)},this)}},t.prototype.onClickCard=function(e){var t=e.target,n=t.getComponent(r.default).getShoot();if(this._clickIdx>=3)return n?(t.getComponent("createPoker").setShoot(!1),this._clickIdx--,void this.sortCardValue()):void console.log("\u8d85\u8fc7\u4e09\u4e2a\u70b9\u51fb\u4e86->>>>");n?this._clickIdx--:this._clickIdx++,t.getComponent("createPoker").setShoot(!n),this.sortCardValue()},t.prototype.getCardLogicValue=function(e){return 15&e},t.prototype.sortCardValue=function(){this._click_Card_Arr=[];for(var e=0;e<i.default.MAX_CARD_COUNT;e++){var t=this.node.children[e];if(t.getComponent(r.default).getShoot()){var n=t.getComponent("createPoker").getCardValue(),o=this.getCardLogicValue(n);this._click_Card_Arr.push(o)}}this.centerPanel.setCardValueTips(this._click_Card_Arr)},t.prototype.removeCard=function(){this._clickIdx=0,this._click_Card_Arr=[],this.node.destroyAllChildren()},a([s(cc.Prefab)],t.prototype,"poker",void 0),a([s],t.prototype,"local_idx",void 0),t=a([l],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../public/createPoker":void 0,"../model/CMD_KPNN":"CMD_KPNN"}],KPNNTool:[function(e,t,n){"use strict";cc._RF.push(t,"55a0aCx2f5PO5AxVLRXw0aL","KPNNTool");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./model/CMD_KPNN"),r=cc._decorator,c=r.ccclass,l=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return o(t,e),n=t,t.getInstance=function(){return null==this.instance&&(this.instance=new n),this.instance},t.prototype.getLocalIndex=function(e){var t=i.default.MY_SEAT,n=e,o=i.default.GAME_PLAYER;return(n-t+o)%o},t.prototype.UserisExist=function(){return!(i.default.MY_SEAT<0||i.default.MY_SEAT>i.default.GAME_PLAYER)},t.prototype.getPlayerCount=function(e){for(var t=0,n=0;n<i.default.GAME_PLAYER;n++)e[n]&&void 0!=e[n]&&(t+=1);return t},t.prototype.getUserSexByID=function(e){for(var t=0;t<i.default.PLAYER_DATAS.length;t++){var n=i.default.PLAYER_DATAS[t];if(n.seat_id==e)return n.sex}},t=n=a([c],t)}(cc.Component));n.default=l,cc._RF.pop()},{"./model/CMD_KPNN":"CMD_KPNN"}],KPNNTopPanel:[function(e,t,n){"use strict";cc._RF.push(t,"9bb86NUv6pIPZUCMA0a4rdD","KPNNTopPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var a,i=arguments.length,r=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(a=e[c])&&(r=(i<3?a(r):i>3?a(t,n,r):a(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../../common/utils/Utils"),r=e("../../../manager/UIManager"),c=e("../../../manager/DataManager"),l=cc._decorator,s=l.ccclass,d=l.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_cardType=null,t.pot_num=null,t.table_num=null,t.room_id=null,t.room_id_node=null,t._gameView=null,t}return o(t,e),t.prototype.initzation=function(e){this._gameView=e,this.initView(),this.addEvenListener()},t.prototype.initView=function(){this.pot_num.string="",this.table_num.string=""},t.prototype.addEvenListener=function(){i.default.addClickEventEND(this.btn_cardType,this.onEvenClickButton.bind(this))},t.prototype.setRoomInfo=function(e){this.table_num.string=e||""},t.prototype.setRoomId=function(e){void 0===e&&(e=""),this.room_id_node.active=!0,this.room_id.string=e},t.prototype.setBasicPot=function(e){this.pot_num.string=e},t.prototype.onEvenClickButton=function(e){"btn_cardType"==e.name&&r.UIManager.popup("prefabs/game/CardTypeList",c.DataManager.gameType)},a([d(cc.Node)],t.prototype,"btn_cardType",void 0),a([d(cc.Label)],t.prototype,"pot_num",void 0),a([d(cc.Label)],t.prototype,"table_num",void 0),a([d(cc.Label)],t.prototype,"room_id",void 0),a([d(cc.Node)],t.prototype,"room_id_node",void 0),t=a([s],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/DataManager":void 0,"../../../manager/UIManager":void 0}],ProtocolKPNN:[function(e,t,n){"use strict";cc._RF.push(t,"9317eIIBF9MnoRDxMY2HERf","ProtocolKPNN");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../net/ProtocolBase"),i=e("../../../manager/DataManager"),r=e("./KPNNCmd"),c=e("../../../Define"),l=e("../../../manager/UIManager"),s=e("../../../manager/EventManager"),d=e("../../../manager/NetManager"),u=function(e){function t(){var t=e.call(this,"game/kpnn/pb")||this;return t.cmd=r.KPNNCmd,t.type=c.SocketType.Game,t.pbName="KPNN",s.EventManager.on(t,r.ProtocolKPNNCmd.ErrorResp,t.onErrorResp.bind(t)),t}return o(t,e),t.prototype.sendGrabReq=function(e){var t={player_id:i.DataManager.userInfo.userid,grab_multiple:e};console.log("============>\u53d1\u9001\u62a2\u5e84\u8bf7\u6c42"),this.send(t,"grab_bank_req")},t.prototype.sendBetReq=function(e){var t={player_id:i.DataManager.userInfo.userid,bet_multiple:e};console.log("============>\u53d1\u9001\u4e0b\u6ce8\u8bf7\u6c42"),this.send(t,"bet_req")},t.prototype.sendShowCard=function(){var e={player_id:i.DataManager.userInfo.userid};console.log("============>\u53d1\u9001\u644a\u724c\u8bf7\u6c42"),this.send(e,"card_result_req")},t.prototype.onErrorResp=function(e){l.UIManager.showTipsPopup(e.err_msg)},t}(a.default);n.default=u,d.NetManager.protocolCache.ProtocolKPNN=u,cc._RF.pop()},{"../../../Define":void 0,"../../../manager/DataManager":void 0,"../../../manager/EventManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"../../../net/ProtocolBase":void 0,"./KPNNCmd":"KPNNCmd"}]},{},["KPNNGameScene","KPNNGameView","KPNNTool","CMD_KPNN","KPNNCmd","ProtocolKPNN","KPNNAvatarPanel","KPNNCenterPanel","KPNNPokerPanel","KPNNTopPanel"]);