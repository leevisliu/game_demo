window.__require=function t(e,o,n){function r(a,c){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){return r(e[a][1][t]||t)},p,p.exports,t,e,o,n)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)r(n[a]);return r}({ProtocolTB:[function(t,e,o){"use strict";cc._RF.push(e,"2fabcBuohFPo7+TfeOQm1uI","ProtocolTB");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../manager/DataManager"),i=t("../../../net/ProtocolBase"),a=t("../../../manager/NetManager"),c=t("../../../manager/UIManager"),s=t("../../../Define"),l=t("./TBCmd"),p=function(t){function e(){var e=t.call(this,"game/tb/pb")||this;return e.cmd=l.TBCmd,e.type=s.SocketType.Game,e.pbName="TB",e.BET_CHROME_VALUE=[],e.CUR_BET_CHROME_VALUE=0,e.CAN_BET_STATE=!1,e.AUTO_BET=!1,e.ALREAD_BET=!1,e.ALREAD_BET_CHROME_VALUE=[],e}return n(e,t),e.prototype.sendBetReq=function(t,e){var o={player_id:r.DataManager.userInfo.userid,bet_value:t,loc:e};console.log("============>\u53d1\u9001\u4e0b\u6ce8\u8bf7\u6c42"),this.send(o,"bet_req")},e.prototype.sendGetOnlineUser=function(){var t={player_id:r.DataManager.userInfo.userid};console.log("============>\u53d1\u9001\u83b7\u53d6\u5728\u7ebf\u4eba\u6570\u8bf7\u6c42"),this.send(t,"player_list_req")},e.prototype.dealError=function(t){c.UIManager.showTipsPopup(t.err_msg)},e}(i.default);o.default=p,a.NetManager.protocolCache.ProtocolTB=p,cc._RF.pop()},{"../../../Define":void 0,"../../../manager/DataManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"../../../net/ProtocolBase":void 0,"./TBCmd":"TBCmd"}],TBAdapter:[function(t,e,o){"use strict";cc._RF.push(e,"5208b/haYdOJ78RQIX0A2Ix","TBAdapter");var n=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/utils/Utils"),i=cc._decorator,a=i.ccclass,c=(i.property,function(){function t(){}var e;return e=t,t.prototype.getRandomInt=function(t,e){return r.default.getRandomInt(t,e)},t.prototype.addClickEventEND=function(t,e,o){return r.default.addClickEventEND(t,e,o)},t.prototype.getFormatGold=function(t){return r.default.getFormatGold(t)},t.prototype.getSubStringLengTxt=function(t){return r.default.getSubStringLengTxt(t)},t.prototype.getReplaceStrToStar=function(t){return r.default.getReplaceStrToStar(t)},t.instance=new e,t=e=n([a],t)}());o.TBAdapter=c.instance,cc._RF.pop()},{"../../../common/utils/Utils":void 0}],TBAniByServer:[function(t,e,o){"use strict";cc._RF.push(e,"f95aaINWQFCGbtkR9mAED6X","TBAniByServer");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./TBAdapter"),a=t("../../../manager/DataManager"),c=t("../../../manager/AudioManager"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttomSp=null,e.touOneSp=null,e.touTwoSp=null,e.touThreeSp=null,e.node_result=null,e.touziSprList=[],e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.onOpenAniNotify=function(t){if(void 0==t[0]){var e=i.TBAdapter.getRandomInt(1,6),o=i.TBAdapter.getRandomInt(1,6),n=i.TBAdapter.getRandomInt(1,6);t=[e,o,n]}this.buttomSp.setAnimation(0,"animation",!1),this.touOneSp.setAnimation(0,t[0],!1),this.touTwoSp.setAnimation(0,t[1],!1),this.touThreeSp.setAnimation(0,t[2],!1),this.scheduleOnce(function(){this.setResultOpen(t)},3)},e.prototype.setTouState=function(t){this.node.active=t},e.prototype.setResultOpen=function(t){this.node_result.active=!0,this.node_result.getChildByName("touzi_1").getComponent(cc.Sprite).spriteFrame=this.touziSprList[t[0]-1],this.node_result.getChildByName("touzi_2").getComponent(cc.Sprite).spriteFrame=this.touziSprList[t[1]-1],this.node_result.getChildByName("touzi_3").getComponent(cc.Sprite).spriteFrame=this.touziSprList[t[2]-1],this.node_result.getChildByName("txt1").getComponent(cc.Label).string=t[0]+t[1]+t[2],this.node_result.getChildByName("txt2").getComponent(cc.Label).string=this.boolBig(t),this.node_result.getChildByName("txt3").getComponent(cc.Label).string=this.boolSigle(t[0]+t[1]+t[2]);var e=1==a.DataManager.userInfo.sex?"male":"female";c.AudioManager.playGameSFX(e+"/"+Number(t[0]+t[1]+t[2])),this.scheduleOnce(function(){this.resetView()},1.5)},e.prototype.boolBig=function(t){var e="",o=t[0]+t[1]+t[2];return o>=3&&o<=10?e="\u5c0f":o>10&&o<=18&&(e="\u5927"),t[0]==t[1]&&t[1]==t[2]&&(e="\u56f4\u9ab0"),e},e.prototype.boolSigle=function(t){return t%2==0?"\u53cc":"\u5355"},e.prototype.resetView=function(){this.node.active=!1,this.node_result.active=!1},r([p(sp.Skeleton)],e.prototype,"buttomSp",void 0),r([p(sp.Skeleton)],e.prototype,"touOneSp",void 0),r([p(sp.Skeleton)],e.prototype,"touTwoSp",void 0),r([p(sp.Skeleton)],e.prototype,"touThreeSp",void 0),r([p(cc.Node)],e.prototype,"node_result",void 0),r([p(cc.SpriteFrame)],e.prototype,"touziSprList",void 0),e=r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../manager/AudioManager":void 0,"../../../manager/DataManager":void 0,"./TBAdapter":"TBAdapter"}],TBBetArea:[function(t,e,o){"use strict";cc._RF.push(e,"94a58bn62BC2Z3Dq4x+G6XY","TBBetArea");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./TBChrome"),a=t("./TBAdapter"),c=t("../TBDefine"),s=t("../../../manager/NetManager"),l=t("../../../manager/UIManager"),p=t("../../../manager/EventManager"),u=cc._decorator,h=u.ccclass,d=u.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.blink=null,e.bet_node=null,e.bet_num=null,e.bet_numall=null,e.chrome_area=null,e.btn_bet=null,e.black_bg=null,e.chrome=null,e.bet_idx=0,e.chrome_pool=null,e}return n(e,t),e.prototype.onLoad=function(){this.resetArea(),this.chrome_pool=new cc.NodePool,a.TBAdapter.addClickEventEND(this.btn_bet,this.onBetEvent.bind(this))},e.prototype.onDestroy=function(){this.chrome_pool.clear()},e.prototype.resetArea=function(){this.bet_num.string="",this.bet_numall.string="",this.blink.active=!1,this.bet_node.active=!1,this.black_bg.active=!1,this.removeAreaChip()},e.prototype.createChip=function(t){var e=null;return(e=this.chrome_pool.size()>0?this.chrome_pool.get():cc.instantiate(this.chrome)).getComponent(i.default).setViewChip(t),e},e.prototype.clearChip=function(t){(t=t||this.chrome_area.children[0]).stopAllActions(),this.chrome_pool.put(t),t.removeFromParent()},e.prototype.removeAreaChip=function(){for(var t=this.chrome_area.childrenCount,e=0;e<t;e++)this.clearChip()},e.prototype.onBetChipAni=function(t){var e=-(cc.view.getVisibleSize().width/2+this.node.x+100),o=a.TBAdapter.getRandomInt(-150,150),n=this.getRandMaxNum(t),r=a.TBAdapter.getRandomInt(0,n),i=s.NetManager.getGameProtocol().BET_CHROME_VALUE[r],c=this.createChip(i);c.setPosition(cc.v2(e,o));var l=a.TBAdapter.getRandomInt(-this.node.width/2+30,this.node.width/2-30),p=a.TBAdapter.getRandomInt(-this.node.height/2+30,this.node.height/2-30),u=a.TBAdapter.getRandomInt(-360,360),h=cc.moveTo(.2,cc.v2(l,p)),d=cc.rotateTo(.3,u);c.runAction(cc.spawn(h,d)),this.chrome_area.addChild(c),this.scheduleOnce(function(){this.clearChip(c)},1)},e.prototype.getRandMaxNum=function(t){for(var e=0;e<s.NetManager.getGameProtocol().BET_CHROME_VALUE.length;e++)if(t<s.NetManager.getGameProtocol().BET_CHROME_VALUE[e])return e-1;return 4},e.prototype.onUserBetChipAni=function(t,e){var o=t.convertToWorldSpaceAR(cc.v2(0,0)),n=this.chrome_area.convertToNodeSpaceAR(o),r=this.createChip(e);r.setPosition(cc.v2(n.x,n.y));var i=a.TBAdapter.getRandomInt(-this.node.width/2+30,this.node.width/2-30),c=a.TBAdapter.getRandomInt(-this.node.height/2+30,this.node.height/2-30),s=a.TBAdapter.getRandomInt(-360,360),l=cc.moveTo(.2,cc.v2(i,c)),p=cc.rotateTo(.3,s);r.runAction(cc.spawn(l,p)),this.chrome_area.addChild(r),this.scheduleOnce(function(){this.clearChip(r)},1)},e.prototype.onRecoverChipInAre=function(t){var e=this;t.forEach(function(t,o){var n=e.createChip(t),r=a.TBAdapter.getRandomInt(c.AreaValue.Min.x,c.AreaValue.Max.x),i=a.TBAdapter.getRandomInt(c.AreaValue.Min.y,c.AreaValue.Max.y),s=a.TBAdapter.getRandomInt(-360,360);n.setPosition(cc.v2(r,i)),n.angle=s,n.active=!0,e.chrome_area.addChild(n)})},e.prototype.onAreaToBanker=function(t){for(var e=this,o=this.node.parent.parent.convertToWorldSpaceAR(t),n=this.node.convertToNodeSpaceAR(o),r=this.chrome_area.childrenCount,i=function(t){var o=a.chrome_area.children[t],r=cc.moveTo(.5,cc.v2(n.x,n.y)),i=cc.sequence(r,cc.callFunc(function(){e.clearChip(o)}));o.runAction(i)},a=this,c=0;c<r;c++)i(c)},e.prototype.onBankerToArea=function(t){for(var e=this,o=this.node.parent.parent.convertToWorldSpaceAR(t),n=this.node.convertToNodeSpaceAR(o),r=a.TBAdapter.getRandomInt(5,15),i=0;i<r;i++){var l=n.x+a.TBAdapter.getRandomInt(-50,50),p=n.y+a.TBAdapter.getRandomInt(-50,50),u=a.TBAdapter.getRandomInt(c.AreaValue.Min.x,c.AreaValue.Max.x),h=a.TBAdapter.getRandomInt(c.AreaValue.Min.y,c.AreaValue.Max.y),d=a.TBAdapter.getRandomInt(0,4),f=s.NetManager.getGameProtocol().BET_CHROME_VALUE[d],_=this.createChip(f);_.setPosition(cc.v2(l,p));var m=cc.moveTo(.5,cc.v2(u,h));_.runAction(m),this.chrome_area.addChild(_)}this.scheduleOnce(function(){e.onAreaToPlayer()},.6)},e.prototype.onAreaToPlayer=function(){for(var t=this,e=-(cc.view.getVisibleSize().width/2+this.node.x+100),o=this.chrome_area.childrenCount,n=function(o){var n=r.chrome_area.children[o],i=a.TBAdapter.getRandomInt(-150,150),c=cc.moveTo(.5,cc.v2(e,i)),s=cc.sequence(c,cc.callFunc(function(){t.clearChip(n)}));n.runAction(s)},r=this,i=0;i<o;i++)n(i)},e.prototype.setCarMultiple=function(t){},e.prototype.showBetNum=function(t,e){this.bet_num.string=e,this.bet_numall.string=t,this.bet_node.active=!0},e.prototype.showOtherBetNum=function(t){this.bet_num.string=t},e.prototype.showBetBlink=function(){var t=cc.blink(1,4);this.blink.active=!0,this.blink.opacity=0,this.blink.runAction(t)},e.prototype.showBlink=function(){var t=cc.blink(1,4);this.blink.active=!0,this.blink.opacity=255,this.blink.runAction(t),this.black_bg.active=!1},e.prototype.hideBlink=function(){this.blink.active=!1},e.prototype.showBlackBg=function(){this.black_bg.active=!0},e.prototype.onBetEvent=function(t){if(s.NetManager.getGameProtocol().CAN_BET_STATE)if(s.NetManager.getGameProtocol().AUTO_BET&&s.NetManager.getGameProtocol().ALREAD_BET)l.UIManager.showTips("\u7eed\u62bc\u4e2d\u65e0\u6cd5\u624b\u52a8\u4e0b\u6ce8\uff0c\u8bf7\u53d6\u6d88\u7eed\u62bc\u540e\u91cd\u8bd5");else{p.EventManager.emit("UserSendBetReq","");var e=s.NetManager.getGameProtocol().CUR_BET_CHROME_VALUE;s.NetManager.getGameProtocol().sendBetReq(e,this.bet_idx)}else l.UIManager.showTips("\u975e\u4e0b\u6ce8\u72b6\u6001, \u8bf7\u7b49\u5f85")},r([d(cc.Node)],e.prototype,"blink",void 0),r([d(cc.Node)],e.prototype,"bet_node",void 0),r([d(cc.Label)],e.prototype,"bet_num",void 0),r([d(cc.Label)],e.prototype,"bet_numall",void 0),r([d(cc.Node)],e.prototype,"chrome_area",void 0),r([d(cc.Node)],e.prototype,"btn_bet",void 0),r([d(cc.Node)],e.prototype,"black_bg",void 0),r([d(cc.Prefab)],e.prototype,"chrome",void 0),r([d],e.prototype,"bet_idx",void 0),e=r([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../manager/EventManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"../TBDefine":"TBDefine","./TBAdapter":"TBAdapter","./TBChrome":"TBChrome"}],TBBetList:[function(t,e,o){"use strict";cc._RF.push(e,"499cfmhu25Jy5NwstWwqzge","TBBetList");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,a=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.item_rank=null,e.ranks_node=null,e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.initItem=function(){var t=cc.instantiate(this.item_rank);this.node.addChild(t),this.ranks_node=t},e.prototype.resetView=function(t){this.ranks_node.getChildByName("node_bet"+t).getComponent("TBBetArea").resetArea()},e.prototype.BetChipTag=function(t,e,o){this.ranks_node.getChildByName("node_bet"+t).getComponent("TBBetArea").onUserBetChipAni(e,o)},e.prototype.otherBetChipTag=function(t,e){this.ranks_node.getChildByName("node_bet"+t).getComponent("TBBetArea").onBetChipAni(e)},e.prototype.showBetBlink=function(t){this.ranks_node.getChildByName("node_bet"+t).getComponent("TBBetArea").showBetBlink()},e.prototype.showBlink=function(t){this.ranks_node.getChildByName("node_bet"+t).getComponent("TBBetArea").showBlink()},e.prototype.showBetNum=function(t,e,o){this.ranks_node.getChildByName("node_bet"+t).getComponent("TBBetArea").showBetNum(e,o)},e.prototype.showOtherBetNum=function(t,e){this.ranks_node.getChildByName("node_bet"+t).getComponent("TBBetArea").showOtherBetNum(e)},e.prototype.showBlackBg=function(t){this.ranks_node.getChildByName("node_bet"+t).getComponent("TBBetArea").showBlackBg()},r([c(cc.Prefab)],e.prototype,"item_rank",void 0),e=r([a],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],TBChromeBet:[function(t,e,o){"use strict";cc._RF.push(e,"2cafbUvWcRPJao540TzaJjW","TBChromeBet");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./TBAdapter"),a=t("../../../manager/NetManager"),c=t("../../../manager/EventManager"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_bets=[],e.click_idx=0,e.bet_num=[],e.chrome_blink=[],e.is_move=!1,e}return n(e,t),e.prototype.onLoad=function(){var t=this;this.btn_bets.forEach(function(e,o){i.TBAdapter.addClickEventEND(e,t.onChromeClick.bind(t),o);var n=e.getChildByName("num");t.bet_num.push(n);var r=e.getChildByName("blink");r.opacity=0,t.chrome_blink.push(r),0==o&&(e.y=15,r.opacity=255)}),c.EventManager.on(this,"UserSendBetReq",this.getBetValue.bind(this))},e.prototype.SetBetValue=function(){var t=this;a.NetManager.getGameProtocol().BET_CHROME_VALUE.forEach(function(e,o){var n=t.bet_num[o],r="";r=e>=1e3&&e<1e4?e/1e3+"K":e>=1e4?e/1e4+"W":e+"",n.getComponent(cc.Label).string=r})},e.prototype.onChromeClick=function(t,e){var o=this;if(!this.is_move&&e!=this.click_idx){var n=this.click_idx;this.is_move=!0,this.click_idx=e,this.btn_bets.forEach(function(t,e){t.stopAllActions()});var r=this.btn_bets[n],i=cc.moveTo(.3,cc.v2(r.x,0));r.runAction(i),this.chrome_blink[n].opacity=0,this.chrome_blink[e].opacity=255;var a=cc.sequence(cc.moveTo(.3,cc.v2(t.x,15)),cc.callFunc(function(){o.is_move=!1}));t.runAction(a)}},e.prototype.getBetValue=function(){var t=a.NetManager.getGameProtocol().BET_CHROME_VALUE;return a.NetManager.getGameProtocol().CUR_BET_CHROME_VALUE=t[this.click_idx],t[this.click_idx]},r([p(cc.Node)],e.prototype,"btn_bets",void 0),e=r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../manager/EventManager":void 0,"../../../manager/NetManager":void 0,"./TBAdapter":"TBAdapter"}],TBChrome:[function(t,e,o){"use strict";cc._RF.push(e,"2f1d8qvvzhN6LsJrab5N4r4","TBChrome");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../manager/NetManager"),a=cc._decorator,c=a.ccclass,s=a.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ttf_font=null,e.fnt_bg=null,e.fnt_num=null,e.FNT_NUM_LIST=["Z","X","C","V","B"],e}return n(e,t),e.prototype.setViewChip=function(t){var e=this.node.getChildByName("num_node");e&&this.node.removeChild(e);var o="";o=t>=1e3&&t<1e4?(t/1e3).toString().slice(0,3)+"K":t>=1e4?(t/1e4).toString().slice(0,3)+"W":t,this.fnt_num.string=o;for(var n=i.NetManager.getGameProtocol().BET_CHROME_VALUE,r=0;r<n.length;r++){if(t==n[r]){this.fnt_bg.string=this.FNT_NUM_LIST[r];break}}},r([s(cc.Font)],e.prototype,"ttf_font",void 0),r([s(cc.Label)],e.prototype,"fnt_bg",void 0),r([s(cc.Label)],e.prototype,"fnt_num",void 0),e=r([c],e)}(cc.Component);o.default=l,cc._RF.pop()},{"../../../manager/NetManager":void 0}],TBCmd:[function(t,e,o){"use strict";cc._RF.push(e,"d695enoI2lBzaiKnIZ5e62r","TBCmd"),Object.defineProperty(o,"__esModule",{value:!0}),o.TBCmd="223_0",o.ProtocolTBCmd={GameStartNotify:o.TBCmd+"_game_start_notify",StartBetNotify:o.TBCmd+"_start_bet_notify",OpenNotify:o.TBCmd+"_open_notify",WaitNotify:o.TBCmd+"_wait_notify",GameConcludeNotify:o.TBCmd+"_game_conclude_notify",BetRes:o.TBCmd+"_bet_res",GameReconnectInfo:o.TBCmd+"_game_reconnect_info",OtherBetNotify:o.TBCmd+"_other_bet_notify",OnlineListRes:o.TBCmd+"_player_list_res"},cc._RF.pop()},{}],TBDefine:[function(t,e,o){"use strict";cc._RF.push(e,"a5723PkF25NT7rfuNGyE7wN","TBDefine"),Object.defineProperty(o,"__esModule",{value:!0}),o.AreaValue={Min:{x:-108,y:-25},Max:{x:108,y:30}},o.EventDefine={HideAutoView:"HideAutoView"},cc._RF.pop()},{}],TBFooter:[function(t,e,o){"use strict";cc._RF.push(e,"5856bc7TZ1NAYhO05/F+OQk","TBFooter");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../manager/NetManager"),a=t("../../../manager/UIManager"),c=t("../../../manager/DataManager"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_continue=null,e.GameView=null,e.can_click=!1,e.select1=null,e.select2=null,e.autoRed=null,e}return n(e,t),e.prototype.onLoad=function(){this.select1=this.btn_continue.getChildByName("btn_off1"),this.select2=this.btn_continue.getChildByName("btn_off2"),this.autoRed=this.btn_continue.getChildByName("btn_on"),this.select1.active=!this.can_click,this.select2.active=this.can_click,this.autoRed.active=this.can_click,this.btn_continue.getComponent(cc.Button).interactable=!1},e.prototype.onContinueEvent=function(t){if(this.can_click=!this.can_click,this.can_click)if(i.NetManager.getGameProtocol().ALREAD_BET_CHROME_VALUE.length<=0)a.UIManager.showTips("\u4e0a\u5c40\u672a\u4e0b\u6ce8\uff0c\u4e0d\u53ef\u7eed\u62bc");else{var e=0;i.NetManager.getGameProtocol().ALREAD_BET_CHROME_VALUE.forEach(function(t,o){e+=Number(t.my_bet_Coins)}),c.DataManager.userInfo.gold>e?this.GameView.already_bet?(a.UIManager.showTips("\u5f53\u524d\u5df2\u4e0b\u6ce8\uff0c\u4e0d\u53ef\u7eed\u62bc"),this.can_click=!this.can_click):(a.UIManager.showTips("\u7eed\u62bc\u6210\u529f"),this.setContinue(),this.sendContinueReq()):(this.setBtnContinue(!1),a.UIManager.showTips("\u91d1\u5e01\u4e0d\u8db3\uff0c\u8bf7\u56de\u5927\u5385\u5145\u503c"))}else this.setBtnContinue(!0),a.UIManager.showTips("\u53d6\u6d88\u7eed\u62bc\u6210\u529f");i.NetManager.getGameProtocol().AUTO_BET=this.can_click},e.prototype.sendContinueReq=function(){1==this.can_click&&1==i.NetManager.getGameProtocol().CAN_BET_STATE&&i.NetManager.getGameProtocol().ALREAD_BET_CHROME_VALUE.forEach(function(t,e){i.NetManager.getGameProtocol().sendBetReq(Number(t.my_bet_Coins),t.loc)})},e.prototype.setBtnContinue=function(t){t?(this.can_click=!1,this.select1.active=!1,this.select2.active=!0,this.autoRed.active=!1,this.btn_continue.getComponent(cc.Button).interactable=!0):(this.can_click=!1,this.select1.active=!0,this.select2.active=!1,this.autoRed.active=!1,this.btn_continue.getComponent(cc.Button).interactable=!1),i.NetManager.getGameProtocol().AUTO_BET=this.can_click},e.prototype.setContinue=function(){this.can_click=!0,this.select1.active=!1,this.select2.active=!0,this.autoRed.active=!0,this.btn_continue.getComponent(cc.Button).interactable=!0},e.prototype.getClickState=function(){return this.can_click},r([p(cc.Node)],e.prototype,"btn_continue",void 0),e=r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../manager/DataManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0}],TBGameScene:[function(t,e,o){"use strict";cc._RF.push(e,"f560d6Aa8lERpgoD1EVE1aw","TBGameScene");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./TBGameView"),a=t("../../../manager/EventManager"),c=t("../../../net/NetCmd"),s=t("../protocol/TBCmd"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.GameView=null,e}return n(e,t),e.prototype.onLoad=function(){cc.sys.os!=cc.sys.OS_IOS&&(cc.dynamicAtlasManager.enabled=!0),this.GameView.GameScene=this,this.initData(),this.initEvent()},e.prototype.initData=function(){},e.prototype.initEvent=function(){a.EventManager.on(this,c.ProtocolGameCmd.GameLoginResp,this.onGameLoginResp.bind(this)),a.EventManager.on(this,s.ProtocolTBCmd.GameStartNotify,this.onGameStartNotify.bind(this)),a.EventManager.on(this,s.ProtocolTBCmd.StartBetNotify,this.onStartBetNotify.bind(this)),a.EventManager.on(this,s.ProtocolTBCmd.WaitNotify,this.onWaitNotify.bind(this)),a.EventManager.on(this,s.ProtocolTBCmd.OpenNotify,this.onOpenNotify.bind(this)),a.EventManager.on(this,s.ProtocolTBCmd.BetRes,this.onBetNotify.bind(this)),a.EventManager.on(this,s.ProtocolTBCmd.OtherBetNotify,this.onOtherBetNotify.bind(this)),a.EventManager.on(this,s.ProtocolTBCmd.GameConcludeNotify,this.onGameConcludeNotify.bind(this)),a.EventManager.on(this,s.ProtocolTBCmd.GameReconnectInfo,this.onGameReconnectInfo.bind(this)),a.EventManager.on(this,s.ProtocolTBCmd.OnlineListRes,this.onGetOnlineUserRes.bind(this))},e.prototype.onGameLoginResp=function(t){console.log("\u6548\u9a8c\u6210\u529f====>",t),this.GameView.initUserInfo()},e.prototype.onGameStartNotify=function(t){console.log("\u6e38\u620f\u5f00\u59cb"),this.GameView.onGameStart(t)},e.prototype.onStartBetNotify=function(t){console.log("\u901a\u77e5\u5f00\u59cb\u4e0b\u6ce8"),this.GameView.onStartBet(t)},e.prototype.onOpenNotify=function(t){console.log("\u901a\u77e5\u5f00\u5956"),this.GameView.onOpenNotify(t)},e.prototype.onWaitNotify=function(t){console.log("\u901a\u77e5\u7b49\u5f85"),this.GameView.onWaitNotify(t)},e.prototype.onBetNotify=function(t){console.log("\u7528\u6237\u4e0b\u6ce8\u901a\u77e5",t),this.GameView.onBetNotify(t)},e.prototype.onOtherBetNotify=function(t){console.log("\u6e38\u620f\u5728\u7ebf\u73a9\u5bb6\u4e0b\u6ce8\u901a\u77e5",t),this.GameView.onOtherBetNotify(t)},e.prototype.onGameConcludeNotify=function(t){console.log("\u7ed3\u7b97\u901a\u77e5",t),this.GameView.onGameConcludeNotify(t)},e.prototype.onGameReconnectInfo=function(t){console.log("\u52a0\u5165\u623f\u95f4\u901a\u77e5",t),this.GameView.onSubJoinRoom(t)},e.prototype.onGetOnlineUserRes=function(t){console.log("\u5728\u7ebf\u4eba\u6570\u8fd4\u56de",t),this.GameView.onGetOnlineUserRes(t)},e.prototype.onContinueSameBetRes=function(t){console.log("\u7eed\u6295\u56de\u5e94",t)},e.prototype.onDestroy=function(){a.EventManager.off(this)},r([u(i.default)],e.prototype,"GameView",void 0),e=r([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../manager/EventManager":void 0,"../../../net/NetCmd":void 0,"../protocol/TBCmd":"TBCmd","./TBGameView":"TBGameView"}],TBGameView:[function(t,e,o){"use strict";cc._RF.push(e,"e82095aT6ZOjpqewtDBVJnR","TBGameView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./TBAdapter"),a=t("./TBTopPanel"),c=t("./TBRecord"),s=t("./TBChromeBet"),l=t("./TBBetList"),p=t("./TBAniByServer"),u=t("./TBPlayer"),h=t("./TBFooter"),d=t("./TBOnlinePlayer"),f=t("../../../manager/AudioManager"),_=t("../../../manager/DataManager"),m=t("../../../manager/NetManager"),y=t("../../../manager/UIManager"),g=cc._decorator,B=g.ccclass,v=g.property,T=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.TBPlayer=null,e.TBFooter=null,e.TBChromeBet=null,e.TBRecord=null,e.TBBetAreaList=[],e.TBOnlinePlayer=null,e.TBTopPanel=null,e.TBAniByServer=null,e.user_node=null,e.start_bet=null,e.stop_bet=null,e.GameScene=null,e.already_auto=!1,e.already_bet=!1,e.first_come=!1,e.LIMIT_BET_NUM=[],e}return n(e,t),e.prototype.onLoad=function(){this.TBFooter.GameView=this},e.prototype.start=function(){f.AudioManager.stopBGM(),this.initBetArea()},e.prototype.initBetArea=function(){var t=this;this.TBBetAreaList.forEach(function(e,o){e.GameView=t,e.initItem()})},e.prototype.initUserInfo=function(){var t={username:i.TBAdapter.getSubStringLengTxt(_.DataManager.userInfo.nickname)||i.TBAdapter.getReplaceStrToStar(_.DataManager.userInfo.userid),gold:_.DataManager.userInfo.gold,headimg_id:_.DataManager.userInfo.headimgurl};this.TBPlayer.setUserInfo(t)},e.prototype.onSubJoinRoom=function(t){var e=this;f.AudioManager.playGameBGM("qzpj_bgm");var o=t.game_state;1==o?this.TBTopPanel.hideViewTips():2==o?this.TBTopPanel.setViewTips(4):3==o?this.TBTopPanel.setViewTips(2):4==o?this.TBTopPanel.setViewTips(1):5==o&&this.TBTopPanel.setViewTips(0),m.NetManager.getGameProtocol().ALREAD_BET_CHROME_VALUE=t.player_last_bet,this.LIMIT_BET_NUM=t.litmitNumber,this.TBPlayer.resetView(),this.TBTopPanel.setRoomInfo(t.room_info.room_code),_.DataManager.userInfo.gold=t.gold,this.TBPlayer.setUserScore(t.gold),m.NetManager.getGameProtocol().BET_CHROME_VALUE=t.bet_conis_value,this.TBChromeBet.SetBetValue(),this.already_bet=!1,m.NetManager.getGameProtocol().ALREAD_BET=this.already_bet,t.oneJuBet.forEach(function(t,o){var n=e.getBetIndex(t.loc);e.TBBetAreaList[n].showBetNum(t.loc,t.my_bet_Coins,t.total_bet_coins)});var n=t.history;this.TBRecord.recoverRecord(n,!0),this.TBRecord.setRightRecord(t.history_nums);var r=t.last_open_arry;console.log("\u4e0a\u5c40\u4e2d\u5956\u4f4d\u7f6e",r);t.new_open_arry;this.already_auto=!1,this.TBFooter.setBtnContinue(!1),m.NetManager.getGameProtocol().CAN_BET_STATE=o<=2;t.time_out;this.TBTopPanel.onKillTimer(),this.TBTopPanel.setGameTimer({limit_time:t.time_out,playAudio:2==o,vibrate:2==o})},e.prototype.onGameStart=function(t){m.NetManager.protocolGameCommon.needFlushGold=!1,this.already_bet=!1,m.NetManager.getGameProtocol().ALREAD_BET=this.already_bet,m.NetManager.getGameProtocol().ALREAD_BET_CHROME_VALUE=t.player_last_bet,this.TBTopPanel.setRoomInfo(t.room_info.room_code),this.TBTopPanel.hideViewTips();t.time_out;for(var e=1;e<=52;e++){var o=this.getBetIndex(e);this.TBBetAreaList[o].resetView(e)}this.TBPlayer.resetView()},e.prototype.showStartBetAni=function(){var t=this,e=cc.view.getVisibleSize(),o=cc.instantiate(this.start_bet),n=-(e.width+o.width)/2;o.position=cc.v2(n,0),cc.tween(o).to(.5,{position:cc.v2(0,0)}).to(.5,{opacity:0}).start(),this.node.addChild(o),this.scheduleOnce(function(){t.node.removeChild(o)},1)},e.prototype.onStartBet=function(t){if(this.showStartBetAni(),0==this.TBFooter.getClickState())if(m.NetManager.getGameProtocol().ALREAD_BET_CHROME_VALUE.length<=0)this.TBFooter.setBtnContinue(!1);else{var e=0;m.NetManager.getGameProtocol().ALREAD_BET_CHROME_VALUE.forEach(function(t,o){e+=Number(t.my_bet_Coins)}),_.DataManager.userInfo.gold>e?this.TBFooter.setBtnContinue(!0):this.TBFooter.setBtnContinue(!1)}m.NetManager.getGameProtocol().CAN_BET_STATE=!0,this.TBFooter.sendContinueReq();t.time_out;this.TBTopPanel.onKillTimer(),this.TBTopPanel.setGameTimer({limit_time:t.time_out,playAudio:!0,vibrate:!0}),this.TBTopPanel.setViewTips(4)},e.prototype.onOpenNotify=function(t){m.NetManager.getGameProtocol().CAN_BET_STATE=!1,this.showEndBetAni(),this.TBAniByServer.setTouState(!0),this.TBAniByServer.onOpenAniNotify(t.open_nums),this.TBTopPanel.setViewTips(2),this.TBTopPanel.onKillTimer(),this.TBTopPanel.setGameTimer({limit_time:t.time_out}),this.scheduleOnce(function(){this.TBRecord.addRecord(t.open_nums)},t.time_out)},e.prototype.onWaitNotify=function(t){this.TBTopPanel.setViewTips(0),this.TBTopPanel.onKillTimer(),this.TBTopPanel.setGameTimer({limit_time:t.time_out})},e.prototype.getBetIndex=function(t){var e=0;return t<=17?e=0:t<=31?e=1:t<=46?e=2:t<=52&&(e=3),e},e.prototype.onBetNotify=function(t){if(1==t.result){_.DataManager.userInfo.gold=t.gold,this.TBPlayer.setUserScore(t.gold);var e=this.getBetIndex(t.betInfo.loc);this.TBBetAreaList[e].BetChipTag(t.betInfo.loc,this.user_node,t.betConis),this.TBBetAreaList[e].showBetBlink(t.betInfo.loc),this.TBBetAreaList[e].showBetNum(t.betInfo.loc,t.betInfo.my_bet_Coins,t.betInfo.total_bet_coins),this.TBPlayer.shakeHead(),this.already_bet=!0,m.NetManager.getGameProtocol().ALREAD_BET=this.already_bet,this.TBTopPanel.pauseVibrate(),this.TBTopPanel.pauseAudio()}else 2==t.result?y.UIManager.showTips("\u8be5\u533a\u57df\u8fbe\u5230\u9650\u5236"):3==t.result?(y.UIManager.showTips("\u91d1\u5e01\u4e0d\u8db3"),this.TBFooter.setBtnContinue(!1)):y.UIManager.showTips("\u975e\u4e0b\u6ce8\u72b6\u6001, \u8bf7\u7b49\u5f85")},e.prototype.onOtherBetNotify=function(t){var e=this;t.bet_info.forEach(function(t,o){var n=e.getBetIndex(t.loc);e.TBBetAreaList[n].otherBetChipTag(t.loc,t.total_bet_coins),e.TBBetAreaList[n].showOtherBetNum(t.loc,t.total_bet_coins)})},e.prototype.showEndBetAni=function(){var t=this,e=cc.view.getVisibleSize(),o=cc.instantiate(this.stop_bet),n=-(e.width+o.width)/2;o.position=cc.v2(n,0),cc.tween(o).to(.5,{position:cc.v2(0,0)}).to(.5,{opacity:0}).start(),this.node.addChild(o),this.scheduleOnce(function(){t.node.removeChild(o)},1)},e.prototype.onGameConcludeNotify=function(t){var e=this;_.DataManager.userInfo.gold=t.gold,this.TBPlayer.setUserScore(t.gold),this.TBRecord.setRightRecord(t.history_nums);var o=t.time_out;this.TBTopPanel.onKillTimer(),this.TBTopPanel.setGameTimer({limit_time:o}),this.TBTopPanel.setViewTips(1),this.already_bet&&this.TBPlayer.flutterScore(t.score,cc.v2(0,0),function(){});for(var n=1;n<=52;n++){var r=this.getBetIndex(n);this.TBBetAreaList[r].showBlackBg(n)}t.win_loc.forEach(function(t,o){var n=e.getBetIndex(t);e.TBBetAreaList[n].showBlink(t)}),this.scheduleOnce(function(){for(var t=1;t<=52;t++){var e=this.getBetIndex(t);this.TBBetAreaList[e].resetView(t)}},o)},e.prototype.onGetOnlineUserRes=function(t){this.TBOnlinePlayer.refPeopleTips(t.totalplayers),this.TBOnlinePlayer.refUserList(t.player_list),this.TBOnlinePlayer.playMoveOut()},r([v(u.default)],e.prototype,"TBPlayer",void 0),r([v(h.default)],e.prototype,"TBFooter",void 0),r([v(s.default)],e.prototype,"TBChromeBet",void 0),r([v(c.default)],e.prototype,"TBRecord",void 0),r([v(l.default)],e.prototype,"TBBetAreaList",void 0),r([v(d.default)],e.prototype,"TBOnlinePlayer",void 0),r([v(a.default)],e.prototype,"TBTopPanel",void 0),r([v(p.default)],e.prototype,"TBAniByServer",void 0),r([v(cc.Node)],e.prototype,"user_node",void 0),r([v(cc.Prefab)],e.prototype,"start_bet",void 0),r([v(cc.Prefab)],e.prototype,"stop_bet",void 0),e=r([B],e)}(cc.Component);o.default=T,cc._RF.pop()},{"../../../manager/AudioManager":void 0,"../../../manager/DataManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"./TBAdapter":"TBAdapter","./TBAniByServer":"TBAniByServer","./TBBetList":"TBBetList","./TBChromeBet":"TBChromeBet","./TBFooter":"TBFooter","./TBOnlinePlayer":"TBOnlinePlayer","./TBPlayer":"TBPlayer","./TBRecord":"TBRecord","./TBTopPanel":"TBTopPanel"}],TBOnlinePlayer:[function(t,e,o){"use strict";cc._RF.push(e,"1ab9c4nxRNJYYkV9rMVts9n","TBOnlinePlayer");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./TBAdapter"),a=t("../../../manager/NetManager"),c=t("../../../common/UIHelper"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cancel=null,e.spr=null,e.arrow=null,e.btn_click=null,e.user_panel=null,e.tips=null,e.ScrollView=null,e.user_item=null,e.is_move_out=!1,e.is_done=!0,e}return n(e,t),e.prototype.start=function(){var t=this;i.TBAdapter.addClickEventEND(this.btn_click,function(){t.onClickEvent()}),i.TBAdapter.addClickEventEND(this.cancel,function(){t.onCancelEvent()})},e.prototype.onClickEvent=function(){this.is_done?(this.is_done=!1,this.is_move_out?this.playMoveBack():a.NetManager.getGameProtocol().sendGetOnlineUser()):console.log("\u52a8\u753b\u8fd8\u672a\u7ed3\u675f \u4e0d\u53ef\u70b9\u51fb")},e.prototype.onCancelEvent=function(){this.is_done?this.is_move_out?(this.is_done=!1,this.playMoveBack()):console.log("\u672a\u79fb\u52a8\u51fa\u53bb"):console.log("\u52a8\u753b\u8fd8\u672a\u7ed3\u675f \u4e0d\u53ef\u70b9\u51fb")},e.prototype.playMoveOut=function(){var t=this;this.user_panel.active=!0,this.arrow.scaleX=-1,this.is_move_out=!0;var e=cc.sequence(cc.moveBy(.5,cc.v2(this.user_panel.width,0)),cc.callFunc(function(){t.is_done=!0}));this.spr.runAction(e)},e.prototype.playMoveBack=function(){var t=this;this.arrow.scaleX=1;var e=cc.sequence(cc.moveBy(.5,cc.v2(-this.user_panel.width,0)),cc.callFunc(function(){t.user_panel.active=!1,t.is_done=!0,t.is_move_out=!1}));this.spr.runAction(e)},e.prototype.refPeopleTips=function(t){this.tips.string="\u672c\u684c\u5171"+t+"\u4eba\u968f\u673a\n\u663e\u793a\u4e0a\u5c4020\u540d\u4e0b\u6ce8\u73a9\u5bb6"},e.prototype.refUserList=function(t){var e=this,o=cc.find("view/content",this.ScrollView);o.removeAllChildren(),t.forEach(function(t,n){var r=cc.instantiate(e.user_item);r.active=!0;var a=r.getChildByName("head"),s=r.getChildByName("name"),l=r.getChildByName("gold");c.default.setHeadIcon(t.headimg_id,a),s.getComponent(cc.Label).string=i.TBAdapter.getSubStringLengTxt(t.username)||i.TBAdapter.getReplaceStrToStar(t.player_id),l.getComponent(cc.Label).string=parseFloat(t.gold).toFixed(2),o.addChild(r)})},r([p(cc.Node)],e.prototype,"cancel",void 0),r([p(cc.Node)],e.prototype,"spr",void 0),r([p(cc.Node)],e.prototype,"arrow",void 0),r([p(cc.Node)],e.prototype,"btn_click",void 0),r([p(cc.Node)],e.prototype,"user_panel",void 0),r([p(cc.Label)],e.prototype,"tips",void 0),r([p(cc.Node)],e.prototype,"ScrollView",void 0),r([p(cc.Node)],e.prototype,"user_item",void 0),e=r([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../common/UIHelper":void 0,"../../../manager/NetManager":void 0,"./TBAdapter":"TBAdapter"}],TBPlayer:[function(t,e,o){"use strict";cc._RF.push(e,"ac083TNMutHo7hvM29Y03fw","TBPlayer");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./TBAdapter"),a=t("../../../common/UIHelper"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.head=null,e.spr_head=null,e.user_name=null,e.user_money=null,e.flutter=null,e.yellow_bmfont=null,e.grey_bmfont=null,e.interVal=null,e}return n(e,t),e.prototype.onLoad=function(){this.originHeadPos=this.head.position,this.originFlutterPos=this.flutter.node.position},e.prototype.resetView=function(){this.flutter.node.stopAllActions(),this.flutter.node.active=!1,this.flutter.string="",this.unschedule(this.interVal),this.interVal=null},e.prototype.setUserHead=function(t){a.default.setHeadIcon(t,this.spr_head.node)},e.prototype.setUserScore=function(t){this.user_money.string=t},e.prototype.setUserInfo=function(t){var e=t,o=i.TBAdapter.getSubStringLengTxt(t.username)||i.TBAdapter.getReplaceStrToStar(t.player_id);this.user_name.string=o,this.setUserHead(t.headimg_id),this.setUserScore(e.gold)},e.prototype.shakeHead=function(){this.head.stopAllActions(),this.head.position=this.originHeadPos,cc.tween(this.head).by(.05,{position:cc.v2(0,10)}).by(.05,{position:cc.v2(0,-12)}).by(.05,{position:cc.v2(0,2)}).start()},e.prototype.flutterScore=function(t,e,o){var n=this;this.flutter.node.position=this.originFlutterPos,this.flutter.node.active=!0;var r="";t>=0?(this.flutter.font=this.yellow_bmfont,r="+"):(this.flutter.font=this.grey_bmfont,r="-");var i=Math.abs(t),a=i/parseFloat(50..toFixed(2)),c=0,s="";this.interVal=function(){s=(c+=a).toFixed(2),n.flutter.string=r+s,c>=i&&(s=i.toString(),n.flutter.string=r+parseFloat(s).toFixed(2),n.unschedule(n.interVal))},this.schedule(this.interVal,.01,cc.macro.REPEAT_FOREVER);var l=cc.moveBy(.5,e),p=cc.sequence(l,cc.delayTime(.5),cc.callFunc(function(){o&&o()}));this.flutter.node.runAction(p)},e.prototype.onDestroy=function(){this.unschedule(this.interVal),this.interVal=null},r([l(cc.Node)],e.prototype,"head",void 0),r([l(cc.Sprite)],e.prototype,"spr_head",void 0),r([l(cc.Label)],e.prototype,"user_name",void 0),r([l(cc.Label)],e.prototype,"user_money",void 0),r([l(cc.Label)],e.prototype,"flutter",void 0),r([l(cc.Font)],e.prototype,"yellow_bmfont",void 0),r([l(cc.Font)],e.prototype,"grey_bmfont",void 0),e=r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../common/UIHelper":void 0,"./TBAdapter":"TBAdapter"}],TBRecord:[function(t,e,o){"use strict";cc._RF.push(e,"26241et2kNOk7kE40N4SD+v","TBRecord");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("./TBAdapter"),a=t("../../../view/common/List"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_record=null,e.btn_cancel=null,e.node_record=null,e.left_node_record=[],e.right_node_record=[],e.scroll_record=null,e.cur_record=[],e.list_show=!1,e}return n(e,t),e.prototype.onLoad=function(){i.TBAdapter.addClickEventEND(this.btn_record,this.setRecordState.bind(this)),i.TBAdapter.addClickEventEND(this.btn_cancel,this.onTouchCancel.bind(this))},e.prototype.onTouchCancel=function(){this.list_show=!1,this.node_record.active=this.list_show},e.prototype.setRecordState=function(){this.list_show=!this.list_show,this.list_show&&(this.scroll_record.numItems=this.cur_record.length,this.node_record.getChildByName("bg").active=!0),this.node_record.active=this.list_show},e.prototype.boolBig=function(t){var e="",o=t[0]+t[1]+t[2];return o>=3&&o<=10?e="\u5c0f":o>10&&o<=18&&(e="\u5927"),t[0]==t[1]&&t[1]==t[2]&&(e="\u56f4"),e},e.prototype.boolSigle=function(t){return t%2==0?"\u53cc":"\u5355"},e.prototype.addRecord=function(t){var e={open_nums:t};this.cur_record.unshift(e),this.recoverRecord(this.cur_record,!1);var o=cc.blink(1,4);this.left_node_record[0].opacity=255,this.left_node_record[0].runAction(o)},e.prototype.recoverRecord=function(t,e){var o=this;e&&this.onTouchCancel(),this.cur_record=t,console.log("\u521d\u59cb\u5316\u6570\u636e ---------------"),this.scroll_record.numItems=this.cur_record.length,t.forEach(function(t,e){if(e<o.left_node_record.length){o.left_node_record[e].active=!0;var n=o.left_node_record[e].getChildByName("num1").getComponent(cc.Label),r=o.left_node_record[e].getChildByName("num2").getComponent(cc.Label),i=o.left_node_record[e].getChildByName("num3").getComponent(cc.Label),a=o.left_node_record[e].getChildByName("num4").getComponent(cc.Label);n.string=t.open_nums[0],r.string=t.open_nums[1],i.string=t.open_nums[2],a.string=o.boolBig(t.open_nums)+"/"+o.boolSigle(t.open_nums[0]+t.open_nums[1]+t.open_nums[2])}})},e.prototype.setRightRecord=function(t){this.right_node_record.forEach(function(e,o){e.getComponent(cc.Label).string=t[o]})},e.prototype.onListRender=function(t,e){var o=t.getChildByName("txt").getComponent(cc.Label),n=this.cur_record[e].open_nums,r=n[0]+"    "+n[1]+"    "+n[2]+"    "+this.boolBig(n)+"    "+this.boolSigle(n[0]+n[1]+n[2]);console.log("\u8bb0\u5f55\u5217\u8868 ---------------"),o.string=r},r([l(cc.Node)],e.prototype,"btn_record",void 0),r([l(cc.Node)],e.prototype,"btn_cancel",void 0),r([l(cc.Node)],e.prototype,"node_record",void 0),r([l(cc.Node)],e.prototype,"left_node_record",void 0),r([l(cc.Node)],e.prototype,"right_node_record",void 0),r([l(a.default)],e.prototype,"scroll_record",void 0),e=r([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../view/common/List":void 0,"./TBAdapter":"TBAdapter"}],TBRoomView:[function(t,e,o){"use strict";cc._RF.push(e,"35380wH9NVNKaWcxKxnGRB0","TBRoomView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../view/RoomView"),a=t("../../../view/common/componet/ButtonEx"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.initEvent=function(){t.prototype.initEvent.call(this);var e=cc.winSize.width-1280;e>60&&(this.node.getChildByName("nv").getComponent(cc.Widget).left=.35*e-10,this.PageView.getComponent(cc.Widget).right=.3*e+10)},e.prototype.showRoomList=function(t){for(var e=t.game_room_lists.length,o=Math.ceil(e/6),n=1;n<o;n++){var r=cc.instantiate(this.page_item);r.active=!0,this.PageView.addPage(r)}for(var i=this.PageView.content,c=0;c<i.childrenCount;c++){var s=Math.floor(c/6);i.children[s].children.forEach(function(t){t.active=!1})}for(n=0;n<e;n++){var l=t.game_room_lists[n],p=(s=Math.floor(n/6),i.children[s].children[(t.game_room_lists[n].room_level-1)%6]);if(p.opacity=255,l){p.active=!0;var u=p.getChildByName("pot_num").getComponent(cc.Label);l.bet_limit.length>0?u.string=l.bet_limit[0]+"-"+l.bet_limit[1]:12==this.data?u.string="\u5927\u76f2\u6ce8: "+l.room_base_note:u.string=""+l.room_base_note,p.getChildByName("permit_num").getComponent(cc.Label).string=""+l.room_min_entrance,p.getComponent(a.default).disabledScale(),p.getComponent(a.default).registerClick(this.onChooseGameRoom.bind(this,l))}else p.active=!1}this.PageView.enabled=o>1},e=r([s],e)}(i.default));o.default=l,cc._RF.pop()},{"../../../view/RoomView":void 0,"../../../view/common/componet/ButtonEx":void 0}],TBTopPanel:[function(t,e,o){"use strict";cc._RF.push(e,"0b6b6GgrMpOrpI1MZDFli7v","TBTopPanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(t,e,o,n){var r,i=arguments.length,a=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(a=(i<3?r(a):i>3?r(e,o,a):r(e,o))||a);return i>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../manager/NetManager"),a=t("../../../manager/UIManager"),c=t("../../../manager/DataManager"),s=t("./../../../game/public/TimeClock"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_back=null,e.btn_rule=null,e.btn_set=null,e.table_num=null,e.label_tips=null,e.alarm_clock=null,e.tipsSp=[],e}return n(e,t),e.prototype.onLoad=function(){this.initView(),this.addEvenListener()},e.prototype.initView=function(){this.table_num.string=""},e.prototype.addEvenListener=function(){},e.prototype.setRoomInfo=function(t){this.table_num.string=t||""},e.prototype.setGameTimer=function(t){this.alarm_clock.setGameTimer(t)},e.prototype.onKillTimer=function(){this.alarm_clock.onKillTimer()},e.prototype.pauseAudio=function(){this.alarm_clock.pauseAudio()},e.prototype.pauseVibrate=function(){this.alarm_clock.pauseVibrate()},e.prototype.setViewTips=function(t){this.label_tips.node.active=!0,this.label_tips.spriteFrame=this.tipsSp[t]},e.prototype.hideViewTips=function(){this.label_tips.node.active=!1},e.prototype.onEvenClickButton=function(t){var e=t.name;"btn_back"==e?i.NetManager.protocolGameCommon.sendLeaveGame():"btn_rule"==e?a.UIManager.popup("prefabs/game/GameRuleList",c.DataManager.gameType):"btn_set"==e&&a.UIManager.popup("prefabs/hall/HallSetting")},r([u(cc.Node)],e.prototype,"btn_back",void 0),r([u(cc.Node)],e.prototype,"btn_rule",void 0),r([u(cc.Node)],e.prototype,"btn_set",void 0),r([u(cc.Label)],e.prototype,"table_num",void 0),r([u(cc.Sprite)],e.prototype,"label_tips",void 0),r([u(s.default)],e.prototype,"alarm_clock",void 0),r([u(cc.SpriteFrame)],e.prototype,"tipsSp",void 0),e=r([p],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../manager/DataManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"./../../../game/public/TimeClock":void 0}]},{},["TBDefine","ProtocolTB","TBCmd","TBAdapter","TBAniByServer","TBBetArea","TBBetList","TBChrome","TBChromeBet","TBFooter","TBGameScene","TBGameView","TBOnlinePlayer","TBPlayer","TBRecord","TBRoomView","TBTopPanel"]);