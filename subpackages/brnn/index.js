window.__require=function e(t,o,n){function i(c,a){if(!o[c]){if(!t[c]){var s=c.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+c+"'")}c=s}var p=o[c]={exports:{}};t[c][0].call(p.exports,function(e){return i(t[c][1][e]||e)},p,p.exports,e,t,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({BRNNBetAreaPanel:[function(e,t,o){"use strict";cc._RF.push(t,"5c3cbcQcxxA0oDOCgrSiYwC","BRNNBetAreaPanel");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./BetArea"),c=cc._decorator,a=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_betArea=[],t}return n(t,e),t.prototype.resetArea=function(e){this.node_betArea[e].initArea()},t.prototype.onBetChipAni=function(e,t){this.node_betArea[e].onBetChipAni(t)},t.prototype.onUserBetChipAni=function(e,t,o){this.node_betArea[e].onUserBetChipAni(t,o)},t.prototype.FillUserBetNum=function(e,t){this.node_betArea[e].FillInViewBetChip(t)},t.prototype.FillSumBetNum=function(e,t){this.node_betArea[e].FillInViewSumChip(t)},t.prototype.resetViewBetChip=function(){this.node_betArea.forEach(function(e,t){e.resetViewBetChip()})},t.prototype.switchBetTouch=function(e,t){this.node_betArea[e].switchBetTouch(t)},t.prototype.onRecoverChipInAre=function(e,t){this.node_betArea[e].onRecoverChipInAre(t)},t.prototype.onWinAreaBlink=function(e){this.node_betArea[e].onWinBlinkAni()},t.prototype.setViewBlink=function(){this.node_betArea.forEach(function(e,t){e.setViewBlink()})},t.prototype.onRemoveAreaChip=function(){this.node_betArea.forEach(function(e,t){e.removeAreaChip()})},t.prototype.onSettleLoseAni=function(e,t){var o=this;null==e||e.length<=0?t&&t():(e.forEach(function(e,t){o.node_betArea[e].onAreaToBanker()}),this.scheduleOnce(function(){t()},.6))},t.prototype.onSettleWinAni=function(e,t){var o=this;null==e||e.length<=0?t&&t():(e.forEach(function(e,t){o.node_betArea[e].onBankerToArea()}),this.scheduleOnce(function(){t()},1.2))},i([s(r.default)],t.prototype,"node_betArea",void 0),t=i([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./BetArea":"BetArea"}],BRNNCard:[function(e,t,o){"use strict";cc._RF.push(t,"7adaaB80VpHvIJu81V3XxxG","BRNNCard");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../model/CMD_BRNN"),c=e("../../../manager/AudioManager"),a=e("../../../common/utils/Utils"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.poker=null,t.node_shuffle=null,t.node_poker=[],t.node_card_type=[],t.typeAtlas=null,t.niu_grey_bmfont=null,t.niu_red_bmfont=null,t.niu_yellow_bmfont=null,t}return n(t,e),t.prototype.createPoker=function(){this.node_shuffle.destroyAllChildren(),this.node_shuffle.removeAllChildren(),this.node_poker.forEach(function(e,t){e.destroyAllChildren()});for(var e=0;e<25;e++){var t=cc.instantiate(this.poker),o=t.getComponent("createPoker");t.zIndex=e+1,t.name="poker"+e,t.position=e%2==0?cc.v2(r.default.DEALCARD_POS.x,-2.5*e+r.default.DEALCARD_POS.y):cc.v2(r.default.DEALCARD_POS.x,-2.5*(e-1)+r.default.DEALCARD_POS.y),o.createPoker(),this.node_shuffle.addChild(t)}},t.prototype.createPokerInSend=function(){this.node_shuffle.destroyAllChildren(),this.node_shuffle.removeAllChildren(),this.node_poker.forEach(function(e,t){e.destroyAllChildren()});for(var e=0,t=0;t<25;t++){var o=cc.instantiate(this.poker),n=Math.floor(e/5),i=e%5*25,r=this.node_poker[n];o.zIndex=0,o.parent=r,o.position=cc.v2(i,0),o.getComponent("createPoker").createPoker(),e++}},t.prototype.showCard=function(e){for(var t=0;t<e.length;t++){for(var o=e[t].loc%5,n=e[t].card_arr,i=e[t].val_type,r=e[t].val_betValue,c=this.node_poker[o],a=0;a<5;a++){c.children[a].getComponent("createPoker").createPoker(n[a])}this.setTypeSprite(o,i,r)}},t.prototype.setTypeSprite=function(e,t,o){var n,i=null,r=null,c=this.node_card_type[e];c.active=!0;var a=c.getChildByName("bg").getComponent(cc.Sprite),s=c.getChildByName("layout"),l=s.getChildByName("type").getComponent(cc.Sprite),p=s.getChildByName("bet").getComponent(cc.Label);0==t?(i=this.typeAtlas.getSpriteFrame("img_grey"),r=this.niu_grey_bmfont):t<=6?(i=this.typeAtlas.getSpriteFrame("img_red"),r=this.niu_red_bmfont):t<=10?(i=this.typeAtlas.getSpriteFrame("img_yellow"),r=this.niu_yellow_bmfont):(i=this.typeAtlas.getSpriteFrame("img_purple"),r=this.niu_yellow_bmfont),n=this.typeAtlas.getSpriteFrame("niu_"+t),a.spriteFrame=i,l.spriteFrame=n,p.font=r,p.string="x"+o+"\u500d",a.node.x=-200,a.node.opacity=0,l.node.scale=0,p.node.scale=0,a.node.stopAllActions(),l.node.stopAllActions(),p.node.stopAllActions();var u=cc.sequence(cc.spawn(cc.moveTo(.1,cc.v2(0,0)),cc.fadeIn(.05)),cc.callFunc(function(){var e=cc.sequence(cc.scaleTo(.1,1.3,1.3),cc.scaleTo(.1,.9,.9),cc.scaleTo(.05,1,1)),t=cc.sequence(cc.scaleTo(.1,1.3,1.3),cc.scaleTo(.1,.9,.9),cc.scaleTo(.05,1,1));l.node.runAction(e),p.node.runAction(t)}));a.node.runAction(u)},t.prototype.onShowCardAni=function(e){for(var t=this,o=function(o){var i=e[o].loc%5,r=e[o].card_arr,a=e[o].val_type,s=e[o].val_betValue;n.schedule(function(){for(var e=t.node_poker[i],o=function(o){var n=e.children[o],c=n.getComponent("createPoker"),l=25*o;c.createPoker(r[o]),n.position=cc.v2(0,0),n.runAction(cc.sequence(cc.moveTo(.3,cc.v2(l,0)),cc.callFunc(function(){4==o&&t.setTypeSprite(i,a,s)})))},n=0;n<5;n++)o(n);c.AudioManager.playGameSFX("male/cattle_"+a)},.75*o,0,0)},n=this,i=0;i<e.length;i++)o(i)},t.prototype.onShuffleAni=function(){this.node_poker.forEach(function(e,t){e.destroyAllChildren()}),this.createPoker();for(var e=this.node_shuffle.children,t=function(t){var o=e[t],n=o.position,i=a.default.getRandomInt(30,50),r=cc.sequence(cc.moveBy(.25,cc.v2(i,2)),cc.callFunc(function(){o.zIndex=o.zIndex-1}),cc.moveBy(.25,cc.v2(-i,-2)),cc.callFunc(function(){o.position=n})),c=cc.sequence(cc.moveBy(.25,cc.v2(-i,-2)),cc.callFunc(function(){o.zIndex=o.zIndex+1}),cc.moveBy(.25,cc.v2(i,2)),cc.callFunc(function(){o.position=n}));if(t%2==0){var s=cc.sequence(r,c,r,c);o.runAction(s)}else{s=cc.sequence(c,r,c,r);o.runAction(s)}},o=0;o<e.length;o++)t(o)},t.prototype.onSendCardAni=function(){var e=this;this.node_poker.forEach(function(e,t){e.destroyAllChildren()}),this.createPoker();for(var t=this.node_shuffle.children,o=0,n=function(n){var i=t[n],c=Math.floor(o/5),a=.08*o,s=o%5*25,l=cc.v2(r.default.DIR_CARD_POS[c].x+s,r.default.DIR_CARD_POS[c].y);o++,i.runAction(cc.sequence(cc.delayTime(a),cc.moveTo(.25,l),cc.callFunc(function(){var t=e.node_poker[c];i.zIndex=0,i.parent=t,i.position=cc.v2(s,0)})))},i=t.length-1;i>=0;i--)n(i);c.AudioManager.playSFX("licensing")},t.prototype.removeCard=function(){this.unscheduleAllCallbacks();for(var e=this.node_shuffle.childrenCount,t=0;t<e;t++){this.node_shuffle.children[t].stopAllActions()}this.node_shuffle.destroyAllChildren(),this.node_shuffle.removeAllChildren(),this.node_poker.forEach(function(e,t){e.children.forEach(function(e,t){e.stopAllActions()}),e.destroyAllChildren()}),this.node_card_type.forEach(function(e,t){e.active=!1})},i([p(cc.Prefab)],t.prototype,"poker",void 0),i([p(cc.Node)],t.prototype,"node_shuffle",void 0),i([p(cc.Node)],t.prototype,"node_poker",void 0),i([p(cc.Node)],t.prototype,"node_card_type",void 0),i([p(cc.SpriteAtlas)],t.prototype,"typeAtlas",void 0),i([p(cc.Font)],t.prototype,"niu_grey_bmfont",void 0),i([p(cc.Font)],t.prototype,"niu_red_bmfont",void 0),i([p(cc.Font)],t.prototype,"niu_yellow_bmfont",void 0),t=i([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/AudioManager":void 0,"../model/CMD_BRNN":"CMD_BRNN"}],BRNNCenterPanel:[function(e,t,o){"use strict";cc._RF.push(t,"81606u97VZIZJr98RJgdkMb","BRNNCenterPanel");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../public/TimeClock"),c=cc._decorator,a=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.alarm_clock=null,t.label_tips=null,t._gameView=null,t}return n(t,e),t.prototype.initzation=function(e){this._gameView=e},t.prototype.setGameTimer=function(e){this.alarm_clock.setGameTimer(e)},t.prototype.onKillTimer=function(){this.alarm_clock.onKillTimer()},t.prototype.pauseAudio=function(){this.alarm_clock.pauseAudio()},t.prototype.pauseVibrate=function(){this.alarm_clock.pauseVibrate()},t.prototype.setViewTips=function(e){this.label_tips.node.active=!0,this.label_tips.string=e},t.prototype.hideViewTips=function(){this.label_tips.node.active=!1,this.label_tips.string=""},i([s(r.default)],t.prototype,"alarm_clock",void 0),i([s(cc.Label)],t.prototype,"label_tips",void 0),t=i([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../../public/TimeClock":void 0}],BRNNChip:[function(e,t,o){"use strict";cc._RF.push(t,"afc39pZoqpEHKPlM71YNvfK","BRNNChip");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../model/CMD_BRNN"),c=cc._decorator,a=c.ccclass,s=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.chip_frame=[],t.ttf_font=null,t.fnt_bg=null,t.fnt_num=null,t.FNT_NUM_LIST=["Z","X","C","V","B"],t}return n(t,e),t.prototype.setViewChip=function(e){var t=this.node.getChildByName("num_node");t&&this.node.removeChild(t);var o="";o=e>=1e3&&e<1e4?(e/1e3).toString().slice(0,3)+"K":e>=1e4?(e/1e4).toString().slice(0,3)+"W":e,this.fnt_num.string=o;for(var n=0;n<r.default.BETCHIP_VALUE.length;n++){if(e==r.default.BETCHIP_VALUE[n]){this.fnt_bg.string=this.FNT_NUM_LIST[n];break}}},i([s(cc.SpriteFrame)],t.prototype,"chip_frame",void 0),i([s(cc.Font)],t.prototype,"ttf_font",void 0),i([s(cc.Label)],t.prototype,"fnt_bg",void 0),i([s(cc.Label)],t.prototype,"fnt_num",void 0),t=i([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{"../model/CMD_BRNN":"CMD_BRNN"}],BRNNCmd:[function(e,t,o){"use strict";cc._RF.push(t,"20566yurmlOPqKQHtC5CWVI","BRNNCmd"),Object.defineProperty(o,"__esModule",{value:!0}),o.BRNNCmd="28_0",o.ProtocolBrnnCmd={GameStartNotify:o.BRNNCmd+"_game_start_notify",SendCardNotify:o.BRNNCmd+"_send_card_notify",StartBetNotify:o.BRNNCmd+"_start_bet_notify",BetNotify:o.BRNNCmd+"_bet_notify",OtherBetNotify:o.BRNNCmd+"_other_bet_notify",ShowCardNotify:o.BRNNCmd+"_show_card_notify",GameConcludeNotify:o.BRNNCmd+"_game_conclude_notify",WaitNextNotify:o.BRNNCmd+"_wait_next_notify",GameReconnectInfo:o.BRNNCmd+"_game_reconnect_info",OtherUsersRes:o.BRNNCmd+"_other_users_res"},cc._RF.pop()},{}],BRNNFooter:[function(e,t,o){"use strict";cc._RF.push(t,"28f2aSli05DrrhAEEKSG5dM","BRNNFooter");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../manager/DataManager"),c=e("../../../common/utils/Utils"),a=e("../../../common/UIHelper"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.head=null,t.sprHead=null,t.nickname=null,t.money=null,t.node_bet=null,t.flutter=null,t.yellow_bmfont=null,t.grey_bmfont=null,t.list_item=null,t.list=null,t.icon_win=null,t.icon_lose=null,t.bet_btns=[],t.bet_nums=[],t.bet_blinks=[],t._gameView=null,t}return n(t,e),t.prototype.initzation=function(e){this._gameView=e,this.initNode(),this.initView()},t.prototype.initNode=function(){var e=this;this.bet_btns=this.node_bet.children,this.bet_btns.forEach(function(t,o){var n=t.getChildByName("num").getComponent(cc.Label);n.string="",e.bet_nums.push(n);var i=t.getChildByName("blink");i.active=!1,e.bet_blinks.push(i)}),this.bet_blinks[0].active=!0,this.originHeadPos=this.head.position,this.originFlutterPos=this.flutter.node.position},t.prototype.initView=function(){this.nickname.string="",this.money.string="",this.flutter.node.active=!1,this.flutter.string="",this.head.stopAllActions(),this.setUserHead(r.DataManager.userInfo.headimgurl),this.list.destroyAllChildren(),this.unscheduleAllCallbacks()},t.prototype.resetBet=function(){this.bet_btns.forEach(function(e,t){e.getChildByName("blink").active=!1}),this.bet_blinks[0].active=!0},t.prototype.setUserHead=function(e){a.default.setHeadIcon(e,this.sprHead.node),this.sprHead.spriteFrame||console.log("\u7a7a\u4e86!!!!!!!")},t.prototype.setUserInfo=function(e){var t=e,o=c.default.getSubStringLengTxt(e.username)||c.default.getReplaceStrToStar(e.player_id);this.nickname.string=o,this.setUserHead(e.headimg_id),this.setUserScore(t.gold)},t.prototype.setUserScore=function(e){this.money.string=c.default.getFormatGold(e)},t.prototype.showBetBtns=function(e){this.node_bet.active=!0,this.BET_VALUE=e[0],this.BET_VALUE_ARR=e,this.bet_btns.forEach(function(e,t){e.active=!1,c.default.removeClickEvent(e)});for(var t=0;t<e.length;t++){var o=this.bet_btns[t];o.active=!0;var n=this.bet_nums[t],i="";i=e[t]>=1e3&&e[t]<1e4?e[t]/1e3+"K":e[t]>=1e4?e[t]/1e4+"W":e[t]+"",n.string=i,c.default.addClickEventEND(o,this.onBetTouchEvent.bind(this),t)}},t.prototype.onBetTouchEvent=function(e,t){this.bet_blinks.forEach(function(e,t){e.active=!1}),this.BET_VALUE=this.BET_VALUE_ARR[t],this.bet_blinks[t].active=!0},t.prototype.showRecord=function(e){this.list.children.length>=10&&this.list.children[0].removeFromParent();var t=cc.instantiate(this.list_item);t.active=!0,this.list.addChild(t);for(var o=t.children,n=0;n<o.length;n++){var i=o[n];i.getComponent(cc.Sprite).spriteFrame=1==e[n]?this.icon_win:this.icon_lose;var r=cc.blink(2,4);i.runAction(r)}},t.prototype.recoverRecord=function(e){this.list.children.length>=10&&this.list.children[0].removeFromParent();var t=cc.instantiate(this.list_item);t.active=!0,this.list.addChild(t);for(var o=t.children,n=0;n<o.length;n++){o[n].getComponent(cc.Sprite).spriteFrame=1==e[n]?this.icon_win:this.icon_lose}},t.prototype.shakeHead=function(){this.head.stopAllActions(),this.head.position=this.originHeadPos,cc.tween(this.head).by(.05,{position:cc.v2(0,10)}).by(.05,{position:cc.v2(0,-12)}).by(.05,{position:cc.v2(0,-2)}).start()},t.prototype.flutterScore=function(e,t,o){var n=this;this.flutter.node.position=this.originFlutterPos,this.flutter.node.active=!0;var i="";e>=0?(this.flutter.font=this.yellow_bmfont,i="+"):(this.flutter.font=this.grey_bmfont,i="-");var r=Math.abs(e),c=r/parseFloat(50..toFixed(2)),a=0,s="",l=function(){s=(a+=c).toFixed(2),n.flutter.string=i+s,a>=r&&(s=r.toString(),n.flutter.string=i+parseFloat(s).toFixed(2),n.unschedule(l))};this.schedule(l,.01,cc.macro.REPEAT_FOREVER);var p=cc.moveBy(.5,t),u=cc.sequence(p,cc.delayTime(.5),cc.callFunc(function(){o&&o()}));this.flutter.node.runAction(u)},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},i([p(cc.Node)],t.prototype,"head",void 0),i([p(cc.Sprite)],t.prototype,"sprHead",void 0),i([p(cc.Label)],t.prototype,"nickname",void 0),i([p(cc.Label)],t.prototype,"money",void 0),i([p(cc.Node)],t.prototype,"node_bet",void 0),i([p(cc.Label)],t.prototype,"flutter",void 0),i([p(cc.Font)],t.prototype,"yellow_bmfont",void 0),i([p(cc.Font)],t.prototype,"grey_bmfont",void 0),i([p(cc.Prefab)],t.prototype,"list_item",void 0),i([p(cc.Node)],t.prototype,"list",void 0),i([p(cc.SpriteFrame)],t.prototype,"icon_win",void 0),i([p(cc.SpriteFrame)],t.prototype,"icon_lose",void 0),t=i([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../common/UIHelper":void 0,"../../../common/utils/Utils":void 0,"../../../manager/DataManager":void 0}],BRNNGameScene:[function(e,t,o){"use strict";cc._RF.push(t,"4a0a4RUgkxDrLsWfN4EO2ZZ","BRNNGameScene");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./BRNNGameView"),c=e("../../net/NetCmd"),a=e("../../manager/EventManager"),s=e("./net/BRNNCmd"),l=e("../../manager/UIManager"),p=cc._decorator,u=p.ccclass,h=p.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.GameView=null,t}return n(t,e),t.prototype.onLoad=function(){cc.sys.os!=cc.sys.OS_IOS&&(cc.dynamicAtlasManager.enabled=!0),this.GameView.GameScene=this,this.initData(),this.initEvent(),l.UIManager.hideMarquee()},t.prototype.initData=function(){},t.prototype.initEvent=function(){a.EventManager.on(this,c.ProtocolGameCmd.GameLoginResp,this.onGameLoginResp.bind(this)),a.EventManager.on(this,s.ProtocolBrnnCmd.GameStartNotify,this.onGameStartNotify.bind(this)),a.EventManager.on(this,s.ProtocolBrnnCmd.SendCardNotify,this.onSendCardNotify.bind(this)),a.EventManager.on(this,s.ProtocolBrnnCmd.StartBetNotify,this.onStartBetNotify.bind(this)),a.EventManager.on(this,s.ProtocolBrnnCmd.BetNotify,this.onBetNotify.bind(this)),a.EventManager.on(this,s.ProtocolBrnnCmd.OtherBetNotify,this.onOtherBetNotify.bind(this)),a.EventManager.on(this,s.ProtocolBrnnCmd.ShowCardNotify,this.onShowCardNotify.bind(this)),a.EventManager.on(this,s.ProtocolBrnnCmd.GameConcludeNotify,this.onGameConcludeNotify.bind(this)),a.EventManager.on(this,s.ProtocolBrnnCmd.WaitNextNotify,this.onWaitNextNotify.bind(this)),a.EventManager.on(this,s.ProtocolBrnnCmd.GameReconnectInfo,this.onGameReconnectInfo.bind(this)),a.EventManager.on(this,s.ProtocolBrnnCmd.OtherUsersRes,this.onOtherUsersRes.bind(this)),a.EventManager.on(this,c.GameCommonEvent.UpdateUserScore,this.onUpdateUserScore.bind(this))},t.prototype.onGameLoginResp=function(e){this.GameView.resetGameView(),this.GameView.initUserInfo()},t.prototype.onLeaveRoomResp=function(e){this.GameView.onSubLeaveRoom(e)},t.prototype.onGameKickoutNotify=function(e){this.GameView.onSubKickOutRoom(e)},t.prototype.onGameStartNotify=function(e){this.GameView.onSubGameStart(e)},t.prototype.onSendCardNotify=function(e){this.GameView.onSubSendCard(e)},t.prototype.onStartBetNotify=function(e){this.GameView.onSubStartBet(e)},t.prototype.onBetNotify=function(e){this.GameView.onBetNotify(e)},t.prototype.onOtherBetNotify=function(e){this.GameView.onGamePlayerBetNotify(e)},t.prototype.onShowCardNotify=function(e){this.GameView.onSubShowCard(e)},t.prototype.onGameConcludeNotify=function(e){this.GameView.onSubGameEnd(e)},t.prototype.onWaitNextNotify=function(e){this.GameView.onSubWaitNext(e)},t.prototype.onGameReconnectInfo=function(e){this.GameView.onSubJoinRoom(e)},t.prototype.onOtherUsersRes=function(e){this.GameView.onGetOnlineUserRes(e)},t.prototype.onUpdateUserScore=function(e){this.GameView.onUpdateUserScore(e)},t.prototype.onDestroy=function(){a.EventManager.off(this)},i([h(r.default)],t.prototype,"GameView",void 0),t=i([u],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../manager/EventManager":void 0,"../../manager/UIManager":void 0,"../../net/NetCmd":void 0,"./BRNNGameView":"BRNNGameView","./net/BRNNCmd":"BRNNCmd"}],BRNNGameView:[function(e,t,o){"use strict";cc._RF.push(t,"dc2edrpPZVBl7f1vAEP9sv9","BRNNGameView");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,r){function c(e){try{s(n.next(e))}catch(e){r(e)}}function a(e){try{s(n.throw(e))}catch(e){r(e)}}function s(e){e.done?i(e.value):new o(function(t){t(e.value)}).then(c,a)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(e){return function(t){return s([e,t])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,n=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!(i=(i=c.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=t.call(e,c)}catch(e){r=[6,e],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./ui/BRNNTopPanel"),s=e("./ui/BRNNCenterPanel"),l=e("./ui/BRNNFooter"),p=e("./ui/OnlinePlayer"),u=e("./ui/BRNNBetAreaPanel"),h=e("./ui/BRNNCard"),f=e("./model/CMD_BRNN"),d=e("../../manager/AudioManager"),_=e("../../common/utils/Utils"),y=e("../../manager/DataManager"),m=e("../../manager/UIManager"),v=e("../../manager/NetManager"),b=e("../../Define"),g=e("../../manager/EventManager"),N=e("../../net/NetCmd"),C=e("../../manager/ResManager"),P=cc._decorator,A=P.ccclass,R=P.property,B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spr_bg=null,t.user_node=null,t.topPanel=null,t.centerPanel=null,t.betAreaPanel=null,t.brnnCard=null,t.onlinePlayer=null,t.footerPanel=null,t.UINode=null,t.start_bet=null,t.stop_bet=null,t.GameScene=null,t.node_top=null,t.node_center=null,t}return n(t,e),t.prototype.onLoad=function(){d.AudioManager.playGameBGM("brnn_bgm.mp3"),this.initView(),this.initNode(),this.initChat()},t.prototype.initView=function(){return r(this,void 0,void 0,function(){return c(this,function(e){return this.spr_bg=cc.find("bg",this.node),this.node_top=cc.find("node_top",this.node),this.node_center=cc.find("node_center",this.node),this.topPanel.initzation(this),this.centerPanel.initzation(this),this.footerPanel.initzation(this),[2]})})},t.prototype.initChat=function(){return r(this,void 0,void 0,function(){var e,t;return c(this,function(o){switch(o.label){case 0:return[4,C.ResManager.loadResAsync("prefabs/common/GameChat",cc.Prefab,!1)];case 1:return(e=o.sent())&&cc.isValid(this.node)&&!this.node.getChildByName("GameChat")&&(t=cc.instantiate(e),this.node.addChild(t)),[2]}})})},t.prototype.initNode=function(){},t.prototype.initData=function(){},t.prototype.initUserInfo=function(){var e={username:_.default.getSubStringLengTxt(y.DataManager.userInfo.nickname)||_.default.getReplaceStrToStar(y.DataManager.userInfo.userid),gold:y.DataManager.userInfo.gold,headimg_id:y.DataManager.userInfo.headimgurl};this.footerPanel.setUserInfo(e)},t.prototype.resetGameView=function(){this.unscheduleAllCallbacks(),this.node.stopAllActions(),this.UINode.destroyAllChildren(),this.footerPanel.initView(),this.brnnCard.removeCard();for(var e=0;e<4;e++)this.betAreaPanel.resetArea(e);this.initUserInfo()},t.prototype.onSubJoinRoom=function(e){var t=this;this.resetGameView(),this.footerPanel.resetBet(),this.topPanel.setRoomInfo(e.room_info.room_code),this.footerPanel.setUserScore(e.gold);var o="",n=e.game_state;if(console.log("%c \u6e38\u620f\u5f53\u524d\u72b6\u6001\u4e3a","color:orange;",n),console.log("%c \u6e38\u620f\u72b6\u6001","color:green;","1=\u5f00\u59cb 2=\u53d1\u724c\u9636\u6bb5 3=\u4e0b\u6ce8\u9636\u6bb5 4=\u5f00\u724c 5=\u7ed3\u7b97 6=\u4f11\u606f\u9636\u6bb5"),1==n)this.brnnCard.createPoker();else if(n<6&&(this.brnnCard.createPokerInSend(),n>3)){var i=e.card_msg_info;this.brnnCard.showCard(i)}if(3==n)for(var r=0;r<4;r++)this.betAreaPanel.switchBetTouch(r,!0);else for(r=0;r<4;r++)this.betAreaPanel.switchBetTouch(r,!1);1==n?o="\u6b63\u5728\u6d17\u724c...":2==n?o="\u6b63\u5728\u53d1\u724c...":3==n?o="\u8bf7\u4e0b\u6ce8...":4==n?o="\u6b63\u5728\u5f00\u724c...":5==n?o="\u6b63\u5728\u6d3e\u5956...":6==n&&(o="\u4f11\u606f\u4e00\u4f1a...");var c=0;e.bet_num_info.forEach(function(e,o){c+=e.sum_bet_num,t.betAreaPanel.FillUserBetNum(o,e.user_bet_num),t.betAreaPanel.FillSumBetNum(o,e.sum_bet_num)}),g.EventManager.emit(N.GameCommonEvent.UpdateAllBet,c),f.default.BETCHIP_VALUE=e.bet_value_arr,this.footerPanel.showBetBtns(e.bet_value_arr);var a=e.enter_result;console.log("\u6e38\u620f\u8bb0\u5f55",a),a.forEach(function(e,o){var n=e.result;t.footerPanel.recoverRecord(n)}),e.bet_value_info.forEach(function(e,o){var n=e.loc-1;t.betAreaPanel.onRecoverChipInAre(n,e.bet_value)}),this.centerPanel.onKillTimer(),this.centerPanel.setGameTimer({limit_time:e.time_out,playAudio:3==n,vibrate:3==n}),this.centerPanel.setViewTips(o)},t.prototype.onSubGameStart=function(e){v.NetManager.protocolGameCommon.needFlushGold=!1,this.brnnCard.removeCard(),this.footerPanel.flutter.node.active=!1,this.topPanel.setRoomInfo(e.room_info.room_code),this.betAreaPanel.onRemoveAreaChip(),this.betAreaPanel.resetViewBetChip(),this.betAreaPanel.setViewBlink(),this.brnnCard.onShuffleAni(),this.centerPanel.onKillTimer(),this.centerPanel.setGameTimer({limit_time:e.time_out}),this.centerPanel.setViewTips("\u6b63\u5728\u6d17\u724c...")},t.prototype.onSubSendCard=function(e){this.brnnCard.onSendCardAni(),this.centerPanel.onKillTimer(),this.centerPanel.setGameTimer({limit_time:e.time_out}),this.centerPanel.setViewTips("\u6b63\u5728\u53d1\u724c...")},t.prototype.onSubStartBet=function(e){for(var t=this,o=0;o<4;o++)this.betAreaPanel.switchBetTouch(o,!0);this.brnnCard.createPokerInSend();var n=cc.view.getVisibleSize(),i=cc.instantiate(this.start_bet),r=-(n.width+i.width)/2;i.position=cc.v2(r,0),cc.tween(i).to(.5,{position:cc.v2(0,0)}).to(.5,{opacity:0}).start(),this.UINode.addChild(i),this.scheduleOnce(function(){t.UINode.removeChild(i)},1),this.centerPanel.onKillTimer(),this.centerPanel.setGameTimer({limit_time:e.time_out,playAudio:!0,vibrate:!0}),this.centerPanel.setViewTips("\u8bf7\u4e0b\u6ce8...")},t.prototype.onBetNotify=function(e){var t=this;if(1==e.result){y.DataManager.userInfo.gold=e.gold,this.footerPanel.setUserScore(e.gold);var o=0;e.bet_num_info.forEach(function(e,n){var i=n;o+=e.sum_bet_num,t.betAreaPanel.FillSumBetNum(i,e.sum_bet_num),t.betAreaPanel.FillUserBetNum(i,e.user_bet_num)}),g.EventManager.emit(N.GameCommonEvent.UpdateAllBet,o);var n=e.bet_value_info,i=n.loc-1;n.bet_value.forEach(function(e,o){t.betAreaPanel.onUserBetChipAni(i,t.user_node,e)}),this.footerPanel.shakeHead(),this.centerPanel.pauseAudio(),this.centerPanel.pauseVibrate(),d.AudioManager.playSFX("flychip")}else 2==e.result?m.UIManager.showTips("\u91d1\u5e01\u4e0d\u8db3"):3==e.result?m.UIManager.showTips("\u8be5\u533a\u57df\u8fbe\u5230\u9650\u5236"):5==e.result?m.UIManager.showTips("\u60a8\u662f\u5e84\u5bb6\uff0c\u8bf7\u7b49\u5f85\u5176\u4ed6\u73a9\u5bb6\u4e0b\u6ce8"):6==e.result&&m.UIManager.showTips("\u672c\u5c40\u5e84\u5bb6\u53ef\u63a5\u53d7\u62bc\u6ce8\u91d1\u989d\u5df2\u8fbe\u4e0a\u9650, \u8bf7\u7b49\u5f85\u6e38\u620f\u5f00\u59cb")},t.prototype.onGamePlayerBetNotify=function(e){var t=this,o=e.bet_num_info;e.bet_value_info.forEach(function(e,o){var n=e.loc-1;e.bet_value.forEach(function(e,o){t.betAreaPanel.onBetChipAni(n,e)})});var n=0;o.forEach(function(e,o){var i=o;n+=e.sum_bet_num,t.betAreaPanel.FillSumBetNum(i,e.sum_bet_num),t.betAreaPanel.FillUserBetNum(i,e.user_bet_num)}),g.EventManager.emit(N.GameCommonEvent.UpdateAllBet,n),d.AudioManager.playSFX("flychip")},t.prototype.onSubShowCard=function(e){for(var t=this,o=0;o<4;o++)this.betAreaPanel.switchBetTouch(o,!1);var n=cc.view.getVisibleSize(),i=cc.instantiate(this.stop_bet),r=-(n.width+i.width)/2;i.position=cc.v2(r,0),cc.tween(i).to(.5,{position:cc.v2(0,0)}).to(.5,{opacity:0}).start(),this.UINode.addChild(i),this.scheduleOnce(function(){t.UINode.removeChild(i);var o=e.card_msg_info;t.brnnCard.onShowCardAni(o)},1),this.centerPanel.onKillTimer(),this.centerPanel.setGameTimer({limit_time:e.time_out}),this.centerPanel.setViewTips("\u6b63\u5728\u5f00\u724c...")},t.prototype.onSubGameEnd=function(e){var t=this,o=e.gold,n=parseFloat(e.score),i=e.enter_result,r=[],c=[];i.result.forEach(function(e,t){1==e?c.push(t):r.push(t)}),e.is_bet_req&&(n>=0?d.AudioManager.playSFX("game_win"):n<0&&d.AudioManager.playSFX("game_lose")),this.betAreaPanel.onSettleLoseAni(r,function(){t.betAreaPanel.onSettleWinAni(c,function(){t.footerPanel.showRecord(i.result),i.result.forEach(function(e,o){1==e&&t.betAreaPanel.onWinAreaBlink(o)}),e.is_bet_req&&t.footerPanel.flutterScore(n,cc.v2(0,70),function(){t.footerPanel.setUserScore(o)})})}),this.centerPanel.onKillTimer(),this.centerPanel.setGameTimer({limit_time:e.time_out}),this.centerPanel.setViewTips("\u6b63\u5728\u6d3e\u5956...")},t.prototype.onSubWaitNext=function(e){this.centerPanel.onKillTimer(),this.centerPanel.setGameTimer({limit_time:e.time_out}),this.betAreaPanel.onRemoveAreaChip(),this.betAreaPanel.setViewBlink(),this.betAreaPanel.resetViewBetChip(),g.EventManager.emit(N.GameCommonEvent.UpdateAllBet,0),this.centerPanel.setViewTips("\u4f11\u606f\u4e00\u4f1a...")},t.prototype.onGetOnlineUserRes=function(e){this.onlinePlayer.refPeopleTips(e.totalplayers),this.onlinePlayer.refUserList(e.player_list),this.onlinePlayer.playMoveOut()},t.prototype.onSubLeaveRoom=function(e){1!=e.game_state?(v.NetManager.close(b.SocketType.Game),m.UIManager.open("prefabs/RoomView",y.DataManager.gameType)):m.UIManager.showTips("\u6b63\u5728\u6e38\u620f\u4e2d,\u4e0d\u80fd\u9000\u51fa\u623f\u95f4")},t.prototype.onSubKickOutRoom=function(e){m.UIManager.showTipsPopup(e.des,function(){v.NetManager.close(b.SocketType.Game),m.UIManager.open("prefabs/RoomView",y.DataManager.gameType)})},t.prototype.onUpdateUserScore=function(e){var t=e.gold;this.footerPanel.setUserScore(t)},i([R(cc.Node)],t.prototype,"spr_bg",void 0),i([R(cc.Node)],t.prototype,"user_node",void 0),i([R(a.default)],t.prototype,"topPanel",void 0),i([R(s.default)],t.prototype,"centerPanel",void 0),i([R(u.default)],t.prototype,"betAreaPanel",void 0),i([R(h.default)],t.prototype,"brnnCard",void 0),i([R(p.default)],t.prototype,"onlinePlayer",void 0),i([R(l.default)],t.prototype,"footerPanel",void 0),i([R(cc.Node)],t.prototype,"UINode",void 0),i([R(cc.Prefab)],t.prototype,"start_bet",void 0),i([R(cc.Prefab)],t.prototype,"stop_bet",void 0),t=i([A],t)}(cc.Component);o.default=B,cc._RF.pop()},{"../../Define":void 0,"../../common/utils/Utils":void 0,"../../manager/AudioManager":void 0,"../../manager/DataManager":void 0,"../../manager/EventManager":void 0,"../../manager/NetManager":void 0,"../../manager/ResManager":void 0,"../../manager/UIManager":void 0,"../../net/NetCmd":void 0,"./model/CMD_BRNN":"CMD_BRNN","./ui/BRNNBetAreaPanel":"BRNNBetAreaPanel","./ui/BRNNCard":"BRNNCard","./ui/BRNNCenterPanel":"BRNNCenterPanel","./ui/BRNNFooter":"BRNNFooter","./ui/BRNNTopPanel":"BRNNTopPanel","./ui/OnlinePlayer":"OnlinePlayer"}],BRNNTool:[function(e,t,o){"use strict";cc._RF.push(t,"38f03IdMPxESKNXFerOwAE0","BRNNTool");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var o;return n(t,e),o=t,t.getInstance=function(){return null==this.instance&&(this.instance=new o),this.instance},t=o=i([c],t)}(cc.Component));o.default=a,cc._RF.pop()},{}],BRNNTopPanel:[function(e,t,o){"use strict";cc._RF.push(t,"0e554NJEyNKR4lNnpX1BVhm","BRNNTopPanel");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,a=r.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.table_num=null,t._gameView=null,t}return n(t,e),t.prototype.initzation=function(e){this._gameView=e,this.initView()},t.prototype.initView=function(){this.table_num.string=""},t.prototype.setRoomInfo=function(e){this.table_num.string=e||""},i([a(cc.Label)],t.prototype,"table_num",void 0),t=i([c],t)}(cc.Component);o.default=s,cc._RF.pop()},{}],BetArea:[function(e,t,o){"use strict";cc._RF.push(t,"146ebulahdJka2YSdUKbv53","BetArea");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./BRNNFooter"),c=e("../model/CMD_BRNN"),a=e("../../../common/utils/Utils"),s=e("../../../manager/NetManager"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.BRNNFooter=null,t.sum_chip=null,t.bet_chip=null,t.blink=null,t.btn_bet=null,t.chip_area=null,t.chip=null,t.MaxArea=cc.v2(0,0),t.MinArea=cc.v2(0,0),t.LocIdx=0,t.chipPool=null,t.BANKER_VPOS=cc.v2(0,250),t}return n(t,e),t.prototype.onLoad=function(){this.initArea(),this.initNodePool(),a.default.addClickEventEND(this.btn_bet,this.onBetEvent.bind(this))},t.prototype.onDestroy=function(){this.chipPool.clear()},t.prototype.initNodePool=function(){this.chipPool=new cc.NodePool},t.prototype.initArea=function(){this.sum_chip.string="0",this.bet_chip.string="0",this.blink.active=!1,this.btn_bet.active=!1,this.removeAreaChip()},t.prototype.createChip=function(e){var t=null;return(t=this.chipPool.size()>0?this.chipPool.get():cc.instantiate(this.chip)).getComponent("BRNNChip").setViewChip(e),t},t.prototype.clearChip=function(e){(e=e||this.chip_area.children[0]).stopAllActions(),this.chipPool.put(e),e.removeFromParent()},t.prototype.onBetChipAni=function(e){var t=-(cc.view.getVisibleSize().width/2+this.node.x+100),o=a.default.getRandomInt(-150,150),n=this.createChip(e);n.setPosition(cc.v2(t,o));var i=a.default.getRandomInt(this.MinArea.x,this.MaxArea.x),r=a.default.getRandomInt(this.MinArea.y,this.MaxArea.y),c=a.default.getRandomInt(-360,360),s=cc.moveTo(.2,cc.v2(i,r)),l=cc.rotateTo(.3,c);n.runAction(cc.spawn(s,l)),this.chip_area.addChild(n)},t.prototype.onUserBetChipAni=function(e,t){var o=e.convertToWorldSpaceAR(cc.v2(0,0)),n=this.chip_area.convertToNodeSpaceAR(o),i=this.createChip(t);i.setPosition(cc.v2(n.x,n.y));var r=a.default.getRandomInt(this.MinArea.x,this.MaxArea.x),c=a.default.getRandomInt(this.MinArea.y,this.MaxArea.y),s=a.default.getRandomInt(-360,360),l=cc.moveTo(.2,cc.v2(r,c)),p=cc.rotateTo(.3,s);i.runAction(cc.spawn(l,p)),this.chip_area.addChild(i)},t.prototype.onRecoverChipInAre=function(e){var t=this;e.forEach(function(e,o){var n=t.createChip(e),i=a.default.getRandomInt(t.MinArea.x,t.MaxArea.x),r=a.default.getRandomInt(t.MinArea.y,t.MaxArea.y),c=a.default.getRandomInt(-360,360);n.setPosition(cc.v2(i,r)),n.angle=c,n.active=!0,t.chip_area.addChild(n)})},t.prototype.onAreaToBanker=function(){for(var e=this,t=this.node.parent.convertToWorldSpaceAR(this.BANKER_VPOS),o=this.node.convertToNodeSpaceAR(t),n=this.chip_area.childrenCount,i=function(t){var n=r.chip_area.children[t],i=cc.moveTo(.5,cc.v2(o.x,o.y)),c=cc.sequence(i,cc.callFunc(function(){e.clearChip(n)}));n.runAction(c)},r=this,c=0;c<n;c++)i(c)},t.prototype.onBankerToArea=function(){for(var e=this,t=this.node.parent.convertToWorldSpaceAR(this.BANKER_VPOS),o=this.node.convertToNodeSpaceAR(t),n=a.default.getRandomInt(5,15),i=0;i<n;i++){var r=o.x+a.default.getRandomInt(-50,50),s=o.y+a.default.getRandomInt(-50,50),l=a.default.getRandomInt(this.MinArea.x,this.MaxArea.x),p=a.default.getRandomInt(this.MinArea.y,this.MaxArea.y),u=a.default.getRandomInt(0,4),h=c.default.BETCHIP_VALUE[u],f=this.createChip(h);f.setPosition(cc.v2(r,s));var d=cc.moveTo(.5,cc.v2(l,p));f.runAction(d),this.chip_area.addChild(f)}this.scheduleOnce(function(){e.onAreaToPlayer()},.6)},t.prototype.onAreaToPlayer=function(){for(var e=this,t=-(cc.view.getVisibleSize().width/2+this.node.x+100),o=this.chip_area.childrenCount,n=function(o){var n=i.chip_area.children[o],r=a.default.getRandomInt(-150,150),c=cc.moveTo(.5,cc.v2(t,r)),s=cc.sequence(c,cc.callFunc(function(){e.clearChip(n)}));n.runAction(s)},i=this,r=0;r<o;r++)n(r)},t.prototype.onWinBlinkAni=function(){var e=cc.blink(1,4);this.blink.active=!0,this.blink.opacity=0,this.blink.runAction(e)},t.prototype.setViewBlink=function(){this.blink.active=!1,this.blink.opacity=0},t.prototype.FillInViewSumChip=function(e){var t="";t=e>=1e3&&e<1e4?e/1e3+"K":e>=1e4?e/1e4+"W":e,this.sum_chip.string=t},t.prototype.FillInViewBetChip=function(e){var t="";t=e>=1e3&&e<1e4?e/1e3+"K":e>=1e4?e/1e4+"W":e,this.bet_chip.string=t},t.prototype.resetViewBetChip=function(){this.bet_chip.string="0",this.sum_chip.string="0"},t.prototype.switchBetTouch=function(e){this.btn_bet.active=e},t.prototype.onBetEvent=function(e){var t=this.BRNNFooter.BET_VALUE;t*=1,s.NetManager.getGameProtocol().sendBetReq(t,this.LocIdx)},t.prototype.removeAreaChip=function(){for(var e=this.chip_area.childrenCount,t=0;t<e;t++)this.clearChip()},i([u(r.default)],t.prototype,"BRNNFooter",void 0),i([u(cc.Label)],t.prototype,"sum_chip",void 0),i([u(cc.Label)],t.prototype,"bet_chip",void 0),i([u(cc.Node)],t.prototype,"blink",void 0),i([u(cc.Node)],t.prototype,"btn_bet",void 0),i([u(cc.Node)],t.prototype,"chip_area",void 0),i([u(cc.Prefab)],t.prototype,"chip",void 0),i([u],t.prototype,"MaxArea",void 0),i([u],t.prototype,"MinArea",void 0),i([u],t.prototype,"LocIdx",void 0),t=i([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/NetManager":void 0,"../model/CMD_BRNN":"CMD_BRNN","./BRNNFooter":"BRNNFooter"}],CMD_BRNN:[function(e,t,o){"use strict";cc._RF.push(t,"106dcKM2IxFyLtQK6WyN5Ax","CMD_BRNN"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.zeroMemory=function(e){for(var t=[],o=0;o<e;o++)t[o]=0;return t},e.clone=function(e){return JSON.parse(JSON.stringify(e))},e.DIR_CARD_POS=[cc.v2(145,175),cc.v2(-440,-180),cc.v2(-175,-180),cc.v2(90,-180),cc.v2(325,-180)],e.DEALCARD_POS=cc.v2(275,270),e.BETCHIP_VALUE=[2,5,10,20,50],e}();o.default=n,cc._RF.pop()},{}],OnlinePlayer:[function(e,t,o){"use strict";cc._RF.push(t,"06a58ZD6IVLpI+F0rLt8VTc","OnlinePlayer");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,c=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,t,o,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(c=(r<3?i(c):r>3?i(t,o,c):i(t,o))||c);return r>3&&c&&Object.defineProperty(t,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../common/utils/Utils"),c=e("../../../common/UIHelper"),a=e("../../../manager/NetManager"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cancel=null,t.spr=null,t.arrow=null,t.btn_click=null,t.user_panel=null,t.tips=null,t.ScrollView=null,t.user_item=null,t.is_move_out=!1,t.is_done=!0,t}return n(t,e),t.prototype.start=function(){var e=this;r.default.addClickEventEND(this.btn_click,function(){e.onClickEvent()}),r.default.addClickEventEND(this.cancel,function(){e.onCancelEvent()})},t.prototype.onClickEvent=function(){this.is_done?(this.is_done=!1,this.is_move_out?this.playMoveBack():a.NetManager.getGameProtocol().sendGetOnlineUser()):console.log("\u52a8\u753b\u8fd8\u672a\u7ed3\u675f \u4e0d\u53ef\u70b9\u51fb")},t.prototype.onCancelEvent=function(){this.is_done?this.is_move_out?(this.is_done=!1,this.playMoveBack()):console.log("\u672a\u79fb\u52a8\u51fa\u53bb"):console.log("\u52a8\u753b\u8fd8\u672a\u7ed3\u675f \u4e0d\u53ef\u70b9\u51fb")},t.prototype.playMoveOut=function(){var e=this;this.user_panel.active=!0,this.arrow.scaleX=-1,this.is_move_out=!0;var t=cc.sequence(cc.moveBy(.5,cc.v2(this.user_panel.width,0)),cc.callFunc(function(){e.is_done=!0}));this.spr.runAction(t)},t.prototype.playMoveBack=function(){var e=this;this.arrow.scaleX=1;var t=cc.sequence(cc.moveBy(.5,cc.v2(-this.user_panel.width,0)),cc.callFunc(function(){e.user_panel.active=!1,e.is_done=!0,e.is_move_out=!1}));this.spr.runAction(t)},t.prototype.refPeopleTips=function(e){this.tips.string="\u672c\u684c\u5171"+e+"\u4eba\u968f\u673a\n\u663e\u793a\u4e0a\u5c4020\u540d\u4e0b\u6ce8\u73a9\u5bb6"},t.prototype.refUserList=function(e){var t=this,o=cc.find("view/content",this.ScrollView);o.destroyAllChildren(),e.forEach(function(e,n){var i=cc.instantiate(t.user_item);i.active=!0;var a=i.getChildByName("head"),s=i.getChildByName("name"),l=i.getChildByName("gold");c.default.setHeadIcon(e.headimg_id,a),s.getComponent(cc.Label).string=r.default.getSubStringLengTxt(e.username)||r.default.getReplaceStrToStar(e.player_id),l.getComponent(cc.Label).string=parseFloat(e.gold).toFixed(2),o.addChild(i)})},i([p(cc.Node)],t.prototype,"cancel",void 0),i([p(cc.Node)],t.prototype,"spr",void 0),i([p(cc.Node)],t.prototype,"arrow",void 0),i([p(cc.Node)],t.prototype,"btn_click",void 0),i([p(cc.Node)],t.prototype,"user_panel",void 0),i([p(cc.Label)],t.prototype,"tips",void 0),i([p(cc.Node)],t.prototype,"ScrollView",void 0),i([p(cc.Prefab)],t.prototype,"user_item",void 0),t=i([l],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../common/UIHelper":void 0,"../../../common/utils/Utils":void 0,"../../../manager/NetManager":void 0}],ProtocolBRNN:[function(e,t,o){"use strict";cc._RF.push(t,"4c5b9eU8tpObr0uTo9/oziM","ProtocolBRNN");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../manager/DataManager"),r=e("../../../net/ProtocolBase"),c=e("../../../manager/NetManager"),a=e("../../../manager/UIManager"),s=e("../../../Define"),l=e("./BRNNCmd"),p=function(e){function t(){var t=e.call(this,"game/brnn/pb")||this;return t.cmd=l.BRNNCmd,t.type=s.SocketType.Game,t.pbName="BRNN",t}return n(t,e),t.prototype.sendBetReq=function(e,t){var o={player_id:i.DataManager.userInfo.userid,bet_value:e,loc:t};console.log("============>\u53d1\u9001\u4e0b\u6ce8\u8bf7\u6c42"),this.send(o,"bet_req")},t.prototype.sendGetOnlineUser=function(){var e={player_id:i.DataManager.userInfo.userid};console.log("============>\u53d1\u9001\u83b7\u53d6\u5728\u7ebf\u4eba\u6570\u8bf7\u6c42"),this.send(e,"other_users_req")},t.prototype.dealError=function(e){a.UIManager.showTipsPopup(e.err_msg)},t.prototype.dealGameStart=function(e){},t.prototype.dealSendCardNotify=function(e){},t.prototype.dealStartBetNotify=function(e){},t.prototype.dealBetNotify=function(e){},t.prototype.dealOtherBetNotify=function(e){},t.prototype.dealShowCardNotify=function(e){},t.prototype.dealOtherUsersRes=function(e){},t.prototype.dealGameEnd=function(e){},t.prototype.dealWaitNext=function(e){},t.prototype.dealGameReconnect=function(e){},t}(r.default);o.default=p,c.NetManager.protocolCache.ProtocolBRNN=p,cc._RF.pop()},{"../../../Define":void 0,"../../../manager/DataManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"../../../net/ProtocolBase":void 0,"./BRNNCmd":"BRNNCmd"}]},{},["BRNNGameScene","BRNNGameView","BRNNTool","CMD_BRNN","BRNNCmd","ProtocolBRNN","BRNNBetAreaPanel","BRNNCard","BRNNCenterPanel","BRNNChip","BRNNFooter","BRNNTopPanel","BetArea","OnlinePlayer"]);