window.__require=function e(t,o,n){function r(a,l){if(!o[a]){if(!t[a]){var s=a.split("/");if(s=s[s.length-1],!t[s]){var c="function"==typeof __require&&__require;if(!l&&c)return c(s,!0);if(i)return i(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var p=o[a]={exports:{}};t[a][0].call(p.exports,function(e){return r(t[a][1][e]||e)},p,p.exports,e,t,o,n)}return o[a].exports}for(var i="function"==typeof __require&&__require,a=0;a<n.length;a++)r(n[a]);return r}({MFWZBulletMgr:[function(e,t,o){"use strict";cc._RF.push(t,"98292MhJ59PVKAkft0F+Amg","MFWZBulletMgr");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./MFWZBullet"),a=cc._decorator,l=a.ccclass,s=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bullet=null,t.bullet_node=null,t.bullet_pool=null,t.star_pos=cc.v2(0,0),t}return n(t,e),t.prototype.onLoad=function(){this.bullet_pool=new cc.NodePool},t.prototype.createBullet=function(e,t,o){void 0===t&&(t=!0);var n=null,r=(n=this.bullet_pool.size()>0?this.bullet_pool.get():cc.instantiate(this.bullet)).getComponent(i.default);return r.setBulletTag(o),r.setBulletByPlayer(t),r.initBulletSkin(e),n},t.prototype.clearBullet=function(e){(e=e||this.bullet_node.children[0]).stopAllActions(),this.bullet_pool.put(e),e.removeFromParent()},t.prototype.clearAllBullet=function(){for(var e=this.bullet_node.childrenCount,t=0;t<e;t++){var o=this.bullet_node.children[t];void 0!=o&&this.clearBullet(o)}},t.prototype.addBullet=function(e,t,o,n){var r=this.createBullet(t,!0,o);r.scaleX=e.scaleX;e.scaleX;r.x=e.x,r.y=e.y+e.height/1.5;var i=cc.moveBy(1,cc.v2(-n*e.scaleX,0));r.runAction(cc.repeatForever(i)),this.bullet_node.addChild(r)},t.prototype.addOtherBullet=function(e,t,o,n){var r=this.createBullet(t,!1,o);r.scaleX=e.scaleX;var i=-1==e.scaleX?0:1;r.x=e.x-e.width*i,r.y=e.y+e.height/1.5;var a=cc.moveBy(1,cc.v2(-n*e.scaleX,0));r.runAction(cc.repeatForever(a)),this.bullet_node.addChild(r)},t.prototype.setBulletNode=function(e){this.bullet_node=e},t.prototype.getBulletNode=function(){return this.bullet_node},t.prototype.onDestroy=function(){this.bullet_pool.clear(),this.bullet_pool=null,this.unscheduleAllCallbacks()},r([s(cc.Prefab)],t.prototype,"bullet",void 0),r([s(cc.Node)],t.prototype,"bullet_node",void 0),t=r([l],t)}(cc.Component);o.default=c,cc._RF.pop()},{"./MFWZBullet":"MFWZBullet"}],MFWZBullet:[function(e,t,o){"use strict";cc._RF.push(t,"6b8b9WOnpdG3qtbrzbplpdA","MFWZBullet");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(a,l)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return s([e,t])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../manager/ResManager"),s=e("../../mfwz/protocol/MFWZDefine"),c=cc._decorator,p=c.ccclass,u=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bullet=null,t.bullet_spineData=[],t.bullet_id=0,t.bullet_type=0,t.bulletMgr=null,t.is_my=!0,t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.setBulletTag=function(e){this.bullet_id=e},t.prototype.getBullstTag=function(){return this.bullet_id},t.prototype.setBulletByPlayer=function(e){this.is_my=e},t.prototype.getBulletByPlayer=function(){return this.is_my},t.prototype.setBulletParent=function(e){this.bulletMgr=e},t.prototype.initBulletSkin=function(e){return i(this,void 0,void 0,function(){var t;return a(this,function(o){switch(o.label){case 0:return[4,l.ResManager.loadResAsync(s.MFWZEffectBullet[e],sp.SkeletonData)];case 1:return t=o.sent(),this.bullet_type=e,void 0==t?[2]:(this.bullet.clearTracks(),this.bullet.setToSetupPose(),this.bullet.skeletonData=t,this.bullet.animation="animation",this.bullet.node.active=!0,[2])}})})},t.prototype.getBulletType=function(){return this.bullet_type},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},r([u(sp.Skeleton)],t.prototype,"bullet",void 0),r([u(sp.SkeletonData)],t.prototype,"bullet_spineData",void 0),t=r([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../manager/ResManager":void 0,"../../mfwz/protocol/MFWZDefine":"MFWZDefine"}],MFWZCmd:[function(e,t,o){"use strict";cc._RF.push(t,"f24dajGIqpJvavwNjeFBAzp","MFWZCmd"),Object.defineProperty(o,"__esModule",{value:!0}),o.MFWZCmd="227_0",o.ProtocolMFWZCmd={GamePlayerMoveNotify:o.MFWZCmd+"_game_player_move_notify",GameBulletCreateRes:o.MFWZCmd+"_game_bullet_create_res",GameBulletDisappearRes:o.MFWZCmd+"_game_bullet_disappear_res",GameFishFreshNotify:o.MFWZCmd+"_game_fish_fresh_notify",GameFishDiedNotify:o.MFWZCmd+"_game_fish_died_notify",GameReconnectInfo:o.MFWZCmd+"_game_reconnect_info",GameErrRes:o.MFWZCmd+"_game_err_res",GameOtherJoin:o.MFWZCmd+"_game_other_join",GameOtherLeave:o.MFWZCmd+"_game_other_leave",GameBulletChangeRes:o.MFWZCmd+"_game_bullet_change_res",GetMFWZGameInofRep:"11_0_get_mfwzgame_info_res"},cc._RF.pop()},{}],MFWZDefine:[function(e,t,o){"use strict";var n,r,i,a,l,s,c;cc._RF.push(t,"f14a40k1+VOHLD4abKfZOXm","MFWZDefine"),Object.defineProperty(o,"__esModule",{value:!0}),o.MFWZEffectUrl="game/mfwz/effect/",o.MFWZEffectBoom=((n={})[0]=o.MFWZEffectUrl+"player/fs1/userprop3/baozhaf1",n[1]=o.MFWZEffectUrl+"player/fs2/userprop1/baozhaf3",n[2]=o.MFWZEffectUrl+"player/fs3/userprop1/baozhaf2",n[3]=o.MFWZEffectUrl+"player/gjs1/userprop1/baozhag1",n[4]=o.MFWZEffectUrl+"player/gjs2/userprop1/baozhag2",n[5]=o.MFWZEffectUrl+"player/gjs3/userprop1/baozhag3",n[6]=o.MFWZEffectUrl+"player/gdf/userprop2/gandaofubaozha",n),o.MFWZEffectMonster=((r={})[0]=o.MFWZEffectUrl+"monster/gw1/equan",r[1]=o.MFWZEffectUrl+"monster/gw2/renmatongling",r[2]=o.MFWZEffectUrl+"monster/gw3/jumo",r[3]=o.MFWZEffectUrl+"monster/gw4/lvyejingling",r[4]=o.MFWZEffectUrl+"monster/gw5/milu",r[5]=o.MFWZEffectUrl+"monster/gw6/nongfu",r[6]=o.MFWZEffectUrl+"monster/gw7/shirenduizhang",r[7]=o.MFWZEffectUrl+"monster/gw8/shourenpingmin",r[8]=o.MFWZEffectUrl+"monster/gw9/shourenzhanshi",r[9]=o.MFWZEffectUrl+"monster/gw10/SRJW",r[10]=o.MFWZEffectUrl+"monster/gw11/SRXXG",r[11]=o.MFWZEffectUrl+"monster/gw12/eff_people",r[12]=o.MFWZEffectUrl+"monster/gw13/eff_people",r[13]=o.MFWZEffectUrl+"monster/gw14/yuren",r[14]=o.MFWZEffectUrl+"monster/gw15/airenzhanshi",r[15]=o.MFWZEffectUrl+"monster/gw16/jiandunzhanshi",r[16]=o.MFWZEffectUrl+"player/gdf/user/gandaofu",r[17]=o.MFWZEffectUrl+"monster/hl/yanlongwang",r[18]=o.MFWZEffectUrl+"monster/qml/qml",r[19]=o.MFWZEffectUrl+"monster/sl/binglongwang",r[20]=o.MFWZEffectUrl+"boss/BOSS",r),o.MFWZEffectTips=((i={})[0]=o.MFWZEffectUrl+"player/gdf/userprop3/gandaofu",i[1]=o.MFWZEffectUrl+"monster/hl/huolong",i[2]=o.MFWZEffectUrl+"monster/qml/qimeila",i[3]=o.MFWZEffectUrl+"monster/sl/binglong",i[4]=o.MFWZEffectUrl+"monster/hl/huoyan",i[5]=o.MFWZEffectUrl+"monster/sl/bingdong",i),o.MFWZEffectBullet=((a={})[0]=o.MFWZEffectUrl+"player/fs1/userprop2/jineng1",a[1]=o.MFWZEffectUrl+"player/fs2/userprop3/jineng2",a[2]=o.MFWZEffectUrl+"player/fs3/userprop3/jineng3",a[3]=o.MFWZEffectUrl+"player/gjs1/userprop2/jian1",a[4]=o.MFWZEffectUrl+"player/gjs2/userprop2/jian2",a[5]=o.MFWZEffectUrl+"player/gjs3/userprop2/jian3",a[6]=o.MFWZEffectUrl+"player/gdf/userprop1/jinenggandaofu",a),o.MFWZEffectPlayer=((l={})[0]=o.MFWZEffectUrl+"player/fs1/user/fashi1",l[1]=o.MFWZEffectUrl+"player/fs2/user/fashi2",l[2]=o.MFWZEffectUrl+"player/fs3/user/fashi3",l[3]=o.MFWZEffectUrl+"player/gjs1/user/gongjianshou1",l[4]=o.MFWZEffectUrl+"player/gjs2/user/gongjianshou2",l[5]=o.MFWZEffectUrl+"player/gjs3/user/gongjianshou3",l[6]=o.MFWZEffectUrl+"player/gdf/user/gandaofu",l),o.MFWZEffectQiu=((s={})[0]=o.MFWZEffectUrl+"player/fs1/userprop4/qiu1",s[1]=o.MFWZEffectUrl+"player/fs2/userprop4/qiu2",s[2]=o.MFWZEffectUrl+"player/fs3/userprop4/qiu3",s),o.MFWZEffectAccack=((c={})[0]=o.MFWZEffectUrl+"player/fs1/userprop1/zi",c[1]=o.MFWZEffectUrl+"player/fs2/userprop2/cheng",c[2]=o.MFWZEffectUrl+"player/fs3/userprop2/lan",c),cc._RF.pop()},{}],MFWZGameScene:[function(e,t,o){"use strict";cc._RF.push(t,"c1234gf04hJ8p0Q07gutuTy","MFWZGameScene");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./MFWZGameView"),a=e("../../../manager/EventManager"),l=e("../../../net/NetCmd"),s=e("../protocol/MFWZCmd"),c=e("../../../Define"),p=e("../../../manager/NetManager"),u=cc._decorator,h=u.ccclass,f=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.GameView=null,t}return n(t,e),t.prototype.onLoad=function(){cc.sys.os!=cc.sys.OS_IOS&&(cc.dynamicAtlasManager.enabled=!0),this.GameView.GameScene=this,this.initData()},t.prototype.initData=function(){a.EventManager.on(this,l.ProtocolGameCmd.GameLoginResp,this.onGameLoginResp.bind(this)),a.EventManager.on(this,s.ProtocolMFWZCmd.GameReconnectInfo,this.onGameReconnectInfo.bind(this)),a.EventManager.on(this,s.ProtocolMFWZCmd.GamePlayerMoveNotify,this.onGamePlayerMoveNotify.bind(this)),a.EventManager.on(this,s.ProtocolMFWZCmd.GameBulletCreateRes,this.onGameBulletCreateRes.bind(this)),a.EventManager.on(this,s.ProtocolMFWZCmd.GameBulletDisappearRes,this.onGameBulletDisappearRes.bind(this)),a.EventManager.on(this,s.ProtocolMFWZCmd.GameFishFreshNotify,this.onGameFishFreshNotify.bind(this)),a.EventManager.on(this,s.ProtocolMFWZCmd.GameFishDiedNotify,this.onGameFishDiedNotify.bind(this)),a.EventManager.on(this,s.ProtocolMFWZCmd.GameErrRes,this.onGameErrRes.bind(this)),a.EventManager.on(this,s.ProtocolMFWZCmd.GameOtherJoin,this.onGameOtherJoin.bind(this)),a.EventManager.on(this,s.ProtocolMFWZCmd.GameOtherLeave,this.onGameOtherLeave.bind(this)),a.EventManager.on(this,s.ProtocolMFWZCmd.GameBulletChangeRes,this.onGameBulletChangeRes.bind(this)),a.EventManager.on(this,c.EventDef.UpdateUserGold,this.onUpdateUserScore.bind(this)),a.EventManager.on(this,c.EventDef.GameHide,this.onGameHide.bind(this)),a.EventManager.on(this,c.EventDef.GameShow,this.onGameShow.bind(this))},t.prototype.onGameLoginResp=function(e){console.log("\u6548\u9a8c\u6210\u529f====>",e),p.NetManager.getGameProtocol().GAME_ROOM_LIMITE=e.room_info.room_base_note},t.prototype.onGameHide=function(){},t.prototype.onGameShow=function(){this.GameView.StopAllCall()},t.prototype.onGameReconnectInfo=function(e){console.log("\u52a0\u5165\u623f\u95f4\u901a\u77e5",e),this.GameView.onSubJoinRoom(e),this.GameView.initUserInfo(e.player_info.vip_level)},t.prototype.onGamePlayerMoveNotify=function(e){console.log("\u79fb\u52a8\u89d2\u8272\u901a\u77e5",e),this.GameView.onGamePlayerMoveNotify(e)},t.prototype.onGameBulletCreateRes=function(e){console.log("\u5b50\u5f39\u521b\u5efa\u901a\u77e5",e),this.GameView.onGameBulletCreateRes(e)},t.prototype.onGameBulletDisappearRes=function(e){console.log("\u5b50\u5f39\u6d88\u5931\u901a\u77e5",e),this.GameView.onGameBulletDisappearRes(e)},t.prototype.onGameFishFreshNotify=function(e){console.log("\u5237\u65b0\u901a\u77e5",e),this.GameView.onGameFishFreshNotify(e)},t.prototype.onGameFishDiedNotify=function(e){console.log("\u6b7b\u4ea1\u901a\u77e5",e),this.GameView.onGameFishDiedNotify(e)},t.prototype.onGameErrRes=function(e){console.log("\u6e38\u620f\u81ea\u8eab\u5185\u90e8\u9519\u8bef",e)},t.prototype.onGameOtherJoin=function(e){console.log("\u5176\u4ed6\u73a9\u5bb6\u52a0\u5165\u623f\u95f4\u901a\u77e5",e),this.GameView.onGameOtherJoin(e)},t.prototype.onGameOtherLeave=function(e){console.log("\u5176\u4ed6\u73a9\u5bb6\u79bb\u5f00\u623f\u95f4\u901a\u77e5",e),this.GameView.onGameOtherLeave(e)},t.prototype.onGameBulletChangeRes=function(e){console.log("\u66f4\u6362\u5b50\u5f39\u7b49\u7ea7\u901a\u77e5",e),this.GameView.onGameBulletChangeRes(e)},t.prototype.onUpdateUserScore=function(){this.GameView.onUpdateUserScore()},t.prototype.onDestroy=function(){a.EventManager.off(this)},r([f(i.default)],t.prototype,"GameView",void 0),t=r([h],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../Define":void 0,"../../../manager/EventManager":void 0,"../../../manager/NetManager":void 0,"../../../net/NetCmd":void 0,"../protocol/MFWZCmd":"MFWZCmd","./MFWZGameView":"MFWZGameView"}],MFWZGameView:[function(e,t,o){"use strict";cc._RF.push(t,"c79c7Z99mhDsrYsqHqXzTpt","MFWZGameView");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./MFWZMonsterMgr"),a=e("./MFWZBulletMgr"),l=e("../../../manager/AudioManager"),s=e("./MFWZSkillMgr"),c=e("./MFWZOperation"),p=e("./MFWZSpecialTips"),u=e("./MFWZOtherPlayer"),h=e("./MFWZTopPanel"),f=e("./MFWZGoldAni"),d=e("../../../manager/DataManager"),y=e("../../../manager/NetManager"),_=e("../../../common/utils/Utils"),m=e("../../../manager/UIManager"),v=cc._decorator,M=v.ccclass,g=v.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MFWZTopPanel=null,t.MFWZMonsterMgr=null,t.MFWZBulletMgr=null,t.MFWZSkillMgr=null,t.MFWZOperation=null,t.MFWZSpecialTips=null,t.MFWZOtherPlayer=null,t.MFWZGoldAni=null,t.GameScene=null,t.player_type=1,t.player_type_bek=1,t.winFrame=cc.v2(0,0),t.lock_shot=!1,t.auto_shot=!1,t.touch_monster=!1,t.lock_shotmonsterid=-1,t}return n(t,e),t.prototype.onLoad=function(){l.AudioManager.playGameBGM("mfwz_bgm"),this.MFWZSkillMgr.GameView=this,this.MFWZMonsterMgr.GameView=this,this.MFWZOperation.GameView=this,this.MFWZTopPanel.GameView=this;var e=cc.director.getWinSize();this.winFrame.x=e.width,this.winFrame.y=e.height},t.prototype.start=function(){},t.prototype.initUserInfo=function(e){var t={username:_.default.getSubStringLengTxt(d.DataManager.userInfo.nickname)||_.default.getReplaceStrToStar(d.DataManager.userInfo.userid),gold:d.DataManager.userInfo.gold,headimg_id:d.DataManager.userInfo.headimgurl,vip_level:e};this.MFWZTopPanel.addSelfUserHead(t)},t.prototype.specialMonster=function(e,t){l.AudioManager.playGameSFX("mfwz_tips");var o=e.fish_info[0].fish_type-17;4!=o&&0==t&&this.MFWZSpecialTips.initTipsSkin(o),this.MFWZMonsterMgr.addSpecialMonster(this.winFrame,e)},t.prototype.createMonster=function(e){this.MFWZMonsterMgr.addMonster(this.winFrame,e)},t.prototype.setMonsterClick=function(){for(var e=this.MFWZMonsterMgr.getMonsterNode(),t=e.length,o=0;o<t;o++){var n=e[o];void 0!=n&&(n.getComponent("MFWZMonster").setMonsterTouchState(this.lock_shot),this.lock_shot||n.getComponent("MFWZMonster").setMonsterDi(!1))}},t.prototype.clearMonster=function(){for(var e=this.MFWZMonsterMgr.getMonsterNode(),t=e.length,o=0;o<t;o++){var n=e[o];if(void 0!=n&&((n.x>this.winFrame.x/2||n.x<-this.winFrame.x/2)&&(this.lock_shotmonsterid==n.getComponent("MFWZMonster").getMonsterTag()&&(this.touch_monster=!1,this.lock_shot&&this.MFWZOperation.stopShotBullet()),n.getComponent("MFWZMonster").setMonsterDi(!1)),n.x>this.winFrame.x/2+200||n.x<-this.winFrame.x/2-200)){this.MFWZMonsterMgr.clearMonster(o,n);break}}},t.prototype.clearBullet=function(){for(var e=this.MFWZBulletMgr.getBulletNode(),t=e.childrenCount,o=0;o<t;o++){var n=e.children[o];void 0!=n&&(n.x>this.winFrame.x/2||n.x<-this.winFrame.x/2)&&(n.getComponent("MFWZBullet").getBulletByPlayer()&&y.NetManager.getGameProtocol().sendDisappearBulletReq(n.getComponent("MFWZBullet").getBullstTag()),this.MFWZBulletMgr.clearBullet(n))}},t.prototype.lockShotBack=function(e){this.lock_shotmonsterid=e;for(var t=null,o=this.MFWZMonsterMgr.getMonsterNode(),n=0;n<o.length;n++)e==o[n].getComponent("MFWZMonster").getMonsterTag()?t=o[n]:o[n].getComponent("MFWZMonster").setMonsterDi(!1);if(null!=t){var r=cc.v2(0,0);r.x=t.x,r.y=t.y,this.lock_shot?this.MFWZOperation.lockShotMovePlayer(!0,t):this.MFWZOperation.lockShotMovePlayer(!1,t)}},t.prototype.killMonster=function(e,t){for(var o=this.MFWZMonsterMgr.getMonsterNode(),n=o.length-1;n>=0;n--){var r=o[n];if(e.killfishid==r.getComponent("MFWZMonster").getMonsterTag()){if(r.getComponent("MFWZMonster").setMonsterLiveState(!1),r.getComponent("MFWZMonster").playMonsterActs(1,t,e.score),0!=e.skill_info.id)l.AudioManager.playGameSFX("mfwz_kill_special");else{var i=r.getComponent("MFWZMonster").getMonsterType();i<5?3==i?l.AudioManager.playGameSFX("mfwz_kill_nvwu"):l.AudioManager.playGameSFX("mfwz_kill_four"):l.AudioManager.playGameSFX("mfwz_kill_two")}e.killfishid==this.lock_shotmonsterid&&(this.touch_monster=!1,this.lock_shotmonsterid=-1,this.lock_shot&&this.MFWZOperation.stopShotBullet());var a=cc.v2(0,0);a=this.MFWZTopPanel.getUserNodePos(t,e.seat_id),this.MFWZGoldAni.playAnim(r.getPosition(),a,t),this.MFWZMonsterMgr.clearMonster(n,r,!0);break}}},t.prototype.stopMonsterMove=function(){for(var e=this.MFWZMonsterMgr.getMonsterNode(),t=e.length,o=0;o<t;o++){e[o].pauseAllActions()}},t.prototype.resumeMonsterMove=function(){for(var e=this.MFWZMonsterMgr.getMonsterNode(),t=e.length,o=0;o<t;o++){e[o].resumeAllActions()}},t.prototype.update=function(){this.clearMonster(),this.clearBullet();for(var e=this.MFWZBulletMgr.getBulletNode(),t=0;t<e.childrenCount;t++)for(var o=cc.rect(e.children[t].x-80*e.children[t].scaleX,e.children[t].y,e.children[t].width/5,1),n=this.MFWZMonsterMgr.getMonsterNode(),r=0;r<n.length;r++){var i=cc.rect(n[r].x,n[r].y,n[r].width/4,n[r].height/1.1),a=n[r].getComponent("MFWZMonster").getMonsterLiveState();if(this.touch_monster){if(this.lock_shotmonsterid==n[r].getComponent("MFWZMonster").getMonsterTag()){if(o.intersects(i)&&a){this.lock_shot||(this.touch_monster=!1),n[r].getComponent("MFWZMonster").playBoom(e.children[t].y-n[r].y,e.children[t].getComponent("MFWZBullet").getBulletType()),n[r].getComponent("MFWZMonster").setMonsterColor(),e.children[t].getComponent("MFWZBullet").getBulletByPlayer()?y.NetManager.getGameProtocol().sendBulletAttackReq(e.children[t].getComponent("MFWZBullet").getBullstTag(),n[r].getComponent("MFWZMonster").getMonsterTag()):y.NetManager.getGameProtocol().sendBulletAttackReq(e.children[t].getComponent("MFWZBullet").getBullstTag(),n[r].getComponent("MFWZMonster").getMonsterTag(),!1),this.MFWZBulletMgr.clearBullet(e.children[t]);break}this.MFWZOperation.lockShotPlayerLorR(n[r].position)}}else if(o.intersects(i)&&a){n[r].getComponent("MFWZMonster").setMonsterColor(),n[r].getComponent("MFWZMonster").playBoom(e.children[t].y-n[r].y,e.children[t].getComponent("MFWZBullet").getBulletType()),e.children[t].getComponent("MFWZBullet").getBulletByPlayer()?y.NetManager.getGameProtocol().sendBulletAttackReq(e.children[t].getComponent("MFWZBullet").getBullstTag(),n[r].getComponent("MFWZMonster").getMonsterTag()):y.NetManager.getGameProtocol().sendBulletAttackReq(e.children[t].getComponent("MFWZBullet").getBullstTag(),n[r].getComponent("MFWZMonster").getMonsterTag(),!1),this.MFWZBulletMgr.clearBullet(e.children[t]);break}}},t.prototype.getBulletLevel=function(){return this.MFWZSkillMgr.getBulletLevel()},t.prototype.onSubJoinRoom=function(e){var t=this;this.MFWZMonsterMgr.clearAllMonster(),this.MFWZTopPanel.removeAllUserInfo(),this.MFWZOperation.removeSelfPlayer(),this.MFWZOperation.cancelLock(),this.MFWZOperation.cancelLock(),this.MFWZOperation.cancelCall(),this.MFWZSkillMgr.lockClick(!1),this.MFWZSkillMgr.autoClick(!1),y.NetManager.getGameProtocol().BULLET_LEVEL_LIST=e.bullet_level;var o=cc.v2(e.player_info.point.x,e.player_info.point.y);this.MFWZOperation.initPlayer(o,e.player_info.bullet_cur_level,e.player_info.angle),y.NetManager.getGameProtocol().MYSELF_SEAT_ID=e.player_info.seat_id,e.monster_times.sort(function(e,t){return e.times-t.times}),y.NetManager.getGameProtocol().MONSTER_TIMES=e.monster_times,this.MFWZSkillMgr.initUser(e.player_info.bullet_cur_level),this.MFWZOtherPlayer.removeAllPlayer(),e.other_player_info.forEach(function(e,o){var n=cc.v2(e.point.x,e.point.y);t.MFWZOtherPlayer.createPlayer(e.seat_id,e.bullet_cur_level,e.angle,n),t.MFWZTopPanel.addOtherUserHeadMsg(e)}),e.fishs.forEach(function(e,o){t.onGameFishFreshNotify(e,!0)}),e.skill_info.forEach(function(o,n){if(2==o.id)t.MFWZSpecialTips.initTipsSkin(5),t.stopMonsterMove(),t.scheduleOnce(function(){t.resumeMonsterMove()},o.time_out);else if(3==o.id){var r=!1;y.NetManager.getGameProtocol().MYSELF_SEAT_ID==o.seat_id&&(r=!0),r?(t.MFWZOperation.initPlayerSkin(6),t.MFWZSkillMgr.changeHead(3)):t.MFWZOtherPlayer.initLevel(e.seat_id,999),t.scheduleOnce(function(){t.skinBackToNormal(r,e)},o.time_out)}})},t.prototype.onGameBulletCreateRes=function(e){0==e.res?(l.AudioManager.playGameSFX("mfwz_shot"),e.seat_id==y.NetManager.getGameProtocol().MYSELF_SEAT_ID?(this.MFWZOperation.serverCreateBullet(e.bullet_id,e.speed),d.DataManager.userInfo.gold=e.gold,this.MFWZTopPanel.updateSelfUserInfo(e.gold)):(this.MFWZTopPanel.updateUserInfo(e.seat_id,e.gold),this.MFWZOtherPlayer.createBullet(e.seat_id,e.bullet_id,e.speed,e.point_player))):2==e.res&&(m.UIManager.showTips("\u91d1\u5e01\u4e0d\u8db3"),this.MFWZSkillMgr.lockClick(!1),this.MFWZSkillMgr.autoClick(!1),this.MFWZOperation.stopShotBullet())},t.prototype.onGameBulletDisappearRes=function(e){0==e.res&&(d.DataManager.userInfo.gold=e.gold,this.MFWZTopPanel.updateSelfUserInfo(e.gold))},t.prototype.onGameFishDiedNotify=function(e){var t=this,o=!1;e.player_id==d.DataManager.userInfo.userid?(d.DataManager.userInfo.gold=e.gold,this.MFWZTopPanel.updateSelfUserInfo(e.gold),o=!0):(this.MFWZTopPanel.updateUserInfo(e.seat_id,e.gold),o=!1),e.fish_id.forEach(function(n,r){e.killfishid=n,t.killMonster(e,o)}),1==e.skill_info.id?(l.AudioManager.playGameSFX("mfwz_boom"),this.MFWZSpecialTips.initTipsSkin(4)):2==e.skill_info.id?(l.AudioManager.playGameSFX("mfwz_frozen"),this.MFWZSpecialTips.initTipsSkin(5),this.stopMonsterMove(),this.scheduleOnce(function(){t.resumeMonsterMove()},e.skill_info.time_out)):3==e.skill_info.id&&(o?(this.MFWZOperation.initPlayerSkin(6),this.MFWZSkillMgr.changeHead(3)):this.MFWZOtherPlayer.initLevel(e.seat_id,999),this.scheduleOnce(function(){t.skinBackToNormal(o,e)},e.skill_info.time_out))},t.prototype.skinBackToNormal=function(e,t){e?(this.MFWZSkillMgr.changeHead(this.player_type-1),this.MFWZOperation.initPlayerSkin(this.player_type-1)):this.MFWZOtherPlayer.changeSkin(t.seat_id)},t.prototype.onGameFishFreshNotify=function(e,t){void 0===t&&(t=!1),0==e.special?this.createMonster(e):1==e.special&&this.specialMonster(e,t)},t.prototype.onGamePlayerMoveNotify=function(e){e.player_id!=d.DataManager.userInfo.userid&&this.MFWZOtherPlayer.touchMouseMove(e.seat_id,cc.v2(e.point.x,e.point.y),e.angle)},t.prototype.onGameOtherJoin=function(e){this.MFWZOtherPlayer.createPlayer(e.player_info.seat_id,e.player_info.bullet_cur_level,e.player_info.angle),this.MFWZTopPanel.addOtherUserHeadMsg(e.player_info)},t.prototype.onGameOtherLeave=function(e){this.MFWZOtherPlayer.removePlayer(e.player_info.seat_id),this.MFWZTopPanel.removeUserInfo(e.player_info.seat_id)},t.prototype.onGameBulletChangeRes=function(e){e.player_id==d.DataManager.userInfo.userid||this.MFWZOtherPlayer.initLevel(e.seat_id,e.level)},t.prototype.onUpdateUserScore=function(){this.MFWZTopPanel.updateSelfUserInfo(d.DataManager.userInfo.gold)},t.prototype.StopAllCall=function(){this.unscheduleAllCallbacks(),this.MFWZOperation.cancelCall(),this.MFWZBulletMgr.clearAllBullet(),console.log("\u5207\u5c4f\u5220\u9664\u4e00\u4e9b\u4e1c\u897f")},r([g(h.default)],t.prototype,"MFWZTopPanel",void 0),r([g(i.default)],t.prototype,"MFWZMonsterMgr",void 0),r([g(a.default)],t.prototype,"MFWZBulletMgr",void 0),r([g(s.default)],t.prototype,"MFWZSkillMgr",void 0),r([g(c.default)],t.prototype,"MFWZOperation",void 0),r([g(p.default)],t.prototype,"MFWZSpecialTips",void 0),r([g(u.default)],t.prototype,"MFWZOtherPlayer",void 0),r([g(f.default)],t.prototype,"MFWZGoldAni",void 0),t=r([M],t)}(cc.Component);o.default=b,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/AudioManager":void 0,"../../../manager/DataManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"./MFWZBulletMgr":"MFWZBulletMgr","./MFWZGoldAni":"MFWZGoldAni","./MFWZMonsterMgr":"MFWZMonsterMgr","./MFWZOperation":"MFWZOperation","./MFWZOtherPlayer":"MFWZOtherPlayer","./MFWZSkillMgr":"MFWZSkillMgr","./MFWZSpecialTips":"MFWZSpecialTips","./MFWZTopPanel":"MFWZTopPanel"}],MFWZGoldAni:[function(e,t,o){"use strict";cc._RF.push(t,"14880H2wblHrYO5rBiAMsdv","MFWZGoldAni");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(a,l)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return s([e,t])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../manager/ResManager"),s=cc._decorator,c=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.goldPrefab=null,t.coinPool=null,t}return n(t,e),t.prototype.onLoad=function(){this.coinPool=new cc.NodePool},t.prototype.createCoin=function(){return this.coinPool.size()>0?this.coinPool.get():cc.instantiate(this.goldPrefab)},t.prototype.clearCoin=function(e){(e=e||this.node.children[0]).stopAllActions(),this.coinPool.put(e),e.removeFromParent()},t.prototype.playAnim=function(e,t,o){var n=10*Math.random()+5;this.playCoinFlyAnim(n,e,t,o)},t.prototype.playCoinFlyAnim=function(e,t,o,n,r){return void 0===r&&(r=130),i(this,void 0,void 0,function(){var i,s,c,p=this;return a(this,function(a){switch(a.label){case 0:return i=this.getCirclePoints(r,t,e),[4,l.ResManager.loadResAsync("game/mfwz/res/img_yuanbao_jin",cc.SpriteFrame)];case 1:return s=a.sent(),[4,l.ResManager.loadResAsync("game/mfwz/res/img_yuanbao_yin",cc.SpriteFrame)];case 2:return c=a.sent(),i.map(function(e){var r=p.createCoin();return r.getComponent(cc.Sprite).spriteFrame=n?s:c,r.setPosition(t),p.node.addChild(r),{node:r,stPos:t,mdPos:e,edPos:o,dis:e.sub(o).mag()}}).sort(function(e,t){return e.dis-t.dis>0?1:e.dis-t.dis<0?-1:0}).forEach(function(e,t){e.node.runAction(cc.sequence(cc.moveTo(.3,e.mdPos),cc.delayTime(.05*t),cc.moveTo(.5,e.edPos),cc.callFunc(function(){p.clearCoin(e.node)})))}),[2]}})})},t.prototype.getCirclePoints=function(e,t,o,n){void 0===n&&(n=60);for(var r=[],i=Math.PI/180*Math.round(360/o),a=0;a<o;a++){var l=t.x+e*Math.sin(i*a),s=t.y+e*Math.cos(i*a);r.unshift(cc.v3(l+Math.random()*n,s+Math.random()*n,0))}return r},r([p(cc.Prefab)],t.prototype,"goldPrefab",void 0),t=r([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../manager/ResManager":void 0}],MFWZMonsterMgr:[function(e,t,o){"use strict";cc._RF.push(t,"9143fEDmJJPX66duTHFN7PS","MFWZMonsterMgr");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./MFWZMonster"),a=e("../../../manager/NetManager"),l=cc._decorator,s=l.ccclass,c=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.monster=null,t.monster_node=null,t.monster_size={w:[200,270,350,110,180,200,200,130,150,280,270,200,200,180,200,328,400,590,500,570,627],h:[132,270,330,220,220,230,240,190,210,320,270,330,330,250,180,336,342,460,460,465,548]},t.monster_list=[],t.GameView=null,t.monster_id=0,t.monster_pool=null,t}return n(t,e),t.prototype.onLoad=function(){this.monster_pool=new cc.NodePool},t.prototype.createMonster=function(e,t){var o=null,n=(o=this.monster_pool.size()>0?this.monster_pool.get():cc.instantiate(this.monster)).getComponent(i.default);return n.createMonster(e-1,this.setectMonster.bind(this),this.GameView.lock_shot),n.setMonsterTag(t),n.setMonsterLiveState(!0),o},t.prototype.clearMonster=function(e,t,o){var n=this;void 0===o&&(o=!1);var r=0;o&&(r=.9),this.node.runAction(cc.sequence(cc.delayTime(r),cc.callFunc(function(){t.stopAllActions(),t.getComponent(i.default).clearAddNode(),n.monster_pool.put(t),t.removeFromParent()}))),this.monster_list.splice(e,1)},t.prototype.clearAllMonster=function(){for(var e=this.monster_list.length,t=0;t<e;t++){var o=this.monster_list[t];o.stopAllActions(),o.getComponent(i.default).clearAddNode(),this.monster_pool.put(o),o.removeFromParent()}this.monster_list=[]},t.prototype.addMonster=function(e,t){var o=this.createMonster(t.fish_info[0].fish_type,t.fish_info[0].fish_id);o.scale=t.fish_size;var n=t.point.y,r=0==a.NetManager.getGameProtocol().MONSTER_DIRECTION_LIST[t.line]*e.x?-1:1;o.scaleX=r*t.fish_size;var l=this.monster_size.w[t.fish_info[0].fish_type-1],s=this.monster_size.h[t.fish_info[0].fish_type-1];o.width=l*t.fish_size,o.height=s*t.fish_size;var c=350*n-o.height/2,p=Math.ceil(360-c)+Math.floor(t.times/20);o.x=e.x*t.point.x,o.y=c,o.getComponent(i.default).setMonsterTouyinSize(l/134);var u=cc.moveBy(1,cc.v2(-t.speed*r,0));o.runAction(cc.repeatForever(u)),this.monster_node.addChild(o,p,"monster"),this.monster_list.push(o),o.zIndex=360-c},t.prototype.addSpecialMonster=function(e,t){var o=this.createMonster(t.fish_info[0].fish_type,t.fish_info[0].fish_id);o.scale=t.fish_size;var n=t.point.y,r=0==a.NetManager.getGameProtocol().MONSTER_DIRECTION_LIST[t.line]*e.x?-1:1;o.scaleX=r*t.fish_size;var l=this.monster_size.w[t.fish_info[0].fish_type-1],s=this.monster_size.h[t.fish_info[0].fish_type-1];o.width=l*t.fish_size,o.height=s*t.fish_size,o.getComponent(i.default).setMonsterTouyinSize(l/134);var c=n*o.height-o.height/2,p=Math.ceil(360-c)+Math.floor(t.times/10);c<-340&&(c=-340),o.x=e.x*t.point.x,o.y=c;var u=cc.moveBy(1,cc.v2(-t.speed*r,0));o.runAction(cc.repeatForever(u)),this.monster_node.addChild(o,p,"monster"),this.monster_list.push(o),o.zIndex=360-c},t.prototype.setMonsterNode=function(e){this.monster_node=e},t.prototype.setectMonster=function(e){this.GameView.touch_monster=!0,this.GameView.lockShotBack(e)},t.prototype.getMonsterNode=function(){return this.monster_list},t.prototype.onDestroy=function(){this.monster_pool.clear(),this.monster_pool=null,this.unscheduleAllCallbacks()},r([c(cc.Prefab)],t.prototype,"monster",void 0),r([c(cc.Node)],t.prototype,"monster_node",void 0),t=r([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../manager/NetManager":void 0,"./MFWZMonster":"MFWZMonster"}],MFWZMonster:[function(e,t,o){"use strict";cc._RF.push(t,"ae78efDhoBBB4UggucNSit6","MFWZMonster");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(a,l)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return s([e,t])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../common/utils/Utils"),s=e("../../../manager/ResManager"),c=e("../../mfwz/protocol/MFWZDefine"),p=cc._decorator,u=p.ccclass,h=p.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.monster=null,t.gold_spineData=[],t.yel_bmfont=null,t.black_bmfont=null,t.monster_id=0,t.monster_type=0,t.monster_skintype=0,t.live_state=!0,t.click_call=null,t.monster_di=null,t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.createMonster=function(e,t,o){this.monster_id=0,this.click_call=t,this.monster_type=e,this.monster_di=this.node.getChildByName("di"),this.setMonsterDi(!1),this.initMonsterEffect(e);var n=this.node.getChildByName("click");n.width=.8*this.monster.node.width,n.height=this.monster.node.height,n.y=this.monster.node.height/2,n.active=o;var r=this;l.default.addClickEventEND(n,function(){console.log("\u70b9\u51fb\u7684\u602a\u7269ID",r.monster_id),r.click_call(r.monster_id),r.setMonsterDi(!0)})},t.prototype.initMonsterEffect=function(e){return i(this,void 0,void 0,function(){var t;return a(this,function(o){switch(o.label){case 0:return[4,s.ResManager.loadResAsync(c.MFWZEffectMonster[e],sp.SkeletonData)];case 1:return void 0==(t=o.sent())||void 0==this.monster?[2]:(this.monster.clearTracks(),this.monster.setToSetupPose(),this.monster.skeletonData=t,this.monster.animation="move",this.monster.node.active=!0,[2])}})})},t.prototype.setMonsterDi=function(e){this.monster_di.active=e},t.prototype.playMonsterActs=function(e,t,o){var n=this.monster;if(n.node.active=!0,0==e)n.setAnimation(0,"move",!0);else{this.playGoldAni(t),this.flutterScore(o,cc.v2(0,100),t),this.node.stopAllActions();n.setAnimation(0,"die",!1)}},t.prototype.flutterScore=function(e,t,o,n){var r=new cc.Node;r.addComponent(cc.Label);var i=r.getComponent(cc.Label),a=0;a=this.node.scaleX<0?-1:1,r.scaleX=a,r.y=this.monster.node.height/2;i.font=o?this.yel_bmfont:this.black_bmfont;var l=Math.abs(e);i.string="+"+parseFloat(l+"").toFixed(2);var s=cc.moveBy(.5,t),c=cc.sequence(s,cc.delayTime(.5),cc.callFunc(function(){r.active=!1,n&&n(),r.removeFromParent()}));r.runAction(c),this.node.addChild(r,0,"movegold")},t.prototype.setMonsterTag=function(e){this.monster_id=e},t.prototype.getMonsterTag=function(){return this.monster_id},t.prototype.setMonsterLiveState=function(e){this.live_state=e},t.prototype.getMonsterLiveState=function(){return this.live_state},t.prototype.getMonsterType=function(){return this.monster_type},t.prototype.playBoom=function(e,t){return i(this,void 0,void 0,function(){var o,n,r;return a(this,function(i){switch(i.label){case 0:return[4,s.ResManager.loadResAsync(c.MFWZEffectBoom[t],sp.SkeletonData)];case 1:return void 0==(o=i.sent())?[2]:((n=new cc.Node).addComponent(sp.Skeleton),(r=n.getComponent(sp.Skeleton)).skeletonData=o,this.node.addChild(n,0,"boom"),r.node.y=e,r.loop=!1,r.animation="animation",r.setCompleteListener(function(){n.active=!1,n.removeFromParent()}),[2])}})})},t.prototype.playGoldAni=function(e){var t=new cc.Node;t.addComponent(sp.Skeleton);var o=t.getComponent(sp.Skeleton);o.skeletonData=e?this.gold_spineData[0]:this.gold_spineData[1],this.node.addChild(t,0,"gold"),o.node.y=this.monster.node.height/2,o.loop=!1,o.animation="animation",o.setCompleteListener(function(){t.active=!1,t.removeFromParent()})},t.prototype.setMonsterTouchState=function(e){this.node.getChildByName("click").active=e},t.prototype.setMonsterColor=function(){this.monster.node.color=cc.color(170,88,88),this.scheduleOnce(function(){this.monster.node.color=cc.color(255,255,255)},.3)},t.prototype.setMonsterTouyinSize=function(e){this.node.getChildByName("touying").scaleX=e},t.prototype.clearAddNode=function(){var e=this.node.getChildByName("gold"),t=this.node.getChildByName("boom"),o=this.node.getChildByName("movegold");e&&this.node.removeChild(e),t&&this.node.removeChild(t),o&&this.node.removeChild(o)},t.prototype.onDestroy=function(){this.clearAddNode(),this.unscheduleAllCallbacks()},r([h(sp.Skeleton)],t.prototype,"monster",void 0),r([h(sp.SkeletonData)],t.prototype,"gold_spineData",void 0),r([h(cc.Font)],t.prototype,"yel_bmfont",void 0),r([h(cc.Font)],t.prototype,"black_bmfont",void 0),t=r([u],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/ResManager":void 0,"../../mfwz/protocol/MFWZDefine":"MFWZDefine"}],MFWZOperation:[function(e,t,o){"use strict";cc._RF.push(t,"e51b3rhYPZAjZQWqi2rvXXq","MFWZOperation");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("./MFWZPlayer"),a=cc._decorator,l=a.ccclass,s=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MFWZPlayer=null,t.node_wheel=null,t.node_wheel_bg=null,t.btn_shot=null,t.GameView=null,t.star_pos=cc.v2(0,0),t.playermove_pos=cc.v2(0,0),t.move_playerLength=0,t.can_bullet=!0,t.auto_shotbullet=!1,t.already_move=!0,t}return n(t,e),t.prototype.onLoad=function(){this.MFWZPlayer.Operation=this,this.star_pos.x=this.node_wheel.x,this.star_pos.y=this.node_wheel.y,cc.sys.isMobile?(this.move_playerLength=this.MFWZPlayer.getMoveLength(),this.initTouch()):(this.node_wheel.active=!1,cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this))},t.prototype.start=function(){this.addEvenListener()},t.prototype.addEvenListener=function(){this.btn_shot.on(cc.Node.EventType.TOUCH_START,this.onEvenClickButtonStar.bind(this)),this.btn_shot.on(cc.Node.EventType.TOUCH_END,this.onEvenClickButtonEnd.bind(this))},t.prototype.onEvenClickButtonStar=function(){this.btn_shot.getChildByName("clicklight").active=!0,1==this.GameView.lock_shot&&this.cancelLock(),0==this.GameView.auto_shot&&this.autoShotBullet()},t.prototype.onEvenClickButtonEnd=function(){this.btn_shot.getChildByName("clicklight").active=!1,1==this.GameView.lock_shot&&this.cancelLock(),0==this.GameView.auto_shot&&this.stopShotBullet(),this.createBullet()},t.prototype.initPlayer=function(e,t,o){this.MFWZPlayer.initPlayer(e,t,o),cc.sys.isMobile||this.schedule(function(){this.can_bullet=!0},.3)},t.prototype.removeSelfPlayer=function(){this.MFWZPlayer.removeSelfPlayer()},t.prototype.initPlayerSkin=function(e){this.MFWZPlayer.initPlayerSkin(e)},t.prototype.initTouch=function(){this.node_wheel_bg.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node_wheel_bg.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.node_wheel_bg.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},t.prototype.onTouchMove=function(e){if(this.already_move){var t,o=0,n=0,r=e.getLocation(),i=(this.node.convertToWorldSpaceAR(cc.v2(0,0)),this.node.convertToNodeSpaceAR(r)),a=Math.abs(i.x-105),l=Math.abs(i.y-155);if(t=Math.atan(l/a),a<80&&l<80)o=i.x-105,n=i.y-155;else{var s=cc.v2(0,0);o=(s=this.trigonometricByAngel(i,t,80)).x,n=s.y}this.node_wheel.x=this.star_pos.x+o,this.node_wheel.y=this.star_pos.y+n,this.playermove_pos=this.trigonometricByAngel(i,t,this.move_playerLength)}},t.prototype.trigonometricByAngel=function(e,t,o){var n=o,r=0,i=0,a=cc.v2(0,0);return e.x>=105&&e.y<=155&&(r=Math.cos(t)*n,i=Math.sin(t)*-n),e.x<105&&e.y<155&&(r=Math.cos(t)*-n,i=Math.sin(t)*-n),e.x<105&&e.y>155&&(r=Math.cos(t)*-n,i=Math.sin(t)*n),e.x>105&&e.y>155&&(r=Math.cos(t)*n,i=Math.sin(t)*n),a.x=r,a.y=i,a},t.prototype.onTouchEnd=function(e){this.node_wheel.x=this.star_pos.x,this.node_wheel.y=this.star_pos.y,this.playermove_pos=cc.v2(0,0)},t.prototype.onTouchCancel=function(e){this.node_wheel.x=this.star_pos.x,this.node_wheel.y=this.star_pos.y,this.playermove_pos=cc.v2(0,0)},t.prototype.movePlayer=function(){(this.playermove_pos.x>0||this.playermove_pos.x<0||this.playermove_pos.y>0||this.playermove_pos.y<0)&&this.cancelLock(),this.MFWZPlayer.movePlayer(this.playermove_pos)},t.prototype.cancelLock=function(){this.GameView.lock_shot&&this.stopShotBullet(),this.GameView.MFWZSkillMgr.lockClick(!1)},t.prototype.lockShotMovePlayer=function(e,t){this.already_move=!1,this.stopShotBullet(),this.MFWZPlayer.stopMouseMove();var o,n=this.MFWZPlayer.getPlayer(),r=cc.v2(0,0);o=t.y-n.height/2+t.height/3,r=n.x<t.x?cc.v2(n.x+1,o):cc.v2(n.x-1,o);var i=this;this.MFWZPlayer.touchMouseMove(r,!1,function(){i.already_move=!0,e?i.autoShotBullet():i.GameView.auto_shot?i.autoShotBullet():i.createBullet()})},t.prototype.lockShotPlayerLorR=function(e){if(this.GameView.lock_shot&&this.already_move){var t=this.MFWZPlayer.getPlayer(),o=cc.v2(0,t.y);t.x<e.x+50?(o.x=t.x+1,t.scaleX=-1):(o.x=t.x-1,t.scaleX=1),this.MFWZPlayer.touchMouseMove(o,!1)}},t.prototype.onKeyDown=function(e){switch(e.keyCode){case cc.macro.KEY.w:console.log("Press w key"),this.playermove_pos=cc.v2(0,5),this.MFWZPlayer.stopMouseMove();break;case cc.macro.KEY.a:console.log("Press a key"),this.playermove_pos=cc.v2(-5,0),this.MFWZPlayer.stopMouseMove();break;case cc.macro.KEY.s:console.log("Press s key"),this.playermove_pos=cc.v2(0,-5),this.MFWZPlayer.stopMouseMove();break;case cc.macro.KEY.d:console.log("Press d key"),this.playermove_pos=cc.v2(5,0),this.MFWZPlayer.stopMouseMove();break;case cc.macro.KEY.up:console.log("Press up key"),this.playermove_pos=cc.v2(0,5),this.MFWZPlayer.stopMouseMove();break;case cc.macro.KEY.right:console.log("Press right key"),this.playermove_pos=cc.v2(5,0),this.MFWZPlayer.stopMouseMove();break;case cc.macro.KEY.down:console.log("Press down key"),this.playermove_pos=cc.v2(0,-5),this.MFWZPlayer.stopMouseMove();break;case cc.macro.KEY.left:console.log("Press left key"),this.playermove_pos=cc.v2(-5,0),this.MFWZPlayer.stopMouseMove();break;case cc.macro.KEY.space:console.log("Press left space",this.can_bullet,this.auto_shotbullet),1==this.can_bullet&&0==this.auto_shotbullet&&(this.can_bullet=!1,1==this.GameView.lock_shot&&this.cancelLock(),this.createBullet())}},t.prototype.onKeyUp=function(e){switch(e.keyCode){case cc.macro.KEY.w:console.log("release w key"),this.playermove_pos=cc.v2(0,0);break;case cc.macro.KEY.a:console.log("release a key"),this.playermove_pos=cc.v2(0,0);break;case cc.macro.KEY.s:console.log("release s key"),this.playermove_pos=cc.v2(0,0);break;case cc.macro.KEY.d:console.log("release d key"),this.playermove_pos=cc.v2(0,0);break;case cc.macro.KEY.up:console.log("release up key"),this.playermove_pos=cc.v2(0,0);break;case cc.macro.KEY.right:console.log("release right key"),this.playermove_pos=cc.v2(0,0);break;case cc.macro.KEY.down:console.log("release down key"),this.playermove_pos=cc.v2(0,0);break;case cc.macro.KEY.left:console.log("release left key"),this.playermove_pos=cc.v2(0,0)}},t.prototype.autoShotBullet=function(){this.auto_shotbullet=!0,this.schedule(this.createBullet,.3)},t.prototype.stopShotBullet=function(){this.auto_shotbullet=!1,this.createBullet&&this.unschedule(this.createBullet)},t.prototype.createBullet=function(){this.MFWZPlayer.createBullet()},t.prototype.serverCreateBullet=function(e,t){this.MFWZPlayer.serverCreateBullet(e,t)},t.prototype.getAutoState=function(){return this.GameView.auto_shot},t.prototype.getBulletLevel=function(){return this.GameView.getBulletLevel()},t.prototype.update=function(){this.movePlayer()},t.prototype.cancelCall=function(){this.unscheduleAllCallbacks(),this.stopShotBullet(),this.MFWZPlayer.cancelCall()},t.prototype.onDestroy=function(){this.cancelCall(),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this),cc.systemEvent.off(cc.SystemEvent.EventType.KEY_UP,this.onKeyUp,this)},r([s(i.default)],t.prototype,"MFWZPlayer",void 0),r([s(cc.Node)],t.prototype,"node_wheel",void 0),r([s(cc.Node)],t.prototype,"node_wheel_bg",void 0),r([s(cc.Node)],t.prototype,"btn_shot",void 0),t=r([l],t)}(cc.Component);o.default=c,cc._RF.pop()},{"./MFWZPlayer":"MFWZPlayer"}],MFWZOtherPlayer:[function(e,t,o){"use strict";cc._RF.push(t,"94d2bbxGzlOa7PPSU/wB371","MFWZOtherPlayer");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(a,l)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return s([e,t])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("./MFWZBulletMgr"),s=e("../../../manager/ResManager"),c=e("../../mfwz/protocol/MFWZDefine"),p=cc._decorator,u=p.ccclass,h=p.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item_player=null,t.player_node=null,t.bullet_node=null,t.light_spineData=null,t.qiuSp=[],t.attackSp=[],t.playerSp=[],t.lightSp=[],t.Bullet_Mgr=null,t.move_speed=5,t.bek_pos=cc.v2(0,0),t.move_over=cc.v2(0,0),t.attack_name=["attack_4_3","attack_4_3","attack_4_3","attack_4_1","attack_4_1","attack_4_1","attack4_2_1"],t.player_type=[],t.player_normalskin=0,t.user_num=0,t}return n(t,e),t.prototype.onLoad=function(){var e=cc.director.getWinSize();this.move_over.x=e.width,this.move_over.y=e.height,this.Bullet_Mgr=this.bullet_node.getComponent(l.default)},t.prototype.createPlayer=function(e,t,o,n){void 0===n&&(n=cc.v2(0,0)),this.user_num=e;var r=cc.instantiate(this.item_player);r.scaleX=0==o?-1:1,r.x=n.x*this.move_over.x,r.y=n.y*this.move_over.y,this.playerSp[this.user_num]=r.getComponent(sp.Skeleton),this.qiuSp[this.user_num]=r.getChildByName("qiu").getComponent(sp.Skeleton),this.attackSp[this.user_num]=r.getChildByName("attack").getComponent(sp.Skeleton),this.lightSp[this.user_num]=r.getChildByName("light").getComponent(sp.Skeleton),this.player_node.addChild(r,1,this.user_num+""),this.playerSp[this.user_num].node.zIndex=360-this.playerSp[this.user_num].node.y,this.initLevel(e,t)},t.prototype.initLevel=function(e,t){var o=0;t<=3?(o=0,this.player_normalskin=0,this.player_type[e]=0):t<=7?(o=1,this.player_normalskin=1,this.player_type[e]=1):t<=11?(o=2,this.player_normalskin=2,this.player_type[e]=2):(this.player_normalskin=this.player_type[e],o=6),this.initPlayerSkin(e,o),this.initLightSkin(e)},t.prototype.changeSkin=function(e){this.player_normalskin>3&&(this.player_normalskin=0),this.initPlayerSkin(e,this.player_normalskin)},t.prototype.touchMouseMove=function(e,t,o,n){if(void 0===o&&(o=null),void 0===n&&(n=null),null!=this.playerSp[e]){var r=this.playerSp[e].node;r.stopAllActions(),0==o?r.scaleX=-1:180==o&&(r.scaleX=1),t.x=t.x*this.move_over.x,t.y=t.y*this.move_over.y;var i=Math.abs(t.x-r.x)/400+Math.abs(t.y-r.y)/400,a=cc.moveTo(i,t),l=cc.sequence(a,cc.callFunc(function(){null!=n&&n()}));this.playerSp[e].node.runAction(l),this.playerSp[e].node.zIndex=360-this.playerSp[e].node.y}},t.prototype.stopMouseMove=function(e){this.playerSp[e].node.stopAllActions()},t.prototype.getMoveLength=function(){return this.move_speed},t.prototype.initLightSkin=function(e){this.lightSp[e].clearTracks(),this.lightSp[e].setToSetupPose(),this.lightSp[e].skeletonData=this.light_spineData;var t=this.lightSp[e];t.node.active=!0,t.setAnimation(0,"animation",!0)},t.prototype.playAttactActs=function(e){var t=this;if(this.player_type[e]<3){var o=this.attackSp[e];o.node.active=!0,o.setAnimation(0,"animation",!1)}var n=this.playerSp[e],r=this.attack_name[this.player_type[e]];n.setAnimation(0,r,!1)&&n.setCompleteListener(function(o,r){var i="";i=6==t.player_type[e]||t.player_type[e]<3?"move":"idle",n.setAnimation(0,i,!0)})},t.prototype.createBullet=function(e,t,o,n){if(null!=this.playerSp[e]){this.playAttactActs(e),this.Bullet_Mgr.addOtherBullet(this.playerSp[e].node,this.player_type[e],t,o);var r=cc.v2(n.x,n.y);this.touchMouseMove(e,r)}},t.prototype.initPlayerSkin=function(e,t){this.initPlayerEffect(e,t),t<3?(this.initQiuEffect(e,t),this.initAttackEffect(e,t)):(this.qiuSp[e].node.active=!1,this.attackSp[e].node.active=!1)},t.prototype.initPlayerEffect=function(e,t){return i(this,void 0,void 0,function(){var o,n;return a(this,function(r){switch(r.label){case 0:return[4,s.ResManager.loadResAsync(c.MFWZEffectPlayer[t],sp.SkeletonData)];case 1:return void 0==(o=r.sent())||null==this.playerSp[e]?[2]:(this.playerSp[e].clearTracks(),this.playerSp[e].setToSetupPose(),this.playerSp[e].skeletonData=o,n="",n=6==t||t<3?"move":"idle",this.playerSp[e].animation=n,this.playerSp[e].node.active=!0,[2])}})})},t.prototype.initQiuEffect=function(e,t){return i(this,void 0,void 0,function(){var o,n;return a(this,function(r){switch(r.label){case 0:return[4,s.ResManager.loadResAsync(c.MFWZEffectQiu[t],sp.SkeletonData)];case 1:return void 0==(o=r.sent())||null==this.qiuSp[e]?[2]:(n=["3","2","animation"],this.qiuSp[e].clearTracks(),this.qiuSp[e].setToSetupPose(),this.qiuSp[e].skeletonData=o,this.qiuSp[e].setAnimation(0,n[t],!0),this.qiuSp[e].node.active=!0,[2])}})})},t.prototype.initAttackEffect=function(e,t){return i(this,void 0,void 0,function(){var o;return a(this,function(n){switch(n.label){case 0:return[4,s.ResManager.loadResAsync(c.MFWZEffectAccack[t],sp.SkeletonData)];case 1:return void 0==(o=n.sent())||null==this.attackSp[e]?[2]:(this.attackSp[e].clearTracks(),this.attackSp[e].setToSetupPose(),this.attackSp[e].skeletonData=o,this.attackSp[e].setAnimation(0,"animation",!1),this.attackSp[e].node.active=!1,[2])}})})},t.prototype.getPlayer=function(e){return this.playerSp[e]},t.prototype.removePlayer=function(e){null!=this.playerSp[e]&&(this.playerSp[e].node.removeFromParent(),this.playerSp[e]=null,this.qiuSp[e]=null,this.attackSp[e]=null,this.lightSp[e]=null)},t.prototype.removeAllPlayer=function(){for(var e=0;e<this.playerSp.length;e++)null!=this.playerSp[e]&&(this.playerSp[e].node.removeFromParent(),this.playerSp[e]=null,this.qiuSp[e]=null,this.attackSp[e]=null,this.lightSp[e]=null)},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},r([h(cc.Prefab)],t.prototype,"item_player",void 0),r([h(cc.Node)],t.prototype,"player_node",void 0),r([h(cc.Node)],t.prototype,"bullet_node",void 0),r([h(sp.SkeletonData)],t.prototype,"light_spineData",void 0),t=r([u],t)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../manager/ResManager":void 0,"../../mfwz/protocol/MFWZDefine":"MFWZDefine","./MFWZBulletMgr":"MFWZBulletMgr"}],MFWZPlayer:[function(e,t,o){"use strict";cc._RF.push(t,"a9bc7hu26RII5muq0jXJm8A","MFWZPlayer");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(a,l)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return s([e,t])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("./MFWZBulletMgr"),s=e("../../../manager/NetManager"),c=e("../../../manager/ResManager"),p=e("../../mfwz/protocol/MFWZDefine"),u=cc._decorator,h=u.ccclass,f=u.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_player=null,t.item_player=null,t.touch_layer=null,t.bullet_node=null,t.Operation=null,t.qiuSp=null,t.attackSp=null,t.playerSp=null,t.Bullet_Mgr=null,t.move_speed=5,t.star_pos=cc.v2(0,0),t.move_over=cc.v2(0,0),t.attack_name=["attack_4_3","attack_4_3","attack_4_3","attack_4_1","attack_4_1","attack_4_1","attack4_2_1"],t.player_type=0,t.moving_state=!1,t.moving_state1=!1,t}return n(t,e),t.prototype.onLoad=function(){this.star_pos.x=this.node_player.x,this.star_pos.y=this.node_player.y;var e=cc.director.getWinSize();this.move_over.x=e.width,this.move_over.y=e.height,this.initTouch(),this.initBullet(),this.schedule(this.movePlayerCallSrever,.5)},t.prototype.initPlayer=function(e,t,o){void 0===e&&(e=cc.v2(0,0));var n=cc.instantiate(this.item_player);this.playerSp=n.getComponent(sp.Skeleton),this.qiuSp=n.getChildByName("qiu").getComponent(sp.Skeleton),this.attackSp=n.getChildByName("attack").getComponent(sp.Skeleton),this.playerSp.node.x=e.x*this.move_over.x,this.playerSp.node.y=e.y*this.move_over.y,n.scaleX=0==o?-1:1,this.node_player.addChild(n),this.playerSp.node.width=n.width,this.playerSp.node.height=n.height,this.initLevel(t),this.playerSp.node.zIndex=360-this.playerSp.node.y},t.prototype.initLevel=function(e){var t=0;t=e<=3?0:e<=7?1:e<=11?2:6,this.initPlayerSkin(t)},t.prototype.removeSelfPlayer=function(){null!=this.playerSp&&(this.node_player.removeChild(this.playerSp.node),this.playerSp=null,this.qiuSp=null,this.attackSp=null)},t.prototype.initBullet=function(){this.Bullet_Mgr=this.bullet_node.getComponent(l.default),this.Bullet_Mgr.setBulletNode(this.bullet_node)},t.prototype.initTouch=function(){this.touch_layer.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.touch_layer.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},t.prototype.onTouchStart=function(e){var t=e.getLocation(),o=this.node.convertToNodeSpaceAR(t);cc.sys.isMobile&&this.touchClickMove(o,0)},t.prototype.onTouchEnd=function(e){var t=e.getLocation(),o=this.node.convertToNodeSpaceAR(t);cc.sys.isMobile?this.touchClickMove(o,1):this.touchMouseMove(o,!0)},t.prototype.movePlayer=function(e){null!=this.playerSp&&(e.x>0?(this.playerSp.node.scaleX=-1,this.moving_state=!0):e.x<0&&(this.playerSp.node.scaleX=1,this.moving_state=!0),this.playerSp.node.x=this.playerSp.node.x+e.x,this.playerSp.node.y=this.playerSp.node.y+e.y,this.playerSp.node.x<-this.move_over.x/2+this.playerSp.node.width/2?this.playerSp.node.x=-this.move_over.x/2+this.playerSp.node.width/2:this.playerSp.node.x>this.move_over.x/2-this.playerSp.node.width/2&&(this.playerSp.node.x=this.move_over.x/2-this.playerSp.node.width/2),this.playerSp.node.y<-this.move_over.y/2?this.playerSp.node.y=-this.move_over.y/2:this.playerSp.node.y>this.move_over.y/2-this.playerSp.node.height&&(this.playerSp.node.y=this.move_over.y/2-this.playerSp.node.height),this.playerSp.node.zIndex=360-this.playerSp.node.y)},t.prototype.touchClickMove=function(e,t,o){void 0===o&&(o=null),this.playerSp.node.stopAllActions(),Number(e.x-this.playerSp.node.x)>0?this.playerSp.node.scaleX=-1:Number(e.x-this.playerSp.node.x)<0&&(this.playerSp.node.scaleX=1);var n=Math.abs(e.y-this.playerSp.node.y-this.playerSp.node.width)/400,r=cc.v2(this.playerSp.node.x,e.y-this.playerSp.node.width),i=cc.moveTo(n,r),a=cc.sequence(i,cc.callFunc(function(){null!=o&&o()}));this.Operation.cancelLock(),this.playerSp.node.runAction(a)},t.prototype.touchMouseMove=function(e,t,o){var n=this;void 0===o&&(o=null),this.playerSp.node.stopAllActions(),this.moving_state1=!0,Number(e.x-this.playerSp.node.x)>0?this.playerSp.node.scaleX=-1:Number(e.x-this.playerSp.node.x)<0&&(this.playerSp.node.scaleX=1);var r=Math.abs(e.x-this.playerSp.node.x)/400+Math.abs(e.y-this.playerSp.node.y)/400,i=cc.moveTo(r,e),a=cc.sequence(i,cc.callFunc(function(){null!=o&&o(),n.movePlayerCallSrever(),n.moving_state1=!1}));t&&this.Operation.cancelLock(),this.playerSp.node.runAction(a)},t.prototype.stopMouseMove=function(){this.playerSp.node.stopAllActions()},t.prototype.getMoveLength=function(){return this.move_speed},t.prototype.playAttactActs=function(){var e=this;if(this.player_type<3){var t=this.attackSp;t.node.active=!0,t.setAnimation(0,"animation",!1)}var o=this.playerSp,n=this.attack_name[this.player_type];o.setAnimation(0,n,!1)&&o.setCompleteListener(function(t,n){var r="";r=6==e.player_type||e.player_type<3?"move":"idle",o.setAnimation(0,r,!0)})},t.prototype.createBullet=function(){if(void 0!=s.NetManager.getGameProtocol()){var e=-1==this.playerSp.node.scaleX?0:1,t=(this.playerSp.node.x-135*this.playerSp.node.scaleX)/this.move_over.x,o=(this.playerSp.node.y+this.playerSp.node.height/1.5)/this.move_over.y,n=cc.v2(t,o);s.NetManager.getGameProtocol().sendCreateBulletReq(180*e,n)}},t.prototype.serverCreateBullet=function(e,t){this.playAttactActs(),this.Bullet_Mgr.addBullet(this.playerSp.node,this.player_type,e,t)},t.prototype.initPlayerSkin=function(e){this.player_type=e,this.initPlayerEffect(this.player_type),this.player_type<3?(this.initQiuEffect(this.player_type),this.initAttackEffect(this.player_type)):(this.qiuSp.node.active=!1,this.attackSp.node.active=!1)},t.prototype.initPlayerEffect=function(e){return i(this,void 0,void 0,function(){var t,o;return a(this,function(n){switch(n.label){case 0:return[4,c.ResManager.loadResAsync(p.MFWZEffectPlayer[e],sp.SkeletonData)];case 1:return void 0==(t=n.sent())||null==this.playerSp?[2]:(this.playerSp.clearTracks(),this.playerSp.setToSetupPose(),this.playerSp.skeletonData=t,o="",o=6==e||e<3?"move":"idle",this.playerSp.animation=o,this.playerSp.node.active=!0,[2])}})})},t.prototype.initQiuEffect=function(e){return i(this,void 0,void 0,function(){var t,o;return a(this,function(n){switch(n.label){case 0:return[4,c.ResManager.loadResAsync(p.MFWZEffectQiu[e],sp.SkeletonData)];case 1:return void 0==(t=n.sent())||null==this.qiuSp?[2]:(o=["3","2","animation"],this.qiuSp.clearTracks(),this.qiuSp.setToSetupPose(),this.qiuSp.skeletonData=t,this.qiuSp.setAnimation(0,o[e],!0),this.qiuSp.node.active=!0,[2])}})})},t.prototype.initAttackEffect=function(e){return i(this,void 0,void 0,function(){var t;return a(this,function(o){switch(o.label){case 0:return[4,c.ResManager.loadResAsync(p.MFWZEffectAccack[e],sp.SkeletonData)];case 1:return void 0==(t=o.sent())||null==this.attackSp?[2]:(this.attackSp.clearTracks(),this.attackSp.setToSetupPose(),this.attackSp.skeletonData=t,this.attackSp.setAnimation(0,"animation",!1),this.attackSp.node.active=!1,[2])}})})},t.prototype.getPlayer=function(){return this.playerSp.node},t.prototype.movePlayerCallSrever=function(){var e=0;if(1==this.moving_state){this.moving_state=!1,e=1;var t=-1==this.playerSp.node.scaleX?0:1;s.NetManager.getGameProtocol().sendPlayerMoveReq(e,180*t,cc.v2(this.playerSp.node.x/this.move_over.x,this.playerSp.node.y/this.move_over.y))}if(!cc.sys.isMobile&&1==this.moving_state1){e=1;t=-1==this.playerSp.node.scaleX?0:1;s.NetManager.getGameProtocol().sendPlayerMoveReq(e,180*t,cc.v2(this.playerSp.node.x/this.move_over.x,this.playerSp.node.y/this.move_over.y))}},t.prototype.cancelCall=function(){this.movePlayerCallSrever&&this.unschedule(this.movePlayerCallSrever),this.unscheduleAllCallbacks()},t.prototype.onDestroy=function(){this.cancelCall()},r([f(cc.Node)],t.prototype,"node_player",void 0),r([f(cc.Prefab)],t.prototype,"item_player",void 0),r([f(cc.Node)],t.prototype,"touch_layer",void 0),r([f(cc.Node)],t.prototype,"bullet_node",void 0),t=r([h],t)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../manager/NetManager":void 0,"../../../manager/ResManager":void 0,"../../mfwz/protocol/MFWZDefine":"MFWZDefine","./MFWZBulletMgr":"MFWZBulletMgr"}],MFWZRoomView:[function(e,t,o){"use strict";cc._RF.push(t,"394367l2C5B1YMtIaMObTZL","MFWZRoomView");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../view/RoomView"),a=e("../../../manager/EventManager"),l=e("../protocol/MFWZCmd"),s=e("../../../manager/UIManager"),c=e("../../../manager/NetManager"),p=cc._decorator,u=p.ccclass,h=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.initEvent=function(){e.prototype.initEvent.call(this),a.EventManager.on(this,l.ProtocolMFWZCmd.GetMFWZGameInofRep,this.onGetMFWZGameInofRep.bind(this))},t.prototype.onClickSet=function(){s.UIManager.popup("game/mfwz/prefab/MFWZSetting")},t.prototype.onClickHelp=function(){c.NetManager.protocolHall.sendGetMFWZGameInof()},t.prototype.onGetGameRecordDetailResp=function(e){s.UIManager.popup("game/mfwz/prefab/MFWZGameRecord",e)},t.prototype.onGetMFWZGameInofRep=function(e){e.monster_times.sort(function(e,t){return Number(e.times)-Number(t.times)});var t=e.monster_times;s.UIManager.popup("game/mfwz/prefab/MFWZRuleView",t)},t=r([u],t)}(i.default));o.default=h,cc._RF.pop()},{"../../../manager/EventManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"../../../view/RoomView":void 0,"../protocol/MFWZCmd":"MFWZCmd"}],MFWZRuleView:[function(e,t,o){"use strict";cc._RF.push(t,"32e0aSZ7ylHa4CeWBI/TOqb","MFWZRuleView");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(a,l)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return s([e,t])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../view/base/PopupView"),s=e("../../../common/utils/Utils"),c=e("../../../manager/ResManager"),p=cc._decorator,u=p.ccclass,h=p.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t.btn_monsterdetail=null,t.btn_gamerule=null,t.btn_resultrule=null,t.btn_sysrule=null,t.context_node=[],t.select_sp=[],t.normal_txtsp=[],t.select_txtsp=[],t.ScrollView=null,t.monster_item=null,t.idcard=null,t.frameSp=null,t.frameSp1=null,t.SCENE_TYPE=3,t}return n(t,e),t.prototype.initComponent=function(){s.default.addClickEventEND(this.btn_close,this.onTouchClickEvent.bind(this)),s.default.addClickEventEND(this.btn_monsterdetail,this.onTouchClickEvent.bind(this)),s.default.addClickEventEND(this.btn_gamerule,this.onTouchClickEvent.bind(this)),s.default.addClickEventEND(this.btn_resultrule,this.onTouchClickEvent.bind(this)),s.default.addClickEventEND(this.btn_sysrule,this.onTouchClickEvent.bind(this))},t.prototype.initData=function(e){return i(this,void 0,void 0,function(){var t,o,n,r,i,l,s;return a(this,function(a){switch(a.label){case 0:return t=this,[4,c.ResManager.loadResAsync("game/mfwz/res/rule/btn_mofa_normal",cc.SpriteFrame)];case 1:return t.frameSp=a.sent(),o=this,[4,c.ResManager.loadResAsync("game/mfwz/res/rule/btn_mofa_click",cc.SpriteFrame)];case 2:o.frameSp1=a.sent(),(n=cc.find("view/content",this.ScrollView)).removeAllChildren(),r=0,a.label=3;case 3:return r<e.length-1?(i=cc.instantiate(this.monster_item),[4,c.ResManager.loadResAsync("game/mfwz/res/rule/rule_"+e[r].fish_type,cc.SpriteFrame)]):[3,6];case 4:l=a.sent(),s=i.getChildByName("monster"),i.getChildByName("times").getComponent(cc.Label).string=e[r].times,s.getComponent(cc.Sprite).spriteFrame=l,n.addChild(i),a.label=5;case 5:return r++,[3,3];case 6:return[2]}})})},t.prototype.onTouchClickEvent=function(e){var t=e.name;"btn_monsterdetail"==t?this.selectFrame(0):"btn_gamerule"==t?this.selectFrame(1):"btn_resultrule"==t?this.selectFrame(2):"btn_sysrule"==t?this.selectFrame(3):"btn_close"==t&&this.node.destroy()},t.prototype.selectFrame=function(e){this.btn_monsterdetail.getComponent(cc.Sprite).spriteFrame=this.frameSp,this.btn_gamerule.getComponent(cc.Sprite).spriteFrame=this.frameSp,this.btn_resultrule.getComponent(cc.Sprite).spriteFrame=this.frameSp,this.btn_sysrule.getComponent(cc.Sprite).spriteFrame=this.frameSp,0==e?this.btn_monsterdetail.getComponent(cc.Sprite).spriteFrame=this.frameSp1:1==e?this.btn_gamerule.getComponent(cc.Sprite).spriteFrame=this.frameSp1:2==e?this.btn_resultrule.getComponent(cc.Sprite).spriteFrame=this.frameSp1:3==e&&(this.btn_sysrule.getComponent(cc.Sprite).spriteFrame=this.frameSp1);for(var t=0;t<4;t++)t==e?(this.context_node[e].active=!0,this.select_sp[e].spriteFrame=this.select_txtsp[e]):(this.context_node[t].active=!1,this.select_sp[t].spriteFrame=this.normal_txtsp[t])},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},r([h(cc.Node)],t.prototype,"btn_close",void 0),r([h(cc.Node)],t.prototype,"btn_monsterdetail",void 0),r([h(cc.Node)],t.prototype,"btn_gamerule",void 0),r([h(cc.Node)],t.prototype,"btn_resultrule",void 0),r([h(cc.Node)],t.prototype,"btn_sysrule",void 0),r([h(cc.Node)],t.prototype,"context_node",void 0),r([h(cc.Sprite)],t.prototype,"select_sp",void 0),r([h(cc.SpriteFrame)],t.prototype,"normal_txtsp",void 0),r([h(cc.SpriteFrame)],t.prototype,"select_txtsp",void 0),r([h(cc.Node)],t.prototype,"ScrollView",void 0),r([h(cc.Prefab)],t.prototype,"monster_item",void 0),t=r([u],t)}(l.default);o.default=f,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/ResManager":void 0,"../../../view/base/PopupView":void 0}],MFWZSkillMgr:[function(e,t,o){"use strict";cc._RF.push(t,"8dd2aPRW/FAD7aA5EhMiWzK","MFWZSkillMgr");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../common/utils/Utils"),a=e("../../../manager/NetManager"),l=cc._decorator,s=l.ccclass,c=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.add_btn=null,t.reduce_btn=null,t.lock_btn=null,t.auto_btn=null,t.level_num=null,t.player_head=null,t.player_headList=[],t.GameView=null,t.auto_shot=!1,t.cur_level=0,t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){this.addEvenListener();var e=this.lock_btn.getChildByName("anniu"),t=this.auto_btn.getChildByName("anniu");e.scale=.8,t.scale=.8},t.prototype.addEvenListener=function(){i.default.addClickEventEND(this.add_btn,this.onEvenClickButton.bind(this)),i.default.addClickEventEND(this.reduce_btn,this.onEvenClickButton.bind(this)),i.default.addClickEventEND(this.lock_btn,this.onEvenClickButton.bind(this)),i.default.addClickEventEND(this.auto_btn,this.onEvenClickButton.bind(this))},t.prototype.onEvenClickButton=function(e){var t=e.name;"add_btn"==t?(this.cur_level=this.cur_level+1,this.cur_level>a.NetManager.getGameProtocol().BULLET_LEVEL_LIST.length-1?this.cur_level=a.NetManager.getGameProtocol().BULLET_LEVEL_LIST.length-1:a.NetManager.getGameProtocol().sendBulletChangeReq(this.cur_level),this.updateLevel()):"reduce_btn"==t?(this.cur_level=this.cur_level-1,this.cur_level<0?this.cur_level=0:a.NetManager.getGameProtocol().sendBulletChangeReq(this.cur_level),this.updateLevel()):"lock_btn"==t?(this.GameView.lock_shot=!this.GameView.lock_shot,this.auto_shot=!1,this.lockClick(this.GameView.lock_shot),this.autoClick(this.auto_shot)):"auto_btn"==t&&(this.auto_shot=!this.auto_shot,this.GameView.lock_shot=!1,this.lockClick(this.GameView.lock_shot),this.autoClick(this.auto_shot))},t.prototype.lockClick=function(e){this.GameView.lock_shot=e;var t=this.lock_btn.getChildByName("anniu");this.GameView.lock_shot?t.active=!0:t.active=!1,this.GameView.setMonsterClick()},t.prototype.autoClick=function(e){this.GameView.auto_shot=e,this.auto_shot=e;var t=this.auto_btn.getChildByName("anniu");this.auto_shot?(this.GameView.MFWZOperation.autoShotBullet(),t.active=!0):(t.active=!1,this.GameView.MFWZOperation.stopShotBullet())},t.prototype.updateLevel=function(){this.level_num.node.runAction(cc.sequence(cc.scaleTo(.1,1.6),cc.scaleTo(.1,1)));var e=Number(a.NetManager.getGameProtocol().BULLET_LEVEL_LIST[this.cur_level])*Number(a.NetManager.getGameProtocol().GAME_ROOM_LIMITE);this.level_num.string=e.toFixed(1)+"",this.cur_level<=3?1!=this.GameView.player_type&&(this.GameView.player_type=1,this.GameView.MFWZOperation.initPlayerSkin(this.GameView.player_type-1),this.changeHead(0)):this.cur_level<=7?2!=this.GameView.player_type&&(this.GameView.player_type=2,this.GameView.MFWZOperation.initPlayerSkin(this.GameView.player_type-1),this.changeHead(1)):this.cur_level<=11&&3!=this.GameView.player_type&&(this.GameView.player_type=3,this.GameView.MFWZOperation.initPlayerSkin(this.GameView.player_type-1),this.changeHead(2))},t.prototype.changeHead=function(e){this.player_head.spriteFrame=this.player_headList[e]},t.prototype.initUser=function(e){this.cur_level=e,this.updateLevel()},t.prototype.getBulletLevel=function(){return a.NetManager.getGameProtocol().BULLET_LEVEL_LIST[this.cur_level]},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},r([c(cc.Node)],t.prototype,"add_btn",void 0),r([c(cc.Node)],t.prototype,"reduce_btn",void 0),r([c(cc.Node)],t.prototype,"lock_btn",void 0),r([c(cc.Node)],t.prototype,"auto_btn",void 0),r([c(cc.Label)],t.prototype,"level_num",void 0),r([c(cc.Sprite)],t.prototype,"player_head",void 0),r([c(cc.SpriteFrame)],t.prototype,"player_headList",void 0),t=r([s],t)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/NetManager":void 0}],MFWZSpecialTips:[function(e,t,o){"use strict";cc._RF.push(t,"da4cfqa/LVJtb+Jz2HVToFh","MFWZSpecialTips");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(a,l)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return s([e,t])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../manager/ResManager"),s=e("../../mfwz/protocol/MFWZDefine"),c=cc._decorator,p=c.ccclass,u=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipsSp=null,t.ani_name=["gandaofu","huolong","qimeila","binglong","animation","animation"],t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.initTipsSkin=function(e){return i(this,void 0,void 0,function(){var t,o;return a(this,function(n){switch(n.label){case 0:return[4,l.ResManager.loadResAsync(s.MFWZEffectTips[e],sp.SkeletonData)];case 1:return void 0==(t=n.sent())||null==this.tipsSp?[2]:(this.tipsSp.node.active=!0,this.tipsSp.clearTracks(),this.tipsSp.setToSetupPose(),this.tipsSp.skeletonData=t,o=this.tipsSp,o.setAnimation(0,this.ani_name[e],!1)&&o.setCompleteListener(function(e,t){o.node.active=!1}),[2])}})})},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},r([u(sp.Skeleton)],t.prototype,"tipsSp",void 0),t=r([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../manager/ResManager":void 0,"../../mfwz/protocol/MFWZDefine":"MFWZDefine"}],MFWZTopPanel:[function(e,t,o){"use strict";cc._RF.push(t,"15394+oRoRHyp3bkWrxys+P","MFWZTopPanel");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var i=e("../../../manager/NetManager"),a=e("../../../manager/UIManager"),l=e("../../../common/utils/Utils"),s=cc._decorator,c=s.ccclass,p=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_cancel=null,t.btn_menu=null,t.menuPanel=null,t.btn_back=null,t.btn_rule=null,t.btn_set=null,t.ScrollView=null,t.user_head=null,t.GameView=null,t.myself_head=null,t.ScrollView_posx=null,t}return n(t,e),t.prototype.onLoad=function(){this.initView(),this.addEvenListener(),this.btn_cancel.active=!1},t.prototype.initView=function(){this.ScrollView_posx=this.ScrollView.x},t.prototype.addEvenListener=function(){l.default.addClickEventEND(this.btn_cancel,this.onEvenClickButton.bind(this)),l.default.addClickEventEND(this.btn_menu,this.onEvenClickButton.bind(this)),l.default.addClickEventEND(this.btn_back,this.onEvenClickButton.bind(this)),l.default.addClickEventEND(this.btn_rule,this.onEvenClickButton.bind(this)),l.default.addClickEventEND(this.btn_set,this.onEvenClickButton.bind(this))},t.prototype.addSelfUserHead=function(e){var t=this.node.getChildByName("node_head"),o=cc.instantiate(this.user_head);this.myself_head=o.getComponent("MFWZUserNode"),this.myself_head.initUserMsg(e),t.addChild(o)},t.prototype.updateSelfUserInfo=function(e){this.myself_head.updateUserInfo(e)},t.prototype.addOtherUserHeadMsg=function(e){var t=cc.find("view/content",this.ScrollView),o=cc.instantiate(this.user_head);this.GameView.winFrame.x>1280?(o.scale=.9,o.width=.9*o.width):(o.scale=.7,o.width=.7*o.width),o.y=o.y+10;var n=o.getComponent("MFWZUserNode"),r=l.default.getSubStringLengTxt(e.username)||l.default.getReplaceStrToStar(e.player_id);e.username=r,n.initUserMsg(e),n.hideSelfGold(),t.addChild(o,0,e.seat_id+"")},t.prototype.updateUserInfo=function(e,t){cc.find("view/content",this.ScrollView).getChildByName(e+"").getComponent("MFWZUserNode").updateUserInfo(t)},t.prototype.removeUserInfo=function(e){cc.find("view/content",this.ScrollView).getChildByName(e+"").removeFromParent()},t.prototype.removeAllUserInfo=function(){cc.find("view/content",this.ScrollView).removeAllChildren()},t.prototype.setRoomInfo=function(e){},t.prototype.getUserNodePos=function(e,t){void 0===t&&(t=null);var o=cc.v2(0,0);if(e){var n=this.node.getChildByName("node_head");return o.x=n.x,o.y=this.node.y,o}return void 0==(n=cc.find("view/content",this.ScrollView).getChildByName(t+""))?o:(o.x=n.x-this.ScrollView.x-n.width,o.y=this.node.y,o)},t.prototype.getTopSelf=function(){return this},t.prototype.onEvenClickButton=function(e){var t=e.name;"btn_back"==t?(console.log("quit game"),i.NetManager.protocolGameCommon.sendLeaveGame()):"btn_menu"==t?(this.menuPanel.active=!this.menuPanel.active,this.btn_cancel.active=this.menuPanel.active):"btn_rule"==t?a.UIManager.popup("game/mfwz/prefab/MFWZRuleView",i.NetManager.getGameProtocol().MONSTER_TIMES):"btn_set"==t?a.UIManager.popup("game/mfwz/prefab/MFWZSetting"):"btn_cancel"==t&&(this.menuPanel.active=!1,this.btn_cancel.active=!1)},r([p(cc.Node)],t.prototype,"btn_cancel",void 0),r([p(cc.Node)],t.prototype,"btn_menu",void 0),r([p(cc.Node)],t.prototype,"menuPanel",void 0),r([p(cc.Node)],t.prototype,"btn_back",void 0),r([p(cc.Node)],t.prototype,"btn_rule",void 0),r([p(cc.Node)],t.prototype,"btn_set",void 0),r([p(cc.Node)],t.prototype,"ScrollView",void 0),r([p(cc.Prefab)],t.prototype,"user_head",void 0),t=r([c],t)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0}],MFWZUserNode:[function(e,t,o){"use strict";cc._RF.push(t,"2e503fx3oxC9ISPIJazczVK","MFWZUserNode");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),r=this&&this.__decorate||function(e,t,o,n){var r,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(i<3?r(a):i>3?r(t,o,a):r(t,o))||a);return i>3&&a&&Object.defineProperty(t,o,a),a},i=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(r,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(a,l)}s((n=n.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(e){return function(t){return s([e,t])}}function s(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var l=e("../../../common/UIHelper"),s=e("../../../manager/ResManager"),c=cc._decorator,p=c.ccclass,u=c.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.head_node=null,t.vip_kuangsp=null,t.vip_levelsp=null,t.user_name=null,t.user_gold=null,t}return n(t,e),t.prototype.onLoad=function(){},t.prototype.initUserMsg=function(e){return i(this,void 0,void 0,function(){var t,o;return a(this,function(n){switch(n.label){case 0:return l.default.setHeadIcon(e.headimg_id+"",this.head_node),t=e.vip_level&&e.vip_level||0,[4,s.ResManager.loadResAsync("game/mfwz/res/head/img_txk_geren_v"+t,cc.SpriteFrame)];case 1:return(o=n.sent())&&(this.vip_kuangsp.spriteFrame=o),l.default.setVipLevel(t,this.vip_levelsp.node),this.user_gold.string=parseFloat(e.gold).toFixed(2),this.user_name.string=e.username,[2]}})})},t.prototype.updateUserInfo=function(e){this.user_gold.string=parseFloat(e).toFixed(2)},t.prototype.hideSelfGold=function(){this.node.getChildByName("icon_self").active=!1},t.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},r([u(cc.Node)],t.prototype,"head_node",void 0),r([u(cc.Sprite)],t.prototype,"vip_kuangsp",void 0),r([u(cc.Sprite)],t.prototype,"vip_levelsp",void 0),r([u(cc.Label)],t.prototype,"user_name",void 0),r([u(cc.Label)],t.prototype,"user_gold",void 0),t=r([p],t)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../common/UIHelper":void 0,"../../../manager/ResManager":void 0}],ProtocolMFWZ:[function(e,t,o){"use strict";cc._RF.push(t,"7945a9UWCdIGLpz4UFEBAMq","ProtocolMFWZ");var n=this&&this.__extends||function(){var e=function(t,o){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(t,o)};return function(t,o){function n(){this.constructor=t}e(t,o),t.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var r=e("../../../manager/DataManager"),i=e("../../../net/ProtocolBase"),a=e("../../../manager/NetManager"),l=e("../../../manager/UIManager"),s=e("../../../Define"),c=e("./MFWZCmd"),p=function(e){function t(){var t=e.call(this,"game/mfwz/pb")||this;return t.cmd=c.MFWZCmd,t.type=s.SocketType.Game,t.pbName="MFWZ",t.MONSTER_DIRECTION_LIST=[0,1,1,1,1,1,1,1,0,1,1],t.BULLET_LEVEL_LIST=[],t.LOCK_CLICK_STATE=!1,t.MYSELF_SEAT_ID=0,t.GAME_ROOM_LIMITE=0,t.MONSTER_TIMES=[],t}return n(t,e),t.prototype.sendPlayerMoveReq=function(e,t,o){if(!this.boolOut()){var n={player_id:r.DataManager.userInfo.userid,state:e,angle:t,point:o};console.log("============>\u73a9\u5bb6\u79fb\u52a8\u8bf7\u6c42"),this.send(n,"game_player_move_req")}},t.prototype.sendCreateBulletReq=function(e,t){if(!this.boolOut()){var o=(new Date).getTime(),n={player_id:r.DataManager.userInfo.userid,point:t,angle:e,time:o};console.log("============>\u53d1\u9001\u521b\u5efa\u5b50\u5f39\u8bf7\u6c42"),this.send(n,"game_bullet_create_req")}},t.prototype.sendDisappearBulletReq=function(e){if(!this.boolOut()){var t={player_id:r.DataManager.userInfo.userid,bullet_id:e};console.log("============>\u5b50\u5f39\u6d88\u5931\u8bf7\u6c42"),this.send(t,"game_bullet_disappear_req")}},t.prototype.sendBulletAttackReq=function(e,t,o){if(void 0===o&&(o=!0),!this.boolOut()){var n=(new Date).getTime(),i={player_id:r.DataManager.userInfo.userid,bullet_id:e,fish_id:t,time:n,is_my_bullet:o};console.log("============>\u5b50\u5f39\u51fb\u4e2d\u8bf7\u6c42"),this.send(i,"game_bullet_attack_req")}},t.prototype.sendBulletChangeReq=function(e){if(!this.boolOut()){var t={player_id:r.DataManager.userInfo.userid,level:e};console.log("============>\u5b50\u5f39\u5207\u6362"),this.send(t,"game_bullet_change_req")}},t.prototype.dealError=function(e){l.UIManager.showTipsPopup(e.err_msg)},t.prototype.boolOut=function(){return!r.DataManager.userInfo||!r.DataManager.userInfo.userid},t}(i.default);o.default=p,a.NetManager.protocolCache.ProtocolMFWZ=p,cc._RF.pop()},{"../../../Define":void 0,"../../../manager/DataManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"../../../net/ProtocolBase":void 0,"./MFWZCmd":"MFWZCmd"}]},{},["MFWZCmd","MFWZDefine","ProtocolMFWZ","MFWZBullet","MFWZBulletMgr","MFWZGameScene","MFWZGameView","MFWZGoldAni","MFWZMonster","MFWZMonsterMgr","MFWZOperation","MFWZOtherPlayer","MFWZPlayer","MFWZRoomView","MFWZRuleView","MFWZSkillMgr","MFWZSpecialTips","MFWZTopPanel","MFWZUserNode"]);