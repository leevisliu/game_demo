window.__require=function e(t,n,o){function r(i,c){if(!n[i]){if(!t[i]){var s=i.split("/");if(s=s[s.length-1],!t[s]){var u="function"==typeof __require&&__require;if(!c&&u)return u(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+i+"'")}i=s}var l=n[i]={exports:{}};t[i][0].call(l.exports,function(e){return r(t[i][1][e]||e)},l,l.exports,e,t,n,o)}return n[i].exports}for(var a="function"==typeof __require&&__require,i=0;i<o.length;i++)r(o[i]);return r}({ERMJCPCard:[function(e,t,n){"use strict";cc._RF.push(t,"29f0dgkBwhNN4CdXHtkwSZc","ERMJCPCard");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../mahjong/MJCPBase"),i=cc._decorator,c=i.ccclass,s=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t=r([c],t)}(a.default));n.default=s,cc._RF.pop()},{"../../mahjong/MJCPBase":void 0}],ERMJCmd:[function(e,t,n){"use strict";cc._RF.push(t,"98b31IF8x9LAIz60sOvwKxf","ERMJCmd"),Object.defineProperty(n,"__esModule",{value:!0}),n.ERMJCmd="225_0",n.ProtocolERMJCmd={GameStartNotify:n.ERMJCmd+"_game_start_notify",SendBankNotify:n.ERMJCmd+"_send_bank_notify",SendCardsNotify:n.ERMJCmd+"_send_cards_notify",TurnOperNotify:n.ERMJCmd+"_turn_oper_notify",PlayerCanOperNotify:n.ERMJCmd+"_can_oper_notify",OperRes:n.ERMJCmd+"_oper_res",GameConcludeNotify:n.ERMJCmd+"_game_conclude_notify",GameReconnectInfo:n.ERMJCmd+"_game_reconnect_info",GetCardNotify:n.ERMJCmd+"_get_card_notify",CanTingNotify:n.ERMJCmd+"_can_ting_notify",SendHuaPaiNotify:n.ERMJCmd+"_send_huapai_notify",SendTingNotify:n.ERMJCmd+"_send_ting_notify"},cc._RF.pop()},{}],ERMJCpgArea:[function(e,t,n){"use strict";cc._RF.push(t,"84125Y1cYRO6bo2KaSXqdg8","ERMJCpgArea");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../mahjong/MJCPGAreaBase"),i=cc._decorator,c=i.ccclass,s=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t=r([c],t)}(a.default));n.default=s,cc._RF.pop()},{"../../mahjong/MJCPGAreaBase":void 0}],ERMJDefine:[function(e,t,n){"use strict";var o,r;cc._RF.push(t,"f416cpPazpOa7faSy/axkZi","ERMJDefine"),Object.defineProperty(n,"__esModule",{value:!0}),n.ERMJDefine={GAME_PLAYER:2},function(e){e[e.daSiXi=1]="daSiXi",e[e.daSanYuan=2]="daSanYuan",e[e.jiuBao=3]="jiuBao",e[e.siGang=4]="siGang",e[e.lian7dui=5]="lian7dui",e[e.tianHe=6]="tianHe",e[e.diHe=7]="diHe",e[e.renHe=8]="renHe",e[e.baiWanShi=9]="baiWanShi",e[e.xiaoSiXi=10]="xiaoSiXi",e[e.xiaoSanYuan=11]="xiaoSanYuan",e[e.ziYiSe=12]="ziYiSe",e[e.siAnKe=13]="siAnKe",e[e.yiSeShuangLong=14]="yiSeShuangLong",e[e.yiSeSiTongShun=15]="yiSeSiTongShun",e[e.yiSeSiJieGao=16]="yiSeSiJieGao",e[e.yiSeSiBuGao=17]="yiSeSiBuGao",e[e.sanGang=18]="sanGang",e[e.hunJiuYao=19]="hunJiuYao",e[e.qiDui=20]="qiDui",e[e.qingYiSe=21]="qingYiSe",e[e.yiSeSanTongShun=22]="yiSeSanTongShun",e[e.yiSeSanJieGao=23]="yiSeSanJieGao",e[e.qingLong=24]="qingLong",e[e.yiSeSanBuGao=25]="yiSeSanBuGao",e[e.sanAnKe=26]="sanAnKe",e[e.tianTing=27]="tianTing",e[e.dayu5=28]="dayu5",e[e.xiaoyu5=29]="xiaoyu5",e[e.sanFengKe=30]="sanFengKe",e[e.miaoshou=31]="miaoshou",e[e.haidi=32]="haidi",e[e.gangHua=33]="gangHua",e[e.pengpengHe=34]="pengpengHe",e[e.hunYiSe=35]="hunYiSe",e[e.quanQiuRen=36]="quanQiuRen",e[e.shuangAnGang=37]="shuangAnGang",e[e.shuangJianKe=38]="shuangJianKe",e[e.quanDaiYao=39]="quanDaiYao",e[e.buQiuRen=40]="buQiuRen",e[e.shuangMingGang=41]="shuangMingGang",e[e.heJueZhang=42]="heJueZhang",e[e.liZhi=43]="liZhi",e[e.jianKe=44]="jianKe",e[e.quanFengKe=45]="quanFengKe",e[e.menFengKe=46]="menFengKe",e[e.menqiangQing=47]="menqiangQing",e[e.pingHe=48]="pingHe",e[e.siGui=49]="siGui",e[e.shuangAnKe=50]="shuangAnKe",e[e.anGang=51]="anGang",e[e.duanYao=52]="duanYao",e[e.ewbj=53]="ewbj",e[e.yaoJiuTou=54]="yaoJiuTou",e[e.baoTing=55]="baoTing",e[e.yiBanGao=56]="yiBanGao",e[e.lianLiu=57]="lianLiu",e[e.laoshaoFu=58]="laoshaoFu",e[e.yaoJiuKe=59]="yaoJiuKe",e[e.mingGang=60]="mingGang",e[e.bianZhang=61]="bianZhang",e[e.kanZhang=62]="kanZhang",e[e.danDiaoJiang=63]="danDiaoJiang",e[e.ziMo=64]="ziMo",e[e.flower=65]="flower"}(r=n.FanXingType||(n.FanXingType={})),n.FanXingStr=((o={})[r.daSiXi]="\u5927\u56db\u559c",o[r.daSanYuan]="\u5927\u4e09\u5143",o[r.jiuBao]="\u4e5d\u5b9d\u83b2\u706f",o[r.siGang]="\u56db\u6760",o[r.lian7dui]="\u8fde\u4e03\u5bf9",o[r.tianHe]="\u5929\u548c",o[r.diHe]="\u5730\u548c",o[r.renHe]="\u4eba\u548c",o[r.baiWanShi]="\u767e\u4e07\u77f3",o[r.xiaoSiXi]="\u5c0f\u56db\u559c",o[r.xiaoSanYuan]="\u5c0f\u4e09\u5143",o[r.ziYiSe]="\u5b57\u4e00\u8272",o[r.siAnKe]="\u56db\u6697\u523b",o[r.yiSeShuangLong]="\u4e00\u8272\u53cc\u9f99\u4f1a",o[r.yiSeSiTongShun]="\u4e00\u8272\u56db\u540c\u987a",o[r.yiSeSiJieGao]="\u4e00\u8272\u56db\u8282\u9ad8",o[r.yiSeSiBuGao]="\u4e00\u8272\u56db\u6b65\u9ad8,",o[r.sanGang]="\u4e09\u6760",o[r.hunJiuYao]="\u6df7\u5e7a\u4e5d",o[r.qiDui]="\u4e03\u5bf9",o[r.qingYiSe]="\u6e05\u4e00\u8272",o[r.yiSeSanTongShun]="\u4e00\u8272\u4e09\u540c\u987a",o[r.yiSeSanJieGao]="\u4e00\u8272\u4e09\u8282\u9ad8",o[r.qingLong]="\u6e05\u9f99",o[r.yiSeSanBuGao]="\u4e00\u8272\u4e09\u6b65\u9ad8",o[r.sanAnKe]="\u4e09\u6697\u523b",o[r.tianTing]="\u5929\u542c",o[r.dayu5]="\u5927\u4e8e\u4e94",o[r.xiaoyu5]="\u5c0f\u4e8e\u4e94",o[r.sanFengKe]="\u4e09\u98ce\u523b",o[r.miaoshou]="\u5999\u624b\u56de\u6625",o[r.haidi]="\u6d77\u5e95\u635e\u6708",o[r.gangHua]="\u6760\u4e0a\u5f00\u82b1",o[r.pengpengHe]="\u78b0\u78b0\u548c",o[r.hunYiSe]="\u6df7\u4e00\u8272",o[r.quanQiuRen]="\u5168\u6c42\u4eba",o[r.shuangAnGang]="\u53cc\u6697\u6760",o[r.shuangJianKe]="\u53cc\u7bad\u523b",o[r.quanDaiYao]="\u5168\u5e26\u5e7a",o[r.buQiuRen]="\u4e0d\u6c42\u4eba",o[r.shuangMingGang]="\u53cc\u660e\u6760",o[r.heJueZhang]="\u548c\u7edd\u5f20",o[r.liZhi]="\u7acb\u76f4",o[r.jianKe]="\u7bad\u523b",o[r.quanFengKe]="\u5708\u98ce\u523b",o[r.menFengKe]="\u95e8\u98ce\u523b",o[r.menqiangQing]="\u95e8\u524d\u6e05",o[r.pingHe]="\u5e73\u548c",o[r.siGui]="\u56db\u5f52",o[r.shuangAnKe]="\u53cc\u6697\u523b",o[r.anGang]="\u6697\u6760",o[r.duanYao]="\u65ad\u5e7a",o[r.ewbj]="\u4e8c\u4e94\u516b\u5c06",o[r.yaoJiuTou]="\u5e7a\u4e5d\u5934",o[r.baoTing]="\u62a5\u542c",o[r.yiBanGao]="\u4e00\u822c\u9ad8",o[r.lianLiu]="\u8fde\u516d",o[r.laoshaoFu]="\u8001\u5c11\u526f",o[r.yaoJiuKe]="\u5e7a\u4e5d\u523b",o[r.mingGang]="\u660e\u6760",o[r.bianZhang]="\u8fb9\u5f20",o[r.kanZhang]="\u574e\u5f20",o[r.danDiaoJiang]="\u5355\u8c03\u5c06",o[r.ziMo]="\u81ea\u6478",o[r.flower]="\u82b1\u724c",o),cc._RF.pop()},{}],ERMJGameScene:[function(e,t,n){"use strict";cc._RF.push(t,"73daaVjU1hBCptufJUHLLeK","ERMJGameScene");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./ERMJGameView"),i=e("../../../manager/EventManager"),c=e("../../../net/NetCmd"),s=e("../../../common/log/LogWrap"),u=e("../../../manager/UIManager"),l=e("../protocol/ERMJCmd"),p=e("../../../Define"),h=cc._decorator,d=h.ccclass,f=h.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.GameView=null,t}return o(t,e),t.prototype.onLoad=function(){this.GameView.GameScene=this,this.initEvent()},t.prototype.initEvent=function(){i.EventManager.on(this,c.ProtocolGameCmd.GameLoginResp,this.onGameLoginResp.bind(this)),i.EventManager.on(this,c.ProtocolGameCmd.MatchResp,this.onMatchResp.bind(this)),i.EventManager.on(this,c.ProtocolGameCmd.CancelMatchResp,this.onCancelMatchResp.bind(this)),i.EventManager.on(this,l.ProtocolERMJCmd.GameStartNotify,this.onGameStartNotify.bind(this)),i.EventManager.on(this,l.ProtocolERMJCmd.SendBankNotify,this.onSendBankNotify.bind(this)),i.EventManager.on(this,l.ProtocolERMJCmd.SendCardsNotify,this.onSendCardsNotify.bind(this)),i.EventManager.on(this,l.ProtocolERMJCmd.TurnOperNotify,this.onTurnOperNotify.bind(this)),i.EventManager.on(this,l.ProtocolERMJCmd.PlayerCanOperNotify,this.onPlayerCanOperNotify.bind(this)),i.EventManager.on(this,l.ProtocolERMJCmd.OperRes,this.OperRes.bind(this)),i.EventManager.on(this,l.ProtocolERMJCmd.GameConcludeNotify,this.onGameConcludeNotify.bind(this)),i.EventManager.on(this,l.ProtocolERMJCmd.GameReconnectInfo,this.onGameReconnectInfo.bind(this)),i.EventManager.on(this,l.ProtocolERMJCmd.GetCardNotify,this.onGetCardNotify.bind(this)),i.EventManager.on(this,l.ProtocolERMJCmd.CanTingNotify,this.onCanTingNotify.bind(this)),i.EventManager.on(this,l.ProtocolERMJCmd.SendHuaPaiNotify,this.onSendHuaPaiNotify.bind(this)),i.EventManager.on(this,l.ProtocolERMJCmd.SendTingNotify,this.onSendTingNotify.bind(this)),i.EventManager.on(this,p.EventDef.UpdateUserGold,this.onUpdateUserScore.bind(this))},t.prototype.onGameLoginResp=function(e){s.LogWrap.log("\u6548\u9a8c\u6210\u529f====>",e),this.GameView.resetGameView(),this.GameView.initUserInfo(),0==e.state&&this.GameView.ERMJTable.showReady(!0)},t.prototype.onMatchResp=function(e){1==e.status?(s.LogWrap.log("\u5339\u914d\u6210\u529f====>",e),u.UIManager.hideLoading()):2==e.status||4==e.status?(u.UIManager.showTips(2==e.status?"\u5339\u914d\u8d85\u65f6":"\u91d1\u5e01\u4e0d\u8db3"),this.GameView.ERMJTable.showReady(!0),u.UIManager.hideLoading()):3==e.status?(s.LogWrap.log("\u5339\u914d\u88ab\u53d6\u6d88"),u.UIManager.hideLoading()):100==e.status&&(u.UIManager.showTips("\u5339\u914d\u5931\u8d25"),this.GameView.ERMJTable.showReady(!0),u.UIManager.hideLoading())},t.prototype.onCancelMatchResp=function(e){u.UIManager.showTips(e.ok?"\u53d6\u6d88\u5339\u914d\u6210\u529f":"\u53d6\u6d88\u5339\u914d\u5931\u8d25"),e.ok&&this.GameView.ERMJTable.showReady(!0)},t.prototype.onGameStartNotify=function(e){s.LogWrap.log("%c \u6e38\u620f\u5f00\u59cb","font-size:30px;color:red;",e),this.GameView.onSubGameStart(e)},t.prototype.onSendBankNotify=function(e){this.GameView.onSubConfirmBank(e)},t.prototype.onSendCardsNotify=function(e){s.LogWrap.log("%c \u53d1\u624b\u724c\u6d88\u606f","font-size:30px;color:red;",e),this.GameView.onSubSendCards(e)},t.prototype.onTurnOperNotify=function(e){this.GameView.onSubTurnOper(e)},t.prototype.onPlayerCanOperNotify=function(e){s.LogWrap.log("%c \u901a\u77e5\u5403\u78b0\u6760\u64cd\u4f5c\u6d88\u606f","color:#BE0834",e),this.GameView.onSubPlayerCanOper(e)},t.prototype.OperRes=function(e){s.LogWrap.log("%c \u64cd\u4f5c\u56de\u5e94","color:#75E479;font-size:26px;",e),this.GameView.onSubPlayerOper(e)},t.prototype.onGameConcludeNotify=function(e){var t=this;s.LogWrap.log("%c \u7ed3\u7b97\u56de\u5e94","color:#88C96A;font-size:26px;",e),setTimeout(function(){t.GameView.onSubGameEnd(e)},200)},t.prototype.onGameReconnectInfo=function(e){s.LogWrap.log("%c \u91cd\u8fde\u52a0\u5165\u623f\u95f4\u56de\u5e94","color:#88C96A;font-size:26px;",e),this.GameView.onSubGameReconnect(e)},t.prototype.onGetCardNotify=function(e){s.LogWrap.log("\u83b7\u53d6\u624b\u724c\u6d88\u606f",e),this.GameView.onSubGetCard(e)},t.prototype.onCanTingNotify=function(e){s.LogWrap.log("%c \u53ef\u4ee5\u542c\u724c\u56de\u5e94","font-size:30px;color:red",e),this.GameView.onSubCanTing(e)},t.prototype.onSendHuaPaiNotify=function(e){s.LogWrap.log("%c \u8865\u82b1\u901a\u77e5\u6d88\u606f",e),this.GameView.onSubSendHuaPai(e)},t.prototype.onSendTingNotify=function(e){s.LogWrap.log("%c \u901a\u77e5\u73a9\u5bb6\u8fdb\u5165\u542c\u724c",e),this.GameView.onSendTingNotify(e)},t.prototype.onUpdateUserScore=function(){this.GameView.onUpdateUserScore()},t.prototype.onDestroy=function(){i.EventManager.off(this)},r([f(a.default)],t.prototype,"GameView",void 0),t=r([d],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../Define":void 0,"../../../common/log/LogWrap":void 0,"../../../manager/EventManager":void 0,"../../../manager/UIManager":void 0,"../../../net/NetCmd":void 0,"../protocol/ERMJCmd":"ERMJCmd","./ERMJGameView":"ERMJGameView"}],ERMJGameView:[function(e,t,n){"use strict";cc._RF.push(t,"85b09bdoDtHPZOFvJ+IoEg+","ERMJGameView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function c(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,c)}s((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../../manager/AudioManager"),s=e("./ERMJTable"),u=e("./ERMJTop"),l=e("./ERMJPlayer"),p=e("../../../common/utils/Utils"),h=e("../../../manager/DataManager"),d=e("../../../manager/NetManager"),f=e("./ERMJTool"),g=e("../../../common/log/LogWrap"),y=e("./ERMJHandArea"),_=e("../../mahjong/MJData"),M=e("./ERMJOutArea"),m=e("../../../manager/EventManager"),v=e("../../mahjong/MJDefine"),J=e("./ERMJOper"),R=e("./ERMJCpgArea"),b=e("./ERMJTingTipsView"),E=e("./ERMJShowArea"),w=e("../../../manager/ResManager"),C=e("../../../manager/UIManager"),O=e("../../mahjong/MJOutEffect"),T=cc._decorator,S=T.ccclass,A=T.property,P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ERMJTable=null,t.ERMJTop=null,t.ERMJPlayer=[],t.ERMJHandArea=[],t.ERMJCpgArea=[],t.ERMJOutArea=[],t.ERMJShowArea=[],t.ERMJOper=null,t.ERMJTingTipsView=null,t.ERMJOutEffect=null,t.user_spine=[],t.ERMJResultDetail=null,t.ermj_result=null,t.ermj_arrow=null,t.GameScene=null,t.lastOutCard=null,t.lastOutPos=null,t.tingStateReady=!1,t.tingStateRun=!1,t.hasSortBuHua=!1,t.isStartGame=!1,t}return o(t,e),t.prototype.onLoad=function(){c.AudioManager.playGameBGM("bgm"),this.ERMJTable.GameView=this,this.ERMJOper.GameView=this,this.initGameEvent(),this.initChat()},t.prototype.initChat=function(){return a(this,void 0,void 0,function(){var e,t;return i(this,function(n){switch(n.label){case 0:return[4,w.ResManager.loadResAsync("prefabs/common/GameChat",cc.Prefab,!1)];case 1:return(e=n.sent())&&cc.isValid(this.node)&&!this.node.getChildByName("GameChat")&&(t=cc.instantiate(e),this.node.addChild(t)),[2]}})})},t.prototype.initGameEvent=function(){var e=this;m.EventManager.on(this,v.MJEventDef.MjShootEvent,function(e){g.LogWrap.log("\u53d1\u9001\u6253\u724c\u64cd\u4f5c",e);var t=d.NetManager.getGameProtocol().MY_SEAT,n=v.MJOperType.Shoot,o=e;d.NetManager.getGameProtocol().sendOperReq(t,n,o)}),m.EventManager.on(this,v.MJEventDef.MjChiEvent,function(e){g.LogWrap.log("\u53d1\u9001\u5403\u724c\u64cd\u4f5c",e.cards);var t=d.NetManager.getGameProtocol().MY_SEAT,n=v.MJOperType.Chi,o=e.cards;d.NetManager.getGameProtocol().sendOperReq(t,n,o)}),m.EventManager.on(this,v.MJEventDef.MjPengEvent,function(e){g.LogWrap.log("\u53d1\u9001\u78b0\u724c\u64cd\u4f5c",e);var t=d.NetManager.getGameProtocol().MY_SEAT,n=v.MJOperType.Peng,o=e;d.NetManager.getGameProtocol().sendOperReq(t,n,o)}),m.EventManager.on(this,v.MJEventDef.MjGangEvent,function(e){var t=e.cards;g.LogWrap.log("\u53d1\u9001\u6760\u724c\u64cd\u4f5c",t);var n=d.NetManager.getGameProtocol().MY_SEAT,o=e.oper_type;g.LogWrap.log("\u6760\u7684\u7c7b\u578b\u4e3a",o);var r=t;d.NetManager.getGameProtocol().sendOperReq(n,o,r)}),m.EventManager.on(this,v.MJEventDef.MjHuEvent,function(e){var t=e.cards;g.LogWrap.log("\u53d1\u9001\u80e1\u724c\u64cd\u4f5c",t);var n=d.NetManager.getGameProtocol().MY_SEAT,o=e.oper_type;g.LogWrap.log("\u80e1\u7684\u7c7b\u578b\u4e3a",o);var r=t;d.NetManager.getGameProtocol().sendOperReq(n,o,r)}),m.EventManager.on(this,v.MJEventDef.MjTingEvent,function(e){g.LogWrap.log("\u53d1\u9001\u542c\u724c\u64cd\u4f5c");var t=d.NetManager.getGameProtocol().MY_SEAT,n=v.MJOperType.Ting;d.NetManager.getGameProtocol().sendOperReq(t,n,[])}),m.EventManager.on(this,v.MJEventDef.MjCheckEvent,function(e){g.LogWrap.log("\u53d1\u9001\u8fc7\u724c\u64cd\u4f5c");var t=d.NetManager.getGameProtocol().MY_SEAT,n=v.MJOperType.Check;d.NetManager.getGameProtocol().sendOperReq(t,n,[])}),m.EventManager.on(this,v.MJEventDef.MjBrightEvent,function(t){if(null==t)e.ERMJOutArea.forEach(function(e){e.hideCardBright()});else{var n=t.cardValue;e.ERMJOutArea.forEach(function(e){e.addCardBright(n)})}}),m.EventManager.on(this,v.MJEventDef.TingTipsEvent,function(t){if(null!=t)for(var n=_.MJData.tingCombo,o=0;o<n.length;o++){var r=n[o];if(r.out_card==t.cardValue){var a=r.ting_cards;e.ERMJTingTipsView.showTingTipsView(a);break}e.ERMJTingTipsView.hideTingTipsView()}else e.ERMJTingTipsView.hideTingTipsView()})},t.prototype.onDestroy=function(){m.EventManager.off(this)},t.prototype.initUserInfo=function(){var e={username:p.default.getSubStringLengTxt(h.DataManager.userInfo.nickname)||p.default.getReplaceStrToStar(h.DataManager.userInfo.userid),gold:h.DataManager.userInfo.gold,headimg_id:h.DataManager.userInfo.headimgurl};this.ERMJPlayer[0].setUserInfo(e)},t.prototype.resetGameView=function(){this.ERMJHandArea[0].hideMJGrey(),this.ERMJHandArea[0].removeArrowTing(),this.ERMJPlayer.forEach(function(e){e.initUser()}),this.ERMJHandArea.forEach(function(e){e.removeAllHand(),e.removeHuaCard()}),this.ERMJOutArea.forEach(function(e){e.removeAllOut()}),this.ERMJCpgArea.forEach(function(e){e.clearCPGMJ()}),this.ERMJShowArea.forEach(function(e){e.removeMingCard()}),this.ERMJTable.showClockDi(!1),this.ERMJTable.resetWindView(),this.ERMJOper.resetView(),this.ERMJOper.hideOption(),this.ERMJOper.showBtnHuList(!1),this.ERMJTop.resetView(),this.initUserInfo(),d.NetManager.getGameProtocol().ResetData(),_.MJData.ResetData(),this.tingStateReady=!1,this.tingStateRun=!1,this.hideShotArrow(),this.ERMJTingTipsView.hideTingTipsView()},t.prototype.onSubGameReconnect=function(e){var t=this;this.resetGameView(),this.ERMJTable.showReady(!1),d.NetManager.getGameProtocol().PLAYER_DATAS=e.player_list;for(var n=0;n<e.player_list.length;n++){var o=e.player_list[n];o.player_id==h.DataManager.userInfo.userid&&(d.NetManager.getGameProtocol().MY_DATA=o,d.NetManager.getGameProtocol().MY_SEAT=o.seat_id,console.log("\u6211\u7684\u7528\u6237\u4fe1\u606f======>",o))}d.NetManager.getGameProtocol().PLAYER_DATAS.forEach(function(e){var n=f.default.getLocalIndex(e.seat_id);t.ERMJPlayer[n].setUserInfo(e)});var r=e.room_info;this.ERMJTop.setLimitNum(r.room_base_note),this.ERMJTable.showClockDi(!0);var a=e.oper_seat_id,i=f.default.getLocalIndex(a);_.MJData.turnMeOperate=0==i,this.ERMJTable.showArrowLight(i);var c=e.bankUser_seat_id,s=f.default.getLocalIndex(c);_.MJData.bankerPos=s,this.ERMJPlayer[s].setBankerIcon(!0);var u=e.last_outcard_seat_id,l=f.default.getLocalIndex(u),p=e.player_combos,g=function(e){var n=p[e].seat_id,o=f.default.getLocalIndex(n);p[e].combos.forEach(function(e){var n=e.oper_type,r=e.cards;e.oper_seat_id;t.ERMJCpgArea[o].createCPGMJ(n,r,2)}),p[e].outCards.forEach(function(e){e>0&&t.ERMJOutArea[o].createOutMJ(e),o==l&&e>0&&t.ERMJOutArea[o].showShotArrow()});var r=p[e].huaPai;y.ERMJHandArea[o].createHuaCard(r)},y=this;for(n=0;n<p.length;n++)g(n);var M=e.left_card;this.ERMJTop.setRemainCardNum(M);var m=e.handCards;_.MJData.userCardArr=m,e.player_handcards_nums.forEach(function(e,n){if(0!=e){var o=n+1,r=f.default.getLocalIndex(o);_.MJData.handCardNum[r]=e,t.ERMJHandArea[r].createHandMJ(e)}}),f.default.sortCardList(_.MJData.userCardArr),this.ERMJHandArea[0].setHandValue();var v=e.combos;null!=v&&this.onSubPlayerCanOper(v),e.playerTingStatus.forEach(function(e,n){var o=f.default.getLocalIndex(n+1);2==e&&t.ERMJPlayer[o].setTingIcon(!0),0==o&&(1==e?(t.tingStateReady=!0,t.ERMJOper.hideOption(),t.ERMJOper.showOption("guo")):2==e?(t.tingStateRun=!0,t.ERMJHandArea[0].setMJGrey([])):3==e&&t.ERMJOper.showOption("ting"))});var J=e.ting_combo;if(null!=J&&0!=J.length){_.MJData.tingCombo=J;var R=[];for(n=0;n<J.length;n++){var b=J[n].out_card;R.push(b),this.ERMJHandArea[0].addArrowTing(b)}this.tingStateReady&&this.ERMJHandArea[0].setMJGrey(R)}var E=e.player_ting_cards;null!=E&&0!=E.length&&(_.MJData.HuCardList=E,this.ERMJOper.showBtnHuList(!0));var w=e.windPos;this.ERMJTable.setWindPos(w);var C=e.leftTime;this.ERMJTable.setClockTime(C),this.isStartGame=!0},t.prototype.onSubGameStart=function(e){var t=this;C.UIManager.hideLoading(),this.isStartGame=!0,this.resetGameView(),this.ERMJTable.showReady(!1),d.NetManager.getGameProtocol().PLAYER_DATAS=e.player_list;for(var n=0;n<e.player_list.length;n++){var o=e.player_list[n];o.player_id==h.DataManager.userInfo.userid&&(d.NetManager.getGameProtocol().MY_DATA=o,d.NetManager.getGameProtocol().MY_SEAT=o.seat_id,console.log("\u6211\u7684\u7528\u6237\u4fe1\u606f======>",o))}d.NetManager.getGameProtocol().PLAYER_DATAS.forEach(function(e){var n=f.default.getLocalIndex(e.seat_id);t.ERMJPlayer[n].setUserInfo(e)});var r=e.room_info;this.ERMJTop.setLimitNum(r.room_base_note),this.ERMJTable.showClockDi(!0)},t.prototype.onSubConfirmBank=function(e){var t=e.bankUser_seat_id,n=f.default.getLocalIndex(t);_.MJData.bankerPos=n,this.ERMJPlayer[n].setBankerIcon(!0);var o=e.windPos;this.ERMJTable.setWindPos(o)},t.prototype.onSubSendCards=function(e){var t=e.cards;this.ERMJHandArea.forEach(function(e,t){_.MJData.handCardNum[t]=13,e.createHandMJ(13)}),_.MJData.userCardArr=t,f.default.sortCardList(_.MJData.userCardArr),this.ERMJHandArea[0].setHandValue(),this.ERMJHandArea[0].hideMJGrey();var n=e.left_card;this.ERMJTop.setRemainCardNum(n),this.ERMJTable.showStartTips(0==_.MJData.bankerPos),c.AudioManager.playGameSFX("fapai")},t.prototype.onSubTurnOper=function(e){var t=e.seat_id,n=f.default.getLocalIndex(t);_.MJData.turnMeOperate=0==n,g.LogWrap.log("%c \u8f6e\u5230\u8c01\u64cd\u4f5c->>>>","color:red;font-size:24px",n),this.ERMJTable.showArrowLight(n);var o=e.time_out;this.ERMJTable.setClockTime(o)},t.prototype.onSubSendHuaPai=function(e){var t=e.seat_id,n=f.default.getLocalIndex(t),o=f.default.getUserSexByID(t),r=e.hua_card,a=e.status;_.MJData.handCardNum[n]=_.MJData.handCardNum[n]-r.length;var i=_.MJData.handCardNum[n];if(this.ERMJHandArea[n].createHandMJ(i),this.showOperEffect(n,v.MJOperType.BuHua),0==n){g.LogWrap.log("\u6211\u8981\u8865\u82b1!!!!!!!!!!!!");for(var s=0;s<r.length;s++){var u=r[s],l=_.MJData.userCardArr.indexOf(u);_.MJData.userCardArr.splice(l,1)}1==a&&(this.hasSortBuHua=!0),f.default.sortCardList(_.MJData.userCardArr),this.ERMJHandArea[n].setHandValue()}this.ERMJHandArea[n].createHuaCard(r);var p=1==o?"male/":"female/";c.AudioManager.playGameSFX(p+"flower")},t.prototype.onSubGetCard=function(e){var t=e.seat_id,n=f.default.getLocalIndex(t),o=e.card;_.MJData.handCardNum[n]=_.MJData.handCardNum[n]+o.length;var r=_.MJData.handCardNum[n];this.ERMJHandArea[n].createHandMJ(r),0==n&&(m.EventManager.emit(v.MJEventDef.MjBrightEvent),g.LogWrap.log("\u6211\u83b7\u53d6\u624b\u724c\u4e86!!!!!!!!!!!!",o),_.MJData.userCardArr=_.MJData.userCardArr.concat(o),this.hasSortBuHua&&(this.hasSortBuHua=!1,f.default.sortCardList(_.MJData.userCardArr)),this.ERMJHandArea[n].setHandValue(),this.tingStateRun&&this.ERMJHandArea[n].setMJGrey([]));var a=e.left_card;this.ERMJTop.setRemainCardNum(a)},t.prototype.onSubPlayerCanOper=function(e){var t=e.oper_type;0!=t.length&&-1==t.indexOf(v.MJOperType.Shoot)&&(_.MJData.hasOperAction=!0);for(var n=0;n<t.length;n++)3==t[n]?this.ERMJOper.showOption("chi"):4==t[n]?this.ERMJOper.showOption("peng"):t[n]>=5&&t[n]<=7?this.ERMJOper.showOption("gang"):8==t[n]||9==t[n]?this.ERMJOper.showOption("hu"):10==t[n]&&this.ERMJOper.showOption("ting");_.MJData.chiCombo=[],_.MJData.gangCombo=[],_.MJData.pengCards=null,_.MJData.huCombo=null;var o=e.combo;for(n=0;n<o.length;n++){var r=o[n];r.oper_type==v.MJOperType.Chi?_.MJData.chiCombo.push(r):r.oper_type==v.MJOperType.MingGang||r.oper_type==v.MJOperType.BuGang||r.oper_type==v.MJOperType.AnGang?_.MJData.gangCombo.push(r):r.oper_type==v.MJOperType.Peng?_.MJData.pengCards=r.cards:r.oper_type!=v.MJOperType.DianPao&&r.oper_type!=v.MJOperType.Zimo||(_.MJData.huCombo=r)}},t.prototype.hideShotArrow=function(){this.ermj_arrow.stopAllActions(),this.ermj_arrow.active=!1},t.prototype.onSubCanTing=function(e){_.MJData.hasOperAction=!0;var t=e.ting_combo;_.MJData.tingCombo=t;for(var n=0;n<t.length;n++){var o=t[n].out_card;this.ERMJHandArea[0].addArrowTing(o)}this.ERMJOper.showOption("ting")},t.prototype.onSendTingNotify=function(e){var t=e.seat_id,n=f.default.getLocalIndex(t),o=f.default.getUserSexByID(t);this.ERMJPlayer[n].setTingIcon(!0),this.showOperEffect(n,v.MJOperType.Ting),0==n&&(_.MJData.HuCardList=e.ting_cards,this.ERMJOper.showBtnHuList(!0),this.tingStateRun=!0,_.MJData.tingCombo=null,this.ERMJHandArea[0].removeArrowTing(),this.ERMJHandArea[0].setMJGrey([]));var r=1==o?"male/":"female/";c.AudioManager.playGameSFX(r+"ting")},t.prototype.onSubPlayerOper=function(e){if(0==e.ret){var t=e.seat_id,n=f.default.getLocalIndex(t),o=1==f.default.getUserSexByID(t)?"male/":"female/";g.LogWrap.log("\u64cd\u4f5c\u4eba\u4f4d\u7f6e",n);var r=e.oper_cards,a=r.oper_type;g.LogWrap.log("\u64cd\u4f5c\u7c7b\u578b",a);var i=r.cards,s=r.oper_seat_id;65535!=s&&(this.lastOutPos=f.default.getLocalIndex(s)),2==a&&(this.lastOutCard=i[0],this.lastOutPos=n),0==n&&a!=v.MJOperType.Check&&a!=v.MJOperType.Ting&&(_.MJData.tingCombo=null,this.ERMJHandArea[0].removeArrowTing());var u=0;switch(a){case v.MJOperType.Check:this.ERMJHandArea[0].hideMJGrey(),this.ERMJOper.resetView();break;case v.MJOperType.Shoot:u=1,this.ERMJOutArea[n].createOutMJ(i[0],!1);var l=this.ERMJOutArea[n].getLastAddCard();this.ERMJOutEffect.showOutEffect(i[0],n,l),this.ERMJOutArea[n].showShotArrow(),c.AudioManager.playGameSFX("dapai"),c.AudioManager.playGameSFX(o+i[0]);break;case v.MJOperType.Chi:u=2,_.MJData.chiCombo=[],this.ERMJCpgArea[n].createCPGMJ(a,i,2),this.ERMJOutArea[this.lastOutPos].delEndOutMJ(),this.hideShotArrow(),this.showOperEffect(n,a);break;case v.MJOperType.Peng:u=2,_.MJData.pengCards=null,this.ERMJCpgArea[n].createCPGMJ(a,i,2),this.ERMJOutArea[this.lastOutPos].delEndOutMJ(),this.hideShotArrow(),this.showOperEffect(n,a);break;case v.MJOperType.MingGang:u=3,_.MJData.gangCombo=[],g.LogWrap.log("\u660e\u6760!!!!"),this.ERMJCpgArea[n].createCPGMJ(a,i,2),this.ERMJOutArea[this.lastOutPos].delEndOutMJ(),this.hideShotArrow(),this.showOperEffect(n,a);break;case v.MJOperType.AnGang:u=4,_.MJData.gangCombo=[],g.LogWrap.log("\u6697\u6760!!!!"),this.ERMJCpgArea[n].createCPGMJ(a,i,2),this.showOperEffect(n,a);break;case v.MJOperType.BuGang:u=1,_.MJData.gangCombo=[],g.LogWrap.log("\u8865\u6760!!!!"),this.ERMJCpgArea[n].pengToBuGangCard(i,2),this.showOperEffect(n,a);break;case v.MJOperType.Zimo:this.showOperEffect(n,a);break;case v.MJOperType.DianPao:this.ERMJOutArea[this.lastOutPos].delEndOutMJ(),this.hideShotArrow(),this.showOperEffect(n,a);break;case v.MJOperType.Ting:if(0==n){for(var p=_.MJData.tingCombo,h=[],d=0;d<p.length;d++){var y=p[d].out_card;h.push(y)}this.ERMJHandArea[0].setMJGrey(h),this.tingStateReady=!0}}_.MJData.handCardNum[n]=_.MJData.handCardNum[n]-u;var M=_.MJData.handCardNum[n];if(a!=v.MJOperType.Check&&a!=v.MJOperType.Ting&&this.ERMJHandArea[n].createHandMJ(M),0==n){this.ERMJOper.hideOption(),a==v.MJOperType.Ting&&this.ERMJOper.showOption("guo"),this.ERMJTingTipsView.hideTingTipsView(),this.tingStateRun||(_.MJData.hasOperAction=!1);var J=[];if(a==v.MJOperType.Chi||a==v.MJOperType.Peng||a==v.MJOperType.MingGang){J=i.concat([]);var R=i.indexOf(this.lastOutCard);J.splice(R,1)}else a==v.MJOperType.BuGang?(J=i.concat([]),(J=[]).push(i[0])):a!=v.MJOperType.AnGang&&a!=v.MJOperType.Shoot||(J=i.concat([]));for(d=0;d<J.length;d++){var b=J[d],E=_.MJData.userCardArr.indexOf(b);_.MJData.userCardArr.splice(E,1)}a!=v.MJOperType.Check&&a!=v.MJOperType.Ting&&f.default.sortCardList(_.MJData.userCardArr),this.ERMJHandArea[n].setHandValue(),this.tingStateRun&&this.ERMJHandArea[n].setMJGrey([]),m.EventManager.emit(v.MJEventDef.MjBrightEvent)}a!=v.MJOperType.Check&&a!=v.MJOperType.Ting&&a!=v.MJOperType.Shoot&&c.AudioManager.playGameSFX(o+v.MJSound[a])}},t.prototype.onSubGameEnd=function(e){var t=this;this.isStartGame=!1,this.ERMJTable.showClockDi(!1),this.ERMJHandArea[0].hideMJGrey(),_.MJData.tingCombo=null;var n=e.player_list,o=[];d.NetManager.protocolGameCommon.needFlushGold&&d.NetManager.protocolGameCommon.flushPlayerInfo.forEach(function(e){var t=f.default.getLocalIndex(e.seat_id);o[t]=e.gold}),n.forEach(function(e){var n=e.seat_id,r=f.default.getLocalIndex(n),a=o[r]?o[r]:parseFloat(e.gold),i=parseFloat(e.score),c=0==r?cc.v2(0,100):cc.v2(0,-100);t.ERMJPlayer[r].flutterScore(i,c,function(){t.ERMJPlayer[r].setUserScore(a),0==r&&(d.NetManager.protocolGameCommon.needFlushGold=!1,h.DataManager.userInfo.gold=a,t.ERMJTable.showReady(!0))})});var r=e.player_finish_info;r.forEach(function(e){var n=e.seat_id,o=f.default.getLocalIndex(n);t.ERMJHandArea[o].removeAllHand(),t.ERMJShowArea[o].showMingCard(e.cards)});var a=null;0==this.ermj_result.childrenCount?((a=cc.instantiate(this.ERMJResultDetail)).active=!0,this.ermj_result.addChild(a)):a=this.ermj_result.children[0];var i=e.huType,c=a.getComponent("ERMJResultDetail");c.GameView=this,c.showResultDetail(n,r,i)},t.prototype.showOperEffect=function(e,t){return a(this,void 0,void 0,function(){var n,o=this;return i(this,function(r){switch(r.label){case 0:return[4,w.ResManager.loadResAsync(v.MJEffect[t],sp.SkeletonData)];case 1:return n=r.sent(),this.user_spine[e].clearTracks(),this.user_spine[e].setToSetupPose(),this.user_spine[e].skeletonData=n,this.user_spine[e].animation="animation",this.user_spine[e].node.active=!0,this.user_spine[e].setCompleteListener(function(){o.user_spine[e].node.active=!1}),[2]}})})},t.prototype.onUpdateUserScore=function(){this.isStartGame||this.ERMJPlayer[0].setUserScore(h.DataManager.userInfo.gold)},r([A(s.default)],t.prototype,"ERMJTable",void 0),r([A(u.default)],t.prototype,"ERMJTop",void 0),r([A(l.default)],t.prototype,"ERMJPlayer",void 0),r([A(y.default)],t.prototype,"ERMJHandArea",void 0),r([A(R.default)],t.prototype,"ERMJCpgArea",void 0),r([A(M.default)],t.prototype,"ERMJOutArea",void 0),r([A(E.default)],t.prototype,"ERMJShowArea",void 0),r([A(J.default)],t.prototype,"ERMJOper",void 0),r([A(b.default)],t.prototype,"ERMJTingTipsView",void 0),r([A(O.default)],t.prototype,"ERMJOutEffect",void 0),r([A(sp.Skeleton)],t.prototype,"user_spine",void 0),r([A(cc.Prefab)],t.prototype,"ERMJResultDetail",void 0),r([A(cc.Node)],t.prototype,"ermj_result",void 0),r([A(cc.Node)],t.prototype,"ermj_arrow",void 0),t=r([S],t)}(cc.Component);n.default=P,cc._RF.pop()},{"../../../common/log/LogWrap":void 0,"../../../common/utils/Utils":void 0,"../../../manager/AudioManager":void 0,"../../../manager/DataManager":void 0,"../../../manager/EventManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/ResManager":void 0,"../../../manager/UIManager":void 0,"../../mahjong/MJData":void 0,"../../mahjong/MJDefine":void 0,"../../mahjong/MJOutEffect":void 0,"./ERMJCpgArea":"ERMJCpgArea","./ERMJHandArea":"ERMJHandArea","./ERMJOper":"ERMJOper","./ERMJOutArea":"ERMJOutArea","./ERMJPlayer":"ERMJPlayer","./ERMJShowArea":"ERMJShowArea","./ERMJTable":"ERMJTable","./ERMJTingTipsView":"ERMJTingTipsView","./ERMJTool":"ERMJTool","./ERMJTop":"ERMJTop"}],ERMJHandArea:[function(e,t,n){"use strict";cc._RF.push(t,"912c1VpgsFPq6VV9zHuE1hM","ERMJHandArea");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function c(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,c)}s((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../mahjong/MJHandAreaBase"),s=e("../../mahjong/MJCardBase"),u=cc._decorator,l=u.ccclass,p=u.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.flower_area=null,t.hua_card=null,t.ArrowTing=null,t}return o(t,e),t.prototype.createHuaCard=function(e){return a(this,void 0,void 0,function(){var t,n;return i(this,function(o){switch(o.label){case 0:t=0,o.label=1;case 1:return t<e.length?[4,(n=cc.instantiate(this.hua_card)).getComponent(s.default).setSpirteValue(e[t])]:[3,4];case 2:o.sent(),this.flower_area.addChild(n),o.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},t.prototype.addArrowTing=function(e){for(var t=this.mj_hand.childrenCount,n=0;n<t;n++){var o=this.mj_hand.children[n];if(e==o.getComponent(s.default).getCardValue()){var r=cc.instantiate(this.ArrowTing);r.setPosition(cc.v2(0,80)),o.addChild(r)}}},t.prototype.removeArrowTing=function(){for(var e=this.mj_hand.childrenCount,t=0;t<e;t++){var n=this.mj_hand.children[t];null!=n.getChildByName("ArrowTing")&&n.getChildByName("ArrowTing").removeFromParent()}},t.prototype.setMJGrey=function(e){this.mj_hand.children.forEach(function(t){var n=t.getComponent(s.default).getCardValue();-1==e.indexOf(n)&&(t.pauseSystemEvents(!0),t.getComponent(s.default).setGreyBack(!0))})},t.prototype.hideMJGrey=function(){this.mj_hand.children.forEach(function(e){e.resumeSystemEvents(!0),e.getComponent(s.default).setGreyBack(!1)})},t.prototype.removeHuaCard=function(){this.flower_area.removeAllChildren()},r([p(cc.Node)],t.prototype,"flower_area",void 0),r([p(cc.Prefab)],t.prototype,"hua_card",void 0),r([p(cc.Prefab)],t.prototype,"ArrowTing",void 0),t=r([l],t)}(c.default);n.default=h,cc._RF.pop()},{"../../mahjong/MJCardBase":void 0,"../../mahjong/MJHandAreaBase":void 0}],ERMJHandCard:[function(e,t,n){"use strict";cc._RF.push(t,"22e2eWi9XhOromjOl3gZWdw","ERMJHandCard");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../mahjong/MJCardBase"),i=cc._decorator,c=i.ccclass,s=i.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.GreyBack=null,t.ArrowTing=null,t}return o(t,e),t.prototype.showArrowTing=function(e){this.ArrowTing.active=e},r([s(cc.Node)],t.prototype,"GreyBack",void 0),r([s(cc.Node)],t.prototype,"ArrowTing",void 0),t=r([c],t)}(a.default);n.default=u,cc._RF.pop()},{"../../mahjong/MJCardBase":void 0}],ERMJOper:[function(e,t,n){"use strict";cc._RF.push(t,"a5e43EZoSNIlZvfGOZprQZ6","ERMJOper");var o,r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function c(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../mahjong/MJOperBase"),u=e("../../../common/utils/Utils"),l=e("../../../manager/EventManager"),p=e("../../mahjong/MJCardBase"),h=e("../../mahjong/MJDefine"),d=e("../../../manager/ResManager"),f=e("../../mahjong/MJData"),g=((o={})[h.MJOperType.Chi]="chi",o[h.MJOperType.Peng]="peng",o[h.MJOperType.MingGang]="gang",o[h.MJOperType.AnGang]="gang",o[h.MJOperType.BuGang]="gang",o),y=cc._decorator,_=y.ccclass,M=y.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.multiple_oper_view=null,t.icon_type=null,t.card_list=[],t.btn_huList=null,t.cardListDatas=[],t.hasOpenHuList=!1,t.GameView=null,t}return r(t,e),t.prototype.onLoad=function(){var t=this;e.prototype.onLoad.call(this),this.resetView(),this.card_list.forEach(function(e,n){var o=n;u.default.addClickEventEND(e,t.onClickCardListEvent.bind(t),o)}),this.btn_huList.active=!1,u.default.addClickEventEND(this.btn_huList,this.onClickHuListEvent.bind(this)),l.EventManager.on(this,h.MJEventDef.OpenMulOperView,function(e){t.showMulOperview(e)})},t.prototype.onDestroy=function(){l.EventManager.off(this)},t.prototype.resetView=function(){this.multiple_oper_view.active=!1,this.icon_type.spriteFrame=null,this.card_list.forEach(function(e){e.active=!1}),this.cardListDatas=[]},t.prototype.showMulOperview=function(e){return i(this,void 0,void 0,function(){var t,n,o;return c(this,function(r){switch(r.label){case 0:this.resetView(),t=function(t){var o,r,a,i,s;return c(this,function(c){switch(c.label){case 0:return 0!=t?[3,2]:(o=e[t].oper_type,r=g[o],a=n.icon_type,[4,d.ResManager.loadResAsync("game/ermj/res/ermj_icon_"+r,cc.SpriteFrame)]);case 1:a.spriteFrame=c.sent(),c.label=2;case 2:return n.cardListDatas.push(e[t]),(i=n.card_list[t]).active=!0,s=e[t].cards,i.children.forEach(function(e,t){null!=s[t]?(e.active=!0,e.getComponent(p.default).setSpirteValue(s[t])):e.active=!1}),[2]}})},n=this,o=0,r.label=1;case 1:return o<e.length?[5,t(o)]:[3,4];case 2:r.sent(),r.label=3;case 3:return o++,[3,1];case 4:return this.multiple_oper_view.active=!0,[2]}})})},t.prototype.onClickCardListEvent=function(e,t){var n=this.cardListDatas[t];n.oper_type==h.MJOperType.Chi?l.EventManager.emit(h.MJEventDef.MjChiEvent,n):l.EventManager.emit(h.MJEventDef.MjGangEvent,n),this.multiple_oper_view.active=!1,this.node_oper.active=!1},t.prototype.showBtnHuList=function(e){this.btn_huList.active=e,this.hasOpenHuList=!1},t.prototype.onClickHuListEvent=function(){this.hasOpenHuList?this.GameView.ERMJTingTipsView.hideTingTipsView():this.GameView.ERMJTingTipsView.showTingTipsView(f.MJData.HuCardList),this.hasOpenHuList=!this.hasOpenHuList},a([M(cc.Node)],t.prototype,"multiple_oper_view",void 0),a([M(cc.Sprite)],t.prototype,"icon_type",void 0),a([M(cc.Node)],t.prototype,"card_list",void 0),a([M(cc.Node)],t.prototype,"btn_huList",void 0),t=a([_],t)}(s.default);n.default=m,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/EventManager":void 0,"../../../manager/ResManager":void 0,"../../mahjong/MJCardBase":void 0,"../../mahjong/MJData":void 0,"../../mahjong/MJDefine":void 0,"../../mahjong/MJOperBase":void 0}],ERMJOutArea:[function(e,t,n){"use strict";cc._RF.push(t,"f90fd3BRB5Fsb31Jfn1o3FN","ERMJOutArea");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../mahjong/MJOutAreaBase"),i=e("../../mahjong/MJCardBase"),c=cc._decorator,s=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_bright=null,t.shotArrow=null,t}return o(t,e),t.prototype.addCardBright=function(e){for(var t=this.node_outArea.childrenCount,n=0;n<t;n++){var o=this.node_outArea.children[n],r=o.getComponent(i.default).getCardValue(),a=o.getComponent(i.default).getCardBackNode();null==a.getChildByName("CardBright")&&a.addChild(cc.instantiate(this.node_bright)),a.getChildByName("CardBright").active=r==e}},t.prototype.hideCardBright=function(){for(var e=this.node_outArea.childrenCount,t=0;t<e;t++){var n=this.node_outArea.children[t].getComponent(i.default).getCardBackNode().getChildByName("CardBright");null!=n&&(n.active=!1)}},t.prototype.showShotArrow=function(){this.shotArrow.active=!0,this.shotArrow.stopAllActions();var e=this.getLastAddCard().position,t=this.node_outArea.convertToWorldSpaceAR(e),n=this.shotArrow.parent.convertToNodeSpaceAR(t);this.shotArrow.setPosition(n.x,n.y+30);var o=cc.moveBy(.4,cc.v2(0,10)),r=cc.moveBy(.4,cc.v2(0,-10)),a=cc.repeatForever(cc.sequence(o,r));this.shotArrow.runAction(a)},r([u(cc.Prefab)],t.prototype,"node_bright",void 0),r([u(cc.Node)],t.prototype,"shotArrow",void 0),t=r([s],t)}(a.default);n.default=l,cc._RF.pop()},{"../../mahjong/MJCardBase":void 0,"../../mahjong/MJOutAreaBase":void 0}],ERMJPlayer:[function(e,t,n){"use strict";cc._RF.push(t,"e54eeT6fSZBKL7sAOFpA9kV","ERMJPlayer");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../common/UIHelper"),i=e("../../../common/utils/Utils"),c=cc._decorator,s=c.ccclass,u=c.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spr_head=null,t.banker=null,t.label_name=null,t.label_money=null,t.icon_ting=null,t.flutter=null,t.lose_num=null,t.win_num=null,t.interVal=null,t}return o(t,e),t.prototype.onLoad=function(){this.originFlutterPos=this.flutter.node.position},t.prototype.initUser=function(){this.spr_head.spriteFrame=null,this.label_name.string="",this.label_money.string="",this.banker.active=!1,this.icon_ting.active=!1,this.flutter.node.stopAllActions(),this.flutter.node.active=!1,this.flutter.string="",this.unschedule(this.interVal),this.interVal=null,this.node.active=!1},t.prototype.setUserHead=function(e){a.default.setHeadIcon(e,this.spr_head.node)},t.prototype.setUserScore=function(e){this.label_money.string=i.default.getFormatGold(e)},t.prototype.setUserInfo=function(e){var t=e,n=i.default.getSubStringLengTxt(e.username)||i.default.getReplaceStrToStar(e.player_id);this.label_name.string=n,this.setUserHead(e.headimg_id),this.setUserScore(t.gold),this.node.active=!0},t.prototype.setBankerIcon=function(e){this.banker.active=e},t.prototype.setTingIcon=function(e){this.icon_ting.active=e},t.prototype.flutterScore=function(e,t,n){var o=this;this.flutter.node.position=this.originFlutterPos,this.flutter.node.active=!0;var r="";e>=0?(this.flutter.font=this.win_num,r="+"):(this.flutter.font=this.lose_num,r="-");var a=Math.abs(e),i=a/parseFloat(50..toFixed(2)),c=0,s="";this.interVal=function(){s=(c+=i).toFixed(2),o.flutter.string=r+s,c>=a&&(s=a.toString(),o.flutter.string=r+parseFloat(s).toFixed(2),o.unschedule(o.interVal))},this.schedule(this.interVal,.01,cc.macro.REPEAT_FOREVER);var u=cc.moveBy(.5,t),l=cc.sequence(u,cc.delayTime(.5),cc.callFunc(function(){n&&n()}));this.flutter.node.runAction(l)},t.prototype.onDestroy=function(){this.unschedule(this.interVal),this.interVal=null},r([u(cc.Sprite)],t.prototype,"spr_head",void 0),r([u(cc.Node)],t.prototype,"banker",void 0),r([u(cc.Label)],t.prototype,"label_name",void 0),r([u(cc.Label)],t.prototype,"label_money",void 0),r([u(cc.Node)],t.prototype,"icon_ting",void 0),r([u(cc.Label)],t.prototype,"flutter",void 0),r([u(cc.BitmapFont)],t.prototype,"lose_num",void 0),r([u(cc.BitmapFont)],t.prototype,"win_num",void 0),t=r([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../../common/UIHelper":void 0,"../../../common/utils/Utils":void 0}],ERMJResultDetail:[function(e,t,n){"use strict";cc._RF.push(t,"234e1TXp6pPQK8XFeja4yQN","ERMJResultDetail");var o,r=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function c(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,c)}s((o=o.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../../common/utils/Utils"),u=e("../../../common/UIHelper"),l=e("../../../manager/ResManager"),p=e("./ERMJTool"),h=e("../ERMJDefine"),d=e("../../mahjong/MJData"),f=e("../../../common/log/LogWrap"),g=e("../../mahjong/MJCPGBase"),y=e("../../mahjong/MJDefine"),_=e("../../mahjong/MJCardBase"),M=e("../../../manager/AudioManager"),m=e("../../../manager/NetManager"),v=((o={})[y.MJOperType.DianPao]="game/ermj/res/ermj_icon_zhupai",o[y.MJOperType.Zimo]="game/ermj/res/ermj_icon_zimo",o),J=cc._decorator,R=J.ccclass,b=J.property,E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spr_winInfo=null,t.win_info=null,t.spr_huType=null,t.win_username=null,t.fanList=null,t.spr_fan=null,t.spr_liuju=null,t.node_player=[],t.icon_type=[],t.btn_close=null,t.btn_start=null,t.btn_share=null,t.comboList=null,t.handList=null,t.huCard=null,t.MJComboPfb=null,t.MJHandPfb=null,t.GameView=null,t.win_gold=0,t.spr_di=[],t.user_node=[],t.spr_head=[],t.banker=[],t.label_name=[],t.label_money=[],t}return r(t,e),t.prototype.onLoad=function(){this.initPlayerNode(),this.initComponent()},t.prototype.initPlayerNode=function(){var e=this;this.node_player.forEach(function(t){e.spr_di.push(t.getChildByName("spr_di").getComponent(cc.Sprite));var n=t.getChildByName("user_node");e.user_node.push(n),e.spr_head.push(cc.find("Mask/spr_head",n)),e.banker.push(n.getChildByName("banker")),e.label_name.push(n.getChildByName("label_name").getComponent(cc.Label)),e.label_money.push(n.getChildByName("label_money").getComponent(cc.Label))})},t.prototype.initComponent=function(){s.default.addClickEventEND(this.btn_close,this.onClickClose.bind(this)),s.default.addClickEventEND(this.btn_start,this.onClickStart.bind(this)),s.default.addClickEventEND(this.btn_share,this.onClickShare.bind(this))},t.prototype.onClickClose=function(){this.node.active=!1},t.prototype.onClickStart=function(){this.GameView.ERMJTable.sendMatchReq(),this.node.active=!1},t.prototype.onClickShare=function(){var e=parseFloat(this.win_gold+"");m.NetManager.protocolChat.sendChatShareRoomReq(e.toFixed(2)+"")},t.prototype.resetResultView=function(){this.win_username.string="",this.fanList.removeAllChildren(),this.icon_type.forEach(function(e){e.node.active=!1}),this.spr_liuju.active=!1,this.spr_winInfo.active=!1},t.prototype.showResultDetail=function(e,t,n){var o=this;this.resetResultView();var r,a="\u73a9\u5bb6\u8d62",J="",R=0,b=null;r=!1,this.spr_huType.spriteFrame=null;var E=[];if(m.NetManager.protocolGameCommon.needFlushGold&&m.NetManager.protocolGameCommon.flushPlayerInfo.forEach(function(e){var t=p.default.getLocalIndex(e.seat_id);E[t]=e.gold}),e.forEach(function(e){return i(o,void 0,void 0,function(){var t,o,i,h,g,y,_,M,m,R,w,C,O;return c(this,function(c){switch(c.label){case 0:return t=p.default.getLocalIndex(e.seat_id),o=E[t]?E[t]:parseFloat(e.gold),i=parseFloat(e.score),h=e.username,g=e.player_id,y=e.headimg_id+"",0==t&&(this.win_gold=i),u.default.setHeadIcon(y,this.spr_head[t]),this.label_money[t].string=o+"",_=s.default.getSubStringLengTxt(h)||s.default.getReplaceStrToStar(g),this.label_name[t].string=_,this.banker[t].active=t==d.MJData.bankerPos,M="game/ermj/res/",m="game/ermj/res/",i>0?(this.spr_winInfo.active=!0,J="+"+i,b=t,this.win_username.string=_,R=this.spr_huType,[4,l.ResManager.loadResAsync(v[n],cc.SpriteFrame)]):[3,3];case 1:return R.spriteFrame=c.sent(),M+="ermj_bk_js_sheng",m+="ermj_icon_sheng",w=this.icon_type[t],[4,l.ResManager.loadResAsync(m,cc.SpriteFrame)];case 2:return w.spriteFrame=c.sent(),this.icon_type[t].node.active=!0,0!=t&&(a="\u5bf9\u5bb6\u8d62"),[3,6];case 3:return i<0?(M+="ermj_bk_js_bai",m+="ermj_icon_bai",C=this.icon_type[t],[4,l.ResManager.loadResAsync(m,cc.SpriteFrame)]):[3,5];case 4:return C.spriteFrame=c.sent(),this.icon_type[t].node.active=!0,[3,6];case 5:0==t&&(this.win_username.string=_),M+="ermj_bk_js_liuju",this.icon_type[t].node.active=!1,this.spr_liuju.active=!0,r=!0,f.LogWrap.log("\u548c\u5c40\u4e86!!!!!"),c.label=6;case 6:return O=this.spr_di[t],[4,l.ResManager.loadResAsync(M,cc.SpriteFrame)];case 7:return O.spriteFrame=c.sent(),[2]}})})}),null!=b||r){f.LogWrap.log("\u8fdb\u6765\u4e86\u5417!!!!!");for(var w=function(e){var n=t[e],a=n.seat_id,i=p.default.getLocalIndex(a);if(i==b||r&&0==i){var c=n.cards,s=n.combos,u=n.fanxing,l=n.fanxingValue,d=C.comboList;d.destroyAllChildren();var f=C.handList;f.destroyAllChildren();var M=C.huCard;M.destroyAllChildren(),s.forEach(function(e){var t=e.oper_type,n=e.cards,r=(e.oper_seat_id,cc.instantiate(o.MJComboPfb));t==y.MJOperType.Chi||t==y.MJOperType.Peng?r.getComponent(g.default).createChiPengCard(t,n,2):t==y.MJOperType.MingGang?r.getComponent(g.default).createMingGangCard(n,2):t==y.MJOperType.BuGang?r.getComponent(g.default).createBuGangCard(n,2):t==y.MJOperType.AnGang&&r.getComponent(g.default).createAnGangCard(n),d.addChild(r)});var m=c.length,v=!1;return m%3==2&&(v=!0),c.forEach(function(e,t){var n=cc.instantiate(o.MJHandPfb);n.getComponent(_.default).setSpirteValue(e),t==m-1&&v?M.addChild(n):f.addChild(n)}),C.fanList.removeAllChildren(),u.forEach(function(e,t){var n=cc.instantiate(o.spr_fan);n.active=!0,n.getChildByName("label_fan").getComponent(cc.Label).string=h.FanXingStr[e],n.getChildByName("label_num").getComponent(cc.Label).string=l[t]+"\u756a",o.fanList.addChild(n)}),l.forEach(function(e){R+=e}),"break"}},C=this,O=0;O<t.length;O++){if("break"===w(O))break}}r?M.AudioManager.playGameSFX("p_liuju"):0==b?M.AudioManager.playGameSFX("p_shegnli"):M.AudioManager.playGameSFX("p_shibai"),this.btn_share.active=0==b,this.win_info.string="<color=#ffffff>"+a+"  </c><color=#feef50>"+J+"  "+R+"</color><color=#ffffff>\u756a</color>",this.node.active=!0},a([b(cc.Node)],t.prototype,"spr_winInfo",void 0),a([b(cc.RichText)],t.prototype,"win_info",void 0),a([b(cc.Sprite)],t.prototype,"spr_huType",void 0),a([b(cc.Label)],t.prototype,"win_username",void 0),a([b(cc.Node)],t.prototype,"fanList",void 0),a([b(cc.Node)],t.prototype,"spr_fan",void 0),a([b(cc.Node)],t.prototype,"spr_liuju",void 0),a([b(cc.Node)],t.prototype,"node_player",void 0),a([b(cc.Sprite)],t.prototype,"icon_type",void 0),a([b(cc.Node)],t.prototype,"btn_close",void 0),a([b(cc.Node)],t.prototype,"btn_start",void 0),a([b(cc.Node)],t.prototype,"btn_share",void 0),a([b(cc.Node)],t.prototype,"comboList",void 0),a([b(cc.Node)],t.prototype,"handList",void 0),a([b(cc.Node)],t.prototype,"huCard",void 0),a([b(cc.Prefab)],t.prototype,"MJComboPfb",void 0),a([b(cc.Prefab)],t.prototype,"MJHandPfb",void 0),t=a([R],t)}(cc.Component);n.default=E,cc._RF.pop()},{"../../../common/UIHelper":void 0,"../../../common/log/LogWrap":void 0,"../../../common/utils/Utils":void 0,"../../../manager/AudioManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/ResManager":void 0,"../../mahjong/MJCPGBase":void 0,"../../mahjong/MJCardBase":void 0,"../../mahjong/MJData":void 0,"../../mahjong/MJDefine":void 0,"../ERMJDefine":"ERMJDefine","./ERMJTool":"ERMJTool"}],ERMJRoomView:[function(e,t,n){"use strict";cc._RF.push(t,"b6b6ctUHedIBY1tVaEVL0SY","ERMJRoomView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../view/RoomView"),i=e("../../../view/common/componet/ButtonEx"),c=cc._decorator,s=c.ccclass,u=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initEvent=function(){e.prototype.initEvent.call(this);var t=cc.winSize.width-1280;t>60&&(this.getItem("nv").getComponent(cc.Widget).left=.3*t,this.PageView.getComponent(cc.Widget).right=.3*t)},t.prototype.showRoomList=function(e){for(var t=e.game_room_lists.length,n=Math.ceil(t/6),o=1;o<n;o++){(c=cc.instantiate(this.page_item)).active=!0,this.PageView.addPage(c)}var r=this.PageView.content;for(o=0;o<r.childrenCount;o++){var a=Math.floor(o/6);(c=r.children[a]).children.forEach(function(e){e.active=!1})}for(o=0;o<t;o++){var c,s=e.game_room_lists[o],u=(a=Math.floor(o/6),(c=r.children[a]).children[s.room_level-1]);u.active=!0;var l=u.getChildByName("pot_num").getComponent(cc.Label);s.bet_limit.length>0?l.string=s.bet_limit[0]+"-"+s.bet_limit[1]:l.string=""+s.room_base_note,u.getChildByName("permit_num").getComponent(cc.Label).string=""+s.room_min_entrance,u.getComponent(i.default).disabledScale(),u.getComponent(i.default).registerClick(this.onChooseGameRoom.bind(this,s))}this.PageView.enabled=n>1},t=r([s],t)}(a.default));n.default=u,cc._RF.pop()},{"../../../view/RoomView":void 0,"../../../view/common/componet/ButtonEx":void 0}],ERMJShowArea:[function(e,t,n){"use strict";cc._RF.push(t,"bf748Gp9pZH24BlNG7eHu4+","ERMJShowArea");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../mahjong/MJShowAreaBase"),i=cc._decorator,c=i.ccclass,s=(i.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t=r([c],t)}(a.default));n.default=s,cc._RF.pop()},{"../../mahjong/MJShowAreaBase":void 0}],ERMJTable:[function(e,t,n){"use strict";cc._RF.push(t,"c8e18xOb65B+LxvZbLht9Te","ERMJTable");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function c(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,c)}s((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c="\u8bf7\u7b49\u5f85\u5e84\u5bb6\u4f18\u5148\u51fa\u724c",s="\u60a8\u662f\u5e84\u5bb6,  \u8bf7\u4f18\u5148\u51fa\u724c",u="game/ermj/res/ermj_icon_zs_1",l="game/ermj/res/ermj_icon_zs",p=e("../../../common/utils/Utils"),h=e("../../../manager/UIManager"),d=e("../../../manager/NetManager"),f=e("../../../manager/ResManager"),g=e("../../../manager/AudioManager"),y=e("../../../common/log/LogWrap"),_=e("./ERMJTool"),M=cc._decorator,m=M.ccclass,v=M.property,J=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.clock_di=null,t.clock_num=null,t.turn_blink=[],t.table_wind=[],t.table_wind_light=[],t.warm_blink=null,t.btn_start=null,t.start_tips=null,t.label_tips=null,t.spr_arrow=null,t.GameView=null,t.time_num=null,t}return o(t,e),t.prototype.start=function(){p.default.addClickEventEND(this.btn_start,this.sendMatchReq.bind(this))},t.prototype.resetWindView=function(){this.table_wind.forEach(function(e){e.spriteFrame=null}),this.table_wind_light.forEach(function(e){e.spriteFrame=null})},t.prototype.showReady=function(e){this.btn_start.active=e},t.prototype.sendMatchReq=function(){h.UIManager.showLoading("\u6b63\u5728\u5feb\u901f\u5339\u914d\u4e2d...",!0,function(){d.NetManager.protocolGameCommon.sendCancelMatch()}),this.GameView.resetGameView(),d.NetManager.protocolGameCommon.sendMatchReq(),this.btn_start.active=!1},t.prototype.showClockDi=function(e){this.clock_di.active=e,0==e&&this.unschedule(this.onUpdateTimer)},t.prototype.setWindPos=function(e){return a(this,void 0,void 0,function(){var t,n,o,r,a,c,s,u;return i(this,function(i){switch(i.label){case 0:t=e,y.LogWrap.log("\u6211\u7684\u98ce\u5411\u4f4d\u7f6e->>>>>>>",t),n=t-1,o=["table_east_1","table_south_1","table_west_1","table_north_1"],o=_.default.sliceArray(o,n),r=["table_east_2","table_south_2","table_west_2","table_north_2"],r=_.default.sliceArray(r,n),a="game/ermj/res/",c=0,i.label=1;case 1:return c<4?[4,f.ResManager.loadResAsync(a+o[c],cc.SpriteFrame)]:[3,5];case 2:return s=i.sent(),this.table_wind[c].spriteFrame=s,[4,f.ResManager.loadResAsync(a+r[c],cc.SpriteFrame)];case 3:u=i.sent(),this.table_wind_light[c].spriteFrame=u,i.label=4;case 4:return c++,[3,1];case 5:return[2]}})})},t.prototype.showArrowLight=function(e){this.turn_blink.forEach(function(t,n){t.active=e==n})},t.prototype.showStartTips=function(e){return a(this,void 0,void 0,function(){var t,n,o=this;return i(this,function(r){switch(r.label){case 0:return this.start_tips.active=!0,this.label_tips.string=e?s:c,t=e?l:u,[4,f.ResManager.loadResAsync(t,cc.SpriteFrame)];case 1:return n=r.sent(),this.spr_arrow.spriteFrame=n,this.start_tips.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){o.start_tips.active=!1}))),[2]}})})},t.prototype.setClockTime=function(e){this.time_num=e,this.warm_blink.active=!1,this.unschedule(this.onUpdateTimer),this.schedule(this.onUpdateTimer,1,cc.macro.REPEAT_FOREVER,.01)},t.prototype.onUpdateTimer=function(){this.time_num<0?this.unschedule(this.onUpdateTimer):(this.clock_num.string=this.time_num+"",this.time_num<=3&&(g.AudioManager.playGameSFX("clock"),this.warm_blink.active=!0),this.time_num--)},r([v(cc.Node)],t.prototype,"clock_di",void 0),r([v(cc.Label)],t.prototype,"clock_num",void 0),r([v(cc.Node)],t.prototype,"turn_blink",void 0),r([v(cc.Sprite)],t.prototype,"table_wind",void 0),r([v(cc.Sprite)],t.prototype,"table_wind_light",void 0),r([v(cc.Node)],t.prototype,"warm_blink",void 0),r([v(cc.Node)],t.prototype,"btn_start",void 0),r([v(cc.Node)],t.prototype,"start_tips",void 0),r([v(cc.Label)],t.prototype,"label_tips",void 0),r([v(cc.Sprite)],t.prototype,"spr_arrow",void 0),t=r([m],t)}(cc.Component);n.default=J,cc._RF.pop()},{"../../../common/log/LogWrap":void 0,"../../../common/utils/Utils":void 0,"../../../manager/AudioManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/ResManager":void 0,"../../../manager/UIManager":void 0,"./ERMJTool":"ERMJTool"}],ERMJTingTipsView:[function(e,t,n){"use strict";cc._RF.push(t,"ba28b5xiUlAcooQUl/AcYJ1","ERMJTingTipsView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(r,a){function i(e){try{s(o.next(e))}catch(e){a(e)}}function c(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(i,c)}s((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,o,r,a,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,o&&(r=2&a[0]?o.return:a[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,a[1])).done)return r;switch(o=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,o=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(r=(r=i.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){i.label=a[1];break}if(6===a[0]&&i.label<r[1]){i.label=r[1],r=a;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(a);break}r[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],o=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("../../mahjong/MJCardBase"),s=cc._decorator,u=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sprDi=null,t.cardList=null,t.item_card=null,t}return o(t,e),t.prototype.showTingTipsView=function(e){return a(this,void 0,void 0,function(){var t,n,o;return i(this,function(r){switch(r.label){case 0:this.cardList.removeAllChildren(),t=0,r.label=1;case 1:return t<e.length?(n=e[t].ting_card,(o=cc.instantiate(this.item_card)).active=!0,[4,o.getChildByName("MJCard").getComponent(c.default).setSpirteValue(n)]):[3,4];case 2:r.sent(),o.getChildByName("label_fan").getComponent(cc.Label).string=e[t].fan_Nums+"\u756a",o.getChildByName("label_count").getComponent(cc.Label).string=e[t].left_nums+"\u5f20",this.cardList.addChild(o),r.label=3;case 3:return t++,[3,1];case 4:return this.sprDi.active=!0,[2]}})})},t.prototype.hideTingTipsView=function(){this.sprDi.active=!1},r([l(cc.Node)],t.prototype,"sprDi",void 0),r([l(cc.Node)],t.prototype,"cardList",void 0),r([l(cc.Node)],t.prototype,"item_card",void 0),t=r([u],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../mahjong/MJCardBase":void 0}],ERMJTool:[function(e,t,n){"use strict";cc._RF.push(t,"4ef1b67WZFIqK4b3bb5tG2z","ERMJTool"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../ERMJDefine"),r=e("../../../manager/NetManager"),a=function(){function e(){}return e.prototype.getLocalIndex=function(e){var t=r.NetManager.getGameProtocol().MY_SEAT,n=e,a=o.ERMJDefine.GAME_PLAYER;return(n-t+a)%a},e.prototype.getUserSexByID=function(e){for(var t=0;t<r.NetManager.getGameProtocol().PLAYER_DATAS.length;t++){var n=r.NetManager.getGameProtocol().PLAYER_DATAS[t];if(n.seat_id==e)return n.sex}},e.prototype.getFilteredExcept=function(e,t){return e.filter(function(e){return-1==t.indexOf(e)})},e.prototype.sortCardList=function(e){var t=e.length;if(0==t)return e;for(var n=0;n<t;n++)for(var o=n+1;o<t;o++)if(e[n]>e[o]){var r=e[n];e[n]=e[o],e[o]=r}else e[n],e[o]},e.prototype.sliceArray=function(e,t){var n=e.slice(t),o=e.slice(0,t);return n.concat(o)},e.instance=new e,e}();n.default=a.instance,cc._RF.pop()},{"../../../manager/NetManager":void 0,"../ERMJDefine":"ERMJDefine"}],ERMJTop:[function(e,t,n){"use strict";cc._RF.push(t,"b26e9Xhd65HoIzM1buqsI5z","ERMJTop");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),r=this&&this.__decorate||function(e,t,n,o){var r,a=arguments.length,i=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,o);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(i=(a<3?r(i):a>3?r(t,n,i):r(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,i=a.ccclass,c=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.remain_di=null,t.label_count=null,t.bet_di=null,t.label_num=null,t}return o(t,e),t.prototype.resetView=function(){this.remain_di.active=!1,this.bet_di.active=!1},t.prototype.setLimitNum=function(e){this.label_num.string="\u5e95\u6ce8: "+e,this.bet_di.active=!0},t.prototype.setRemainCardNum=function(e){this.label_count.string="\u4f59\u724c"+e,this.remain_di.active=!0},r([c(cc.Node)],t.prototype,"remain_di",void 0),r([c(cc.Label)],t.prototype,"label_count",void 0),r([c(cc.Node)],t.prototype,"bet_di",void 0),r([c(cc.Label)],t.prototype,"label_num",void 0),t=r([i],t)}(cc.Component);n.default=s,cc._RF.pop()},{}],ProtocolERMJ:[function(e,t,n){"use strict";cc._RF.push(t,"703aefPxfJAt6F9VvG1jwcr","ProtocolERMJ");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=e("../../../net/ProtocolBase"),a=e("../../../manager/NetManager"),i=e("../../../manager/UIManager"),c=e("../../../Define"),s=e("./ERMJCmd"),u=function(e){function t(){var t=e.call(this,"game/ermj/pb")||this;return t.cmd=s.ERMJCmd,t.type=c.SocketType.Game,t.pbName="ERMJ",t.PLAYER_DATAS=[],t.MY_DATA=[],t.MY_SEAT=0,t.BANKER_POS=-1,t.ResetData=function(){t.PLAYER_DATAS=[],t.MY_DATA=[],t.MY_SEAT=0},t}return o(t,e),t.prototype.sendOperReq=function(e,t,n){var o={seat_id:e,oper_type:t,oper_cards:n};this.send(o,"oper_req")},t.prototype.dealError=function(e){i.UIManager.showTipsPopup(e.err_msg)},t}(r.default);n.default=u,a.NetManager.protocolCache.ProtocolERMJ=u,cc._RF.pop()},{"../../../Define":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"../../../net/ProtocolBase":void 0,"./ERMJCmd":"ERMJCmd"}]},{},["ERMJDefine","ERMJCmd","ProtocolERMJ","ERMJCPCard","ERMJCpgArea","ERMJGameScene","ERMJGameView","ERMJHandArea","ERMJHandCard","ERMJOper","ERMJOutArea","ERMJPlayer","ERMJResultDetail","ERMJRoomView","ERMJShowArea","ERMJTable","ERMJTingTipsView","ERMJTool","ERMJTop"]);