window.__require=function t(e,o,n){function i(a,s){if(!o[a]){if(!e[a]){var l=a.split("/");if(l=l[l.length-1],!e[l]){var c="function"==typeof __require&&__require;if(!s&&c)return c(l,!0);if(r)return r(l,!0);throw new Error("Cannot find module '"+a+"'")}a=l}var u=o[a]={exports:{}};e[a][0].call(u.exports,function(t){return i(e[a][1][t]||t)},u,u.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({CMD_DZPK:[function(t,e,o){"use strict";cc._RF.push(e,"c5784G+dBpAG4EWM78AxlTB","CMD_DZPK"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.zeroMemory=function(t){for(var e=[],o=0;o<t;o++)e[o]=0;return e},t.clone=function(t){return JSON.parse(JSON.stringify(t))},t.USER_CARD_POS=[cc.v2(0,0),cc.v2(40,0)],t.PUB_CARD_POSY=[cc.v2(-180,0),cc.v2(-90,0),cc.v2(0,0),cc.v2(90,0),cc.v2(180,0)],t.FLutter_POS=cc.v2(0,95),t.MASK_COLOR=240,t.MASK_VALUE=15,t.INVALE_CHAIR=255,t.GAME_PLAYER=7,t.FAILED=-1,t.LIMIT_FRIEND=-3,t.ROOM_CLOSE=-4,t.EMPTY_DATA=-5,t.MY_SEAT=-1,t.MY_ID=-1,t.PLAYER_DATAS=[],t.MY_DATA=null,t}();o.default=n,cc._RF.pop()},{}],CardListAll:[function(t,e,o){"use strict";cc._RF.push(e,"ec3996Ir/hN7KTmCswCJUJA","CardListAll");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./DZPKPokerPanel"),a=t("../model/CMD_DZPK"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.userCards=[],e.publicCard=null,e.bigCardArr=[],e}return n(e,t),e.prototype.initView=function(){this.bigCardArr=[],this.publicCard.clearCard();for(var t=0;t<this.userCards.length;t++)this.clearUserCard(t)},e.prototype.clearUserCard=function(t){this.userCards[t].clearCard()},e.prototype.initUserCard=function(t){this.userCards[t].initCard(2,a.default.USER_CARD_POS)},e.prototype.initPublicCard=function(){this.publicCard.initCard(5,a.default.PUB_CARD_POSY)},e.prototype.addUserCard=function(t,e,o,n){var i=this;void 0===n&&(n=0),this.userCards[t].node.childrenCount||this.initUserCard(t),this.userCards[t].showPoker(e,n,o,function(){i.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){i.updateBigCards(t)})))})},e.prototype.addPublicCard=function(t,e){var o=this;void 0===e&&(e=0),this.publicCard.node.childrenCount||this.initPublicCard(),this.publicCard.showPoker(t,e,!0,function(){o.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){o.updateBigCards()})))})},e.prototype.getPublicPokers=function(){for(var t=[],e=0;e<this.publicCard.node.childrenCount;e++){var o=this.publicCard.node.children[e].getComponent("DZPKPokerItem");o.pokerCom.getCardValue()&&t.push(o)}return t},e.prototype.getUserPokers=function(t){for(var e=[],o=0;o<this.userCards[t].node.childrenCount;o++){var n=this.userCards[t].node.children[o].getComponent("DZPKPokerItem");n.pokerCom.getCardValue()&&e.push(n)}return e},e.prototype.setBigCards=function(t){console.log(t),this.bigCardArr=t},e.prototype.updateBigCards=function(t){void 0===t&&(t=0);var e=this.getPublicPokers(),o=this.getUserPokers(t);if(e.length+o.length<5){for(var n=0;n<e.length;n++)e[n].selectPoker();for(n=0;n<o.length;n++)o[n].selectPoker()}else{for(n=0;n<e.length;n++){var i=e[n].pokerCom.getCardValue();this.bigCardArr.indexOf(i)>=0?e[n].selectPoker():e[n].unSelectPoker()}for(n=0;n<o.length;n++){i=o[n].pokerCom.getCardValue();this.bigCardArr.indexOf(i)>=0?o[n].selectPoker():o[n].unSelectPoker()}}},i([c(r.default)],e.prototype,"userCards",void 0),i([c(r.default)],e.prototype,"publicCard",void 0),e=i([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../model/CMD_DZPK":"CMD_DZPK","./DZPKPokerPanel":"DZPKPokerPanel"}],ChipItem:[function(t,e,o){"use strict";cc._RF.push(e,"9ac61e407JBkbOgHBD/MBXb","ChipItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/utils/Utils"),a=cc._decorator,s=a.ccclass,l=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.chipIcon=null,e.numBgIconNode=null,e.label0=null,e.label1=null,e.chipIconList=[],e.poolType=0,e}return n(e,t),e.prototype.initView=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),0==t?(this.label0.fontSize=24,this.numBgIconNode.scale=1):this.numBgIconNode.scale=.8,this.node.width=this.numBgIconNode.width*this.numBgIconNode.scale,this.chipIcon.node.x=0==e?-this.node.width/2:this.node.width/2,this.poolType=t,2==t?(this.label0.node.active=!1,this.label1.node.active=!0,this.chipIcon.spriteFrame=this.chipIconList[1]):(this.label0.node.active=!0,this.label1.node.active=!1,this.chipIcon.spriteFrame=this.chipIconList[0],1==t&&(this.chipIcon.node.scale=44/48)),this.setLabel()},e.prototype.setLabel=function(t){void 0===t&&(t=""),t=r.default.getFormatGold(t),2==this.poolType?this.label1.string=t:this.label0.string=t,parseFloat(t)?this.node.active=!0:this.node.active=!1},i([l(cc.Sprite)],e.prototype,"chipIcon",void 0),i([l(cc.Node)],e.prototype,"numBgIconNode",void 0),i([l(cc.Label)],e.prototype,"label0",void 0),i([l(cc.Label)],e.prototype,"label1",void 0),i([l(cc.SpriteFrame)],e.prototype,"chipIconList",void 0),e=i([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{"../../../common/utils/Utils":void 0}],ChipPool:[function(t,e,o){"use strict";cc._RF.push(e,"50529HPWp9K+LEBFRK881Ve","ChipPool");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.mainPool=null,e.subPool=null,e.userPool=null,e.chipItem=null,e.userPoolPos=[[140,-140],[455,-140],[375,-40],[170,140],[-170,140],[-375,-40],[-175,-140]],e}return n(e,t),e.prototype.initView=function(){this.clearMainPool(),this.clearSubPool(),this.clearUserPool()},e.prototype.clearMainPool=function(){this.mainPool.destroyAllChildren()},e.prototype.clearSubPool=function(){this.subPool.destroyAllChildren()},e.prototype.clearUserPool=function(){this.userPool.destroyAllChildren()},e.prototype.setUserPool=function(t,e){if(void 0===e&&(e=""),this.userPool.children[t])(i=(n=this.userPool.children[t]).getComponent("ChipItem")).setLabel(e+"");else for(var o=0;o<this.userPoolPos.length;o++){var n;(n=this.userPool.children[o]||cc.instantiate(this.chipItem)).position=new cc.Vec2(this.userPoolPos[o][0],this.userPoolPos[o][1]);var i=n.getComponent("ChipItem"),r=0;2!=o&&3!=o||(r=1),i.initView(2,r),o==t&&i.setLabel(e+""),this.userPool.children[o]||this.userPool.addChild(n)}},e.prototype.setMainPool=function(t){void 0===t&&(t="");var e=this.mainPool.children[0]||cc.instantiate(this.chipItem),o=e.getComponent("ChipItem");o.initView(),o.setLabel(t),this.mainPool.children[0]||this.mainPool.addChild(e)},e.prototype.setSubPool=function(t){void 0===t&&(t=[]),t.length==this.subPool.childrenCount||this.subPool.destroyAllChildren();for(var e=0;e<t.length;e++){var o=this.subPool.children[e]||cc.instantiate(this.chipItem),n=o.getComponent("ChipItem");n.initView(1),n.setLabel(t[e]),this.subPool.children[e]||this.subPool.addChild(o)}},i([s(cc.Node)],e.prototype,"mainPool",void 0),i([s(cc.Node)],e.prototype,"subPool",void 0),i([s(cc.Node)],e.prototype,"userPool",void 0),i([s(cc.Prefab)],e.prototype,"chipItem",void 0),e=i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],DZPKAvatarPanel:[function(t,e,o){"use strict";cc._RF.push(e,"6348c+/p9tI+7DFkefN4Oo2","DZPKAvatarPanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../public/BorderTime"),a=t("../../../common/utils/Utils"),s=t("../../../manager/NetManager"),l=t("../../../common/UIHelper"),c=cc._decorator,u=c.ccclass,d=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.head=null,e.user_name=null,e.money=null,e.yellow_bmfont=null,e.grey_bmfont=null,e.blue_bmfont=null,e.flutter=null,e.card_type=null,e.card_value=null,e.status=null,e.border_time=null,e.bank_icon=null,e.flutter_origin_pos=cc.v2(0,0),e.ready=null,e.offline=null,e.room_owner=null,e.isQipai=!1,e.isALLIN=!1,e.GameView=null,e.playerID=null,e}return n(e,t),e.prototype.onLoad=function(){this.ready.active=!1,this.offline.active=!1,this.room_owner.active=!1},e.prototype.initzation=function(){},e.prototype.initView=function(t){this.GameView=t,this.user_name.string="",this.money.string="",this.card_type.active=!1,this.card_value.spriteFrame=null,this.flutter.string="",this.status.node.active=!1,this.bank_icon.active=!1,this.isQipai=!1,this.isALLIN=!1,this.border_time.onKillTimer(),this.node.active=!1,this.unscheduleAllCallbacks()},e.prototype.resetMyView=function(t){this.GameView=t,this.card_type.active=!1,this.card_value.spriteFrame=null,this.flutter.string="",this.status.node.active=!1,this.bank_icon.active=!1,this.isQipai=!1,this.isALLIN=!1,this.border_time.onKillTimer(),this.unscheduleAllCallbacks()},e.prototype.resetQipai=function(){this.card_type.active=!1,this.card_value.spriteFrame=null,this.flutter.string="",this.status.node.active=!1,this.isQipai=!1,this.isALLIN=!1,this.border_time.onKillTimer()},e.prototype.setBankIcon=function(t){void 0===t&&(t=!0),this.bank_icon.active=t},e.prototype.setUserInfo=function(t,e){var o=t,n=a.default.getSubStringLengTxt(t.username)||a.default.getReplaceStrToStar(t.player_id);this.user_name.string=n,this.setHeadIcon(t.headimg_id),this.setUserScore(o.gold),this.node.active=!0,1==this.GameView.gameType&&(1==t.state?(this.setReadyIcon(!0),this.setOfflineIcon(!1)):2==t.state?(this.setOfflineIcon(!0),this.setReadyIcon(!1)):3!=t.state&&6!=t.state||(this.setReadyIcon(!1),this.setOfflineIcon(!1)))},e.prototype.setReadyIcon=function(t){this.ready.active=t},e.prototype.setOfflineIcon=function(t){this.offline.active=t},e.prototype.setRoomOwner=function(t){this.room_owner.active=t},e.prototype.setUserEvent=function(t){var e=this;this.playerID=t,this.node.off(cc.Node.EventType.TOUCH_END),this.node.on(cc.Node.EventType.TOUCH_END,function(){s.NetManager.protocolGameCommon.sendLookPlayerInfoReq(e.playerID)})},e.prototype.setHeadIcon=function(t){l.default.setHeadIcon(t,this.head.node)},e.prototype.clearTimeOut=function(){this.border_time.onKillTimer()},e.prototype.setUserTimeOut=function(t,e,o){this.border_time.setGameTimer({limit_time:t,all_limit_time:e,playAudio:0==o,vibrate:0==o})},e.prototype.setViewPlayerStatus=function(t){void 0===t&&(t=null),this.status.node.active=!!t,this.status.spriteFrame=t},e.prototype.getNodePosition=function(){return this.node.getPosition()},e.prototype.setUserScore=function(t){this.money.string=a.default.getFormatGold(t)},e.prototype.setTypeSprite=function(t){this.card_type.active=!0,this.card_value.spriteFrame=t},e.prototype.flutterScore=function(t,e,o){var n=this;this.flutter.node.position=this.flutter_origin_pos;var i="";t>0?(this.flutter.font=this.yellow_bmfont,i="+"):(this.flutter.font=this.grey_bmfont,i="-");var r=Math.abs(t),a=r/parseFloat(50..toFixed(2)),s=0,l="",c=function(){l=(s+=a).toFixed(2),n.flutter.string=i+l,s>=r&&(l=r.toString(),n.flutter.string=i+parseFloat(l).toFixed(2),n.unschedule(c))};this.schedule(c,.01,cc.macro.REPEAT_FOREVER);var u=cc.moveBy(.5,e),d=cc.sequence(u,cc.delayTime(.5),cc.callFunc(function(){o&&o()}));this.flutter.node.runAction(d)},e.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},i([d(cc.Sprite)],e.prototype,"head",void 0),i([d(cc.Label)],e.prototype,"user_name",void 0),i([d(cc.Label)],e.prototype,"money",void 0),i([d(cc.Font)],e.prototype,"yellow_bmfont",void 0),i([d(cc.Font)],e.prototype,"grey_bmfont",void 0),i([d(cc.Font)],e.prototype,"blue_bmfont",void 0),i([d(cc.Label)],e.prototype,"flutter",void 0),i([d(cc.Node)],e.prototype,"card_type",void 0),i([d(cc.Sprite)],e.prototype,"card_value",void 0),i([d(cc.Sprite)],e.prototype,"status",void 0),i([d(r.default)],e.prototype,"border_time",void 0),i([d(cc.Node)],e.prototype,"bank_icon",void 0),i([d()],e.prototype,"flutter_origin_pos",void 0),i([d(cc.Node)],e.prototype,"ready",void 0),i([d(cc.Node)],e.prototype,"offline",void 0),i([d(cc.Node)],e.prototype,"room_owner",void 0),e=i([u],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../common/UIHelper":void 0,"../../../common/utils/Utils":void 0,"../../../manager/NetManager":void 0,"../../public/BorderTime":void 0}],DZPKCenterPanel:[function(t,e,o){"use strict";cc._RF.push(e,"5eeb0fZjzNL56UP8RPJjZQb","DZPKCenterPanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?i(t.value):new o(function(e){e(t.value)}).then(a,s)}l((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return l([t,e])}}function l(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./OperateBtnsPanel"),l=t("../../../common/utils/Utils"),c=t("../../../manager/UIManager"),u=t("../../../manager/NetManager"),d=t("../model/CMD_DZPK"),p=t("../../../manager/DataManager"),h=t("../../../common/log/LogWrap"),f=t("../../../Define"),_=cc._decorator,m=_.ccclass,y=_.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_start=null,e.btn_dissolution=null,e.btn_frined_start=null,e.toggle_ready=null,e.btn_club_invite=null,e.btn_ready=null,e.btn_cancel_ready=null,e.label_startTime=null,e.node_gold=null,e.drje_node=null,e.operateBtnsPanel=null,e.winSp=null,e.failSp=null,e.controller=null,e.isOpening=!1,e.onStartSchedule=null,e.IsCheck=!1,e}return n(e,t),e.prototype.initzation=function(t){this.controller=t,this.initView()},e.prototype.initNode=function(){l.default.removeClickEvent(this.btn_start),l.default.addClickEventEND(this.btn_start,this.sendMatchReq.bind(this)),l.default.removeClickEvent(this.btn_dissolution),l.default.addClickEventEND(this.btn_dissolution,this.clickDiss.bind(this)),l.default.removeClickEvent(this.btn_frined_start),l.default.addClickEventEND(this.btn_frined_start,this.clickFriend.bind(this)),l.default.removeClickEvent(this.drje_node),l.default.addClickEventEND(this.drje_node,this.openDrje.bind(this)),this.toggle_ready.off("toggle"),this.toggle_ready.on("toggle",this.onClickToggle.bind(this)),l.default.removeClickEvent(this.btn_ready),l.default.addClickEventEND(this.btn_ready,this.onClickReadyEvent.bind(this)),l.default.removeClickEvent(this.btn_cancel_ready),l.default.addClickEventEND(this.btn_cancel_ready,this.onClickReadyEvent.bind(this)),l.default.removeClickEvent(this.btn_club_invite),l.default.addClickEventEND(this.btn_club_invite,this.onClubInviteEvent.bind(this))},e.prototype.initView=function(){this.showReadyBtn(),this.operateBtnsPanel.initView(),this.initNode()},e.prototype.clickDiss=function(){var t=this.controller.topPanel.room_id.string;u.NetManager.protocolGameCommon.sendDismissFriendInquiry(parseFloat(t)||null)},e.prototype.clickFriend=function(){this.onSetStartCountDown(!1);var t=this.controller.topPanel.room_id.string;u.NetManager.protocolGameCommon.sendStartFriendGame(parseFloat(t)||null)},e.prototype.openDrje=function(){this.isOpening||(this.isOpening=!0,u.NetManager.protocolGameCommon.sendQueryTakeIn())},e.prototype.openDrjePop=function(t){return r(this,void 0,void 0,function(){var e;return a(this,function(o){return this.isOpening=!1,e=function(t,e){void 0===t&&(t=""),void 0===e&&(e=!1),u.NetManager.protocolGameCommon.sendTakeGameGold(t,e)},c.UIManager.popup("prefabs/game/set_bring_gold",{minBring:this.controller.room_min_entrance,initNum:t.carryGold,initAuto:t.autoAddCarry,callback:e}),[2]})})},e.prototype.showResultSpine=function(t){void 0===t&&(t=0),this.winSp.node.active=!t,this.failSp.node.active=!!t;var e=0==t?this.winSp:this.failSp,o=e.animation;e.setAnimation(0,o,!1)&&e.setCompleteListener(function(t,e){t.animation&&t.animation.name})},e.prototype.sendMatchReq=function(){c.UIManager.showLoading("\u6b63\u5728\u5feb\u901f\u5339\u914d\u4e2d...",!0,function(){u.NetManager.protocolGameCommon.sendCancelMatch()}),this.controller.initView(),u.NetManager.protocolGameCommon.sendMatchReq(),this.hideReadyBtn()},e.prototype.showOperaterBtn=function(t){this.operateBtnsPanel.setTurnMeBtns(t)},e.prototype.showOperaterBtnNot=function(t){this.operateBtnsPanel.setNotTurnMeBtns(t)},e.prototype.onClickToggle=function(){h.LogWrap.log("\u70b9\u51fb\u4e86\u51e0\u6b21");var t=this.toggle_ready.getComponent(cc.Toggle).isChecked;this.IsCheck=t,1==this.controller.gameType&&p.DataManager.isCreaterUser&&this.onSetStartCountDown(t)},e.prototype.setChecked=function(t){this.toggle_ready.getComponent(cc.Toggle).isChecked=t,this.IsCheck=t},e.prototype.onClubInviteEvent=function(){u.NetManager.protocolChat.sendClubRoomReq()},e.prototype.onClickReadyEvent=function(t){var e=t.name,o=null;"btn_ready"==e?o=0:"btn_cancel_ready"==e&&(o=1),u.NetManager.protocolGameCommon.sendFriendReadyReq(o)},e.prototype.showReadyBtn=function(){this.hideReadyBtn(),0==this.controller.gameType?this.btn_start.active=!0:1==this.controller.gameType&&this.showFriendBtn()},e.prototype.hideReadyBtn=function(){this.btn_start.active=!1},e.prototype.showFriendBtn=function(){this.hideFriendBtn(),this.toggle_ready.active=!0,p.DataManager.isCreaterUser?(this.btn_dissolution.active=!0,this.btn_frined_start.active=!0,this.toggle_ready.getChildByName("label").getComponent(cc.Label).string="\u6240\u6709\u73a9\u5bb6\u51c6\u5907\u5b8c\u6210\u540e\u81ea\u52a8\u5f00\u59cb",p.DataManager.roomType==f.RoomType.Club&&(this.btn_dissolution.active=!1,this.btn_club_invite.active=!0)):(this.btn_ready.active=6==d.default.MY_DATA.state,this.btn_cancel_ready.active=1==d.default.MY_DATA.state,this.toggle_ready.getChildByName("label").getComponent(cc.Label).string="\u6e38\u620f\u7ed3\u675f\u540e\u81ea\u52a8\u51c6\u5907",p.DataManager.roomType==f.RoomType.Club&&(this.btn_club_invite.active=!0))},e.prototype.showFriendReadyBtn=function(){this.btn_ready.active=!0,this.toggle_ready.active=!0,p.DataManager.roomType==f.RoomType.Club&&(this.btn_club_invite.active=!0)},e.prototype.hideFriendBtn=function(){this.btn_dissolution.active=!1,this.btn_frined_start.active=!1,this.btn_ready.active=!1,this.btn_cancel_ready.active=!1,this.toggle_ready.active=!1,this.btn_club_invite.active=!1},e.prototype.onSetStartCountDown=function(t){var e=this;if(void 0===t&&(t=!0),t){var o=5;this.label_startTime.node.active=!0,this.label_startTime.string=o+"",null!=this.onStartSchedule&&this.unschedule(this.onStartSchedule),this.onStartSchedule=function(){if(o--,h.LogWrap.log("\u5012\u8ba1\u65f6\u65f6\u95f4",o),e.label_startTime.string=o+"",o<=0){h.LogWrap.log("\u5012\u8ba1\u65f6\u7ed3\u675f, \u53d1\u9001\u597d\u53cb\u623f\u5f00\u59cb\u6e38\u620f\u6307\u4ee4");var t=p.DataManager.friendRoomId;return u.NetManager.protocolGameCommon.sendStartFriendGame(parseFloat(t)||null),e.label_startTime.node.active=!1,void e.unschedule(e.onStartSchedule)}},this.schedule(this.onStartSchedule,1,cc.macro.REPEAT_FOREVER)}else this.onStartSchedule&&(this.label_startTime.node.active=!1,this.unschedule(this.onStartSchedule))},i([y(cc.Node)],e.prototype,"btn_start",void 0),i([y(cc.Node)],e.prototype,"btn_dissolution",void 0),i([y(cc.Node)],e.prototype,"btn_frined_start",void 0),i([y(cc.Node)],e.prototype,"toggle_ready",void 0),i([y(cc.Node)],e.prototype,"btn_club_invite",void 0),i([y(cc.Node)],e.prototype,"btn_ready",void 0),i([y(cc.Node)],e.prototype,"btn_cancel_ready",void 0),i([y(cc.Label)],e.prototype,"label_startTime",void 0),i([y(cc.Node)],e.prototype,"node_gold",void 0),i([y(cc.Node)],e.prototype,"drje_node",void 0),i([y(s.default)],e.prototype,"operateBtnsPanel",void 0),i([y(sp.Skeleton)],e.prototype,"winSp",void 0),i([y(sp.Skeleton)],e.prototype,"failSp",void 0),e=i([m],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../../../Define":void 0,"../../../common/log/LogWrap":void 0,"../../../common/utils/Utils":void 0,"../../../manager/DataManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"../model/CMD_DZPK":"CMD_DZPK","./OperateBtnsPanel":"OperateBtnsPanel"}],DZPKCmd:[function(t,e,o){"use strict";cc._RF.push(e,"3faabNZpOlFIqS1vuzLFI5Z","DZPKCmd"),Object.defineProperty(o,"__esModule",{value:!0}),o.DZPKCmd="212_0",o.ProtocolDZPKCmd={ErrorResp:o.DZPKCmd+"_err_res",GameStartNotify:o.DZPKCmd+"_game_start_notify",SendCardNotify:o.DZPKCmd+"_send_card_notify",TurnWhoOperateNotify:o.DZPKCmd+"_turn_who_operate_notify",TurnWhoOperateRet:o.DZPKCmd+"_turn_who_operate_ret",SendPublicCardNotify:o.DZPKCmd+"_send_public_card_notify",GameConcludeNotify:o.DZPKCmd+"_game_conclude_notify",GameReconnectInfo:o.DZPKCmd+"_game_reconnect_info"},cc._RF.pop()},{}],DZPKGameScene:[function(t,e,o){"use strict";cc._RF.push(e,"5d3f8irgFRAoYmBx0gkZ9mr","DZPKGameScene");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./model/CMD_DZPK"),a=t("./DZPKTool"),s=t("../../manager/EventManager"),l=t("./DZPKGameView"),c=t("../../net/NetCmd"),u=t("../../manager/DataManager"),d=t("../../manager/NetManager"),p=t("../../manager/UIManager"),h=t("./net/DZPKCmd"),f=t("../../Define"),_=cc._decorator,m=_.ccclass,y=_.property,v=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dzpkGameView=null,e}return n(e,t),e.prototype.onLoad=function(){s.EventManager.on(this,c.ProtocolGameCmd.GameLoginResp,this.onGameLoginResp.bind(this)),s.EventManager.on(this,c.ProtocolGameCmd.LoginFriendRoomResp,this.onLoginFriendRoomResp.bind(this)),s.EventManager.on(this,c.ProtocolGameCmd.LoginFriendRoomNotify,this.onLoginFriendRoomNotify.bind(this)),s.EventManager.on(this,c.ProtocolGameCmd.DisconnectRoomNotify,this.onDisconnectRoomNotify.bind(this)),s.EventManager.on(this,c.ProtocolGameCmd.MatchResp,this.onMatchResp.bind(this)),s.EventManager.on(this,c.ProtocolGameCmd.CancelMatchResp,this.onCancelMatchResp.bind(this)),s.EventManager.on(this,c.ProtocolGameCmd.QueryTakeInResp,this.onQueryTakeInResp.bind(this)),s.EventManager.on(this,c.ProtocolGameCmd.AdJustReadyResp,this.onAdJustReadyResp.bind(this)),s.EventManager.on(this,c.ProtocolGameCmd.ChangeCreaterRes,this.onChangeCreaterRes.bind(this)),s.EventManager.on(this,h.ProtocolDZPKCmd.GameStartNotify,this.onGameStartNotify.bind(this)),s.EventManager.on(this,h.ProtocolDZPKCmd.SendCardNotify,this.onSendCardNotify.bind(this)),s.EventManager.on(this,h.ProtocolDZPKCmd.TurnWhoOperateNotify,this.onTurnWhoOperateNotify.bind(this)),s.EventManager.on(this,h.ProtocolDZPKCmd.TurnWhoOperateRet,this.onTurnWhoOperateRet.bind(this)),s.EventManager.on(this,h.ProtocolDZPKCmd.SendPublicCardNotify,this.onSendPublicCardNotify.bind(this)),s.EventManager.on(this,h.ProtocolDZPKCmd.GameConcludeNotify,this.onGameConcludeNotify.bind(this)),s.EventManager.on(this,h.ProtocolDZPKCmd.GameReconnectInfo,this.onGameReconnectInfo.bind(this)),s.EventManager.on(this,f.EventDef.UpdateUserGold,this.onUpdateUserScore.bind(this)),p.UIManager.hideMarquee()},e.prototype.onGameLoginResp=function(t){this.dzpkGameView.initViewOnce(t)},e.prototype.onLoginFriendRoomResp=function(t){var e=this;this.dzpkGameView.gameType=1,this.dzpkGameView.topPanel.setRoomId(t.room_id),r.default.PLAYER_DATAS=t.player_info,r.default.PLAYER_DATAS.forEach(function(t,e){t.player_id==u.DataManager.userInfo.userid&&(t.gold=parseFloat(t.gold),r.default.MY_DATA=t,r.default.MY_SEAT=t.seat_id,console.log("\u6211\u7684\u7528\u6237\u4fe1\u606f======>",t))}),this.dzpkGameView.initViewOnce(),this.dzpkGameView.room_min_entrance=t.room_info.room_min_entrance,r.default.PLAYER_DATAS.forEach(function(t,o){t.gold=parseFloat(t.gold);var n=a.default.getInstance().getLocalIndex(t.seat_id);e.dzpkGameView.userListAllCom.setUserInfo(n,t),e.dzpkGameView.userListAllCom.userListCom[n].setUserEvent(t.player_id)}),this.dzpkGameView.topPanel.setBasicPot(t.room_info.room_base_note),r.default.PLAYER_DATAS.forEach(function(t,o){var n=t.creater_state,i=a.default.getInstance().getLocalIndex(t.seat_id);e.dzpkGameView.userListAllCom.userListCom[i].setRoomOwner(1==n)})},e.prototype.onLoginFriendRoomNotify=function(t){var e=a.default.getInstance().getLocalIndex(t.player_info.seat_id),o=t.player_info;if(t.is_add)console.log("\u6709\u4eba\u52a0\u5165"),r.default.PLAYER_DATAS=r.default.PLAYER_DATAS.concat(o),this.dzpkGameView.userListAllCom.setUserInfo(e,o),this.dzpkGameView.userListAllCom.userListCom[e].setUserEvent(o.player_id),this.dzpkGameView.showFriendPlayerState(e,o.state);else if(t.is_offline){console.log("\u6709\u4eba\u6389\u7ebf\u56de\u6765");for(var n=0;n<r.default.PLAYER_DATAS.length;n++){if(r.default.PLAYER_DATAS[n].player_id==o.player_id){r.default.PLAYER_DATAS[n]=o;break}}this.dzpkGameView.userListAllCom.setUserInfo(e,o),this.dzpkGameView.showFriendPlayerState(e,o.state)}else if(t.is_leave){console.log("\u6709\u4eba\u79bb\u5f00\u6216\u8005\u88ab\u8e22");for(n=0;n<r.default.PLAYER_DATAS.length;n++){if(r.default.PLAYER_DATAS[n].player_id==o.player_id){r.default.PLAYER_DATAS.splice(n,1);break}}this.dzpkGameView.userListAllCom.userListCom[e].initView(this.dzpkGameView),this.dzpkGameView.cardListAllCom.clearUserCard(e)}},e.prototype.onDisconnectRoomNotify=function(t){if(r.default.PLAYER_DATAS)for(var e=0;e<r.default.PLAYER_DATAS.length;e++){var o=r.default.PLAYER_DATAS[e];if(o.player_id==t.userid){o.state=2;var n=a.default.getInstance().getLocalIndex(o.seat_id);this.dzpkGameView.showFriendPlayerState(n,o.state);break}}},e.prototype.onAdJustReadyResp=function(t){if(r.default.PLAYER_DATAS)for(var e=0;e<r.default.PLAYER_DATAS.length;e++){var o=r.default.PLAYER_DATAS[e];if(o.player_id==t.player_id){var n=a.default.getInstance().getLocalIndex(o.seat_id);o.state=t.ret,this.dzpkGameView.showFriendPlayerState(n,o.state),0==n&&this.dzpkGameView.centerPanel.showFriendBtn();break}}},e.prototype.onChangeCreaterRes=function(t){if(0==t.ret){this.dzpkGameView.userListAllCom.userListCom.forEach(function(t){t.setRoomOwner(!1)});var e=a.default.getInstance().getLocalIndex(t.creater_seat_id);if(this.dzpkGameView.userListAllCom.userListCom[e].setRoomOwner(!0),this.dzpkGameView.userListAllCom.userListCom[e].setReadyIcon(!1),r.default.PLAYER_DATAS){for(var o=0;o<r.default.PLAYER_DATAS.length;o++){if((n=r.default.PLAYER_DATAS[o]).player_id==t.creater_id){n.state=6;break}}for(o=0;o<r.default.PLAYER_DATAS.length;o++){var n;if((n=r.default.PLAYER_DATAS[o]).player_id==t.old_creater_id){n.state=6;break}}u.DataManager.userInfo.userid!=t.old_creater_id&&u.DataManager.userInfo.userid!=t.creater_id||(this.dzpkGameView.centerPanel.setChecked(!1),this.dzpkGameView.centerPanel.onSetStartCountDown(!1))}this.dzpkGameView.centerPanel.showFriendBtn()}},e.prototype.onGameEndNotify=function(t){var e=t.room_id;d.NetManager.protocolGameCommon.sendQueryFriendRoom(e)},e.prototype.onMatchResp=function(t){1==t.status?(console.log("\u5339\u914d\u6210\u529f====>",t),p.UIManager.hideLoading()):2==t.status||4==t.status?(p.UIManager.showTips(2==t.status?"\u5339\u914d\u8d85\u65f6":"\u91d1\u5e01\u4e0d\u8db3"),this.dzpkGameView.centerPanel.showReadyBtn(),p.UIManager.hideLoading()):3==t.status?(console.log("\u5339\u914d\u88ab\u53d6\u6d88"),p.UIManager.hideLoading()):100==t.status&&(p.UIManager.showTips("\u5339\u914d\u5931\u8d25"),this.dzpkGameView.centerPanel.showReadyBtn(),p.UIManager.hideLoading())},e.prototype.onCancelMatchResp=function(t){p.UIManager.showTips(t.ok?"\u53d6\u6d88\u5339\u914d\u6210\u529f":"\u53d6\u6d88\u5339\u914d\u5931\u8d25"),t.ok&&this.dzpkGameView.centerPanel.showReadyBtn()},e.prototype.onQueryTakeInResp=function(t){this.dzpkGameView.centerPanel.openDrjePop(t)},e.prototype.onGameStartNotify=function(t){this.dzpkGameView.gameStart(t)},e.prototype.onSendCardNotify=function(t){this.dzpkGameView.sendCard(t)},e.prototype.onTurnWhoOperateNotify=function(t){this.dzpkGameView.waitOperate(t)},e.prototype.onTurnWhoOperateRet=function(t){this.dzpkGameView.turnWhoOperate(t)},e.prototype.onSendPublicCardNotify=function(t){this.dzpkGameView.dealPublicCard(t)},e.prototype.onGameConcludeNotify=function(t){this.dzpkGameView.dealResult(t)},e.prototype.onGameReconnectInfo=function(t){this.dzpkGameView.gameReconnect(t)},e.prototype.onUpdateUserScore=function(){this.dzpkGameView.onUpdateUserScore()},e.prototype.onDestroy=function(){s.EventManager.off(this)},i([y(l.default)],e.prototype,"dzpkGameView",void 0),e=i([m],e)}(cc.Component);o.default=v,cc._RF.pop()},{"../../Define":void 0,"../../manager/DataManager":void 0,"../../manager/EventManager":void 0,"../../manager/NetManager":void 0,"../../manager/UIManager":void 0,"../../net/NetCmd":void 0,"./DZPKGameView":"DZPKGameView","./DZPKTool":"DZPKTool","./model/CMD_DZPK":"CMD_DZPK","./net/DZPKCmd":"DZPKCmd"}],DZPKGameView:[function(t,e,o){"use strict";cc._RF.push(e,"5ad08PW2zVCN5/VY0+6Pv+i","DZPKGameView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{l(n.next(t))}catch(t){r(t)}}function s(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?i(t.value):new o(function(e){e(t.value)}).then(a,s)}l((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(t){return function(e){return l([t,e])}}function l(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=t("./ui/DZPKTopPanel"),l=t("./model/CMD_DZPK"),c=t("./DZPKTool"),u=t("./ui/DZPKCenterPanel"),d=t("../../manager/AudioManager"),p=t("../../common/utils/Utils"),h=t("../../manager/DataManager"),f=t("../../manager/UIManager"),_=t("../../common/log/LogWrap"),m=t("../../manager/ResManager"),y=t("../../view/common/GameChat"),v=t("../../manager/NetManager"),g=cc._decorator,C=g.ccclass,P=g.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.topPanel=null,e.centerPanel=null,e.chipPoolContent=null,e.chipPool=null,e.chipPoolCom=null,e.cardListAllContent=null,e.cardListAll=null,e.cardListAllCom=null,e.userListAllContent=null,e.userListAll=null,e.userListAllCom=null,e.gold_frame=null,e.mySeadId=null,e.playListData=null,e.room_min_entrance=null,e.gameType=0,e.isStartGame=!1,e.canDealResult=!1,e}return n(e,t),e.prototype.initViewOnce=function(t){this.unscheduleAllCallbacks(),this.node.stopAllActions(),this.chipPoolContent.destroyAllChildren();var e=cc.instantiate(this.chipPool);this.chipPoolCom=e.getComponent("ChipPool"),this.chipPoolContent.addChild(e),this.cardListAllContent.destroyAllChildren();var o=cc.instantiate(this.cardListAll);this.cardListAllCom=o.getComponent("CardListAll"),this.cardListAllContent.addChild(o),this.userListAllContent.destroyAllChildren();var n=cc.instantiate(this.userListAll);this.userListAllCom=n.getComponent("UserListAll"),this.userListAllContent.addChild(n),1==this.gameType&&(this.userListAllCom.isFriend=!0),this.topPanel.initzation(this),this.centerPanel.initzation(this),this.initView(t),d.AudioManager.playGameBGM("dzpk_bgm.mp3"),this.initChat()},e.prototype.initChat=function(){return r(this,void 0,void 0,function(){var t,e;return a(this,function(o){switch(o.label){case 0:return[4,m.ResManager.loadResAsync("prefabs/common/GameChat",cc.Prefab,!1)];case 1:return(t=o.sent())&&cc.isValid(this.node)&&!this.node.getChildByName("GameChat")&&(e=cc.instantiate(t),this.node.addChild(e),e.getComponent(y.default).setTalkPositionY()),[2]}})})},e.prototype.initView=function(t){if(this.canDealResult=!1,this.chipPoolCom.initView(),this.cardListAllCom.initView(),this.userListAllCom.initView(this),this.centerPanel.onSetStartCountDown(!1),t){var e=t.player_info,o={username:p.default.getSubStringLengTxt(e.username)||p.default.getReplaceStrToStar(e.player_id),gold:e.gold,headimg_id:e.headimg_id},n=t.room_info.room_base_note;this.room_min_entrance=t.room_info.room_min_entrance,this.topPanel.setBasicPot(n),this.userListAllCom.setUserInfo(0,o)}},e.prototype.initData=function(){l.default.PLAYER_DATAS=[]},e.prototype.initUserInfo=function(t){var e=this;l.default.PLAYER_DATAS=t.player_list,this.userListAllCom.userListCom.forEach(function(t,o){0!=o?t.initView(e):t.resetMyView(e)}),console.log("%c\u6240\u6709\u7528\u6237\u4fe1\u606f======>","color:green",l.default.PLAYER_DATAS),l.default.PLAYER_DATAS.forEach(function(t,e){t.player_id==h.DataManager.userInfo.userid&&(t.gold=parseFloat(t.gold),l.default.MY_DATA=t,l.default.MY_SEAT=t.seat_id,console.log("\u6211\u7684\u7528\u6237\u4fe1\u606f======>",t))});var o=0;l.default.PLAYER_DATAS.forEach(function(n,i){n.gold=parseFloat(n.gold);var r=c.default.getInstance().getLocalIndex(n.seat_id);e.userListAllCom.setUserInfo(r,n);var a="";n.seat_id==t.big_blind.seat_id&&(a=t.big_blind.bet_num,o+=parseFloat(a),e.userListAllCom.setViewPlayerStatus(r,0)),n.seat_id==t.little_blind.seat_id&&(a=t.little_blind.bet_num,o+=parseFloat(a),e.userListAllCom.setViewPlayerStatus(r,1)),e.chipPoolCom.setUserPool(r,a)}),this.chipPoolCom.setMainPool(o+"")},e.prototype.initUserView=function(){var t=this;this.userListAllCom.userListCom.forEach(function(e,o){0!=o?e.initView(t):e.resetMyView(t)})},e.prototype.gameStart=function(t){f.UIManager.hideLoading(),0==this.gameType?this.centerPanel.hideReadyBtn():1==this.gameType&&this.centerPanel.hideFriendBtn(),v.NetManager.protocolGameCommon.needFlushGold=!1,this.isStartGame=!0,1==t.carryGoldType?f.UIManager.showTips("\u5df2\u4e3a\u60a8\u81ea\u52a8\u5e26\u5165\u8bbe\u7f6e\u91d1\u989d"):2==t.carryGoldType&&f.UIManager.showTips("\u5165\u573a\u91d1\u989d\u4f4e\u4e8e\u6700\u4f4e\u91d1\u989d\uff0c\u5df2\u4e3a\u60a8\u81ea\u52a8\u8865\u8db3"),this.initView(),this.centerPanel.hideReadyBtn(),this.initUserInfo(t),this.topPanel.setRoomInfo(t.room_info.room_code);var e=c.default.getInstance().getLocalIndex(t.bank_seat_id);this.userListAllCom.setBankIcon(e),1==this.gameType&&(this.centerPanel.hideFriendBtn(),this.userListAllCom.userListCom.forEach(function(t,e){t.setReadyIcon(!1)})),this.canDealResult=!0},e.prototype.sendCard=function(t,e){void 0===e&&(e=!0),this.cardListAllCom.addUserCard(0,t.card_arr,e),this.userListAllCom.setTypeSprite(0,t.card_type)},e.prototype.waitOperate=function(t){t.operater_seat_id==l.default.MY_SEAT&&this.centerPanel.showOperaterBtn(t.operate_type);var e=c.default.getInstance().getLocalIndex(t.operater_seat_id);this.userListAllCom.setUserTimeOut(e,t.time_out,t.total_time_out)},e.prototype.turnWhoOperate=function(t,e){var o=this;void 0===e&&(e=!0);var n=c.default.getInstance().getLocalIndex(t.seat_id);c.default.getInstance().getUserSexByID(t.seat_id);this.userListAllCom.clearUserTimeOut(n),e&&(this.chipPoolCom.setMainPool(t.main_bet_num),this.chipPoolCom.setSubPool(t.sub_bet_num)),this.chipPoolCom.setUserPool(n,t.user_bet_num),this.userListAllCom.setUserScore(n,t.user_gold),t.seat_id==l.default.MY_SEAT&&this.centerPanel.operateBtnsPanel.hideAll();2==t.operate_type.opr_type&&this.userListAllCom.setViewPlayerStatus(n,2),3==t.operate_type.opr_type?this.userListAllCom.setViewPlayerStatus(n,4):4==t.operate_type.opr_type?this.userListAllCom.setViewPlayerStatus(n,5):5==t.operate_type.opr_type?(0==n&&(this.userListAllCom.userListCom[n].isALLIN=!0),this.userListAllCom.setViewPlayerStatus(n,6)):1==t.operate_type.opr_type&&(this.cardListAllCom.clearUserCard(n),this.userListAllCom.userListCom[n].resetQipai(),this.userListAllCom.userListCom[n].isQipai=!0,this.chipPoolCom.setUserPool(n,""),this.userListAllCom.setViewPlayerStatus(n,3),t.seat_id==l.default.MY_SEAT&&(0==this.gameType&&(this.centerPanel.showReadyBtn(),this.isStartGame=!1),this.centerPanel.operateBtnsPanel.initView())),!this.userListAllCom.userListCom[0].isQipai&&!this.userListAllCom.userListCom[n].isALLIN&&e&&t.operate_type_check&&this.centerPanel.showOperaterBtnNot(t.operate_type_check),t.is_turn_end&&this.node.runAction(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){o.userListAllCom.userListCom.forEach(function(t,e){t.isQipai||t.isALLIN||t.setViewPlayerStatus(null)}),o.chipPoolCom.clearUserPool()})))},e.prototype.dealPublicCard=function(t){var e=0;2==t.cur_round?e=3:3==t.cur_round&&(e=4),this.cardListAllCom.setBigCards(t.car_arr),this.cardListAllCom.addPublicCard(t.public_card,e),this.userListAllCom.userListCom[0].isQipai||(this.userListAllCom.setTypeSprite(0,t.card_type),this.cardListAllCom.bigCardArr=t.car_arr)},e.prototype.dealResult=function(t){if(this.isStartGame=!1,this.canDealResult){console.log(t),this.chipPoolCom.clearUserPool(),this.centerPanel.operateBtnsPanel.initView(),this.cardListAllCom.bigCardArr=t.win_car_arr;for(var e=0;e<t.game_conclude.length;e++){var o=c.default.getInstance().getLocalIndex(t.game_conclude[e].seat_id);0==o||this.userListAllCom.userListCom[o].isQipai||(this.cardListAllCom.addUserCard(o,t.game_conclude[e].card_arr,!0),this.userListAllCom.setTypeSprite(o,t.game_conclude[e].card_type))}this.userListAllCom.userListCom.forEach(function(t,e){t.setViewPlayerStatus(null)}),this.onGameEndAni(t)}},e.prototype.onGameEndAni=function(t){var e=this;if(this.canDealResult){var o=0,n=[],i=null,r=t.game_conclude;this.cardListAllCom.updateBigCards();for(var a=0,s=0;s<r.length;s++){var u=c.default.getInstance().getLocalIndex(r[s].seat_id),p=r[s].score;0==u&&p<=0&&(a=1),p>0?n.push(this.userListAllCom.userListCom[u].getNodePosition()):i=this.chipPoolCom.mainPool.getPosition(),0==u&&(o=p)}if(0==a?d.AudioManager.playSFX("game_win"):d.AudioManager.playSFX("game_lose"),0==this.gameType)if(0==a){f.UIManager.popup("prefabs/game/ShareBalance",{btnCallback:function(){e.centerPanel.sendMatchReq()},winGold:o||0})}else this.centerPanel.showResultSpine(a);else this.centerPanel.showResultSpine(a);var m=!0;1!=this.userListAllCom.userListCom[0].isQipai&&0!=a||(m=!1),this.setGoldAnimation(i,n,!0,function(){if(e.canDealResult){var t=[];v.NetManager.protocolGameCommon.needFlushGold&&v.NetManager.protocolGameCommon.flushPlayerInfo.forEach(function(e){var o=c.default.getInstance().getLocalIndex(e.seat_id);t[o]=e.gold});for(var o=function(o){var n=c.default.getInstance().getLocalIndex(r[o].seat_id),i=t[n]?t[n]:r[o].gold,a=r[o].score,s=l.default.FLutter_POS;e.userListAllCom.userListCom[n].flutterScore(a,s,function(){if(e.canDealResult&&(e.userListAllCom.userListCom[n].setUserScore(parseFloat(i)),o==r.length-1&&(v.NetManager.protocolGameCommon.needFlushGold=!1,0==e.gameType&&(e.initData(),m&&(_.LogWrap.log("\u6ca1\u6709\u5f03\u724c, \u663e\u793a\u51c6\u5907\u6309\u94ae"),e.centerPanel.showReadyBtn())),1==e.gameType))){var t=e.centerPanel.IsCheck;h.DataManager.isCreaterUser?(e.centerPanel.showFriendBtn(),e.centerPanel.onSetStartCountDown(t)):(e.centerPanel.showFriendReadyBtn(),t&&v.NetManager.protocolGameCommon.sendFriendReadyReq(0))}})},n=0;n<r.length;n++)o(n)}})}},e.prototype.setGoldAnimation=function(t,e,o,n){var i=this;if(this.canDealResult)if(null==e||e.length<=0)n&&n();else{for(var r=t,a=0,s=0;s<e.length;s++)for(var l=e[s],c=l,u=r,p=0;p<10;p++){var h=new cc.Node;o?(c=l,u=r):(c=r,u=l),h.setPosition(c),this.centerPanel.node_gold.addChild(h);cc.v2(c.x,c.y),cc.v2(c.x,u.y),cc.v2(u.x,u.y);cc.tween(h).to(.1*p,{position:cc.v2(u.x,u.y)}).call(function(){++a==10*e.length-1&&(i.centerPanel.node_gold.destroyAllChildren(),n&&n())}).start()}d.AudioManager.playSFX("collect_gold")}},e.prototype.gameReconnect=function(t){if(t.game_start_notify&&this.gameStart(t.game_start_notify),t.send_card_notify&&this.sendCard(t.send_card_notify,!1),t.turn_who_operate_ret)for(var e=[],o=t.turn_who_operate_ret.length-1;o>=0;o--){var n=!1;o==t.turn_who_operate_ret.length-1&&(n=!0),-1==e.indexOf(t.turn_who_operate_ret[o].seat_id)&&(this.turnWhoOperate(t.turn_who_operate_ret[o],n),e.push(t.turn_who_operate_ret[o].seat_id))}t.turn_who_operate_notify&&this.waitOperate(t.turn_who_operate_notify),t.send_public_card_notify&&this.dealPublicCard(t.send_public_card_notify),this.isStartGame=!0,t.game_conclude_notify&&(this.isStartGame=!1,this.dealResult(t.game_conclude_notify))},e.prototype.onUpdateUserScore=function(){this.isStartGame||this.userListAllCom.userListCom[0].setUserScore(h.DataManager.userInfo.gold)},e.prototype.showFriendPlayerState=function(t,e){this.userListAllCom.userListCom[t].setReadyIcon(!1),this.userListAllCom.userListCom[t].setOfflineIcon(!1),1==e?this.userListAllCom.userListCom[t].setReadyIcon(!0):2==e?this.userListAllCom.userListCom[t].setOfflineIcon(!0):3!=e&&6!=e||(this.userListAllCom.userListCom[t].setReadyIcon(!1),this.userListAllCom.userListCom[t].setOfflineIcon(!1))},i([P(s.default)],e.prototype,"topPanel",void 0),i([P(u.default)],e.prototype,"centerPanel",void 0),i([P(cc.Node)],e.prototype,"chipPoolContent",void 0),i([P(cc.Prefab)],e.prototype,"chipPool",void 0),i([P(cc.Node)],e.prototype,"cardListAllContent",void 0),i([P(cc.Prefab)],e.prototype,"cardListAll",void 0),i([P(cc.Node)],e.prototype,"userListAllContent",void 0),i([P(cc.Prefab)],e.prototype,"userListAll",void 0),i([P(cc.SpriteFrame)],e.prototype,"gold_frame",void 0),e=i([C],e)}(cc.Component);o.default=b,cc._RF.pop()},{"../../common/log/LogWrap":void 0,"../../common/utils/Utils":void 0,"../../manager/AudioManager":void 0,"../../manager/DataManager":void 0,"../../manager/NetManager":void 0,"../../manager/ResManager":void 0,"../../manager/UIManager":void 0,"../../view/common/GameChat":void 0,"./DZPKTool":"DZPKTool","./model/CMD_DZPK":"CMD_DZPK","./ui/DZPKCenterPanel":"DZPKCenterPanel","./ui/DZPKTopPanel":"DZPKTopPanel"}],DZPKPokerItem:[function(t,e,o){"use strict";cc._RF.push(e,"afc14VS4ftOApMEHEsRZx6E","DZPKPokerItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.poker=null,e.pokerContent=null,e.pokerBoder=null,e.controller=null,e.pokerCom=null,e}return n(e,t),e.prototype.createPoker=function(t){this.pokerBoder.active=!1,this.pokerContent.destroyAllChildren();var e=cc.instantiate(this.poker);this.pokerCom=e.getComponent("createPoker"),this.pokerCom.createPoker(t),this.pokerContent.addChild(e)},e.prototype.selectPoker=function(){this.pokerBoder.active=!0},e.prototype.unSelectPoker=function(){this.pokerBoder.active=!1},e.prototype.setShoot=function(t){1==t?this.node.setPosition(cc.v2(this.node.getPosition().x,10)):this.node.setPosition(cc.v2(this.node.getPosition().x,0))},e.prototype.setCardAni=function(t){return this.pokerCom.setCardAni(t)},e.prototype.getCardValue=function(){return this.pokerCom.getCardValue()},i([s(cc.Prefab)],e.prototype,"poker",void 0),i([s(cc.Node)],e.prototype,"pokerContent",void 0),i([s(cc.Node)],e.prototype,"pokerBoder",void 0),e=i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],DZPKPokerPanel:[function(t,e,o){"use strict";cc._RF.push(e,"b334dcgPL9Bz5+Mm080Uiti","DZPKPokerPanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,a=r.ccclass,s=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.poker=null,e.controller=null,e._clickIdx=0,e._click_Card_Arr=[],e}return n(e,t),e.prototype.initCard=function(t,e,o){void 0===o&&(o=!1),o&&this.clearCard();for(var n=0;n<t;n++){var i=cc.instantiate(this.poker);i.active=!1,i.position=e[n],i.getComponent("DZPKPokerItem").createPoker(),this.node.addChild(i)}},e.prototype.clearCard=function(){this.node.stopAllActions(),this.node.removeAllChildren()},e.prototype.showPoker=function(t,e,o,n){if(void 0===e&&(e=0),t)for(var i,r=function(){(i=a.node.children[s]).active=!0;var r=i.getComponent("DZPKPokerItem"),l=t[s-e];if(o){var c=void 0;c=s==t.length+e-1&&n?function(){r.setCardAni(l),n&&n()}:function(){r.setCardAni(l)},a.node.runAction(cc.sequence(cc.delayTime(.5*(s-e)),cc.callFunc(c)))}else r.createPoker(l),n&&n()},a=this,s=e;s<t.length+e;s++)r();else console.log("\u672a\u6709\u724c\u7684\u6570\u636esetTurnCardAni")},e.prototype.cardBackView=function(t){for(var e=0;e<t;e++){var o=this.node.children[e];o.active=!0,o.getComponent("DZPKPokerItem").createPoker()}},e.prototype.getCardLogicValue=function(t){return 15&t},e.prototype.sortCardValue=function(t){this._click_Card_Arr=[];for(var e=0;e<t;e++){var o=this.node.children[e];if(o.y>0){var n=o.getComponent("DZPKPokerItem").getCardValue(),i=this.getCardLogicValue(n);this._click_Card_Arr.push(i)}}},e.prototype.removeCard=function(){this._clickIdx=0,this._click_Card_Arr=[],this.node.stopAllActions(),this.node.removeAllChildren()},i([s(cc.Prefab)],e.prototype,"poker",void 0),e=i([a],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],DZPKTool:[function(t,e,o){"use strict";cc._RF.push(e,"9efb5LB1p9JKJd10aiJjy3H","DZPKTool");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./model/CMD_DZPK"),a=cc._decorator,s=a.ccclass,l=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.getInstance=function(){return null==this.instance&&(this.instance=new o),this.instance},e.prototype.getLocalIndex=function(t){var e=r.default.MY_SEAT,o=t,n=r.default.GAME_PLAYER;return(o-e+n)%n},e.prototype.UserisExist=function(){return!(r.default.MY_SEAT<0||r.default.MY_SEAT>r.default.GAME_PLAYER)},e.prototype.getPlayerCount=function(t){for(var e=0,o=0;o<r.default.GAME_PLAYER;o++)t[o]&&void 0!=t[o]&&(e+=1);return e},e.prototype.getUserSexByID=function(t){for(var e=0;e<r.default.PLAYER_DATAS.length;e++){var o=r.default.PLAYER_DATAS[e];if(o.seat_id==t)return o.sex}},e=o=i([s],e)}(cc.Component));o.default=l,cc._RF.pop()},{"./model/CMD_DZPK":"CMD_DZPK"}],DZPKTopPanel:[function(t,e,o){"use strict";cc._RF.push(e,"f72c6puveJDTapizrSLBjDe","DZPKTopPanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/utils/Utils"),a=t("../../../manager/UIManager"),s=t("../../../manager/DataManager"),l=cc._decorator,c=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_cardType=null,e.pot_num=null,e.table_num=null,e.room_id=null,e.room_id_node=null,e.controller=null,e}return n(e,t),e.prototype.initzation=function(t){this.controller=t,this.initView()},e.prototype.initView=function(){this.pot_num.string="",this.table_num.string="",this.addEvenListener()},e.prototype.addEvenListener=function(){r.default.removeClickEvent(this.btn_cardType),r.default.addClickEventEND(this.btn_cardType,this.onEvenClickButton.bind(this))},e.prototype.setRoomInfo=function(t){this.table_num.string=t||""},e.prototype.setRoomId=function(t){void 0===t&&(t=""),this.room_id_node.active=!0,this.room_id.string=t},e.prototype.setBasicPot=function(t){this.pot_num.string=t},e.prototype.onEvenClickButton=function(t){"btn_cardType"==t.name&&a.UIManager.popup("prefabs/game/CardTypeList",s.DataManager.gameType)},i([u(cc.Node)],e.prototype,"btn_cardType",void 0),i([u(cc.Label)],e.prototype,"pot_num",void 0),i([u(cc.Label)],e.prototype,"table_num",void 0),i([u(cc.Label)],e.prototype,"room_id",void 0),i([u(cc.Node)],e.prototype,"room_id_node",void 0),e=i([c],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/DataManager":void 0,"../../../manager/UIManager":void 0}],OperateBtnsPanel:[function(t,e,o){"use strict";cc._RF.push(e,"7f51dp0Il9K56oxb8g+dfV9","OperateBtnsPanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/utils/Utils"),a=t("../../../manager/NetManager"),s=cc._decorator,l=s.ccclass,c=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.turn_me=null,e.btn_qi=null,e.btn_gen=null,e.btn_guo=null,e.btn_all1=null,e.btn_jia=null,e.btn_jia_confirm=null,e.btn_all2=null,e.not_turn_me=null,e.btn_qi_guo=null,e.btn_gen_aotu=null,e.btn_guo_aotu=null,e.btn_gen_any=null,e.auto_btns_check=[],e.label_gen_aotu=null,e.autoTypeValue=-1,e.num_progress=null,e.num_slider=null,e.num_label=null,e.add_select_num=null,e.add_btn_list=[],e.minJiaValue=0,e.maxJiaValue=1,e.autoGenNum="",e}return n(e,t),e.prototype.initView=function(){this.hideAll(),this.autoTypeValue=-1,this.resetAutoValue(-1)},e.prototype.hideAll=function(){this.turn_me.active=!1,this.not_turn_me.active=!1,this.add_select_num.active=!1,this.btn_jia.active=!0,this.btn_jia_confirm.active=!1,this.num_progress.progress=this.num_slider.progress=0},e.prototype.resetAddNum=function(t){var e=!1;if(4==t.length)e=!0;else if(2!=t.length)return void console.log("\u9519\u8bef\u7684jiaValue:",t);this.maxJiaValue=parseFloat(t[t.length-1]),this.minJiaValue=parseFloat(t[0]);for(var o=0;o<this.add_btn_list.length;o++)this.add_btn_list[o].node.active=!0,e?(o!=this.add_btn_list.length-1?this.add_btn_list[o].string=r.default.getFormatGold(t[o]):this.add_btn_list[o].string="ALL IN",r.default.removeClickEvent(this.add_btn_list[o].node.parent),r.default.addClickEventEND(this.add_btn_list[o].node.parent,this.onClickAddNum.bind(this),t[o])):0==o?(this.add_btn_list[o].string=r.default.getFormatGold(t[0]),r.default.removeClickEvent(this.add_btn_list[0].node.parent),r.default.addClickEventEND(this.add_btn_list[0].node.parent,this.onClickAddNum.bind(this),t[0])):o==this.add_btn_list.length-1?(this.add_btn_list[o].string=r.default.getFormatGold(t[1]),r.default.removeClickEvent(this.add_btn_list[1].node.parent),r.default.addClickEventEND(this.add_btn_list[1].node.parent,this.onClickAddNum.bind(this),t[1])):this.add_btn_list[o].node.active=!1;this.num_label.string=r.default.getFormatGold(this.minJiaValue)},e.prototype.onChangeNumSlider=function(t){this.num_progress.progress=t.progress;var e=this.minJiaValue+t.progress*(this.maxJiaValue-this.minJiaValue);1!=t.progress&&(e=Math.round(e),t.progress=(e-this.minJiaValue)/(this.maxJiaValue-this.minJiaValue),this.num_progress.progress=t.progress),this.num_label.string=r.default.getFormatGold(e)},e.prototype.onEvenClickButton=function(t,e){this.sendOper(e)},e.prototype.onEvenClickNotButton=function(t,e){this.resetAutoValue(e,!1)},e.prototype.resetAutoValue=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=!0),e||this.autoTypeValue!=t?this.autoTypeValue=t:this.autoTypeValue=-1;for(var o=0;o<this.auto_btns_check.length;o++)o==this.autoTypeValue-1?this.auto_btns_check[o].active=!0:this.auto_btns_check[o].active=!1},e.prototype.onClickButtonJia=function(){this.btn_jia.active=!1,this.btn_jia_confirm.active=!0,r.default.removeClickEvent(this.btn_jia_confirm),r.default.addClickEventEND(this.btn_jia_confirm,this.onClickAddNum.bind(this)),this.add_select_num.active=!0},e.prototype.onClickAddNum=function(t,e){if(e)e=parseFloat(e);else{var o=this.num_label.string;o.match("\u4e07")?(o=o.replace("\u4e07",""),o=1e4*parseFloat(o)):o=parseFloat(o),e=o}e==this.maxJiaValue?this.sendOper(5):this.sendOper(3,[e+""])},e.prototype.sendOper=function(t,e){a.NetManager.getGameProtocol().sendTurnWhoOperate(t,e)},e.prototype.setTurnMe=function(t){void 0===t&&(t=!1),this.turn_me.active=t,this.not_turn_me.active=!t},e.prototype.setTurnMeBtns=function(t){var e=!1,o=!1,n=!1,i=[];this.btn_gen.active=!1,this.btn_guo.active=!1,this.btn_all1.active=!1,this.btn_jia.active=!1,this.btn_jia_confirm.active=!1,this.btn_all2.active=!1;for(var r=0;r<t.length;r++)switch(t[r].opr_type){case 5:e=!0,this.btn_all2.active=!0;break;case 4:n=!0,this.btn_guo.active=!0;break;case 3:i=t[r].value,this.btn_jia.active=!0;break;case 2:o=!0;var a=this.btn_gen.getComponent(cc.Label);a&&(a.string="\u8ddf"+parseInt(100*parseFloat(t[r].value[0]||"0")+"")/100),this.btn_gen.active=!0}if(!e||o||n||(this.btn_all1.active=!0),i&&i.length>0&&this.resetAddNum(i),this.addTurnMeEvent(),this.setTurnMe(!0),this.autoTypeValue>=0)switch(this.autoTypeValue){case 1:n?this.sendOper(4):this.sendOper(1);break;case 2:o?this.sendOper(2):this.sendOper(5);break;case 3:this.sendOper(4);break;case 4:o?this.sendOper(2):n?this.sendOper(4):e&&this.sendOper(5)}},e.prototype.setNotTurnMeBtns=function(t){var e=1;2==t.opr_type&&(e=0,this.label_gen_aotu.string="\u8ddf"+parseInt(100*parseFloat(t.value&&t.value[0]||"0")+"")/100),this.btn_gen_aotu.active=!e,this.btn_guo_aotu.active=!!e,(2!=this.autoTypeValue||this.btn_gen_aotu.active)&&(3!=this.autoTypeValue||this.btn_guo_aotu.active)?2==this.autoTypeValue&&t.value&&t.value[0]!=this.autoGenNum&&(this.autoTypeValue=-1):this.autoTypeValue=-1,2==t.opr_type?this.autoGenNum=t.value&&t.value[0]||"":this.autoGenNum="",this.resetAutoValue(this.autoTypeValue),this.addNotTurnMeEvent(),this.setTurnMe()},e.prototype.removeNotTurnMeEvent=function(){r.default.removeClickEvent(this.btn_qi_guo),r.default.removeClickEvent(this.btn_gen_aotu),r.default.removeClickEvent(this.btn_guo_aotu),r.default.removeClickEvent(this.btn_gen_any)},e.prototype.addNotTurnMeEvent=function(){this.removeTurnMeEvent(),this.removeNotTurnMeEvent(),r.default.addClickEventEND(this.btn_qi_guo,this.onEvenClickNotButton.bind(this),1),r.default.addClickEventEND(this.btn_gen_aotu,this.onEvenClickNotButton.bind(this),2),r.default.addClickEventEND(this.btn_guo_aotu,this.onEvenClickNotButton.bind(this),3),r.default.addClickEventEND(this.btn_gen_any,this.onEvenClickNotButton.bind(this),4)},e.prototype.removeTurnMeEvent=function(){r.default.removeClickEvent(this.btn_qi),r.default.removeClickEvent(this.btn_gen),r.default.removeClickEvent(this.btn_guo),r.default.removeClickEvent(this.btn_all1),r.default.removeClickEvent(this.btn_all2),r.default.removeClickEvent(this.btn_jia)},e.prototype.addTurnMeEvent=function(){this.removeTurnMeEvent(),this.removeNotTurnMeEvent(),r.default.addClickEventEND(this.btn_qi,this.onEvenClickButton.bind(this),1),r.default.addClickEventEND(this.btn_gen,this.onEvenClickButton.bind(this),2),r.default.addClickEventEND(this.btn_guo,this.onEvenClickButton.bind(this),4),r.default.addClickEventEND(this.btn_all1,this.onEvenClickButton.bind(this),5),r.default.addClickEventEND(this.btn_all2,this.onEvenClickButton.bind(this),5),r.default.addClickEventEND(this.btn_jia,this.onClickButtonJia.bind(this))},i([c(cc.Node)],e.prototype,"turn_me",void 0),i([c(cc.Node)],e.prototype,"btn_qi",void 0),i([c(cc.Node)],e.prototype,"btn_gen",void 0),i([c(cc.Node)],e.prototype,"btn_guo",void 0),i([c(cc.Node)],e.prototype,"btn_all1",void 0),i([c(cc.Node)],e.prototype,"btn_jia",void 0),i([c(cc.Node)],e.prototype,"btn_jia_confirm",void 0),i([c(cc.Node)],e.prototype,"btn_all2",void 0),i([c(cc.Node)],e.prototype,"not_turn_me",void 0),i([c(cc.Node)],e.prototype,"btn_qi_guo",void 0),i([c(cc.Node)],e.prototype,"btn_gen_aotu",void 0),i([c(cc.Node)],e.prototype,"btn_guo_aotu",void 0),i([c(cc.Node)],e.prototype,"btn_gen_any",void 0),i([c(cc.Node)],e.prototype,"auto_btns_check",void 0),i([c(cc.Label)],e.prototype,"label_gen_aotu",void 0),i([c(cc.ProgressBar)],e.prototype,"num_progress",void 0),i([c(cc.Slider)],e.prototype,"num_slider",void 0),i([c(cc.Label)],e.prototype,"num_label",void 0),i([c(cc.Node)],e.prototype,"add_select_num",void 0),i([c(cc.Label)],e.prototype,"add_btn_list",void 0),e=i([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/NetManager":void 0}],ProtocolDZPK:[function(t,e,o){"use strict";cc._RF.push(e,"ce61f0pf1ZOjYz49CRxLt+9","ProtocolDZPK");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../manager/DataManager"),r=t("../../../net/ProtocolBase"),a=t("./DZPKCmd"),s=t("../../../Define"),l=t("../../../manager/EventManager"),c=t("../../../manager/UIManager"),u=t("../../../manager/NetManager"),d=function(t){function e(){var e=t.call(this,"game/dzpk/pb")||this;return e.cmd=a.DZPKCmd,e.type=s.SocketType.Game,e.pbName="DZPK",l.EventManager.on(e,a.ProtocolDZPKCmd.ErrorResp,e.onErrorResp.bind(e)),e}return n(e,t),e.prototype.sendTurnWhoOperate=function(t,e){void 0===e&&(e=[]);var o={player_id:i.DataManager.userInfo.userid,operate_type:{opr_type:t,value:e}};this.send(o,"turn_who_operate_req")},e.prototype.onErrorResp=function(t){c.UIManager.showTipsPopup(t.err_msg)},e}(r.default);o.default=d,u.NetManager.protocolCache.ProtocolDZPK=d,cc._RF.pop()},{"../../../Define":void 0,"../../../manager/DataManager":void 0,"../../../manager/EventManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"../../../net/ProtocolBase":void 0,"./DZPKCmd":"DZPKCmd"}],UserListAll:[function(t,e,o){"use strict";cc._RF.push(e,"4eab9Qz6UhNiqVDc4K18Aqy","UserListAll");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./DZPKAvatarPanel"),a=cc._decorator,s=a.ccclass,l=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.userListCom=[],e.cardType_Atlas=null,e.statusList=[],e.isFriend=!1,e.valueList=["sanpai","duizi","liangdui","santiao","shunzi","tonghua","hulu","sitiao","ths","hjths"],e}return n(e,t),e.prototype.initView=function(t){for(var e=0;e<this.userListCom.length;e++)0!=e?this.userListCom[e].initView(t):this.userListCom[e].resetMyView(t)},e.prototype.setUserInfo=function(t,e){this.userListCom[t].setUserInfo(e,this.isFriend)},e.prototype.setUserScore=function(t,e){this.userListCom[t].setUserScore(parseFloat(e))},e.prototype.setBankIcon=function(t,e){void 0===e&&(e=!0),this.userListCom[t].setBankIcon(e)},e.prototype.clearUserTimeOut=function(t){if(t)this.userListCom[t].clearTimeOut();else for(var e=0;e<this.userListCom.length;e++)this.userListCom[e].clearTimeOut()},e.prototype.setUserTimeOut=function(t,e,o){this.clearUserTimeOut(),this.userListCom[t].setUserTimeOut(e,o,t)},e.prototype.setViewPlayerStatus=function(t,e){this.userListCom[t].setViewPlayerStatus(this.statusList[e])},e.prototype.setTypeSprite=function(t,e){this.userListCom[t].setTypeSprite(this.cardType_Atlas.getSpriteFrame("font_"+this.valueList[e-1]))},i([l(r.default)],e.prototype,"userListCom",void 0),i([l(cc.SpriteAtlas)],e.prototype,"cardType_Atlas",void 0),i([l(cc.SpriteFrame)],e.prototype,"statusList",void 0),e=i([s],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./DZPKAvatarPanel":"DZPKAvatarPanel"}]},{},["DZPKGameScene","DZPKGameView","DZPKTool","CMD_DZPK","DZPKCmd","ProtocolDZPK","CardListAll","ChipItem","ChipPool","DZPKAvatarPanel","DZPKCenterPanel","DZPKPokerItem","DZPKPokerPanel","DZPKTopPanel","OperateBtnsPanel","UserListAll"]);