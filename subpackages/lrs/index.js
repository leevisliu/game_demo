window.__require=function t(e,o,n){function i(a,c){if(!o[a]){if(!e[a]){var s=a.split("/");if(s=s[s.length-1],!e[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+a+"'")}a=s}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){return i(e[a][1][t]||t)},p,p.exports,t,e,o,n)}return o[a].exports}for(var r="function"==typeof __require&&__require,a=0;a<n.length;a++)i(n[a]);return i}({CMD_LRS:[function(t,e,o){"use strict";cc._RF.push(e,"f3001HcwFlKypMQy3IuVDMz","CMD_LRS"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.clone=function(t){return JSON.parse(JSON.stringify(t))},t.MY_SEAT=-1,t.MY_ID=-1,t.PLAYER_DATAS=[],t.MY_DATA=[],t.CAN_CLICK_STATE=!1,t.DAY_NIGHT_TYPE=1,t.CHAT_TEXT_SELECT=["\u4f60\u8981\u76f8\u4fe1\u6211\uff0c\u6211\u662f\u5e73\u6c11","\u4f60\u8981\u76f8\u4fe1\u6211\uff0c\u6211\u662f\u5973\u5deb","\u4f60\u8981\u76f8\u4fe1\u6211\uff0c\u6211\u662f\u730e\u4eba","\u6211\u662f\u597d\u4eba","\u4f60\u731c\u731c\u6211\u8eab\u4efd","\u6211\u53ef\u4ee5\u5e26\u8d70\u4f60","\u662f\u6211\u6551\u4e86\u4f60","\u6211\u65e0\u6240\u754f\u60e7"],t.CHAT_PICTURE_BQ=57,t}();o.default=n,cc._RF.pop()},{}],LRSAnimationMgr:[function(t,e,o){"use strict";cc._RF.push(e,"8a1c5/w6zJDkKvpcjf3KCSI","LRSAnimationMgr");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(t){r(t)}}function c(t){try{s(n.throw(t))}catch(t){r(t)}}function s(t){t.done?i(t.value):new o(function(e){e(t.value)}).then(a,c)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../common/UIHelper"),s=t("../../../manager/ResManager"),l=cc._decorator,p=l.ccclass,u=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.langrenSp=null,e.lierenSp=null,e.nvwuduSp=null,e.nvwujiuSp=null,e.user_node=null,e.usermsg_node=null,e}return n(e,t),e.prototype.playActionSp=function(t,e){var o=this;if(this.node.active=!0,null!=e){var n=cc.instantiate(this.user_node);this.node.addChild(n);var i=n.getChildByName("headnode").getChildByName("head"),r=n.getChildByName("idcard_num").getComponent(cc.Sprite);this.showSeatID(r,e.seat_id),c.default.setHeadIcon(e.headimg_id,i),this.usermsg_node=n}var a=null;1==t?a=this.langrenSp:2==t?a=this.nvwujiuSp:4==t?a=this.nvwuduSp:6==t&&(a=this.lierenSp),a.node.active=!0;var s=a.animation;a.setAnimation(0,s,!1)&&a.setCompleteListener(function(t,n){a.node.active=!1,o.node.active=!1,null!=e&&o.usermsg_node.removeFromParent()})},e.prototype.showSeatID=function(t,e){return r(this,void 0,void 0,function(){var o;return a(this,function(n){switch(n.label){case 0:return[4,s.ResManager.loadResAsync("game/lrs/res/idcard/text_lrs"+e,cc.SpriteFrame)];case 1:return o=n.sent(),t.spriteFrame=o,[2]}})})},e.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},i([u(sp.Skeleton)],e.prototype,"langrenSp",void 0),i([u(sp.Skeleton)],e.prototype,"lierenSp",void 0),i([u(sp.Skeleton)],e.prototype,"nvwuduSp",void 0),i([u(sp.Skeleton)],e.prototype,"nvwujiuSp",void 0),i([u(cc.Prefab)],e.prototype,"user_node",void 0),e=i([p],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../../../common/UIHelper":void 0,"../../../manager/ResManager":void 0}],LRSAvatarPanel:[function(t,e,o){"use strict";cc._RF.push(e,"2b727xbAB1K/pqyUltHND4k","LRSAvatarPanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(t){r(t)}}function c(t){try{s(n.throw(t))}catch(t){r(t)}}function s(t){t.done?i(t.value):new o(function(e){e(t.value)}).then(a,c)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../model/CMD_LRS"),s=t("../../../common/utils/Utils"),l=t("../../../manager/DataManager"),p=t("../../../common/UIHelper"),u=t("../../../manager/ResManager"),d=cc._decorator,h=d.ccclass,_=d.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_spine=null,e.btn_select=null,e.head=null,e.user_name=null,e.money=null,e.idcard_num=null,e.node_myself=null,e.idcard_type=null,e.out_type=null,e.node_select=null,e.icon_select=null,e.idcardIcon=[],e.outIcon=[],e.yellow_bmfont=null,e.grey_bmfont=null,e.flutter=null,e.node_chat=null,e.vip_frame=null,e.vip_level=null,e.centerPanel=null,e._gameView=null,e.user_tag=0,e.user_chatpoptime=3,e}return n(e,t),e.prototype.initzation=function(t,e,o){this.centerPanel=t,this._gameView=e,this.user_tag=o,this.initView(),this.initNode()},e.prototype.initNode=function(){},e.prototype.initView=function(){this.unscheduleAllCallbacks(),this.user_name.string="",this.money.string="",this.node.active=!1},e.prototype.onClickEvent=function(){console.log("\u6211\u70b9\u51fb\u7684\u72b6\u6001======>",c.default.CAN_CLICK_STATE),1==c.default.CAN_CLICK_STATE&&(console.log("\u6211\u70b9\u51fb\u4e86\u7528\u6237\u5934\u50cfID======>",this.user_tag),this.centerPanel.UserSelectCall(Number(this.user_tag)))},e.prototype.resetMyView=function(){this.unscheduleAllCallbacks()},e.prototype.resetIDCard=function(t){console.log("\u8eab\u4efdID",t),this.idcard_type.node.active=!0,this.idcard_type.spriteFrame=this.idcardIcon[t-1]},e.prototype.setUserInfo=function(t){console.log(t);var e=t,o=s.default.getSubStringLengTxt(t.username)||s.default.getReplaceStrToStar(t.player_id);this.user_name.string=o,this.showSeatID(t.seat_id),this.setHeadIcon(t.headimg_id),this.setUserScore(e.gold),this.setVipFrame(t.vip_level),this.setVipLevel(t.vip_level),this.node.active=!0,this.node_myself.active=!1,console.log("\u7528\u6237\u4fe1\u606f======>",t,t.player_id,l.DataManager.userInfo.userid),t.player_id==l.DataManager.userInfo.userid&&(this.node_myself.active=!0,this.node.getChildByName("quan").active=!0,console.log("\u6211\u7684\u7528\u6237\u4fe1\u606f==sd ====>",t))},e.prototype.setVipFrame=function(t){t=t||0,p.default.setHeadFrame(t,this.vip_frame)},e.prototype.setVipLevel=function(t){t=t||0,p.default.setVipLevel(t,this.vip_level)},e.prototype.setSpineAction=function(t){this.node_spine.getComponent("LRSAnimationMgr").playActionSp(t,null)},e.prototype.setHeadIcon=function(t){p.default.setHeadIcon(t,this.head.node)},e.prototype.setUserScore=function(t){this.money.string=s.default.getFormatGold(t)},e.prototype.setUserIDcard=function(t){this.idcard_type.spriteFrame=this.idcardIcon[t]},e.prototype.setUserSelectState=function(t){this.node_select.active=t},e.prototype.setUserSelectIcon=function(t){},e.prototype.setVisibleUserSelectIcon=function(t){this.icon_select.node.active=t},e.prototype.setUserOverState=function(t){this.setVisibleUserOverState(!0),1==t?this.setVisibleUserOverState(!1):2==t||3==t||4==t?this.out_type.spriteFrame=this.outIcon[0]:5==t?this.out_type.spriteFrame=this.outIcon[2]:6==t&&(this.out_type.spriteFrame=this.outIcon[1])},e.prototype.setVisibleUserOverState=function(t){this.out_type.node.active=t},e.prototype.setHeadClickState=function(t){console.log("\u5f53\u524d\u8bbe\u7f6e\u70b9\u51fb\u7684\u4e8b\u4ef6",t),this.btn_select.getComponent(cc.Button).interactable=t},e.prototype.setGameOverUserInfo=function(t){console.log(t);var e=t,o=s.default.getSubStringLengTxt(t.username)||s.default.getReplaceStrToStar(t.player_id);this.user_name.string=o,this.showSeatID(t.seat_id),this.setHeadIcon(t.headimg_id),this.setUserScore(e.gold),this.node.active=!0,this.node_myself.active=!1,t.player_id==l.DataManager.userInfo.userid&&(this.node_myself.active=!0,this.node.getChildByName("quan").active=!0),e.score},e.prototype.setUserResultScore=function(t){this.flutter.node.active=!0;var e="";t>=0?(this.flutter.font=this.yellow_bmfont,e="+"):(this.flutter.font=this.grey_bmfont,e="-",this.setBlackResult(!0));var o=Math.abs(t);this.flutter.string=e+parseFloat(o+"").toFixed(1)},e.prototype.setBlackResult=function(t){t&&this.setNodeColor()},e.prototype.setChatTxt=function(t){this.onKillTimer(),this.node_chat.active=!0;var e=this.node_chat.getChildByName("txt"),o=this.node_chat.getChildByName("bq");if(t<1e3){o.active=!0,e.active=!1;var n="game/lrs/res/biaoqing/e"+this.PrefixZero(t,3);this.showBqView(n,o.getComponent(cc.Sprite))}else o.active=!1,e.active=!0,e.getComponent(cc.Label).string=c.default.CHAT_TEXT_SELECT[t-1e3];this.user_chatpoptime=3,this.schedule(this.onUpdateTimer,1)},e.prototype.showBqView=function(t,e){return r(this,void 0,void 0,function(){var o;return a(this,function(n){switch(n.label){case 0:return[4,u.ResManager.loadResAsync(t,cc.SpriteFrame)];case 1:return o=n.sent(),e.spriteFrame=o,[2]}})})},e.prototype.showSeatID=function(t){return r(this,void 0,void 0,function(){var e;return a(this,function(o){switch(o.label){case 0:return[4,u.ResManager.loadResAsync("game/lrs/res/idcard/text_lrs"+t,cc.SpriteFrame)];case 1:return e=o.sent(),this.idcard_num.spriteFrame=e,[2]}})})},e.prototype.onUpdateTimer=function(){this.user_chatpoptime=this.user_chatpoptime-1,this.user_chatpoptime<=0&&(this.user_chatpoptime=3,this.onKillTimer())},e.prototype.onKillTimer=function(){this.onUpdateTimer&&this.unschedule(this.onUpdateTimer),this.node_chat.active=!1},e.prototype.PrefixZero=function(t,e){return(Array(e).join("0")+t).slice(-e)},e.prototype.setNodeColor=function(){this.node.getComponentsInChildren(cc.Sprite).forEach(function(t,e){t.node.color=cc.color(140,140,140)}),this.node.getComponentsInChildren(cc.Label).forEach(function(t,e){"score"!=t.node.name&&(t.node.color=cc.color(140,140,140),"gold"==t.node.name&&(t.node.color=cc.color(140,136,65)))})},e.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},i([_(cc.Node)],e.prototype,"node_spine",void 0),i([_(cc.Node)],e.prototype,"btn_select",void 0),i([_(cc.Sprite)],e.prototype,"head",void 0),i([_(cc.Label)],e.prototype,"user_name",void 0),i([_(cc.Label)],e.prototype,"money",void 0),i([_(cc.Sprite)],e.prototype,"idcard_num",void 0),i([_(cc.Node)],e.prototype,"node_myself",void 0),i([_(cc.Sprite)],e.prototype,"idcard_type",void 0),i([_(cc.Sprite)],e.prototype,"out_type",void 0),i([_(cc.Node)],e.prototype,"node_select",void 0),i([_(cc.Sprite)],e.prototype,"icon_select",void 0),i([_(cc.SpriteFrame)],e.prototype,"idcardIcon",void 0),i([_(cc.SpriteFrame)],e.prototype,"outIcon",void 0),i([_(cc.Font)],e.prototype,"yellow_bmfont",void 0),i([_(cc.Font)],e.prototype,"grey_bmfont",void 0),i([_(cc.Label)],e.prototype,"flutter",void 0),i([_(cc.Node)],e.prototype,"node_chat",void 0),i([_(cc.Node)],e.prototype,"vip_frame",void 0),i([_(cc.Node)],e.prototype,"vip_level",void 0),e=i([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../../common/UIHelper":void 0,"../../../common/utils/Utils":void 0,"../../../manager/DataManager":void 0,"../../../manager/ResManager":void 0,"../model/CMD_LRS":"CMD_LRS"}],LRSCenterPanel:[function(t,e,o){"use strict";cc._RF.push(e,"a9cb7i+Ip1JoKG02TZ62yhH","LRSCenterPanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../model/CMD_LRS"),a=t("../../../common/utils/Utils"),c=t("../../public/TimeClock"),s=t("../../../manager/AudioManager"),l=t("../../../manager/NetManager"),p=t("../../../manager/UIManager"),u=cc._decorator,d=u.ccclass,h=u.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.alarm_clock=null,e.btn_start=null,e.node_left=null,e.node_right=null,e.node_top=null,e.node_spine=null,e.node_action=null,e.node_gametxt=null,e.gametxt_item=null,e.node_userout=null,e.node_pingannight=null,e.user_item=null,e.start_game=null,e.day_pre=null,e.night_pre=null,e.userselect_pre=null,e.day_num=null,e.night_num=null,e._gameView=null,e.user_selectview=null,e.avatarPanel=[],e.dayornight_icon=null,e.night_icon=null,e.night_yueliang=null,e.day_icon=null,e.user_opertype=0,e.user_selectmsg=null,e.gameRecordList=null,e}return n(e,t),e.prototype.initzation=function(t){this._gameView=t,this.initNode();var e=this.node_gametxt.getChildByName("scrollview");this.gameRecordList=cc.find("view/content",e);var o=cc.winSize.width-1280;o>60&&(this.node_left.getComponent(cc.Widget).left=.3*o,this.node_right.getComponent(cc.Widget).right=.3*o)},e.prototype.initNode=function(){a.default.addClickEventEND(this.btn_start,this.onClickEvent.bind(this))},e.prototype.initView=function(){var t=this;if(3==r.default.PLAYER_DATAS.length){var e=this.node_action.getChildByName("icon1"),o=this.node_action.getChildByName("icon2"),n=this.node_action.getChildByName("icon3");o.active=!1,e.x=-97,n.x=117}this.node_top.active=!1,this.dayornight_icon=this.node_top.getChildByName("icon_dayornight"),this.night_icon=this.node_top.getChildByName("night"),this.night_yueliang=this.node_top.getChildByName("yueliang"),this.day_icon=this.node_top.getChildByName("day"),this.btn_start.active=!1,this.alarm_clock.onKillTimer(),this.node_left.removeAllChildren(),this.node_right.removeAllChildren(),r.default.PLAYER_DATAS.forEach(function(e,o){if(console.log("\u5f53\u524d\u4fe1\u606f\u7684\u5ea7\u4f4d\u53f7\uff0c\u548c\u6807\u8bb0\u53f7",e.seat_id,o),o<3){var n=cc.instantiate(t.user_item);t.avatarPanel[e.seat_id-1]=n.getComponent("LRSAvatarPanel"),t.node_left.addChild(n,0,"item"+o)}else{n=cc.instantiate(t.user_item);t.avatarPanel[e.seat_id-1]=n.getComponent("LRSAvatarPanel"),t.node_right.addChild(n,0,"item"+o)}t.avatarPanel[e.seat_id-1].initzation(t,t._gameView,e.seat_id),t.avatarPanel[e.seat_id-1].setHeadClickState(!1),t.avatarPanel[e.seat_id-1].setUserInfo(e)})},e.prototype.initSelfData=function(){console.log("\u6211\u7684\u5ea7\u4f4dID",r.default.MY_SEAT),this.avatarPanel[r.default.MY_SEAT-1].resetIDCard(r.default.MY_ID)},e.prototype.UserSelectCall=function(t){var e=this;console.log("\u8fd9\u4e2a\u65f6\u5019\u83b7\u53d6\u5230\u7684\u73a9\u5bb6\u4fe1\u606f",r.default.PLAYER_DATAS),r.default.PLAYER_DATAS.forEach(function(o,n){t==o.seat_id?(e.avatarPanel[t-1].setUserSelectState(!0),8==e.user_opertype?e.avatarPanel[t-1].setVisibleUserSelectIcon(!0):e.avatarPanel[t-1].setSpineAction(e.user_opertype),e.user_selectmsg=o,e.user_selectview.initSelect(o),e.sendPreOperReq(t)):(e.avatarPanel[o.seat_id-1].setUserSelectState(!1),e.avatarPanel[o.seat_id-1].setVisibleUserSelectIcon(!1))})},e.prototype.setUserAliveState=function(t,e){this.avatarPanel[e].setUserOverState(t)},e.prototype.onClickEvent=function(t){"btn_start"==t.name&&this.sendMatchReq()},e.prototype.gameComRecordDayOrNight=function(t,e){var o;(this.node_gametxt.active=!0,0==e)?((o=cc.instantiate(this.gametxt_item)).getComponent("LRSHistoryTxt").init("\u7b2c"+t.turns+"\u5929"),this.gameRecordList.addChild(o),this.createHistoryTxtItem(t.out_seat,0,t.turns)):((o=cc.instantiate(this.gametxt_item)).getComponent("LRSHistoryTxt").init("\u7b2c"+t.turns+"\u665a"),this.gameRecordList.addChild(o),this.createHistoryTxtItem(t.out_seat,1,t.turns))},e.prototype.gameRecordDayOrNight=function(t,e,o){var n=this;this.gameRecordList.removeAllChildren(),this.node_gametxt.active=!0,t.forEach(function(t,e){if(t.night_out_seat.length>0)if(0==t.night_out_seat[0]);else{if(t.turns>1){var o=cc.instantiate(n.gametxt_item);n.gameRecordList.addChild(o)}(r=(i=cc.instantiate(n.gametxt_item)).getComponent("LRSHistoryTxt")).init("\u7b2c"+t.turns+"\u665a"),r.initColor(cc.color(91,192,244),!1),n.gameRecordList.addChild(i),n.createHistoryTxtItem(t.night_out_seat,1,t.turns)}else{if(t.turns>1){o=cc.instantiate(n.gametxt_item);n.gameRecordList.addChild(o)}var i,r;(r=(i=cc.instantiate(n.gametxt_item)).getComponent("LRSHistoryTxt")).init("\u7b2c"+t.turns+"\u665a"),r.initColor(cc.color(91,192,244),!1),n.gameRecordList.addChild(i),n.createHistoryTxtItem(t.night_out_seat,1,t.turns)}if(t.day_out_seat.length>0)if(0==t.day_out_seat[0]);else{o=cc.instantiate(n.gametxt_item);if(n.gameRecordList.addChild(o),(c=(a=cc.instantiate(n.gametxt_item)).getComponent("LRSHistoryTxt")).init("\u7b2c"+t.turns+"\u5929"),c.initColor(cc.color(253,190,73),!0),n.gameRecordList.addChild(a),n.createHistoryTxtItem(t.day_out_seat,0,t.turns),0!=t.qiang_seat)(s=[])[0]=t.qiang_seat,n.createHistoryTxtItem(s,0,t.turns,!1)}else{var a,c,s;o=cc.instantiate(n.gametxt_item);if(n.gameRecordList.addChild(o),(c=(a=cc.instantiate(n.gametxt_item)).getComponent("LRSHistoryTxt")).init("\u7b2c"+t.turns+"\u5929"),c.initColor(cc.color(253,190,73),!0),n.gameRecordList.addChild(a),0!=t.qiang_seat)(s=[])[0]=t.qiang_seat,n.createHistoryTxtItem(s,0,t.turns,!1);else n.createHistoryTxtItem(t.day_out_seat,0,t.turns)}})},e.prototype.createHistoryTxtItem=function(t,e,o,n){var i=this;if(void 0===n&&(n=!0),console.log("\u6253\u5370\u5f53\u524d\u7684\u51fa\u5c40\u7684\u4fe1\u606f",t,t.length),t.length>0)t.forEach(function(t,r){var a=cc.instantiate(i.gametxt_item),c=a.getComponent("LRSHistoryTxt");c.init(t+"\u53f7\u73a9\u5bb6\u51fa\u5c40"),0==e&&1==n&&c.initBtn(o),i.gameRecordList.addChild(a)});else{var r=cc.instantiate(this.gametxt_item),a=r.getComponent("LRSHistoryTxt");0==e&&1==n?(a.init("\u4eca\u65e5\u4e3a\u5e73\u5b89\u65e5"),a.initBtn(o)):a.init("\u4eca\u591c\u4e3a\u5e73\u5b89\u591c"),this.gameRecordList.addChild(r)}},e.prototype.sendPreOperReq=function(t){var e={operType:this.user_opertype,chair_id:t};l.NetManager.getGameProtocol().sendPreOperReq(e)},e.prototype.sendMatchReq=function(){p.UIManager.showLoading("\u6b63\u5728\u5feb\u901f\u5339\u914d\u4e2d...",!0,function(){l.NetManager.protocolGameCommon.sendCancelMatch()}),this._gameView.resetGameView(1),l.NetManager.protocolGameCommon.sendMatchReq(),this.btn_start.active=!1},e.prototype.showReadyBtn=function(){this.hideReadyBtn(),this.btn_start.active=!0},e.prototype.hideReadyBtn=function(){this.btn_start.active=!1},e.prototype.resetUserList=function(){this.node_left.removeAllChildren(),this.node_right.removeAllChildren(),this.node_top.active=!1,this.node_action.active=!1,this.node_gametxt.active=!1,this.gameRecordList.removeAllChildren();var t=this.node.getChildByName("userselect"),e=this.node.getChildByName("pingannight"),o=this.node.getChildByName("userout");this.node.removeChild(t),this.node.removeChild(e),this.node.removeChild(o)},e.prototype.setGameTimer=function(t){this.alarm_clock.setGameTimer(t)},e.prototype.onKillTimer=function(){this.alarm_clock.onKillTimer()},e.prototype.pauseVibrate=function(){this.alarm_clock.pauseVibrate()},e.prototype.pauseAudio=function(){this.alarm_clock.pauseAudio()},e.prototype.userSelectNotify=function(t){var e=this;if(this.node_gametxt.active=!1,this.node_action.active=!1,this.user_selectmsg=null,this.user_opertype=t.oper_type,8==this.user_opertype||6==this.user_opertype||4==this.user_opertype||2==this.user_opertype||1==this.user_opertype){var o=cc.instantiate(this.userselect_pre);this.user_selectview=o.getComponent("LRSUserSelect"),this.node.addChild(o,0,"userselect"),this.user_selectview.init(t,this.onTimeOut.bind(this)),console.log("\u5f53\u524d\u73a9\u5bb6\u7684\u64cd\u4f5c\u6905\u5b50",t.can_chairs),t.can_chairs.forEach(function(t,o){e.avatarPanel[t-1].setUserSelectState(!0),e.avatarPanel[t-1].setHeadClickState(!0)})}},e.prototype.onTimeOut=function(t){var e=this;if(r.default.PLAYER_DATAS.forEach(function(t,o){e.avatarPanel[t.seat_id-1].setUserSelectState(!1),e.avatarPanel[t.seat_id-1].setVisibleUserSelectIcon(!1),e.avatarPanel[t.seat_id-1].setHeadClickState(!1)}),"sure"==t.type)8==t.eventid&&s.AudioManager.playGameSFX("alltp");else if("cancel"==t.type);else if("kill"==t.type&&null!=this.user_selectmsg){var o={oper_type:t.eventid,oper_chairId:r.default.MY_SEAT,to_chairId:this.user_selectmsg.seat_id};l.NetManager.getGameProtocol().sendOperReq(o),8==t.eventid&&s.AudioManager.playGameSFX("alltp")}1==r.default.DAY_NIGHT_TYPE&&(6!=t.eventid&&7!=t.eventid||(this.node_action.active=!1))},e.prototype.playKillAction=function(t,e){this.node_spine.getComponent("LRSAnimationMgr").playActionSp(t,e)},e.prototype.killUserData=function(t){if(null==this.user_selectmsg){if(1!=t.oper_type)return;this.user_selectmsg=this.getUserMsgBySeatId(t.to_chairId),this.playKillAction(1,this.user_selectmsg)}},e.prototype.getUserMsgBySeatId=function(t){var e=null;return r.default.PLAYER_DATAS.forEach(function(o,n){t==o.seat_id&&(e=o)}),e},e.prototype.userOutNotify=function(t){var e=this;if(this.node_action.active=!1,0==t.out_seat.length){var o=cc.instantiate(this.node_pingannight),n=o.getComponent("LRSPopOutMsg");this.node.addChild(o,0,"pingannight"),n.initPingan(t)}else{var i=cc.instantiate(this.node_userout),r=i.getComponent("LRSPopOutMsg");this.node.addChild(i,0,"userout");var a=[];t.out_seat.forEach(function(t,o){a.push(e.getUserMsgBySeatId(t))}),r.initOut(t,a)}},e.prototype.showNightAction=function(t){r.default.MY_ID!=t&&(this.node_action.active=!0);var e=cc.scaleTo(.5,1.1),o=cc.scaleTo(1,.9),n=this.node_action.getChildByName("icon"+t);n.scale=1;for(var i=1;i<=3;i++)if(i==t)n.runAction(cc.repeatForever(cc.sequence(e,o)));else{var a=this.node_action.getChildByName("icon"+i);a.scale=1,a.stopAllActions()}this.playActionSounds(t)},e.prototype.showDayAction=function(t){console.log("\u5f53\u524d\u662f\u5e73\u6c11\u884c\u52a8\u65f6\u95f4"),this.node_action.active=!0;var e=cc.scaleTo(.5,1.1),o=cc.scaleTo(1,.9),n=this.node_action.getChildByName("icon"+t);n.scale=1,n.active=!0;for(var i=1;i<=3;i++){var r=this.node_action.getChildByName("icon"+i);r.scale=1,r.stopAllActions(),r.active=!1}n.runAction(cc.repeatForever(cc.sequence(e,o)))},e.prototype.resetActionIcon=function(){this.node_action.active=!1;var t=this.node_action.getChildByName("icon4"),e=this.node_action.getChildByName("icon1"),o=this.node_action.getChildByName("icon3");e.scale=1,o.scale=1,e.active=!0,o.active=!0,t.active=!1,t.stopAllActions()},e.prototype.playActionSounds=function(t){1==t?(s.AudioManager.playGameSFX("actionlangr1"),this.scheduleOnce(function(){s.AudioManager.playGameSFX("actionlangr2")},1)):2==t?(s.AudioManager.playGameSFX("actionnw1"),this.scheduleOnce(function(){s.AudioManager.playGameSFX("actionnw2")},1)):3==t&&(s.AudioManager.playGameSFX("actionlier1"),this.scheduleOnce(function(){s.AudioManager.playGameSFX("actionlier2")},1))},e.prototype.showDayOrNight=function(t,e){void 0===e&&(e=!1),0!=t.turns&&(this.node_top.active=!0,1==t.day_night?(s.AudioManager.playGameBGM("lrs_bg_bai.mp3"),this.shoDayComing(e),this.night_icon.active=!1,this.night_yueliang.active=!1,this.day_icon.active=!0,this.dayornight_icon.scaleY=1,this.day_icon.getChildByName("txt_bai").getComponent(cc.Label).string=t.turns):2==t.day_night&&(s.AudioManager.playGameBGM("lrs_bg_ye.mp3"),this.showNightComing(e),this.night_icon.active=!0,this.night_yueliang.active=!0,this.day_icon.active=!1,this.dayornight_icon.scaleY=-1,this.night_icon.getChildByName("txt_wan").getComponent(cc.Label).string=t.turns))},e.prototype.shoDayComing=function(t){var e=this;if(this.node_action.active=!1,1!=t){s.AudioManager.playGameSFX("lrs_2");var o=cc.view.getVisibleSize(),n=cc.instantiate(this.day_pre),i=-(o.width+n.width)/2;n.position=cc.v2(i,0),cc.tween(n).to(.5,{position:cc.v2(0,0)}).to(.5,{opacity:0}).start(),this.node.addChild(n),this.scheduleOnce(function(){e.node.removeChild(n)},1)}},e.prototype.showNightComing=function(t){var e=this;if(1!=t){s.AudioManager.playGameSFX("lrs_1");var o=cc.view.getVisibleSize(),n=cc.instantiate(this.night_pre),i=-(o.width+n.width)/2;n.position=cc.v2(i,0),cc.tween(n).to(.5,{position:cc.v2(0,0)}).to(.5,{opacity:0}).start(),this.node.addChild(n),this.scheduleOnce(function(){e.node.removeChild(n)},1)}},e.prototype.showStartGameAni=function(){var t=this,e=cc.view.getVisibleSize(),o=cc.instantiate(this.start_game),n=-(e.width+o.width)/2;o.position=cc.v2(n,0),cc.tween(o).to(.5,{position:cc.v2(0,0)}).to(1,{}).to(.5,{opacity:0}).start(),this.node.addChild(o),this.scheduleOnce(function(){t.node.removeChild(o)},2)},e.prototype.setChatPop=function(t){this.avatarPanel[t.sendPlayer.seat_id-1].setChatTxt(t.code)},e.prototype.onDestroy=function(){this.node.destroy()},i([h(c.default)],e.prototype,"alarm_clock",void 0),i([h(cc.Node)],e.prototype,"btn_start",void 0),i([h(cc.Node)],e.prototype,"node_left",void 0),i([h(cc.Node)],e.prototype,"node_right",void 0),i([h(cc.Node)],e.prototype,"node_top",void 0),i([h(cc.Node)],e.prototype,"node_spine",void 0),i([h(cc.Node)],e.prototype,"node_action",void 0),i([h(cc.Node)],e.prototype,"node_gametxt",void 0),i([h(cc.Prefab)],e.prototype,"gametxt_item",void 0),i([h(cc.Prefab)],e.prototype,"node_userout",void 0),i([h(cc.Prefab)],e.prototype,"node_pingannight",void 0),i([h(cc.Prefab)],e.prototype,"user_item",void 0),i([h(cc.Prefab)],e.prototype,"start_game",void 0),i([h(cc.Prefab)],e.prototype,"day_pre",void 0),i([h(cc.Prefab)],e.prototype,"night_pre",void 0),i([h(cc.Prefab)],e.prototype,"userselect_pre",void 0),i([h(cc.Label)],e.prototype,"day_num",void 0),i([h(cc.Label)],e.prototype,"night_num",void 0),e=i([d],e)}(cc.Component);o.default=_,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/AudioManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"../../public/TimeClock":void 0,"../model/CMD_LRS":"CMD_LRS"}],LRSChatView:[function(t,e,o){"use strict";cc._RF.push(e,"d3cdapoyoZMP4JOiF0f96KW","LRSChatView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(t){r(t)}}function c(t){try{s(n.throw(t))}catch(t){r(t)}}function s(t){t.done?i(t.value):new o(function(e){e(t.value)}).then(a,c)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../common/utils/Utils"),s=t("../../../manager/AudioManager"),l=t("../../../manager/NetManager"),p=t("../../../common/UIHelper"),u=t("../../../manager/UIManager"),d=t("../model/CMD_LRS"),h=t("../../../manager/ResManager"),_=cc._decorator,f=_.ccclass,y=_.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cancel=null,e.spr=null,e.btn_click=null,e.btn_txt=null,e.btn_bq=null,e.btn_list=null,e.user_panel=null,e.ScrollView_txt=null,e.ScrollView_bq=null,e.ScrollView_list=null,e.user_item=null,e.bq_item=null,e.txt_item=null,e.is_move_out=!1,e.is_done=!0,e.touch_state=!0,e.touch_time=5,e}return n(e,t),e.prototype.onLoad=function(){var t=this;c.default.addClickEventEND(this.btn_click,function(){t.onClickEvent()}),c.default.addClickEventEND(this.cancel,function(){t.onCancelEvent()}),c.default.addClickEventEND(this.btn_txt,function(){t.onClickChatEvent(1)}),c.default.addClickEventEND(this.btn_bq,function(){t.onClickChatEvent(2)}),c.default.addClickEventEND(this.btn_list,function(){t.onClickChatEvent(3)}),this.initListData()},e.prototype.onUpdateTimer=function(){this.touch_time=this.touch_time-1,this.touch_time<=0&&(this.touch_time=5,this.onKillTimer())},e.prototype.onKillTimer=function(){this.onUpdateTimer&&this.unschedule(this.onUpdateTimer),this.touch_state=!0},e.prototype.initListData=function(){var t=this;this.btn_list.getComponent(cc.Button).interactable=!1,this.btn_txt.getComponent(cc.Button).interactable=!0,this.btn_bq.getComponent(cc.Button).interactable=!0,this.ScrollView_list.active=!0,this.ScrollView_txt.active=!1,this.ScrollView_bq.active=!1,d.default.CHAT_TEXT_SELECT.forEach(function(e,o){t.initChatTxt(e,o)});for(var e=0;e<d.default.CHAT_PICTURE_BQ;e++)this.initChatBq(e+1);this.ScrollView_bq.getComponent(cc.ScrollView).scrollToTop(.01),this.ScrollView_list.getComponent(cc.ScrollView).scrollToBottom(.01)},e.prototype.addUserChatList=function(t){var e=t.sendPlayer,o=cc.find("view/content",this.ScrollView_list),n=cc.instantiate(this.user_item);n.active=!0;var i=n.getChildByName("headnode").getChildByName("head"),r=n.getChildByName("name"),a=n.getChildByName("txt"),l=n.getChildByName("bq");if(p.default.setHeadIcon(e.headimg_id,i),r.getComponent(cc.Label).string=c.default.getSubStringLengTxt(e.username)||c.default.getReplaceStrToStar(e.player_id),t.code<1e3){l.active=!0;var u="game/lrs/res/biaoqing/e"+this.PrefixZero(t.code,3);this.showBqView(u,l.getComponent(cc.Sprite))}else a.active=!0,a.getComponent(cc.Label).string=d.default.CHAT_TEXT_SELECT[t.code-1e3],s.AudioManager.playGameSFX("lrs_"+Number(t.code-997));o.addChild(n),this.onClickChatEvent(3)},e.prototype.showBqView=function(t,e){return r(this,void 0,void 0,function(){var o;return a(this,function(n){switch(n.label){case 0:return[4,h.ResManager.loadResAsync(t,cc.SpriteFrame)];case 1:return o=n.sent(),e.spriteFrame=o,[2]}})})},e.prototype.initChatTxt=function(t,e){var o=this,n=cc.find("view/content",this.ScrollView_txt),i=cc.instantiate(this.txt_item);i.active=!0,i.getChildByName("txt").getComponent(cc.Label).string=t,n.addChild(i,0,"item"+e),c.default.addClickEventEND(i,function(){o.onClickChattxtEvent(e)})},e.prototype.initChatBq=function(t){var e=this,o=cc.find("view/content",this.ScrollView_bq),n=cc.instantiate(this.bq_item);n.active=!0;var i=n.getChildByName("bq"),r="game/lrs/res/biaoqing/e"+this.PrefixZero(t,3);this.showBqView(r,i.getComponent(cc.Sprite)),o.addChild(n,0,"item"+t),c.default.addClickEventEND(n,function(){e.onClickChatBqEvent(t)})},e.prototype.PrefixZero=function(t,e){return(Array(e).join("0")+t).slice(-e)},e.prototype.onClickChatEvent=function(t){1==t?(this.btn_list.getComponent(cc.Button).interactable=!0,this.btn_txt.getComponent(cc.Button).interactable=!1,this.btn_bq.getComponent(cc.Button).interactable=!0,this.ScrollView_list.active=!1,this.ScrollView_txt.active=!0,this.ScrollView_bq.active=!1):2==t?(this.btn_list.getComponent(cc.Button).interactable=!0,this.btn_txt.getComponent(cc.Button).interactable=!0,this.btn_bq.getComponent(cc.Button).interactable=!1,this.ScrollView_list.active=!1,this.ScrollView_txt.active=!1,this.ScrollView_bq.active=!0):3==t&&(this.btn_list.getComponent(cc.Button).interactable=!1,this.btn_txt.getComponent(cc.Button).interactable=!0,this.btn_bq.getComponent(cc.Button).interactable=!0,this.ScrollView_list.active=!0,this.ScrollView_txt.active=!1,this.ScrollView_bq.active=!1)},e.prototype.onClickChatBqEvent=function(t){1==d.default.DAY_NIGHT_TYPE?this.touch_state?(this.touch_state=!1,this.schedule(this.onUpdateTimer,1),console.log("\u70b9\u51fb\u4e86\u54ea\u4e2a\u8868\u60c5",t),this.onClickChatEvent(3),this.ScrollView_list.getComponent(cc.ScrollView).scrollToBottom(.01),l.NetManager.getGameProtocol().sendFaceAndTextReq(t)):u.UIManager.showTips("\u53d1\u9001\u8fc7\u4e8e\u9891\u7e41\u8bf75\u79d2\u540e\u518d\u6b21\u5c1d\u8bd5"):2==d.default.DAY_NIGHT_TYPE&&u.UIManager.showTips("\u8868\u60c5\u4ec5\u80fd\u5728\u767d\u5929\u4f7f\u7528")},e.prototype.onClickChattxtEvent=function(t){1==d.default.DAY_NIGHT_TYPE?this.touch_state?(this.touch_state=!1,this.schedule(this.onUpdateTimer,1),console.log("\u70b9\u51fb\u4e86\u54ea\u4e2a\u6587\u5b57",t),this.onClickChatEvent(3),this.setCilckbgState(t),this.ScrollView_list.getComponent(cc.ScrollView).scrollToBottom(.01),l.NetManager.getGameProtocol().sendFaceAndTextReq(t+1e3)):u.UIManager.showTips("\u53d1\u9001\u8fc7\u4e8e\u9891\u7e41\u8bf75\u79d2\u540e\u518d\u6b21\u5c1d\u8bd5"):2==d.default.DAY_NIGHT_TYPE&&u.UIManager.showTips("\u5feb\u6377\u8bed\u4ec5\u80fd\u5728\u767d\u5929\u4f7f\u7528")},e.prototype.setCilckbgState=function(t){cc.find("view/content",this.ScrollView_txt).children.forEach(function(e,o){e.getChildByName("select").active=t==o})},e.prototype.onClickEvent=function(){console.log("\u70b9\u51fb\u804a\u5929\u9762\u677f"),this.is_done?(this.is_done=!1,this.is_move_out?this.playMoveBack():this.playMoveOut()):console.log("\u52a8\u753b\u8fd8\u672a\u7ed3\u675f \u4e0d\u53ef\u70b9\u51fb")},e.prototype.getMsgByNotify=function(){this.is_done?(this.is_done=!1,this.is_move_out?this.is_done=!0:this.playMoveOut()):console.log("\u52a8\u753b\u8fd8\u672a\u7ed3\u675f \u4e0d\u53ef\u70b9\u51fb")},e.prototype.onCancelEvent=function(){this.is_done?this.is_move_out?(this.is_done=!1,this.playMoveBack()):console.log("\u672a\u79fb\u52a8\u51fa\u53bb"):console.log("\u52a8\u753b\u8fd8\u672a\u7ed3\u675f \u4e0d\u53ef\u70b9\u51fb")},e.prototype.playMoveOut=function(){var t=this;this.user_panel.active=!0,this.is_move_out=!0;var e=cc.sequence(cc.moveBy(.5,cc.v2(-this.user_panel.width,0)),cc.callFunc(function(){t.is_done=!0}));this.spr.runAction(e)},e.prototype.playMoveBack=function(){var t=this,e=cc.sequence(cc.moveBy(.5,cc.v2(this.user_panel.width,0)),cc.callFunc(function(){t.user_panel.active=!1,t.is_done=!0,t.is_move_out=!1}));this.spr.runAction(e)},e.prototype.setClickBtn=function(t){this.btn_click.active=t,this.onCancelEvent()},i([y(cc.Node)],e.prototype,"cancel",void 0),i([y(cc.Node)],e.prototype,"spr",void 0),i([y(cc.Node)],e.prototype,"btn_click",void 0),i([y(cc.Node)],e.prototype,"btn_txt",void 0),i([y(cc.Node)],e.prototype,"btn_bq",void 0),i([y(cc.Node)],e.prototype,"btn_list",void 0),i([y(cc.Node)],e.prototype,"user_panel",void 0),i([y(cc.Node)],e.prototype,"ScrollView_txt",void 0),i([y(cc.Node)],e.prototype,"ScrollView_bq",void 0),i([y(cc.Node)],e.prototype,"ScrollView_list",void 0),i([y(cc.Node)],e.prototype,"user_item",void 0),i([y(cc.Node)],e.prototype,"bq_item",void 0),i([y(cc.Node)],e.prototype,"txt_item",void 0),e=i([f],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../../../common/UIHelper":void 0,"../../../common/utils/Utils":void 0,"../../../manager/AudioManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/ResManager":void 0,"../../../manager/UIManager":void 0,"../model/CMD_LRS":"CMD_LRS"}],LRSCmd:[function(t,e,o){"use strict";cc._RF.push(e,"4acdavA7lxHOJbJipsJjvSk","LRSCmd"),Object.defineProperty(o,"__esModule",{value:!0}),o.LRSCmd="222_0",o.ProtocolLRSCmd={GameStartNotify:o.LRSCmd+"_game_start_notify",SendIdenNotify:o.LRSCmd+"_send_card_notify",DayOrNightNotify:o.LRSCmd+"_day_or_night",TurnOperNotify:o.LRSCmd+"_turn_oper_notify",OperRes:o.LRSCmd+"_oper_res",GameConcludeNotify:o.LRSCmd+"_game_conclude_notify",GameReconnectInfo:o.LRSCmd+"_game_reconnect_info",PreOperRes:o.LRSCmd+"_pre_oper_res",ShowHistoryNotify:o.LRSCmd+"_show_history_notify",VoteResultRes:o.LRSCmd+"_vote_result_res",HistoryRes:o.LRSCmd+"_history_res",FaceAndTextRes:o.LRSCmd+"_face_text_res"},cc._RF.pop()},{}],LRSGameRecord:[function(t,e,o){"use strict";cc._RF.push(e,"eb34fObgEFLg6S/aSTvgj5Y","LRSGameRecord");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../view/base/PopupView"),a=t("../../../common/utils/Utils"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_close=null,e.txt_item=null,e.ScrollView=null,e.idcard=null,e.SCENE_TYPE=3,e}return n(e,t),e.prototype.initComponent=function(){a.default.addClickEventEND(this.btn_close,this.onTouchClickEvent.bind(this))},e.prototype.initData=function(t){var e=this;this.idcard=t.id_list,this.SCENE_TYPE=t.curNum,t.history.forEach(function(t,o){if(1==t.day_night){var n=cc.find("view/content",e.ScrollView),i=cc.instantiate(e.txt_item);n.addChild(i);var r=(a=cc.instantiate(e.txt_item)).getComponent("LRSHistoryTxt");n.addChild(a),r.init("\u7b2c"+t.turns+"\u5929"),r.initColor(cc.color(253,190,73),!0),e.createHistoryTxtItem(t.oneDayData)}else{n=cc.find("view/content",e.ScrollView);if(t.turns>1){i=cc.instantiate(e.txt_item);n.addChild(i)}var a;r=(a=cc.instantiate(e.txt_item)).getComponent("LRSHistoryTxt");n.addChild(a),e.createHistoryTxtItem(t.oneDayData),r.init("\u7b2c"+t.turns+"\u665a"),r.initColor(cc.color(91,192,244),!1)}})},e.prototype.createHistoryTxtItem=function(t){var e=this;t.forEach(function(t,o){var n=cc.find("view/content",e.ScrollView),i=cc.instantiate(e.txt_item),r=i.getComponent("LRSHistoryTxt");n.addChild(i);var a=t.oper_seat+"\u53f7"+e.getIDtxtMsg(e.idcard[t.oper_seat-1])+e.getTxtMsg(t.oper)+t.to_seat+"\u53f7"+e.getIDtxtMsg(e.idcard[t.to_seat-1]);3==e.SCENE_TYPE&&(a+=e.boolThreeSucc(e.idcard[t.oper_seat-1],e.idcard[t.to_seat-1])),r.init(a)})},e.prototype.getIDtxtMsg=function(t){var e="";switch(t){case 1:e="\u72fc\u4eba";break;case 2:e="\u5973\u5deb";break;case 3:e="\u730e\u4eba";break;case 4:e="\u5e73\u6c11"}return e},e.prototype.getTxtMsg=function(t){var e="";switch(t){case 1:e="\u6740\u6b7b";break;case 2:e="\u89e3\u6551";break;case 3:e="\u4e0d\u89e3\u6551";break;case 4:e="\u6bd2\u6b7b";break;case 5:e="\u653e\u5f03\u6bd2\u6b7b";break;case 6:e="\u67aa\u6bd9";break;case 7:e="\u653e\u5f03\u67aa\u6bd9";break;case 8:e="\u6295\u7968"}return e},e.prototype.boolThreeSucc=function(t,e){var o="";return 1==t?3==e?o="\uff0c\u51fb\u6740\u6210\u529f":4==e&&(o="\uff0c\u51fb\u6740\u5931\u8d25"):3==t?1==e?o="\uff0c\u730e\u6740\u6210\u529f":4==e&&(o="\uff0c\u730e\u6740\u5931\u8d25"):4==t&&(1==e?o="\uff0c\u6295\u7968\u6210\u529f":3==e&&(o="\uff0c\u6295\u7968\u5931\u8d25")),o},e.prototype.onTouchClickEvent=function(t){this.node.destroy();t.name},e.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},i([l(cc.Node)],e.prototype,"btn_close",void 0),i([l(cc.Prefab)],e.prototype,"txt_item",void 0),i([l(cc.Node)],e.prototype,"ScrollView",void 0),e=i([s],e)}(r.default);o.default=p,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../view/base/PopupView":void 0}],LRSGameScene:[function(t,e,o){"use strict";cc._RF.push(e,"b9fe8sZOKxAD7ZuVFQ5uGip","LRSGameScene");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./LRSGameView"),a=t("./model/CMD_LRS"),c=t("../../manager/EventManager"),s=t("../../net/NetCmd"),l=t("./protocol/LRSCmd"),p=t("../../manager/UIManager"),u=t("../../manager/DataManager"),d=cc._decorator,h=d.ccclass,_=d.property,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.GameView=null,e}return n(e,t),e.prototype.onLoad=function(){this.GameView.GameScene=this,this.initEvent()},e.prototype.initEvent=function(){c.EventManager.on(this,s.ProtocolGameCmd.GameLoginResp,this.onGameLoginResp.bind(this)),c.EventManager.on(this,s.ProtocolGameCmd.MatchResp,this.onMatchResp.bind(this)),c.EventManager.on(this,s.ProtocolGameCmd.CancelMatchResp,this.onCancelMatchResp.bind(this)),c.EventManager.on(this,l.ProtocolLRSCmd.GameStartNotify,this.onGameStartNotify.bind(this)),c.EventManager.on(this,l.ProtocolLRSCmd.SendIdenNotify,this.onSendIdenNotify.bind(this)),c.EventManager.on(this,l.ProtocolLRSCmd.DayOrNightNotify,this.onDayOrNightNotify.bind(this)),c.EventManager.on(this,l.ProtocolLRSCmd.TurnOperNotify,this.onTurnOperNotify.bind(this)),c.EventManager.on(this,l.ProtocolLRSCmd.OperRes,this.onOperRes.bind(this)),c.EventManager.on(this,l.ProtocolLRSCmd.GameConcludeNotify,this.onSubGameEnd.bind(this)),c.EventManager.on(this,l.ProtocolLRSCmd.GameReconnectInfo,this.recoverGameView.bind(this)),c.EventManager.on(this,l.ProtocolLRSCmd.PreOperRes,this.onPreOperRes.bind(this)),c.EventManager.on(this,l.ProtocolLRSCmd.ShowHistoryNotify,this.onShowHistoryNotify.bind(this)),c.EventManager.on(this,l.ProtocolLRSCmd.VoteResultRes,this.onVoteResultRes.bind(this)),c.EventManager.on(this,l.ProtocolLRSCmd.HistoryRes,this.onHistoryRes.bind(this)),c.EventManager.on(this,l.ProtocolLRSCmd.FaceAndTextRes,this.onFaceAndTextRes.bind(this))},e.prototype.onGameLoginResp=function(t){console.log("\u6548\u9a8c\u6210\u529f====>",t),p.UIManager.hideLoading(),this.GameView.resetGameView(t.state)},e.prototype.onMatchResp=function(t){1==t.status?(console.log("\u5339\u914d\u6210\u529f====>",t),p.UIManager.hideLoading()):2==t.status||4==t.status?(p.UIManager.showTips(2==t.status?"\u5339\u914d\u8d85\u65f6":"\u91d1\u5e01\u4e0d\u8db3"),this.GameView.showReady(),p.UIManager.hideLoading()):3==t.status?(console.log("\u5339\u914d\u88ab\u53d6\u6d88"),p.UIManager.hideLoading()):100==t.status&&(p.UIManager.showTips("\u5339\u914d\u5931\u8d25"),this.GameView.showReady(),p.UIManager.hideLoading())},e.prototype.onCancelMatchResp=function(t){p.UIManager.showTips(t.ok?"\u53d6\u6d88\u5339\u914d\u6210\u529f":"\u53d6\u6d88\u5339\u914d\u5931\u8d25"),t.ok&&this.GameView.showReady()},e.prototype.onGameStartNotify=function(t){console.log("%c \u6e38\u620f\u5f00\u59cb","font-size:24px;color:red;",t),this.GameView.resetGameView(1),console.log(a.default.PLAYER_DATAS),a.default.PLAYER_DATAS.forEach(function(e,o){console.log(e),t.player_list[o].state=e.state}),a.default.PLAYER_DATAS=t.player_list,console.log("%c\u6240\u6709\u7528\u6237\u4fe1\u606f======>","color:green",a.default.PLAYER_DATAS),a.default.PLAYER_DATAS.forEach(function(t,e){t.player_id==u.DataManager.userInfo.userid&&(a.default.MY_DATA=t,a.default.MY_SEAT=t.seat_id,console.log("\u6211\u7684\u7528\u6237\u4fe1\u606f======>",t))}),this.GameView.initGameView(),this.GameView.StartGame(t)},e.prototype.onSendIdenNotify=function(t){console.log("\u5206\u53d1\u8eab\u4efd\u5361",t),this.GameView.onSendIdenNotify(t)},e.prototype.onDayOrNightNotify=function(t){console.log("\u6e38\u620f\u6d41\u7a0b\u5e7f\u64ad\uff0c\u767d\u5929\u6216\u8005\u9ed1\u591c\uff0c\u73a9\u5bb6\u64cd\u4f5c",t),this.GameView.onDayOrNightNotify(t)},e.prototype.onTurnOperNotify=function(t){console.log(" \u5f53\u524d\u73a9\u5bb6\u64cd\u4f5c\u901a\u77e5\uff0c\u975e\u81ea\u5df1\u4e0d\u901a\u77e5",t),this.GameView.onTurnOperNotify(t)},e.prototype.onPreOperRes=function(t){console.log("\u5f53\u524d\u73a9\u5bb6\u7279\u6b8a\u64cd\u4f5c",t),this.GameView.onPreOperRes(t)},e.prototype.onShowHistoryNotify=function(t){console.log("\u5c55\u793a\u5f53\u524d\u516c\u793a\u4fe1\u606f",t),this.GameView.onShowHistoryNotify(t)},e.prototype.onOperRes=function(t){console.log("\u81ea\u5df1\u64cd\u4f5c\u7684\u56de\u5e94",t),this.GameView.onOperRes(t)},e.prototype.onVoteResultRes=function(t){console.log("\u8fdb\u5165\u8fd9\u91cc\u5c55\u793a\u7b2c\u4e00\u8f6e\u6295\u7968\u4fe1\u606f\uff0c\u5373\u5c06\u6765\u4e34\u7b2c\u4e8c\u8f6e\u6295\u7968",t),this.GameView.onVoteResultRes(t)},e.prototype.onHistoryRes=function(t){console.log("\u6295\u7968\u8bb0\u5f55\u6216\u8005\u662f\u591c\u665a\u8bb0\u5f55",t),this.GameView.onHistoryRes(t)},e.prototype.onFaceAndTextRes=function(t){console.log("\u589e\u52a0\u804a\u5929\u8bb0\u5f55",t),this.GameView.onFaceAndTextRes(t)},e.prototype.onSubGameEnd=function(t){console.log("\u901a\u77e5\u7ed3\u7b97",t),this.GameView.onSubGameEnd(t)},e.prototype.recoverGameView=function(t){console.log("\u91cd\u8fde\u6062\u590d\u573a\u666f",t),this.GameView.recoverGameView(t)},e.prototype.onDestroy=function(){c.EventManager.off(this)},i([_(r.default)],e.prototype,"GameView",void 0),e=i([h],e)}(cc.Component);o.default=f,cc._RF.pop()},{"../../manager/DataManager":void 0,"../../manager/EventManager":void 0,"../../manager/UIManager":void 0,"../../net/NetCmd":void 0,"./LRSGameView":"LRSGameView","./model/CMD_LRS":"CMD_LRS","./protocol/LRSCmd":"LRSCmd"}],LRSGameView:[function(t,e,o){"use strict";cc._RF.push(e,"e35a1Sbu7tKUbp3iulneLCh","LRSGameView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./model/CMD_LRS"),a=t("./ui/LRSTopPanel"),c=t("./ui/LRSCenterPanel"),s=t("./ui/LRSAvatarPanel"),l=t("./ui/LRSChatView"),p=t("../../manager/DataManager"),u=t("../../manager/AudioManager"),d=t("../../manager/UIManager"),h=t("../../manager/NetManager"),_=cc._decorator,f=_.ccclass,y=_.property,m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.avatarPanel=[],e.spr_bg=null,e.node_top=null,e.node_center=null,e.topPanel=null,e.centerPanel=null,e.chatView=null,e.UINode=null,e.GameScene=null,e.isStartGame=!1,e}return n(e,t),e.prototype.onLoad=function(){this.initView()},e.prototype.initView=function(){this.node_top=cc.find("node_top",this.node),this.node_center=cc.find("node_center",this.node),this.topPanel.initzation(this),this.centerPanel.initzation(this)},e.prototype.initNode=function(){},e.prototype.initGameView=function(){this.centerPanel.initView()},e.prototype.recoverGameView=function(t){if(this.resetGameView(1),this.centerPanel.hideReadyBtn(),r.default.PLAYER_DATAS=t.player_list,r.default.PLAYER_DATAS.forEach(function(t,e){t.player_id==p.DataManager.userInfo.userid&&(r.default.MY_DATA=t)}),r.default.MY_ID=t.iden,r.default.MY_SEAT=t.my_chairid,this.initGameView(),this.centerPanel.initSelfData(),r.default.PLAYER_DATAS.length>3&&this.centerPanel.gameRecordDayOrNight(t.history,t.turns,t.day_night),this.isStartGame=!0,5==t.oper_state){this.isStartGame=!1;var e={player_list:t.player_list,id_list:t.id_list,live_chairids:t.live_chairids,history:t.history};this.onSubGameEnd(e)}else this.chatView.setClickBtn(!0),this.centerPanel.showDayOrNight(t,!0),t.time_out=t.leftTime,this.onDayOrNightNotify(t,!0),1==t.isMyTurn&&this.onTurnOperNotify(t)},e.prototype.showReady=function(){this.centerPanel.showReadyBtn()},e.prototype.resetGameView=function(t){this.unscheduleAllCallbacks(),this.node.stopAllActions(),this.UINode.removeAllChildren(),this.topPanel.setRoomInfo(),this.centerPanel.resetUserList(),this.centerPanel.onKillTimer(),u.AudioManager.playGameBGM("lrs_bg_bai.mp3"),this.spr_bg.opacity=0,0==t&&this.showReady(),this.initData(),this.chatView.setClickBtn(!1),cc.find("bg3",this.node).active=!1},e.prototype.initData=function(){r.default.PLAYER_DATAS=[]},e.prototype.StartGame=function(t){d.UIManager.hideLoading(),this.centerPanel.hideReadyBtn(),this.isStartGame=!0,h.NetManager.protocolGameCommon.needFlushGold=!1,this.centerPanel.showStartGameAni(),this.chatView.setClickBtn(!0),cc.find("bg3",this.node).active=!0},e.prototype.onSendIdenNotify=function(t){d.UIManager.popup("game/lrs/prefab/LRSSendCard",t),r.default.MY_ID=t.iden,this.centerPanel.initSelfData()},e.prototype.onShowHistoryNotify=function(t){var e=this;t.live_chairids.length>0&&t.live_chairids.forEach(function(t,o){e.centerPanel.setUserAliveState(t,o)}),this.centerPanel.userOutNotify(t),r.default.PLAYER_DATAS.length>3&&this.centerPanel.gameRecordDayOrNight(t.history,t.turns,t.day_night),this.centerPanel.onKillTimer()},e.prototype.onHistoryRes=function(t){t.time_out=3,d.UIManager.popup("game/lrs/prefab/LRSVoteView",t)},e.prototype.onFaceAndTextRes=function(t){this.chatView.onCancelEvent(),this.centerPanel.setChatPop(t),this.chatView.addUserChatList(t)},e.prototype.onVoteResultRes=function(t){this.centerPanel.onKillTimer(),d.UIManager.popup("game/lrs/prefab/LRSVoteView",t),3==r.default.PLAYER_DATAS.length&&this.centerPanel.resetActionIcon()},e.prototype.onPreOperRes=function(t){},e.prototype.onDayOrNightNotify=function(t,e){var o=this;void 0===e&&(e=!1),this.centerPanel.onKillTimer(),2==t.day_night?this.spr_bg.runAction(cc.fadeIn(.5)):this.spr_bg.runAction(cc.fadeOut(.5)),t.live_chairids.length>0&&t.live_chairids.forEach(function(t,e){o.centerPanel.setUserAliveState(t,e)}),r.default.DAY_NIGHT_TYPE=t.day_night,1==t.oper_state?(this.centerPanel.showDayOrNight(t,e),this.scheduleOnce(function(){o.centerPanel.showNightAction(1)},3)):2==t.oper_state?this.centerPanel.showNightAction(2):3==t.oper_state?this.centerPanel.showNightAction(3):4==t.oper_state?(this.centerPanel.showDayOrNight(t,e),3==r.default.PLAYER_DATAS.length&&4!=r.default.MY_ID&&this.scheduleOnce(function(){o.centerPanel.showDayAction(4)},2)):5==t.oper_state&&(this.centerPanel.onKillTimer(),1==r.default.CAN_CLICK_STATE?this.centerPanel.setGameTimer({limit_time:t.time_out,playAudio:!0,vibrate:!0}):this.centerPanel.setGameTimer({limit_time:t.time_out}))},e.prototype.onTurnOperNotify=function(t){r.default.CAN_CLICK_STATE=!0,this.centerPanel.userSelectNotify(t),this.centerPanel.onKillTimer(),this.centerPanel.setGameTimer({limit_time:t.time_out,playAudio:!0,vibrate:!0})},e.prototype.onOperRes=function(t){if(0==t.ret){if(1==t.oper_type||2==t.oper_type||4==t.oper_type||6==t.oper_type){var e=this.centerPanel.getUserMsgBySeatId(t.to_chairId);this.centerPanel.playKillAction(t.oper_type,e)}this.playSelfActionSound(t.oper_type),this.centerPanel.pauseVibrate(),this.centerPanel.pauseAudio()}},e.prototype.playSelfActionSound=function(t){1==t?u.AudioManager.playGameSFX("langrenjs"):2==t?u.AudioManager.playGameSFX("nvwujy"):4==t?u.AudioManager.playGameSFX("nvwudy"):6==t?u.AudioManager.playGameSFX("lierenkq"):8==t&&u.AudioManager.playGameSFX("alltp")},e.prototype.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},e.prototype.onSubGameEnd=function(t){this.isStartGame=!1,t.curNum=r.default.PLAYER_DATAS.length,this.resetGameView(0),r.default.CAN_CLICK_STATE=!1,t.call=this.clickGoGame.bind(this),d.UIManager.popup("game/lrs/prefab/LRSSettlement",t)},e.prototype.clickGoGame=function(){this.centerPanel.hideReadyBtn()},e.prototype.onSubLeaveRoom=function(t){},e.prototype.onSubKickOutRoom=function(t){},i([y(s.default)],e.prototype,"avatarPanel",void 0),i([y(cc.Node)],e.prototype,"spr_bg",void 0),i([y(cc.Node)],e.prototype,"node_top",void 0),i([y(cc.Node)],e.prototype,"node_center",void 0),i([y(a.default)],e.prototype,"topPanel",void 0),i([y(c.default)],e.prototype,"centerPanel",void 0),i([y(l.default)],e.prototype,"chatView",void 0),i([y(cc.Node)],e.prototype,"UINode",void 0),e=i([f],e)}(cc.Component);o.default=m,cc._RF.pop()},{"../../manager/AudioManager":void 0,"../../manager/DataManager":void 0,"../../manager/NetManager":void 0,"../../manager/UIManager":void 0,"./model/CMD_LRS":"CMD_LRS","./ui/LRSAvatarPanel":"LRSAvatarPanel","./ui/LRSCenterPanel":"LRSCenterPanel","./ui/LRSChatView":"LRSChatView","./ui/LRSTopPanel":"LRSTopPanel"}],LRSHistoryTxt:[function(t,e,o){"use strict";cc._RF.push(e,"c8e40uMoSVNbYStTXMmGVHU","LRSHistoryTxt");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/utils/Utils"),a=t("../../../manager/NetManager"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txt_label=null,e.btn_List=null,e}return n(e,t),e.prototype.init=function(t){this.txt_label.string=t},e.prototype.initBtn=function(t){this.btn_List.active=!0,r.default.addClickEventEND(this.btn_List,this.onTouchListEvent.bind(this),t)},e.prototype.onTouchListEvent=function(t,e){var o={turns:e,day_night:1};a.NetManager.getGameProtocol().sendHistoryReq(o)},e.prototype.initColor=function(t,e){this.txt_label.node.color=t,this.node.getChildByName("day_node").active=e,this.node.getChildByName("night_node").active=!e},e.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},i([l(cc.Label)],e.prototype,"txt_label",void 0),i([l(cc.Node)],e.prototype,"btn_List",void 0),e=i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/NetManager":void 0}],LRSPopOutMsg:[function(t,e,o){"use strict";cc._RF.push(e,"cdbb64RvL9EpYcDESxRiHp6","LRSPopOutMsg");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/utils/Utils"),a=t("../../../manager/AudioManager"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.tipstxt=[],e.node_user=[],e.btn_cancel=null,e.user_item=null,e.clock_times=2,e.call_func=null,e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.initPingan=function(t,e){this.call_func=e,this.clock_times=t.time_out,1==t.day_night?this.tipstxt[2].getComponent(cc.Label).string="\u5e73\u5b89\u65e5":(this.tipstxt[0].getComponent(cc.Label).string="\u6628\u665a\u65e0\u4eba\u51fa\u5c40",this.tipstxt[1].active=!1,this.tipstxt[2].getComponent(cc.Label).string="\u5e73\u5b89\u591c"),this.initNode()},e.prototype.initNode=function(){this.schedule(this.onUpdateTimer,1),r.default.addClickEventEND(this.btn_cancel,this.onEvenClickButton.bind(this))},e.prototype.onEvenClickButton=function(t){this.onKillTimer()},e.prototype.initOut=function(t,e){var o=this;if(this.clock_times=t.time_out,1==t.day_night){for(var n=0;n<3;n++)if(void 0!=t.out_seat[n]){this.tipstxt[n].active=!0,this.tipstxt[n].getComponent(cc.Label).string="["+t.out_seat[n]+"\u53f7]";var i=this.node.getChildByName("tips"+Number(2*n+1)),r=this.node.getChildByName("tips"+Number(2*n+2));i.active=!1,r.active=!0,this.tipstxt[n].x=this.tipstxt[n].x-20,r.x=r.x-20}this.node.getChildByName("tips1").active=!1}else for(n=0;n<3;n++)void 0!=t.out_seat[n]&&(this.tipstxt[n].active=!0,this.tipstxt[n].getComponent(cc.Label).string="["+t.out_seat[n]+"\u53f7]",this.node.getChildByName("tips"+Number(2*n+1)).active=!0,this.node.getChildByName("tips"+Number(2*n+2)).active=!0);e.forEach(function(t,e){var n=cc.instantiate(o.user_item);o.node_user[e].addChild(n),n.getComponent("LRSAvatarPanel").setUserInfo(t)}),2==e.length&&(this.node_user[0].x=-200,this.node_user[1].x=200),this.initNode(),a.AudioManager.playGameSFX("userout")},e.prototype.onUpdateTimer=function(){this.clock_times=this.clock_times-1,this.clock_times<=0&&(this.clock_times=0,this.onKillTimer())},e.prototype.onKillTimer=function(){this.onUpdateTimer&&this.unschedule(this.onUpdateTimer),this.node.active=!1,this.node.destroy()},i([l(cc.Node)],e.prototype,"tipstxt",void 0),i([l(cc.Node)],e.prototype,"node_user",void 0),i([l(cc.Node)],e.prototype,"btn_cancel",void 0),i([l(cc.Prefab)],e.prototype,"user_item",void 0),e=i([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/AudioManager":void 0}],LRSRoomView:[function(t,e,o){"use strict";cc._RF.push(e,"be32eqp+CFCiJrtI2YPvAU2","LRSRoomView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../view/RoomView"),a=t("../../../manager/UIManager"),c=cc._decorator,s=c.ccclass,l=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.initEvent=function(){t.prototype.initEvent.call(this)},e.prototype.onClickSet=function(){a.UIManager.popup("game/lrs/prefab/LRSSetting")},e.prototype.onClickHelp=function(){a.UIManager.popup("game/lrs/prefab/LRSRuleView")},e.prototype.onGetGameRecordDetailResp=function(t){a.UIManager.popup("game/lrs/prefab/LRSHallRecord",t)},e=i([s],e)}(r.default));o.default=l,cc._RF.pop()},{"../../../manager/UIManager":void 0,"../../../view/RoomView":void 0}],LRSRuleView:[function(t,e,o){"use strict";cc._RF.push(e,"73328s61uxCc42HWeigAXgM","LRSRuleView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(t){r(t)}}function c(t){try{s(n.throw(t))}catch(t){r(t)}}function s(t){t.done?i(t.value):new o(function(e){e(t.value)}).then(a,c)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../view/base/PopupView"),s=t("../../../common/utils/Utils"),l=t("../../../manager/ResManager"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_close=null,e.btn_gamerule=null,e.btn_resultrule=null,e.btn_sysrule=null,e.context_node=[],e.select_sp=[],e.normal_txtsp=[],e.select_txtsp=[],e.frameSp=null,e.frameSp1=null,e}return n(e,t),e.prototype.initComponent=function(){s.default.addClickEventEND(this.btn_close,this.onTouchClickEvent.bind(this)),s.default.addClickEventEND(this.btn_gamerule,this.onTouchClickEvent.bind(this)),s.default.addClickEventEND(this.btn_resultrule,this.onTouchClickEvent.bind(this)),s.default.addClickEventEND(this.btn_sysrule,this.onTouchClickEvent.bind(this)),this.initData()},e.prototype.initData=function(){return r(this,void 0,void 0,function(){var t,e;return a(this,function(o){switch(o.label){case 0:return t=this,[4,l.ResManager.loadResAsync("game/lrs/res/rule/btn_lrs_normal",cc.SpriteFrame)];case 1:return t.frameSp=o.sent(),e=this,[4,l.ResManager.loadResAsync("game/lrs/res/rule/btn_lrs_click",cc.SpriteFrame)];case 2:return e.frameSp1=o.sent(),[2]}})})},e.prototype.onTouchClickEvent=function(t){var e=t.name;"btn_gamerule"==e?this.selectFrame(0):"btn_resultrule"==e?this.selectFrame(1):"btn_sysrule"==e?this.selectFrame(2):"btn_close"==e&&this.node.destroy()},e.prototype.selectFrame=function(t){this.btn_gamerule.getComponent(cc.Sprite).spriteFrame=this.frameSp,this.btn_resultrule.getComponent(cc.Sprite).spriteFrame=this.frameSp,this.btn_sysrule.getComponent(cc.Sprite).spriteFrame=this.frameSp,0==t?this.btn_gamerule.getComponent(cc.Sprite).spriteFrame=this.frameSp1:1==t?this.btn_resultrule.getComponent(cc.Sprite).spriteFrame=this.frameSp1:2==t&&(this.btn_sysrule.getComponent(cc.Sprite).spriteFrame=this.frameSp1);for(var e=0;e<3;e++)e==t?(this.context_node[t].active=!0,this.select_sp[t].spriteFrame=this.select_txtsp[t]):(this.context_node[e].active=!1,this.select_sp[e].spriteFrame=this.normal_txtsp[e])},e.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},i([d(cc.Node)],e.prototype,"btn_close",void 0),i([d(cc.Node)],e.prototype,"btn_gamerule",void 0),i([d(cc.Node)],e.prototype,"btn_resultrule",void 0),i([d(cc.Node)],e.prototype,"btn_sysrule",void 0),i([d(cc.Node)],e.prototype,"context_node",void 0),i([d(cc.Sprite)],e.prototype,"select_sp",void 0),i([d(cc.SpriteFrame)],e.prototype,"normal_txtsp",void 0),i([d(cc.SpriteFrame)],e.prototype,"select_txtsp",void 0),e=i([u],e)}(c.default);o.default=h,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/ResManager":void 0,"../../../view/base/PopupView":void 0}],LRSSendCard:[function(t,e,o){"use strict";cc._RF.push(e,"c19eeIblRFPfYKSVU4fp5Aa","LRSSendCard");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../view/base/PopupView"),a=t("../../../common/utils/Utils"),c=t("../../../manager/AudioManager"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.btn_sure=null,e.id_str=null,e.detile_str=null,e.frame_card=null,e.frameIcon=[],e.clock_times=2,e}return n(e,t),e.prototype.onLoad=function(){a.default.addClickEventEND(this.btn_sure,this.onSureTouchEvent.bind(this))},e.prototype.initData=function(t){var e="",o="";1==t.iden?(e="\u3010\u72fc\u4eba\u3011",o="\u6bcf\u5929\u665a\u4e0a\u90fd\u6740\u6b7b\u4e00\u4e2a\u4eba",c.AudioManager.playGameSFX("cardlangr")):2==t.iden?(e="\u3010\u5973\u5deb\u3011",o="\u53ef\u4f7f\u7528\u89e3\u836f\u6216\u6bd2\u836f",c.AudioManager.playGameSFX("cardnw")):3==t.iden?(e="\u3010\u730e\u4eba\u3011",o="\u53ef\u5f00\u67aa\u51fb\u6740\u4e00\u4e2a\u73a9\u5bb6",c.AudioManager.playGameSFX("cardlier")):4==t.iden&&(e="\u3010\u5e73\u6c11\u3011",o="\u4ec5\u80fd\u5728\u767d\u5929\u6295\u7968",c.AudioManager.playGameSFX("cardpm")),this.id_str.string=e,this.frame_card.spriteFrame=this.frameIcon[Number(t.iden)-1],this.detile_str.string=o,this.schedule(this.onUpdateTimer,1)},e.prototype.onUpdateTimer=function(){this.clock_times=this.clock_times-1,this.clock_times<=0&&(this.clock_times=0,this.onKillTimer())},e.prototype.onKillTimer=function(){this.onUpdateTimer&&this.unschedule(this.onUpdateTimer),this.onSureTouchEvent()},e.prototype.onSureTouchEvent=function(){console.log("\u73a9\u5bb6\u4e3b\u52a8\u5173\u95ed"),this.onUpdateTimer&&this.unschedule(this.onUpdateTimer),this.node.destroy()},i([p(cc.Node)],e.prototype,"btn_sure",void 0),i([p(cc.Label)],e.prototype,"id_str",void 0),i([p(cc.Label)],e.prototype,"detile_str",void 0),i([p(cc.Sprite)],e.prototype,"frame_card",void 0),i([p(cc.SpriteFrame)],e.prototype,"frameIcon",void 0),e=i([l],e)}(r.default);o.default=u,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/AudioManager":void 0,"../../../view/base/PopupView":void 0}],LRSSetting:[function(t,e,o){"use strict";cc._RF.push(e,"9577elA0C1M2Y+dPgD5k1vv","LRSSetting");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../view/hall/HallSetting"),a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.initComponent=function(){t.prototype.initComponent.call(this),this.getItem("btn_select_bgm").registerClick(this.onClickBgm.bind(this))},e.prototype.onClickBgm=function(){this.getItem("node_select").active=!this.getItem("node_select").active,this.getItem("img_arrow").scaleY=this.getItem("node_select").active?1:-1,this.getItem("node_select").active&&this.updateBgms()},e=i([c],e)}(r.default));o.default=s,cc._RF.pop()},{"../../view/hall/HallSetting":void 0}],LRSSettlement:[function(t,e,o){"use strict";cc._RF.push(e,"93b0dtIMndDdqinhg01YqSi","LRSSettlement");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../view/base/PopupView"),a=t("../../../common/utils/Utils"),c=t("../../../manager/NetManager"),s=t("../../../manager/DataManager"),l=t("../../../manager/UIManager"),p=t("./LRSAvatarPanel"),u=cc._decorator,d=u.ccclass,h=u.property,_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title_List=[],e.btn_share=null,e.btn_sure=null,e.btn_close=null,e.btn_list=null,e.node_left=null,e.node_right=null,e.user_node=null,e.allEventData=null,e.win_gold=0,e.callback=null,e}return n(e,t),e.prototype.onLoad=function(){a.default.addClickEventEND(this.btn_share,this.onTouchClickEvent.bind(this)),a.default.addClickEventEND(this.btn_sure,this.onTouchClickEvent.bind(this)),a.default.addClickEventEND(this.btn_close,this.onTouchClickEvent.bind(this)),a.default.addClickEventEND(this.btn_list,this.onTouchClickEvent.bind(this))},e.prototype.initData=function(t){var e=this;this.callback=t.call,this.node_left.removeAllChildren(),this.node_right.removeAllChildren(),this.allEventData=t,3==t.player_list.length&&(this.node_left.y=this.node_left.y-40,this.node_right.y=this.node_right.y-40,this.node_left.getComponent(cc.Layout).spacingY=0),t.player_list.forEach(function(o,n){s.DataManager.userInfo.userid==o.player_id&&(e.setTitleType(o.score),e.btn_share.active=o.score>0,e.win_gold=o.score);var i=null;if(n%2==0)i=cc.instantiate(e.user_node),e.node_left.addChild(i,0,"item"+n);else{var r=(i=cc.instantiate(e.user_node)).getChildByName("score");r.anchorX=1,r.x=10-r.x,e.node_right.addChild(i,0,"item"+n)}var a=i.getComponent(p.default);if(a.initzation(e,"",""),a.setGameOverUserInfo(o),a.setHeadClickState(!1),a.resetIDCard(t.id_list[o.seat_id-1]),a.setUserResultScore(o.score),a.setVipFrame(o.vip_level),a.setVipLevel(o.vip_level),t.live_chairids.length>0&&Number(o.seat_id)-1>=0&&a.setUserOverState(t.live_chairids[o.seat_id-1]),c.NetManager.protocolGameCommon.needFlushGold)for(var l=0;l<c.NetManager.protocolGameCommon.flushPlayerInfo.length;l++){var u=c.NetManager.protocolGameCommon.flushPlayerInfo[l].player_id,d=c.NetManager.protocolGameCommon.flushPlayerInfo[l].gold;u==o.player_id&&a.setUserScore(d)}n==t.player_list.length-1&&(c.NetManager.protocolGameCommon.needFlushGold=!1)})},e.prototype.setTitleType=function(t){Number(t)>0?this.title_List[0].active=!0:0==Number(t)?this.title_List[2].active=!0:this.title_List[1].active=!0},e.prototype.onTouchClickEvent=function(t){var e=t.name;if("btn_sure"==e){this.node.destroy();l.UIManager.showLoading("\u6b63\u5728\u5feb\u901f\u5339\u914d\u4e2d...",!0,function(){c.NetManager.protocolGameCommon.sendCancelMatch()}),c.NetManager.protocolGameCommon.sendMatchReq(),this.callback()}else if("btn_close"==e)this.node.destroy();else if("btn_list"==e)l.UIManager.popup("game/lrs/prefab/LRSGameRecord",this.allEventData);else if("btn_share"==e){var o=parseFloat(this.win_gold+"");c.NetManager.protocolChat.sendChatShareRoomReq(o.toFixed(2)+"")}},e.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},i([h(cc.Node)],e.prototype,"title_List",void 0),i([h(cc.Node)],e.prototype,"btn_share",void 0),i([h(cc.Node)],e.prototype,"btn_sure",void 0),i([h(cc.Node)],e.prototype,"btn_close",void 0),i([h(cc.Node)],e.prototype,"btn_list",void 0),i([h(cc.Node)],e.prototype,"node_left",void 0),i([h(cc.Node)],e.prototype,"node_right",void 0),i([h(cc.Prefab)],e.prototype,"user_node",void 0),e=i([d],e)}(r.default);o.default=_,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/DataManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"../../../view/base/PopupView":void 0,"./LRSAvatarPanel":"LRSAvatarPanel"}],LRSTool:[function(t,e,o){"use strict";cc._RF.push(e,"f47680LEyJNgIKF+0zRWoWx","LRSTool");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./model/CMD_LRS"),a=cc._decorator,c=a.ccclass,s=(a.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return n(e,t),o=e,e.getInstance=function(){return null==this.instance&&(this.instance=new o),this.instance},e.prototype.getUserSexByID=function(t){for(var e=0;e<r.default.PLAYER_DATAS.length;e++){var o=r.default.PLAYER_DATAS[e];if(o.seat_id==t)return o.sex}},e=o=i([c],e)}(cc.Component));o.default=s,cc._RF.pop()},{"./model/CMD_LRS":"CMD_LRS"}],LRSTopPanel:[function(t,e,o){"use strict";cc._RF.push(e,"7b94ar4B85OhJGa8kdkAPKd","LRSTopPanel");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/utils/Utils"),a=t("../../../manager/UIManager"),c=t("../../../manager/NetManager"),s=cc._decorator,l=s.ccclass,p=s.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pot_num=null,e.table_num=null,e.room_id=null,e.room_id_node=null,e.btn_cancel=null,e.btn_menu=null,e.menuPanel=null,e.btn_back=null,e.btn_rule=null,e.btn_set=null,e._gameView=null,e}return n(e,t),e.prototype.initzation=function(t){this._gameView=t,this.initView(),this.addEvenListener()},e.prototype.addEvenListener=function(){r.default.addClickEventEND(this.btn_cancel,this.onEvenClickButton.bind(this)),r.default.addClickEventEND(this.btn_menu,this.onEvenClickButton.bind(this)),r.default.addClickEventEND(this.btn_back,this.onEvenClickButton.bind(this)),r.default.addClickEventEND(this.btn_rule,this.onEvenClickButton.bind(this)),r.default.addClickEventEND(this.btn_set,this.onEvenClickButton.bind(this))},e.prototype.initView=function(){this.table_num.string=""},e.prototype.setRoomInfo=function(t){this.table_num.string=t||""},e.prototype.setRoomId=function(t){void 0===t&&(t=""),this.room_id_node.active=!0,this.room_id.string=t},e.prototype.onEvenClickButton=function(t){var e=t.name;"btn_back"==e?(console.log("quit game"),c.NetManager.protocolGameCommon.sendLeaveGame()):"btn_menu"==e?(this.menuPanel.active=!this.menuPanel.active,this.btn_cancel.active=this.menuPanel.active):"btn_rule"==e?a.UIManager.popup("game/lrs/prefab/LRSRuleView"):"btn_set"==e?a.UIManager.popup("game/lrs/prefab/LRSSetting"):"btn_cancel"==e&&(this.menuPanel.active=!1,this.btn_cancel.active=!1)},i([p(cc.Label)],e.prototype,"pot_num",void 0),i([p(cc.Label)],e.prototype,"table_num",void 0),i([p(cc.Label)],e.prototype,"room_id",void 0),i([p(cc.Node)],e.prototype,"room_id_node",void 0),i([p(cc.Node)],e.prototype,"btn_cancel",void 0),i([p(cc.Node)],e.prototype,"btn_menu",void 0),i([p(cc.Node)],e.prototype,"menuPanel",void 0),i([p(cc.Node)],e.prototype,"btn_back",void 0),i([p(cc.Node)],e.prototype,"btn_rule",void 0),i([p(cc.Node)],e.prototype,"btn_set",void 0),e=i([l],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0}],LRSUserSelect:[function(t,e,o){"use strict";cc._RF.push(e,"6d2d8i90dVLP6nCPZ3WZ7RX","LRSUserSelect");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(t){r(t)}}function c(t){try{s(n.throw(t))}catch(t){r(t)}}function s(t){t.done?i(t.value):new o(function(e){e(t.value)}).then(a,c)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../common/utils/Utils"),s=t("../../../manager/UIManager"),l=t("../../../common/UIHelper"),p=t("../../../manager/NetManager"),u=t("../model/CMD_LRS"),d=t("../../../manager/ResManager"),h=cc._decorator,_=h.ccclass,f=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.node_people=[],e.node_tipstxt=[],e.node_arrowcolor=[],e.btn_sure=null,e.btn_cancel=null,e.prop_icon=null,e.prop_txticon=null,e.user_node=null,e.propIconList=[],e.txtIconList=[],e.clock_times=3,e.enent_id=0,e.call_func=null,e.to_chairId=0,e.tips_txtlist={langr:["\u3010\u51fb\u6740\u3011","\u6309\u94ae\u786e\u5b9a\u6740\u6b7b\u9009\u4e2d","\u7684\u73a9\u5bb6","\u51fb\u6740\uff01"],nwdy:["\u3010\u6bd2\u6740\u3011","\u6309\u94ae\u786e\u5b9a\u4f7f\u7528\u6bd2\u836f\uff0c","\u6bd2\u6b7b\u9009\u4e2d\u7684\u73a9\u5bb6","\u6bd2\u6740\uff01","\u653e\u5f03\u6bd2\u6740"],nwjy:["\u3010\u4f7f\u7528\u3011","\u6309\u94ae\u786e\u5b9a\u4f7f\u7528\u89e3\u836f\uff0c","\u89e3\u6551\u521a\u88ab\u6740\u6b7b\u7684\u73a9\u5bb6","\u4f7f\u7528\uff01","\u653e\u5f03\u4f7f\u7528"],lier:["\u3010\u5f00\u67aa\u3011","\u6309\u94ae\u786e\u5b9a\u6740\u6b7b\u9009\u4e2d","\u7684\u73a9\u5bb6","\u5f00\u67aa\uff01","\u653e\u5f03\u5f00\u67aa"]},e}return n(e,t),e.prototype.onLoad=function(){this.node.scale=0;var t=cc.scaleTo(.25,1.2),e=cc.scaleTo(.25,1);this.node.runAction(cc.sequence(t,e))},e.prototype.getButtonTips=function(t,e){return r(this,void 0,void 0,function(){var o;return a(this,function(n){switch(n.label){case 0:return[4,d.ResManager.loadResAsync("game/lrs/res/select/txt_lrs_"+t,cc.SpriteFrame)];case 1:return o=n.sent(),e.getComponent(cc.Sprite).spriteFrame=o,[2]}})})},e.prototype.init=function(t,e){this.call_func=e,this.clock_times=t.time_out,console.log("\u5f53\u524d\u603b\u65f6\u95f4\uff0c\u548c\u64cd\u4f5c\u7c7b\u578b",this.clock_times,t.oper_type),this.enent_id=t.oper_type,this.schedule(this.onUpdateTimer,1);var o=this.node_tipstxt[1].getComponent(cc.Label),n=this.node_tipstxt[2].getComponent(cc.Label),i=this.node_tipstxt[3].getComponent(cc.Label),r=this.node_tipstxt[4];r.active=!0,r.getComponent(cc.Label).string="\u70b9\u51fb\u5176\u4ed6\u73a9\u5bb6\u5934\u50cf\u8fdb\u884c\u64cd\u4f5c",1==t.oper_type?(this.node_people[0].active=!0,o.string=this.tips_txtlist.langr[0],n.string=this.tips_txtlist.langr[1],i.string=this.tips_txtlist.langr[2],this.btn_cancel.active=!1,this.btn_sure.x=0,this.getButtonTips(1,this.btn_sure.getChildByName("txt")),this.prop_icon.spriteFrame=this.propIconList[0],this.prop_txticon.spriteFrame=this.txtIconList[0]):2==t.oper_type?(this.node_people[1].active=!0,this.prop_icon.spriteFrame=this.propIconList[4],this.prop_txticon.spriteFrame=this.txtIconList[4],o.string=this.tips_txtlist.nwjy[0],n.string=this.tips_txtlist.nwjy[1],i.string=this.tips_txtlist.nwjy[2],this.getButtonTips(5,this.btn_cancel.getChildByName("txt")),this.getButtonTips(4,this.btn_sure.getChildByName("txt")),this.node_arrowcolor[0].active=!1,this.node_arrowcolor[1].active=!0):4==t.oper_type?(this.node_people[1].active=!0,this.prop_icon.spriteFrame=this.propIconList[1],this.prop_txticon.spriteFrame=this.txtIconList[1],o.string=this.tips_txtlist.nwdy[0],n.string=this.tips_txtlist.nwdy[1],i.string=this.tips_txtlist.nwdy[2],this.getButtonTips(3,this.btn_cancel.getChildByName("txt")),this.getButtonTips(2,this.btn_sure.getChildByName("txt")),this.node_arrowcolor[0].active=!1,this.node_arrowcolor[1].active=!0):6==t.oper_type?(1==u.default.DAY_NIGHT_TYPE&&(r.getComponent(cc.Label).string="\u60a8\u5df2\u51fa\u5c40\uff0c\u53ef\u9009\u62e9\u67aa\u6740\u4e00\u4f4d\u73a9\u5bb6"),this.node_people[2].active=!0,this.prop_icon.spriteFrame=this.propIconList[2],this.prop_txticon.spriteFrame=this.txtIconList[2],o.string=this.tips_txtlist.lier[0],n.string=this.tips_txtlist.lier[1],i.string=this.tips_txtlist.lier[2],this.getButtonTips(7,this.btn_cancel.getChildByName("txt")),this.getButtonTips(6,this.btn_sure.getChildByName("txt")),3==u.default.PLAYER_DATAS.length&&(this.btn_cancel.active=!1,this.btn_sure.x=0)):8==t.oper_type?(this.node_tipstxt[4].x=0,this.prop_icon.spriteFrame=this.propIconList[3],this.prop_txticon.spriteFrame=this.txtIconList[3],this.btn_cancel.active=!1,this.btn_sure.x=0):(this.node.active=!1,this.node.destroy()),this.initNode()},e.prototype.initNode=function(){c.default.addClickEventEND(this.btn_sure,this.onEvenClickButton.bind(this)),c.default.addClickEventEND(this.btn_cancel,this.onEvenClickButton.bind(this))},e.prototype.onEvenClickButton=function(t){var e=t.name;if("btn_sure"==e){if(0==this.to_chairId)return void s.UIManager.showTips("\u8bf7\u9009\u62e9\u4e00\u4e2a\u73a9\u5bb6\u518d\u8fdb\u884c\u64cd\u4f5c");var o={oper_type:this.enent_id,oper_chairId:u.default.MY_SEAT,to_chairId:this.to_chairId};p.NetManager.getGameProtocol().sendOperReq(o),this.onKillTimer("sure")}else if("btn_cancel"==e){o={oper_type:this.enent_id+1,oper_chairId:u.default.MY_SEAT,to_chairId:this.to_chairId};p.NetManager.getGameProtocol().sendOperReq(o),this.onKillTimer("cancel")}},e.prototype.initSelect=function(t){if(void 0!=this.node_tipstxt){8==this.enent_id?(this.node_tipstxt[4].getComponent(cc.Label).string="\u662f\u5426\u9009\u62e9"+t.seat_id+"\u53f7\u73a9\u5bb6",this.node_tipstxt[4].x=0):this.node_tipstxt.forEach(function(t,e){t.active=4!=e});var e=cc.instantiate(this.user_node);this.node.getChildByName("user").addChild(e);var o=e.getChildByName("headnode").getChildByName("head"),n=e.getChildByName("idcard_num").getComponent(cc.Sprite);this.showSeatID(n,t.seat_id),this.to_chairId=t.seat_id,l.default.setHeadIcon(t.headimg_id,o)}},e.prototype.showSeatID=function(t,e){return r(this,void 0,void 0,function(){var o;return a(this,function(n){switch(n.label){case 0:return[4,d.ResManager.loadResAsync("game/lrs/res/idcard/text_lrs"+e,cc.SpriteFrame)];case 1:return o=n.sent(),t.spriteFrame=o,[2]}})})},e.prototype.onUpdateTimer=function(){this.clock_times=this.clock_times-1,this.clock_times<=0&&(this.clock_times=0,console.log("\u5f53\u524d\u8fd8\u5269\u591a\u5c11\u65f6\u95f4",this.clock_times),this.onKillTimer("kill"))},e.prototype.onKillTimer=function(t){var e=this;u.default.CAN_CLICK_STATE=!1;var o={type:t,eventid:this.enent_id};this.call_func(o),this.onUpdateTimer&&this.unschedule(this.onUpdateTimer);var n=cc.scaleTo(.3,0);this.node.runAction(cc.sequence(n,cc.callFunc(function(){e.node.active=!1,e.node.destroy()})))},i([f(cc.Node)],e.prototype,"node_people",void 0),i([f(cc.Node)],e.prototype,"node_tipstxt",void 0),i([f(cc.Node)],e.prototype,"node_arrowcolor",void 0),i([f(cc.Node)],e.prototype,"btn_sure",void 0),i([f(cc.Node)],e.prototype,"btn_cancel",void 0),i([f(cc.Sprite)],e.prototype,"prop_icon",void 0),i([f(cc.Sprite)],e.prototype,"prop_txticon",void 0),i([f(cc.Prefab)],e.prototype,"user_node",void 0),i([f(cc.SpriteFrame)],e.prototype,"propIconList",void 0),i([f(cc.SpriteFrame)],e.prototype,"txtIconList",void 0),e=i([_],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../../../common/UIHelper":void 0,"../../../common/utils/Utils":void 0,"../../../manager/NetManager":void 0,"../../../manager/ResManager":void 0,"../../../manager/UIManager":void 0,"../model/CMD_LRS":"CMD_LRS"}],LRSVoteItem:[function(t,e,o){"use strict";cc._RF.push(e,"263f7o2JdRA75mNLMV/oBcs","LRSVoteItem");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a},r=this&&this.__awaiter||function(t,e,o,n){return new(o||(o=Promise))(function(i,r){function a(t){try{s(n.next(t))}catch(t){r(t)}}function c(t){try{s(n.throw(t))}catch(t){r(t)}}function s(t){t.done?i(t.value):new o(function(e){e(t.value)}).then(a,c)}s((n=n.apply(t,e||[])).next())})},a=this&&this.__generator||function(t,e){var o,n,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(t){return function(e){return s([t,e])}}function s(r){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,n=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=e.call(t,a)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../../../common/UIHelper"),s=t("../model/CMD_LRS"),l=t("../../../manager/ResManager"),p=cc._decorator,u=p.ccclass,d=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rightNodeList=[],e.leftNode=null,e}return n(e,t),e.prototype.onLoad=function(){},e.prototype.init=function(t,e){var o=this;t.to_seat==e&&(this.leftNode.getChildByName("out_icon").active=!0);this.initUserData(t.to_seat,this.leftNode),t.oper_seat.forEach(function(t,e){o.initUserData(t,o.rightNodeList[e]),o.rightNodeList[e].active=!0})},e.prototype.initUserData=function(t,e){t==s.default.MY_SEAT&&(e.getChildByName("self").active=!0);var o=e.getChildByName("idcard_num").getComponent(cc.Sprite);this.showSeatID(o,t);var n=e.getChildByName("headnode").getChildByName("head"),i=this.getUserMsg(t);null!=i&&c.default.setHeadIcon(i.headimg_id,n)},e.prototype.showSeatID=function(t,e){return r(this,void 0,void 0,function(){var o;return a(this,function(n){switch(n.label){case 0:return[4,l.ResManager.loadResAsync("game/lrs/res/idcard/text_lrs"+e,cc.SpriteFrame)];case 1:return o=n.sent(),t.spriteFrame=o,[2]}})})},e.prototype.getUserMsg=function(t){var e=null;return s.default.PLAYER_DATAS.forEach(function(o,n){t==o.seat_id&&(e=o)}),e},e.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},i([d(cc.Node)],e.prototype,"rightNodeList",void 0),i([d(cc.Node)],e.prototype,"leftNode",void 0),e=i([u],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../../../common/UIHelper":void 0,"../../../manager/ResManager":void 0,"../model/CMD_LRS":"CMD_LRS"}],LRSVoteView:[function(t,e,o){"use strict";cc._RF.push(e,"b577e8v7LpC85h7sTzWQKpT","LRSVoteView");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}(),i=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,n);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,o,a):i(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../../../common/utils/Utils"),a=t("../../../view/base/PopupView"),c=cc._decorator,s=c.ccclass,l=c.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.votetipsList=[],e.ScrollView=null,e.btn_sure=null,e.vote_item=null,e.clock_times=3,e.userList=[{to_seat:1,oper_seat:[]},{to_seat:2,oper_seat:[]},{to_seat:3,oper_seat:[]},{to_seat:4,oper_seat:[]},{to_seat:5,oper_seat:[]}],e}return n(e,t),e.prototype.initComponent=function(){r.default.addClickEventEND(this.btn_sure,this.onSureTouchEvent.bind(this)),this.schedule(this.onUpdateTimer,1)},e.prototype.initData=function(t){var e=this,o=0;this.clock_times=t.time_out,0==t.out_seat.length?(this.votetipsList[0].node.x=0,this.votetipsList[1].node.x=0,this.votetipsList[1].string="\u65e0\u7ed3\u679c..."):(this.votetipsList[2].node.active=!0,this.votetipsList[1].string="\u7968\u6570\u6700\u591a",this.votetipsList[2].string="\u3010"+t.out_seat[0]+"\u53f7\u3011",o=t.out_seat[0]),t.oneDayData.forEach(function(t,o){Number(t.to_seat-1)<5&&e.userList[t.to_seat-1].oper_seat.push(t.oper_seat)}),this.initScrollView(o)},e.prototype.initScrollView=function(t){for(var e=0;e<5;e++)if(this.userList[e].oper_seat.length>0){var o=cc.find("view/content",this.ScrollView),n=cc.instantiate(this.vote_item);n.getComponent("LRSVoteItem").init(this.userList[e],t),o.addChild(n,0,"item"+e)}},e.prototype.onUpdateTimer=function(){this.clock_times=this.clock_times-1,this.clock_times<=0&&(this.clock_times=0,this.onKillTimer())},e.prototype.onKillTimer=function(){this.onUpdateTimer&&this.unschedule(this.onUpdateTimer),this.onSureTouchEvent()},e.prototype.onSureTouchEvent=function(){console.log("\u73a9\u5bb6\u4e3b\u52a8\u5173\u95ed"),this.onUpdateTimer&&this.unschedule(this.onUpdateTimer),this.node.destroy()},e.prototype.onDestroy=function(){this.unscheduleAllCallbacks()},i([l(cc.Label)],e.prototype,"votetipsList",void 0),i([l(cc.Node)],e.prototype,"ScrollView",void 0),i([l(cc.Node)],e.prototype,"btn_sure",void 0),i([l(cc.Prefab)],e.prototype,"vote_item",void 0),e=i([s],e)}(a.default);o.default=p,cc._RF.pop()},{"../../../common/utils/Utils":void 0,"../../../view/base/PopupView":void 0}],ProtocolLRS:[function(t,e,o){"use strict";cc._RF.push(e,"ff64fj3PtpJfLCJGCYxH3Qo","ProtocolLRS");var n=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function n(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(n.prototype=o.prototype,new n)}}();Object.defineProperty(o,"__esModule",{value:!0});var i=t("../../../manager/DataManager"),r=t("../../../net/ProtocolBase"),a=t("../../../manager/NetManager"),c=t("../../../manager/UIManager"),s=t("../../../Define"),l=t("./LRSCmd"),p=function(t){function e(){var e=t.call(this,"game/lrs/pb")||this;return e.cmd=l.LRSCmd,e.type=s.SocketType.Game,e.pbName="LRS",e}return n(e,t),e.prototype.sendOperReq=function(t){var e={oper_type:t.oper_type,oper_chairId:t.oper_chairId,to_chairId:t.to_chairId};console.log("============>\u53d1\u9001\u5f53\u524d\u8eab\u4efd\u51fb\u6740\u6216\u8005\u8425\u6551\u8bf7\u6c42",t),this.send(e,"oper_req")},e.prototype.sendPreOperReq=function(t){var e={operType:t.operType,chair_id:t.chair_id};console.log("============>\u53d1\u9001\u9884\u64cd\u4f5c",t),this.send(e,"pre_oper_req")},e.prototype.sendHistoryReq=function(t){var e={player_id:i.DataManager.userInfo.userid,turns:t.turns,day_night:t.day_night};console.log("============>\u53d1\u9001\u6295\u7968\u5386\u53f2\u7684\u8bf7\u6c42"),this.send(e,"history_req")},e.prototype.sendFaceAndTextReq=function(t){var e={player_id:i.DataManager.userInfo.userid,code:t};console.log("============>\u53d1\u9001\u804a\u5929\u8bb0\u5f55"),this.send(e,"face_text_req")},e.prototype.dealError=function(t){c.UIManager.showTipsPopup(t.err_msg)},e}(r.default);o.default=p,a.NetManager.protocolCache.ProtocolLRS=p,cc._RF.pop()},{"../../../Define":void 0,"../../../manager/DataManager":void 0,"../../../manager/NetManager":void 0,"../../../manager/UIManager":void 0,"../../../net/ProtocolBase":void 0,"./LRSCmd":"LRSCmd"}]},{},["LRSGameScene","LRSGameView","LRSSetting","LRSTool","CMD_LRS","LRSCmd","ProtocolLRS","LRSAnimationMgr","LRSAvatarPanel","LRSCenterPanel","LRSChatView","LRSGameRecord","LRSHistoryTxt","LRSPopOutMsg","LRSRoomView","LRSRuleView","LRSSendCard","LRSSettlement","LRSTopPanel","LRSUserSelect","LRSVoteItem","LRSVoteView"]);