window.__require=function e(t,n,o){function i(r,s){if(!n[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(a)return a(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var p=n[r]={exports:{}};t[r][0].call(p.exports,function(e){return i(t[r][1][e]||e)},p,p.exports,e,t,n,o)}return n[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<o.length;r++)i(o[r]);return i}({1:[function(e,t,n){(function(e){function t(e,t){for(var n=0,o=e.length-1;o>=0;o--){var i=e[o];"."===i?e.splice(o,1):".."===i?(e.splice(o,1),n++):n&&(e.splice(o,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function o(e){"string"!=typeof e&&(e+="");var t,n=0,o=-1,i=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!i){n=t+1;break}}else-1===o&&(i=!1,o=t+1);return-1===o?"":e.slice(n,o)}function i(e,t){if(e.filter)return e.filter(t);for(var n=[],o=0;o<e.length;o++)t(e[o],o,e)&&n.push(e[o]);return n}n.resolve=function(){for(var n="",o=!1,a=arguments.length-1;a>=-1&&!o;a--){var r=a>=0?arguments[a]:e.cwd();if("string"!=typeof r)throw new TypeError("Arguments to path.resolve must be strings");r&&(n=r+"/"+n,o="/"===r.charAt(0))}return n=t(i(n.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+n||"."},n.normalize=function(e){var o=n.isAbsolute(e),r="/"===a(e,-1);return(e=t(i(e.split("/"),function(e){return!!e}),!o).join("/"))||o||(e="."),e&&r&&(e+="/"),(o?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(i(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function o(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var i=o(e.split("/")),a=o(t.split("/")),r=Math.min(i.length,a.length),s=r,c=0;c<r;c++)if(i[c]!==a[c]){s=c;break}var l=[];for(c=s;c<i.length;c++)l.push("..");return(l=l.concat(a.slice(s))).join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,o=-1,i=!0,a=e.length-1;a>=1;--a)if(47===(t=e.charCodeAt(a))){if(!i){o=a;break}}else i=!1;return-1===o?n?"/":".":n&&1===o?"/":e.slice(0,o)},n.basename=function(e,t){var n=o(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,n=0,o=-1,i=!0,a=0,r=e.length-1;r>=0;--r){var s=e.charCodeAt(r);if(47!==s)-1===o&&(i=!1,o=r+1),46===s?-1===t?t=r:1!==a&&(a=1):-1!==t&&(a=-1);else if(!i){n=r+1;break}}return-1===t||-1===o||0===a||1===a&&t===o-1&&t===n+1?"":e.slice(t,o)};var a="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:2}],2:[function(e,t,n){var o,i,a=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function c(e){if(o===setTimeout)return setTimeout(e,0);if((o===r||!o)&&setTimeout)return o=setTimeout,setTimeout(e,0);try{return o(e,0)}catch(t){try{return o.call(null,e,0)}catch(t){return o.call(this,e,0)}}}function l(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(function(){try{o="function"==typeof setTimeout?setTimeout:r}catch(e){o=r}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}})();var p,u=[],h=!1,d=-1;function g(){h&&p&&(h=!1,p.length?u=p.concat(u):d=-1,u.length&&f())}function f(){if(!h){var e=c(g);h=!0;for(var t=u.length;t;){for(p=u,u=[];++d<t;)p&&p[d].run();d=-1,t=u.length}p=null,h=!1,l(e)}}function m(e,t){this.fun=e,this.array=t}function _(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||h||c(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=_,a.addListener=_,a.once=_,a.off=_,a.removeListener=_,a.removeAllListeners=_,a.emit=_,a.prependListener=_,a.prependOnceListener=_,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],Achievement:[function(e,t,n){"use strict";cc._RF.push(t,"594e1B+ICJGNbv+lDDFoCjV","Achievement");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../common/List"),c=e("../base/PopupView"),l=e("../common/componet/ButtonEx"),p=e("../../manager/EventManager"),u=e("../../net/NetCmd"),h=e("../../manager/NetManager"),d=e("../../manager/ResManager"),g=cc._decorator,f=g.ccclass,m=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_achievement=null,t}return o(t,e),t.prototype.start=function(){h.NetManager.protocolHall.sendGetAllAttainment()},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this))},t.prototype.initEvent=function(){p.EventManager.on(this,u.ProtocolHallCmd.GetAllAttainmentResp,this.onGetAllAttainmentResp.bind(this))},t.prototype.onGetAllAttainmentResp=function(e){var t=this.sortAchieve(e.attainment_info);this.data=t,this.scroll_achievement.numItems=e.attainment_info.length},t.prototype.onListVRender=function(e,t){return a(this,void 0,void 0,function(){var n,o,i,a,s,c,p=this;return r(this,function(r){switch(r.label){case 0:switch(n=e.getChildByName("icon_achievement").getComponent(cc.Sprite),o=e.getChildByName("label_achievement").getComponent(cc.Label),i=e.getChildByName("img_use"),a=e.getChildByName("node_lock"),s=e.getComponent(l.default),this.data[t].state){case 1:a.active=!0,i.active=!1,s.interactable=!1;break;case 2:a.active=!1,i.active=!1,s.interactable=!0,s.registerClick(function(){h.NetManager.protocolHall.sendUseAttainment(p.data[t].id)});break;case 3:a.active=!1,i.active=!0,s.interactable=!0,s.registerClick(function(){h.NetManager.protocolHall.sendUnUseAttainment(p.data[t].id)})}return o.string=this.data[t].des+"("+this.data[t].got_num+"/"+this.data[t].reach_num+")",c=n,[4,d.ResManager.loadResAsync("view/home_page/icon_"+this.data[t].id,cc.SpriteFrame)];case 1:return c.spriteFrame=r.sent(),[2]}})})},t.prototype.onClickClose=function(){this.close(!1)},t.prototype.sortAchieve=function(e){for(var t=[],n=[],o=0;o<e.length;o++)1==e[o].state?n=n.concat(e[o]):2!=e[o].state&&3!=e[o].state||(t=t.concat(e[o]));var i=t.concat(n);return console.log("\u6392\u5e8f\u540e\u7684\u6210\u5c31\u6570\u7ec4",i),i},i([m(s.default)],t.prototype,"scroll_achievement",void 0),t=i([f],t)}(c.default);n.default=_,cc._RF.pop()},{"../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/ResManager":"ResManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView","../common/List":"List","../common/componet/ButtonEx":"ButtonEx"}],ActivityAchievement:[function(e,t,n){"use strict";cc._RF.push(t,"02120OnDm5ApI7J9QXiOcIf","ActivityAchievement");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../common/List"),r=e("../../../net/NetCmd"),s=e("../../common/componet/ButtonEx"),c=e("../../../manager/NetManager"),l=e("../../../common/utils/Utils"),p=e("../../../common/log/LogWrap"),u=e("../../../manager/UIManager"),h=e("../../../common/Text"),d=e("../../../manager/EventManager"),g=cc._decorator,f=g.ccclass,m=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_info=null,t.action_time=null,t.content=null,t.data=null,t.id=0,t}return o(t,e),t.prototype.onLoad=function(){d.EventManager.on(this,r.ProtocolHallCmd.GetAchieveRewardResp,this.onSubAchieveReward.bind(this))},t.prototype.onDestroy=function(){d.EventManager.off(this)},t.prototype.onListRender=function(e,t){var n=this;if(0==t)e.height=50,e.getChildByName("img_head").active=!0,e.getChildByName("img_rule").active=!1,e.getChildByName("item_content").active=!1;else if(t==this.data.length-1)e.height=100,e.getChildByName("img_rule").active=!0,e.getChildByName("img_head").active=!1,e.getChildByName("item_content").active=!1;else{e.height=120,e.name=this.data[t].id+"",e.getChildByName("img_rule").active=!1,e.getChildByName("img_head").active=!1;var o=e.getChildByName("item_content");o.active=!0,o.getChildByName("gold").getComponent(cc.Label).string="x "+this.data[t].coin,o.getChildByName("info").getComponent(cc.Label).string="\u89e3\u9501"+this.data[t].unlock_num+"/"+this.data[t].unlock_achievement_num+"\u4e2a\u6210\u5c31";var i=o.getChildByName("btn_reward"),a=i.getComponent(s.default);switch(this.data[t].achievement_status){case 0:i.getChildByName("off").active=!0,i.getChildByName("already_get").active=!1,i.getChildByName("on").active=!1,a.interactable=!1;break;case 1:i.getChildByName("on").active=!0,i.getChildByName("already_get").active=!1,i.getChildByName("off").active=!1,a.registerClick(function(){c.NetManager.protocolHall.sendAchieveRewardsReq(n.data[t].id,n.id)}),a.interactable=!0;break;case 2:i.getChildByName("on").active=!1,i.getChildByName("off").active=!1,i.getChildByName("already_get").active=!0,a.interactable=!1}}},t.prototype.init=function(e,t){this.id=e.id,this.data=JSON.parse(JSON.stringify(e.achievement)),this.data&&(this.updateData(),this.sortData(),this.showActionTime(e.start_time,e.end_time),this.scroll_info.numItems=this.data.length)},t.prototype.showActionTime=function(e,t){if(-1==e&&-1==t)this.action_time.string="\u6c38\u4e45\u6d3b\u52a8";else{var n=l.default.timestampToTimeString(e).split(" ")[0],o=-1==t?"\u6c38\u4e45":l.default.timestampToTimeString(t).split(" ")[0];this.action_time.string=n+" - "+o}},t.prototype.onSubAchieveReward=function(e){if(p.LogWrap.log("onSubAchieveReward"),this.content.children.forEach(function(t){if(t.name==e.achieve_id)if(1==e.status){var n=t.getChildByName("item_content").getChildByName("btn_reward");n.getChildByName("on").active=!1,n.getChildByName("off").active=!1,n.getChildByName("already_get").active=!0,n.getComponent(s.default).interactable=!1,u.UIManager.showTips(h.Tips.ReciveSuccess)}else u.UIManager.showTips(h.Tips.ReciveFail)}),1==e.status)for(var t=0;t<this.data.length;t++)this.data[t].id==e.achieve_id&&(this.data[t].achievement_status=2);this.sortData(),this.scroll_info.updateAll()},t.prototype.sortData=function(){for(var e=[],t=[],n=0;n<this.data.length;n++){var o=this.data[n];1==o.achievement_status?e=e.concat(o):t=t.concat(o)}for(n=0;n<e.length;n++)for(var i=n+1;i<e.length;i++)if(e[n].id>e[i].id){var a=e[n];e[n]=e[i],e[i]=a}for(n=0;n<t.length;n++)for(i=n+1;i<t.length;i++)if(2==t[n].achievement_status&&0==t[i].achievement_status){a=t[n];t[n]=t[i],t[i]=a}for(n=0;n<t.length;n++)for(i=n+1;i<t.length;i++)if(2==t[n].achievement_status&&2==t[i].achievement_status&&t[n].id>t[i].id){a=t[n];t[n]=t[i],t[i]=a}this.data=e.concat(t),p.LogWrap.log("\u6392\u5e8f\u540e\u7684\u6570\u636e",this.data)},t.prototype.updateData=function(){this.data.unshift({id:-1,achievement_status:1});var e={id:this.data[this.data.length-1].id+1,achievement_status:2};this.data.push(e)},i([m(a.default)],t.prototype,"scroll_info",void 0),i([m(cc.Label)],t.prototype,"action_time",void 0),i([m(cc.Node)],t.prototype,"content",void 0),t=i([f],t)}(cc.Component);n.default=_,cc._RF.pop()},{"../../../common/Text":"Text","../../../common/log/LogWrap":"LogWrap","../../../common/utils/Utils":"Utils","../../../manager/EventManager":"EventManager","../../../manager/NetManager":"NetManager","../../../manager/UIManager":"UIManager","../../../net/NetCmd":"NetCmd","../../common/List":"List","../../common/componet/ButtonEx":"ButtonEx"}],ActivityBindInviteCode:[function(e,t,n){"use strict";cc._RF.push(t,"c5cdfSL/D9Mtq8zFhWR6kUv","ActivityBindInviteCode");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../common/UIHelper"),r=e("../../../common/utils/Utils"),s=e("../../../manager/DataManager"),c=e("../../../manager/EventManager"),l=e("../../../manager/NetManager"),p=e("../../../manager/UIManager"),u=e("../../../net/NetCmd"),h=cc._decorator,d=h.ccclass,g=h.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.editbox=null,t.btn_bind=null,t.btn_draw=null,t.node_grey_draw=null,t.action_time=null,t.parent_id=null,t}return o(t,e),t.prototype.start=function(){this.addEventListener()},t.prototype.addEventListener=function(){c.EventManager.on(this,u.ProtocolHallCmd.BindParentIdResp,this.onSubBindRes.bind(this)),c.EventManager.on(this,u.ProtocolHallCmd.GetBindRewardResp,this.onSubDrawRes.bind(this)),r.default.addClickEventEND(this.btn_bind,this.onClickBind.bind(this)),r.default.addClickEventEND(this.btn_draw,this.onClickDraw.bind(this))},t.prototype.onDestroy=function(){c.EventManager.off(this)},t.prototype.init=function(e,t){this.btn_bind.active=0==s.DataManager.userInfo.parent_id,this.editbox.placeholder=0==s.DataManager.userInfo.parent_id?"\u8bf7\u8f93\u5165\u63a8\u8350\u4ebaID ( \u73a9\u5bb6ID )":s.DataManager.userInfo.parent_id+"",this.editbox.enabled=0==s.DataManager.userInfo.parent_id,this.btn_draw.active=0!=s.DataManager.userInfo.parent_id&&0==s.DataManager.userInfo.bind_reward_status,this.node_grey_draw.active=0!=s.DataManager.userInfo.parent_id&&1==s.DataManager.userInfo.bind_reward_status,this.showActionTime(e.start_time,e.end_time)},t.prototype.showActionTime=function(e,t){if(-1==e&&-1==t)this.action_time.string="\u6c38\u4e45\u6d3b\u52a8";else{var n=r.default.timestampToTimeString(e).split(" ")[0],o=-1==t?"\u6c38\u4e45":r.default.timestampToTimeString(t).split(" ")[0];this.action_time.string=n+" - "+o}},t.prototype.onClickBind=function(){if(a.default.checkTourist(function(e){})){var e=this.editbox.string;/^[\d]+$/.test(e)&&parseInt(e)!=s.DataManager.userInfo.userid?(this.parent_id=parseInt(e),l.NetManager.protocolHall.sendBindParentIdReq(parseInt(e),1)):p.UIManager.showTips("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u53f7\u7801")}},t.prototype.onClickDraw=function(){var e=this.parent_id||s.DataManager.userInfo.parent_id;l.NetManager.protocolHall.sendGetBindRewardReq(e)},t.prototype.onSubBindRes=function(e){0==e.status?p.UIManager.showTips("\u7ed1\u5b9a\u5931\u8d25"):2==e.status?p.UIManager.showTips("\u7ed1\u5b9a\u5931\u8d25, \u5df2\u7ecf\u5b58\u5728\u4e0a\u7ea7id"):3==e.status?p.UIManager.showTips("\u73a9\u5bb6id\u4e0d\u5b58\u5728"):4==e.status?p.UIManager.showTips("\u7ed1\u5b9a\u5931\u8d25\uff0c\u5b58\u5728\u4e0b\u7ea7\u5173\u8054"):(this.editbox.string="",this.editbox.placeholder=this.parent_id+"",this.editbox.enabled=!1,this.btn_bind.active=!1,this.btn_draw.active=!0,p.UIManager.showTips("\u7ed1\u5b9a\u6210\u529f\uff0c\u8bf7\u9886\u53d6\u5956\u52b1"))},t.prototype.onSubDrawRes=function(e){0==e.status&&(this.btn_draw.active=!1,this.node_grey_draw.active=!0),p.UIManager.showTips(e.msg)},i([g(cc.EditBox)],t.prototype,"editbox",void 0),i([g(cc.Node)],t.prototype,"btn_bind",void 0),i([g(cc.Node)],t.prototype,"btn_draw",void 0),i([g(cc.Node)],t.prototype,"node_grey_draw",void 0),i([g(cc.Label)],t.prototype,"action_time",void 0),t=i([d],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../common/UIHelper":"UIHelper","../../../common/utils/Utils":"Utils","../../../manager/DataManager":"DataManager","../../../manager/EventManager":"EventManager","../../../manager/NetManager":"NetManager","../../../manager/UIManager":"UIManager","../../../net/NetCmd":"NetCmd"}],ActivityClubInvite:[function(e,t,n){"use strict";cc._RF.push(t,"0c82a7qMMVBM6JUR3oGxROR","ActivityClubInvite");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../common/Text"),r=e("../../../common/utils/Utils"),s=e("../../../manager/EventManager"),c=e("../../../manager/NetManager"),l=e("../../../manager/UIManager"),p=e("../../../net/NetCmd"),u=cc._decorator,h=u.ccclass,d=u.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_info=null,t.center=null,t.item_center=null,t.item_bottom=null,t.action_time=null,t.member_num=null,t.recharge_num=null,t.can_get=null,t.btn_rule=null,t.btn_reward=null,t.node_tips=null,t.label_tips=null,t.got_statu_frames=[],t.data=null,t.id=0,t.type=0,t.can_click=null,t}return o(t,e),t.prototype.onLoad=function(){s.EventManager.on(this,p.ProtocolHallCmd.GetActionRewardRes,this.onSubActionReward.bind(this)),this.addEventListener()},t.prototype.addEventListener=function(){var e=this;r.default.addClickEventEND(this.btn_reward,function(){e.can_click&&c.NetManager.protocolHall.sendActionRewardReq(e.type,e.id)}),r.default.addClickEventEND(this.btn_rule,function(){e.node_tips.active=!e.node_tips.active})},t.prototype.onDestroy=function(){s.EventManager.off(this)},t.prototype.init=function(e){this.id=e.id,this.type=e.type,this.data=JSON.parse(e.json_data),this.data&&(this.node_tips.active=!1,this.showActionTime(e.start_time,e.end_time),this.showBottomInfo(this.data),this.showDataInfo(this.data.club_detail),this.label_tips.string="1\u3001\u8be5\u73a9\u5bb6\u52a0\u5165\u4ff1\u4e50\u90e8\u540e\u5145\u503c\u91d1\u989d\u2265"+this.data.des_charge_nums+"\u89c6\u4e3a\u6709\u6548\u5145\u503c\u4eba\u6570"),this.scroll_info.scrollToTop(.01)},t.prototype.showDataInfo=function(e){this.center.removeAllChildren();for(var t=0;t<e.length;t++)if(t!=e.length-1){var n=cc.instantiate(this.item_center);n.getChildByName("label_member_num").getComponent(cc.Label).string=e[t].des_player_nums,n.getChildByName("label_recharge_num").getComponent(cc.Label).string=e[t].des_charge_player_nums,n.getChildByName("label_reward").getComponent(cc.Label).string=e[t].reward_gold,n.getChildByName("img_wwc").getComponent(cc.Sprite).spriteFrame=this.got_statu_frames[e[t].got_status],n.active=!0,this.center.addChild(n)}else{this.item_bottom.getChildByName("label_member_num").getComponent(cc.Label).string=e[t].des_player_nums,this.item_bottom.getChildByName("label_recharge_num").getComponent(cc.Label).string=e[t].des_charge_player_nums,this.item_bottom.getChildByName("label_reward").getComponent(cc.Label).string=e[t].reward_gold,this.item_bottom.getChildByName("img_wwc").getComponent(cc.Sprite).spriteFrame=this.got_statu_frames[e[t].got_status]}this.center.getComponent(cc.Layout).updateLayout()},t.prototype.showActionTime=function(e,t){if(-1==e&&-1==t)this.action_time.string="\u6c38\u4e45\u6d3b\u52a8";else{var n=this.timestampToTimeString(e),o=-1==t?"\u6c38\u4e45":this.timestampToTimeString(t);this.action_time.string=n+"-"+o}},t.prototype.showBottomInfo=function(e){this.member_num.string=e.cur_player_nums,this.recharge_num.string=e.cur_charge_player_nums,this.can_get.string=e.get_total,parseFloat(e.get_total)>0?this.showRewardBtn(!0):this.showRewardBtn(!1)},t.prototype.showRewardBtn=function(e){this.btn_reward.active=!0,this.btn_reward.getChildByName("on").active=e,this.btn_reward.getChildByName("off").active=!e,this.can_click=e},t.prototype.timestampToTimeString=function(e){return new Date(parseInt(e)+288e5).toJSON().substr(0,19).replace("T"," ").split(" ")[0].replace(/-/g,".")},t.prototype.onSubActionReward=function(e){if(1==e.status){this.can_get.string="0",this.showRewardBtn(!1),l.UIManager.showTips(a.Tips.ReciveSuccess);for(var t=this.data.club_detail,n=0;n<t.length;n++)if(n!=t.length-1){var o=this.center.children[n];if(1==t[n].got_status)o.getChildByName("img_wwc").getComponent(cc.Sprite).spriteFrame=this.got_statu_frames[2];o.active=!0}else{if(1==t[n].got_status)this.item_bottom.getChildByName("img_wwc").getComponent(cc.Sprite).spriteFrame=this.got_statu_frames[2]}this.center.getComponent(cc.Layout).updateLayout()}},i([d(cc.ScrollView)],t.prototype,"scroll_info",void 0),i([d(cc.Node)],t.prototype,"center",void 0),i([d(cc.Node)],t.prototype,"item_center",void 0),i([d(cc.Node)],t.prototype,"item_bottom",void 0),i([d(cc.Label)],t.prototype,"action_time",void 0),i([d(cc.Label)],t.prototype,"member_num",void 0),i([d(cc.Label)],t.prototype,"recharge_num",void 0),i([d(cc.Label)],t.prototype,"can_get",void 0),i([d(cc.Node)],t.prototype,"btn_rule",void 0),i([d(cc.Node)],t.prototype,"btn_reward",void 0),i([d(cc.Node)],t.prototype,"node_tips",void 0),i([d(cc.Label)],t.prototype,"label_tips",void 0),i([d(cc.SpriteFrame)],t.prototype,"got_statu_frames",void 0),t=i([h],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../common/Text":"Text","../../../common/utils/Utils":"Utils","../../../manager/EventManager":"EventManager","../../../manager/NetManager":"NetManager","../../../manager/UIManager":"UIManager","../../../net/NetCmd":"NetCmd"}],ActivityCommon:[function(e,t,n){"use strict";cc._RF.push(t,"74a73Cp2dVO6Z2qLVm6E5Qq","ActivityCommon");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../../manager/FileManager"),c=e("../../../manager/ResManager"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.title=null,t.info=null,t.img_content=null,t.content=null,t.sroll_view=null,t}return o(t,e),t.prototype.init=function(e,t){var n=this;this.title.string=t.name;var o=JSON.parse(e.content);if(1==o.type)this.content.getComponent(cc.Layout).paddingTop=20,this.img_content.node.active=!1,this.info.string=o.content;else if(this.content.getComponent(cc.Layout).paddingTop=0,this.img_content.node.active=!0,this.info.string="",cc.sys.isNative){var i=s.FileManager.baseName(o.content);s.FileManager.downloadFile(o.content,i,function(e){return a(n,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return e?[4,c.ResManager.loadAsync(i)]:[3,2];case 1:t=n.sent(),this.img_content.spriteFrame=new cc.SpriteFrame(t),n.label=2;case 2:return[2]}})})})}else cc.loader.load(o.content,function(e,t){e||cc.isValid(n.img_content)&&(n.img_content.spriteFrame=new cc.SpriteFrame(t))});this.sroll_view.scrollToTop()},t.prototype.showReportTitle=function(e){this.title.string=e},t.prototype.setContentPos=function(){this.content.x=0},i([u(cc.Label)],t.prototype,"title",void 0),i([u(cc.Label)],t.prototype,"info",void 0),i([u(cc.Sprite)],t.prototype,"img_content",void 0),i([u(cc.Node)],t.prototype,"content",void 0),i([u(cc.ScrollView)],t.prototype,"sroll_view",void 0),t=i([p],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../../manager/FileManager":"FileManager","../../../manager/ResManager":"ResManager"}],ActivityDeficit:[function(e,t,n){"use strict";cc._RF.push(t,"1a305w8zjhM6bWEHkL4Qi9l","ActivityDeficit");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s={7001:{imgUrl:"animation/spine/activity/h11",labelPos:cc.v2(8,177),labelColor:cc.color(243,240,221)},7002:{imgUrl:"animation/spine/activity/h7",labelPos:cc.v2(-5,176),labelColor:cc.color(255,255,255)},7003:{imgUrl:"animation/spine/activity/h8",labelPos:cc.v2(58,183),labelColor:cc.color(255,255,255)}},c=e("../../../common/log/LogWrap"),l=e("../../../common/Text"),p=e("../../../manager/EventManager"),u=e("../../../manager/NetManager"),h=e("../../../manager/ResManager"),d=e("../../../manager/UIManager"),g=e("../../../net/NetCmd"),f=e("../../common/componet/ButtonEx"),m=e("../../common/List"),_=cc._decorator,y=_.ccclass,v=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine_haibao=null,t.scroll_info=null,t.action_time=null,t.content=null,t.data=null,t.id=0,t.type=0,t}return o(t,e),t.prototype.onLoad=function(){p.EventManager.on(this,g.ProtocolHallCmd.GetActionRewardRes,this.onSubActionReward.bind(this))},t.prototype.start=function(){},t.prototype.onDestroy=function(){p.EventManager.off(this)},t.prototype.onListRender=function(e,t){var n=this;if(0==t)e.height=43,e.getChildByName("img_head").active=!0,e.getChildByName("img_rule").active=!1,e.getChildByName("item_content").active=!1;else if(t==this.data.length-1)e.height=100,e.getChildByName("img_rule").active=!0,e.getChildByName("img_head").active=!1,e.getChildByName("item_content").active=!1;else{e.height=120,e.name=this.data[t].id+"",e.getChildByName("img_rule").active=!1,e.getChildByName("img_head").active=!1;var o=e.getChildByName("item_content");o.active=!0,o.getChildByName("gold").getComponent(cc.Label).string="x "+this.data[t].reward_gold,o.getChildByName("info").getComponent(cc.Label).string="\u4e8f\u635f\u91d1\u5e01\u6570"+this.data[t].got_num+"/"+this.data[t].to_get_num;var i=o.getChildByName("bar_di");i.getChildByName("Mask").width=this.data[t].got_num/this.data[t].to_get_num*i.width,o.getChildByName("node_grey").active=0==this.data[t].got_status;var a=o.getChildByName("btn_draw"),r=a.getComponent(f.default);a.active=1==this.data[t].got_status,1==this.data[t].got_status&&r.registerClick(function(){u.NetManager.protocolHall.sendActionRewardReq(n.type,n.id,n.data[t].id)}),o.getChildByName("already_get").active=2==this.data[t].got_status}},t.prototype.init=function(e,t){this.id=e.id,this.type=e.type,this.data=JSON.parse(e.json_data),this.data&&(this.updateData(),this.sortData(),this.showActionTime(e.start_time,e.end_time),this.loadHaibao(this.data[1].cid),this.scroll_info.numItems=this.data.length),this.scroll_info.scrollView.scrollToTop(.01)},t.prototype.loadHaibao=function(e){return a(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return this.action_time.node.color=s[e].labelColor,this.action_time.node.position=s[e].labelPos,[4,h.ResManager.loadResAsync(s[e].imgUrl,sp.SkeletonData)];case 1:return t=n.sent(),this.spine_haibao.node.active=!0,this.spine_haibao.skeletonData=t,this.spine_haibao.clearTracks(),this.spine_haibao.setToSetupPose(),this.spine_haibao.setAnimation(0,"animation",!0),[2]}})})},t.prototype.showActionTime=function(e,t){if(-1==e&&-1==t)this.action_time.string="\u6c38\u4e45\u6d3b\u52a8";else{var n=this.timestampToTimeString(e),o=-1==t?"\u6c38\u4e45":this.timestampToTimeString(t);this.action_time.string=n+"-"+o}},t.prototype.onSubActionReward=function(e){if(e.type==this.type&&e.id==this.id&&0!=this.type&&0!=this.id){if(c.LogWrap.log("onSubActionReward"),this.content.children.forEach(function(t){if(t.name==e.item_id)if(1==e.status){var n=t.getChildByName("item_content");n.getChildByName("node_grey").active=!1,n.getChildByName("btn_draw").active=!1,n.getChildByName("already_get").active=!0,d.UIManager.showTips(l.Tips.ReciveSuccess)}else d.UIManager.showTips(l.Tips.ReciveFail)}),1==e.status)for(var t=0;t<this.data.length;t++)this.data[t].id==e.item_id&&(this.data[t].got_status=2);this.sortData(),this.scroll_info.updateAll()}},t.prototype.sortData=function(){for(var e=[],t=[],n=0;n<this.data.length;n++){var o=this.data[n];1==o.got_status?e=e.concat(o):t=t.concat(o)}for(n=0;n<e.length;n++)for(var i=n+1;i<e.length;i++)if(e[n].id>e[i].id){var a=e[n];e[n]=e[i],e[i]=a}for(n=0;n<t.length;n++)for(i=n+1;i<t.length;i++)if(2==t[n].got_status&&0==t[i].got_status){a=t[n];t[n]=t[i],t[i]=a}for(n=0;n<t.length;n++)for(i=n+1;i<t.length;i++)if(2==t[n].got_status&&2==t[i].got_status&&t[n].id>t[i].id){a=t[n];t[n]=t[i],t[i]=a}this.data=e.concat(t),c.LogWrap.log("\u6392\u5e8f\u540e\u7684\u6570\u636e",this.data)},t.prototype.updateData=function(){this.data.unshift({id:-1,got_status:1});var e={id:this.data[this.data.length-1].id+1,got_status:2};this.data.push(e)},t.prototype.timestampToTimeString=function(e){return new Date(parseInt(e)+288e5).toJSON().substr(0,19).replace("T"," ").split(" ")[0].replace(/-/g,".")},i([v(sp.Skeleton)],t.prototype,"spine_haibao",void 0),i([v(m.default)],t.prototype,"scroll_info",void 0),i([v(cc.Label)],t.prototype,"action_time",void 0),i([v(cc.Node)],t.prototype,"content",void 0),t=i([y],t)}(cc.Component);n.default=b,cc._RF.pop()},{"../../../common/Text":"Text","../../../common/log/LogWrap":"LogWrap","../../../manager/EventManager":"EventManager","../../../manager/NetManager":"NetManager","../../../manager/ResManager":"ResManager","../../../manager/UIManager":"UIManager","../../../net/NetCmd":"NetCmd","../../common/List":"List","../../common/componet/ButtonEx":"ButtonEx"}],ActivityExchange:[function(e,t,n){"use strict";cc._RF.push(t,"204f9zbO/1B0quBQfUl7pN4","ActivityExchange");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../common/UIHelper"),r=e("../../../common/utils/Utils"),s=e("../../../manager/DataManager"),c=e("../../../manager/EventManager"),l=e("../../../manager/NetManager"),p=e("../../../manager/UIManager"),u=e("../../../net/NetCmd"),h=cc._decorator,d=h.ccclass,g=h.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.editbox=null,t.btn_exchange=null,t.node_grey_exchange=null,t.action_time=null,t.exchange_id=null,t}return o(t,e),t.prototype.start=function(){this.addEventListener()},t.prototype.addEventListener=function(){c.EventManager.on(this,u.ProtocolHallCmd.ExchangeCodeRes,this.onExchangeCodeRes.bind(this)),r.default.addClickEventEND(this.btn_exchange,this.onClickExchange.bind(this))},t.prototype.onDestroy=function(){c.EventManager.off(this)},t.prototype.init=function(e,t){this.btn_exchange.active=""==s.DataManager.userInfo.exchange_code,this.node_grey_exchange.active=""!=s.DataManager.userInfo.exchange_code,this.editbox.placeholder=""==s.DataManager.userInfo.exchange_code?"\u8bf7\u8f93\u5165\u5151\u6362\u7801ID":s.DataManager.userInfo.exchange_code+"",this.editbox.enabled=""===s.DataManager.userInfo.exchange_code,this.showActionTime(e.start_time,e.end_time)},t.prototype.showActionTime=function(e,t){if(-1==e&&-1==t)this.action_time.string="\u6c38\u4e45\u6d3b\u52a8";else{var n=r.default.timestampToTimeString(e).split(" ")[0],o=-1==t?"\u6c38\u4e45":r.default.timestampToTimeString(t).split(" ")[0];this.action_time.string=n+" - "+o}},t.prototype.onClickExchange=function(){if(a.default.checkTourist(function(e){})){var e=this.editbox.string;e?(this.exchange_id=e,l.NetManager.protocolHall.sendExchangeCode(e)):p.UIManager.showTips("\u8bf7\u8f93\u5165\u5151\u6362\u7801")}},t.prototype.onExchangeCodeRes=function(e){p.UIManager.showTips(e.err_msg),0==e.status&&(this.editbox.string="",this.editbox.placeholder=this.exchange_id,this.editbox.enabled=!1,this.btn_exchange.active=!1,this.node_grey_exchange.active=!0)},i([g(cc.EditBox)],t.prototype,"editbox",void 0),i([g(cc.Node)],t.prototype,"btn_exchange",void 0),i([g(cc.Node)],t.prototype,"node_grey_exchange",void 0),i([g(cc.Label)],t.prototype,"action_time",void 0),t=i([d],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../../common/UIHelper":"UIHelper","../../../common/utils/Utils":"Utils","../../../manager/DataManager":"DataManager","../../../manager/EventManager":"EventManager","../../../manager/NetManager":"NetManager","../../../manager/UIManager":"UIManager","../../../net/NetCmd":"NetCmd"}],ActivityGift:[function(e,t,n){"use strict";cc._RF.push(t,"2dc080lMsxCDYY9S5w/sQh2","ActivityGift");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../net/NetCmd"),r=e("../../../common/utils/Utils"),s=e("../../../manager/NetManager"),c=e("../../../manager/UIManager"),l=e("../../../common/Text"),p=e("../../../manager/EventManager"),u=cc._decorator,h=u.ccclass,d=u.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.center=null,t.item_center=null,t.item_bottom=null,t.action_time=null,t.now_vip=null,t.can_get=null,t.already_get=null,t.btn_reward=null,t.cur_vip_id=null,t.can_click=null,t.data=null,t.id=0,t}return o(t,e),t.prototype.onLoad=function(){this.addEventListener(),p.EventManager.on(this,a.ProtocolHallCmd.GetVipRewardResp,this.onSubRefBottomInfo.bind(this))},t.prototype.onDestroy=function(){p.EventManager.off(this)},t.prototype.addEventListener=function(){var e=this;r.default.addClickEventEND(this.btn_reward,function(){if(e.can_click){var t=e.cur_vip_id;console.log("\u5f53\u524dVIP\u7b49\u7ea7ID",t),s.NetManager.protocolHall.sendVipRewardsReq(t,e.id)}})},t.prototype.showDataInfo=function(e){this.center.removeAllChildren();for(var t=0;t<e.length;t++)if(t!=e.length-1){var n=cc.instantiate(this.item_center);n.getChildByName("label_vip_level").getComponent(cc.Label).string=e[t].vip_name,n.getChildByName("label_vip_award").getComponent(cc.Label).string=e[t].coin,n.active=!0,this.center.addChild(n)}else{this.item_bottom.getChildByName("label_vip_level").getComponent(cc.Label).string=e[t].vip_name,this.item_bottom.getChildByName("label_vip_award").getComponent(cc.Label).string=e[t].coin}this.center.getComponent(cc.Layout).updateLayout()},t.prototype.init=function(e,t){this.id=e.id,this.data=e.gift_action.vip_list,this.data&&(this.showActionTime(e.start_time,e.end_time),this.showBottomInfo(e.gift_action),this.showDataInfo(this.data))},t.prototype.showActionTime=function(e,t){if(-1==e&&-1==t)this.action_time.string="\u6c38\u4e45\u6d3b\u52a8";else{var n=r.default.timestampToTimeString(e).split(" ")[0],o=-1==t?"\u6c38\u4e45":r.default.timestampToTimeString(t).split(" ")[0];this.action_time.string=n+" - "+o}},t.prototype.showBottomInfo=function(e){this.now_vip.string=e.vip_level,this.can_get.string=e.surplus_coin,this.already_get.string=e.already_receive_coin;var t=parseFloat(e.surplus_coin);this.cur_vip_id=e.cur_vip_id,t>0?this.showRewardBtn(!0):this.showRewardBtn(!1)},t.prototype.showRewardBtn=function(e){this.btn_reward.active=!0,this.btn_reward.getChildByName("on").active=e,this.btn_reward.getChildByName("off").active=!e,this.can_click=e},t.prototype.onSubRefBottomInfo=function(e){this.can_get.string="0",this.already_get.string=e.already_receive_coin,this.showRewardBtn(!1),c.UIManager.showTips(l.Tips.ReciveSuccess)},i([d(cc.Node)],t.prototype,"center",void 0),i([d(cc.Node)],t.prototype,"item_center",void 0),i([d(cc.Node)],t.prototype,"item_bottom",void 0),i([d(cc.Label)],t.prototype,"action_time",void 0),i([d(cc.Label)],t.prototype,"now_vip",void 0),i([d(cc.Label)],t.prototype,"can_get",void 0),i([d(cc.Label)],t.prototype,"already_get",void 0),i([d(cc.Node)],t.prototype,"btn_reward",void 0),t=i([h],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../common/Text":"Text","../../../common/utils/Utils":"Utils","../../../manager/EventManager":"EventManager","../../../manager/NetManager":"NetManager","../../../manager/UIManager":"UIManager","../../../net/NetCmd":"NetCmd"}],ActivityRebate:[function(e,t,n){"use strict";cc._RF.push(t,"344076zUA1PRKHHPcHqt/zV","ActivityRebate");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../common/Text"),r=e("../../../common/utils/Utils"),s=e("../../../manager/EventManager"),c=e("../../../manager/NetManager"),l=e("../../../manager/UIManager"),p=e("../../../net/NetCmd"),u=cc._decorator,h=u.ccclass,d=u.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.action_time=null,t.center=null,t.item_center=null,t.item_bottom=null,t.label_now_vip=null,t.label_can_get=null,t.label_last_bet=null,t.btn_reward=null,t.can_click=null,t.data=null,t.id=0,t.type=0,t}return o(t,e),t.prototype.onLoad=function(){s.EventManager.on(this,p.ProtocolHallCmd.GetActionRewardRes,this.onSubActionReward.bind(this))},t.prototype.start=function(){this.addEventListener()},t.prototype.onDestroy=function(){s.EventManager.off(this)},t.prototype.addEventListener=function(){var e=this;r.default.addClickEventEND(this.btn_reward,function(){e.can_click&&c.NetManager.protocolHall.sendActionRewardReq(e.type,e.id)})},t.prototype.init=function(e,t){this.id=e.id,this.type=e.type;var n=JSON.parse(e.json_data);this.showDataInfo(n),this.showActionTime(e.start_time,e.end_time),this.showBottomInfo(n)},t.prototype.showDataInfo=function(e){var t=e.vip_info,n=e.vip_name;this.center.removeAllChildren();for(var o=0;o<t.length;o++)if(o!=t.length-1){var i=cc.instantiate(this.item_center);i.getChildByName("label_level").getComponent(cc.Label).string="VIP"+n[o],i.getChildByName("label_percent").getComponent(cc.Label).string=t[o]+"%",i.active=!0,this.center.addChild(i)}else{this.item_bottom.getChildByName("label_level").getComponent(cc.Label).string="VIP"+n[o],this.item_bottom.getChildByName("label_percent").getComponent(cc.Label).string=t[o]+"%"}this.center.getComponent(cc.Layout).updateLayout()},t.prototype.showActionTime=function(e,t){if(-1==e&&-1==t)this.action_time.string="\u6c38\u4e45\u6d3b\u52a8";else{var n=r.default.timestampToTimeString(e).split(" ")[0],o=-1==t?"\u6c38\u4e45":r.default.timestampToTimeString(t).split(" ")[0];this.action_time.string=n+" - "+o}},t.prototype.showBottomInfo=function(e){this.label_now_vip.string=e.cur_vip,this.label_can_get.string=e.surplus_coin,this.label_last_bet.string=e.last_bet_coin,parseFloat(e.surplus_coin)>0?this.showRewardBtn(!0):this.showRewardBtn(!1)},t.prototype.showRewardBtn=function(e){this.btn_reward.active=!0,this.btn_reward.getChildByName("on").active=e,this.btn_reward.getChildByName("off").active=!e,this.can_click=e},t.prototype.onSubActionReward=function(e){e.type==this.type&&e.id==this.id&&0!=this.type&&0!=this.id&&(this.label_can_get.string="0",this.showRewardBtn(!1),l.UIManager.showTips(a.Tips.ReciveSuccess))},i([d(cc.Label)],t.prototype,"action_time",void 0),i([d(cc.Node)],t.prototype,"center",void 0),i([d(cc.Node)],t.prototype,"item_center",void 0),i([d(cc.Node)],t.prototype,"item_bottom",void 0),i([d(cc.Label)],t.prototype,"label_now_vip",void 0),i([d(cc.Label)],t.prototype,"label_can_get",void 0),i([d(cc.Label)],t.prototype,"label_last_bet",void 0),i([d(cc.Node)],t.prototype,"btn_reward",void 0),t=i([h],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../../common/Text":"Text","../../../common/utils/Utils":"Utils","../../../manager/EventManager":"EventManager","../../../manager/NetManager":"NetManager","../../../manager/UIManager":"UIManager","../../../net/NetCmd":"NetCmd"}],ActivityRecharge:[function(e,t,n){"use strict";cc._RF.push(t,"c1767mW7OdII755HdXYdpzd","ActivityRecharge");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../common/log/LogWrap"),r=e("../../../common/Text"),s=e("../../../common/utils/Utils"),c=e("../../../manager/EventManager"),l=e("../../../manager/NetManager"),p=e("../../../manager/UIManager"),u=e("../../../net/NetCmd"),h=e("../../common/componet/ButtonEx"),d=e("../../common/List"),g=cc._decorator,f=g.ccclass,m=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_info=null,t.action_time=null,t.content=null,t.data=null,t.id=0,t.type=0,t}return o(t,e),t.prototype.onLoad=function(){c.EventManager.on(this,u.ProtocolHallCmd.GetActionRewardRes,this.onSubActionReward.bind(this))},t.prototype.start=function(){},t.prototype.onDestroy=function(){c.EventManager.off(this)},t.prototype.onListRender=function(e,t){var n=this;if(0==t)e.height=20,e.getChildByName("img_head").active=!0,e.getChildByName("img_rule").active=!1,e.getChildByName("item_content").active=!1;else if(t==this.data.length-1)e.height=92,e.getChildByName("img_rule").active=!0,e.getChildByName("img_head").active=!1,e.getChildByName("item_content").active=!1;else{e.height=115,e.name=this.data[t].id+"",e.getChildByName("img_rule").active=!1,e.getChildByName("img_head").active=!1;var o=e.getChildByName("item_content");o.active=!0,o.getChildByName("gold").getComponent(cc.Label).string="x "+this.data[t].reward_gold,o.getChildByName("info").getComponent(cc.Label).string="\u5145\u503c"+this.data[t].got_num+"/"+this.data[t].to_get_num;var i=o.getChildByName("bar_di");i.getChildByName("Mask").width=this.data[t].got_num/this.data[t].to_get_num*i.width;var a=o.getChildByName("btn_recharge"),r=a.getComponent(h.default);a.active=0==this.data[t].got_status,0==this.data[t].got_status&&r.registerClick(function(){l.NetManager.protocolBank.sendRechargePlatformReq()});var s=o.getChildByName("btn_draw"),c=s.getComponent(h.default);s.active=1==this.data[t].got_status,1==this.data[t].got_status&&c.registerClick(function(){l.NetManager.protocolHall.sendActionRewardReq(n.type,n.id,n.data[t].id)}),o.getChildByName("already_get").active=2==this.data[t].got_status}},t.prototype.init=function(e,t){this.id=e.id,this.type=e.type,this.data=JSON.parse(JSON.stringify(e.recharge_act)),this.data&&(this.updateData(),this.sortData(),this.showActionTime(e.start_time,e.end_time),this.scroll_info.numItems=this.data.length),this.scroll_info.scrollView.scrollToTop(.01)},t.prototype.showActionTime=function(e,t){if(-1==e&&-1==t)this.action_time.string="\u6c38\u4e45\u6d3b\u52a8";else{var n=s.default.timestampToTimeString(e).split(" ")[0],o=-1==t?"\u6c38\u4e45":s.default.timestampToTimeString(t).split(" ")[0];this.action_time.string=n+" - "+o}},t.prototype.onSubActionReward=function(e){if(e.type==this.type&&e.id==this.id&&0!=this.type&&0!=this.id){if(a.LogWrap.log("onSubActionReward"),this.content.children.forEach(function(t){if(t.name==e.item_id)if(1==e.status){var n=t.getChildByName("item_content");n.getChildByName("btn_recharge").active=!1,n.getChildByName("btn_draw").active=!1,n.getChildByName("already_get").active=!0,p.UIManager.showTips(r.Tips.ReciveSuccess)}else p.UIManager.showTips(r.Tips.ReciveFail)}),1==e.status)for(var t=0;t<this.data.length;t++)this.data[t].id==e.item_id&&(this.data[t].got_status=2);this.sortData(),this.scroll_info.updateAll()}},t.prototype.sortData=function(){for(var e=[],t=[],n=0;n<this.data.length;n++){var o=this.data[n];1==o.got_status?e=e.concat(o):t=t.concat(o)}for(n=0;n<e.length;n++)for(var i=n+1;i<e.length;i++)if(e[n].id>e[i].id){var r=e[n];e[n]=e[i],e[i]=r}for(n=0;n<t.length;n++)for(i=n+1;i<t.length;i++)if(2==t[n].got_status&&0==t[i].got_status){r=t[n];t[n]=t[i],t[i]=r}for(n=0;n<t.length;n++)for(i=n+1;i<t.length;i++)if(2==t[n].got_status&&2==t[i].got_status&&t[n].id>t[i].id){r=t[n];t[n]=t[i],t[i]=r}this.data=e.concat(t),a.LogWrap.log("\u6392\u5e8f\u540e\u7684\u6570\u636e",this.data)},t.prototype.updateData=function(){this.data.unshift({id:-1,got_status:1});var e={id:this.data[this.data.length-1].id+1,got_status:2};this.data.push(e)},i([m(d.default)],t.prototype,"scroll_info",void 0),i([m(cc.Label)],t.prototype,"action_time",void 0),i([m(cc.Node)],t.prototype,"content",void 0),t=i([f],t)}(cc.Component);n.default=_,cc._RF.pop()},{"../../../common/Text":"Text","../../../common/log/LogWrap":"LogWrap","../../../common/utils/Utils":"Utils","../../../manager/EventManager":"EventManager","../../../manager/NetManager":"NetManager","../../../manager/UIManager":"UIManager","../../../net/NetCmd":"NetCmd","../../common/List":"List","../../common/componet/ButtonEx":"ButtonEx"}],ActivitySingleRecharge:[function(e,t,n){"use strict";cc._RF.push(t,"b12fdzwASZEk5dTjUfkXSLX","ActivitySingleRecharge");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../common/utils/Utils"),r=e("../../../manager/EventManager"),s=e("../../common/List"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_info=null,t.action_time=null,t.content=null,t.data=null,t}return o(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){},t.prototype.onDestroy=function(){r.EventManager.off(this)},t.prototype.onListRender=function(e,t){if(t==this.data.length-1)e.active=!0,e.getChildByName("img_rule").active=!0,e.getChildByName("item_content").active=!1;else{e.name=this.data[t].id+"",e.getChildByName("img_rule").active=!1;var n=e.getChildByName("item_content");n.active=!0;var o=n.getChildByName("layout"),i=o.getChildByName("gold_wupindi");i.active=1==this.data[t].reward_type||3==this.data[t].reward_type,i.getChildByName("num").getComponent(cc.Label).string=100*this.data[t].gold_percentage+"%";var a=o.getChildByName("tree_wupindi");a.active=2==this.data[t].reward_type||3==this.data[t].reward_type,a.getChildByName("num").getComponent(cc.Label).string="x"+this.data[t].tree_times,n.getChildByName("info").getComponent(cc.Label).string="\u5355\u7b14\u5145\u503c\u4f18\u60e0"+this.data[t].reward_gold}},t.prototype.showTableList=function(e){this.data=JSON.parse(JSON.stringify(e.single_recharge_act)),this.data&&(this.updateData(),this.showActionTime(e.start_time,e.end_time),this.scroll_info.numItems=this.data.length),this.scroll_info.scrollView.scrollToTop(.01)},t.prototype.showActionTime=function(e,t){if(-1==e&&-1==t)this.action_time.string="\u6c38\u4e45\u6d3b\u52a8";else{var n=a.default.timestampToTimeString(e).split(" ")[0],o=-1==t?"\u6c38\u4e45":a.default.timestampToTimeString(t).split(" ")[0];this.action_time.string=n+" - "+o}},t.prototype.updateData=function(){this.data.push({id:999,got_status:2})},i([p(s.default)],t.prototype,"scroll_info",void 0),i([p(cc.Label)],t.prototype,"action_time",void 0),i([p(cc.Node)],t.prototype,"content",void 0),t=i([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../common/utils/Utils":"Utils","../../../manager/EventManager":"EventManager","../../common/List":"List"}],ActivityValidBet:[function(e,t,n){"use strict";cc._RF.push(t,"476a4QJzJhKKZaCJVWlKKuh","ActivityValidBet");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s={7001:{imgUrl:"animation/spine/activity/h3",labelPos:cc.v2(-118,183),labelColor:cc.color(227,90,29)},7002:{imgUrl:"animation/spine/activity/h5",labelPos:cc.v2(0,176),labelColor:cc.color(255,255,255)},7003:{imgUrl:"animation/spine/activity/h4",labelPos:cc.v2(-80,182),labelColor:cc.color(141,115,0)}},c=e("../../../common/log/LogWrap"),l=e("../../../common/Text"),p=e("../../../manager/EventManager"),u=e("../../../manager/NetManager"),h=e("../../../manager/ResManager"),d=e("../../../manager/UIManager"),g=e("../../../net/NetCmd"),f=e("../../common/componet/ButtonEx"),m=e("../../common/List"),_=cc._decorator,y=_.ccclass,v=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine_haibao=null,t.scroll_info=null,t.action_time=null,t.content=null,t.data=null,t.id=0,t.type=0,t}return o(t,e),t.prototype.onLoad=function(){p.EventManager.on(this,g.ProtocolHallCmd.GetActionRewardRes,this.onSubActionReward.bind(this))},t.prototype.start=function(){},t.prototype.onDestroy=function(){p.EventManager.off(this)},t.prototype.onListRender=function(e,t){var n=this;if(0==t)e.height=20,e.getChildByName("img_head").active=!0,e.getChildByName("img_rule").active=!1,e.getChildByName("item_content").active=!1;else if(t==this.data.length-1)e.height=100,e.getChildByName("img_rule").active=!0,e.getChildByName("img_head").active=!1,e.getChildByName("item_content").active=!1;else{e.height=120,e.name=this.data[t].id+"",e.getChildByName("img_rule").active=!1,e.getChildByName("img_head").active=!1;var o=e.getChildByName("item_content");o.active=!0,o.getChildByName("gold").getComponent(cc.Label).string="x "+this.data[t].reward_gold,o.getChildByName("info").getComponent(cc.Label).string="\u6709\u6548\u6295\u6ce8"+this.data[t].got_num+"/"+this.data[t].to_get_num;var i=o.getChildByName("bar_di");i.getChildByName("Mask").width=this.data[t].got_num/this.data[t].to_get_num*i.width,o.getChildByName("node_grey").active=0==this.data[t].got_status;var a=o.getChildByName("btn_draw"),r=a.getComponent(f.default);a.active=1==this.data[t].got_status,1==this.data[t].got_status&&r.registerClick(function(){u.NetManager.protocolHall.sendActionRewardReq(n.type,n.id,n.data[t].id)}),o.getChildByName("already_get").active=2==this.data[t].got_status}},t.prototype.init=function(e,t){this.id=e.id,this.type=e.type,this.data=JSON.parse(e.json_data),this.data&&(this.updateData(),this.sortData(),this.showActionTime(e.start_time,e.end_time),this.loadHaibao(this.data[1].cid),this.spine_haibao.node.active=!0,this.scroll_info.numItems=this.data.length),this.scroll_info.scrollView.scrollToTop(.01)},t.prototype.loadHaibao=function(e){return a(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return this.action_time.node.color=s[e].labelColor,this.action_time.node.position=s[e].labelPos,[4,h.ResManager.loadResAsync(s[e].imgUrl,sp.SkeletonData)];case 1:return t=n.sent(),this.spine_haibao.node.active=!0,this.spine_haibao.skeletonData=t,this.spine_haibao.clearTracks(),this.spine_haibao.setToSetupPose(),this.spine_haibao.setAnimation(0,"animation",!0),[2]}})})},t.prototype.showActionTime=function(e,t){if(-1==e&&-1==t)this.action_time.string="\u6c38\u4e45\u6d3b\u52a8";else{var n=this.timestampToTimeString(e),o=-1==t?"\u6c38\u4e45":this.timestampToTimeString(t);this.action_time.string=n+"-"+o}},t.prototype.onSubActionReward=function(e){if(e.type==this.type&&e.id==this.id&&0!=this.type&&0!=this.id){if(c.LogWrap.log("onSubActionReward"),this.content.children.forEach(function(t){if(t.name==e.item_id)if(1==e.status){var n=t.getChildByName("item_content");n.getChildByName("node_grey").active=!1,n.getChildByName("btn_draw").active=!1,n.getChildByName("already_get").active=!0,d.UIManager.showTips(l.Tips.ReciveSuccess)}else d.UIManager.showTips(l.Tips.ReciveFail)}),1==e.status)for(var t=0;t<this.data.length;t++)this.data[t].id==e.item_id&&(this.data[t].got_status=2);this.sortData(),this.scroll_info.updateAll()}},t.prototype.sortData=function(){for(var e=[],t=[],n=0;n<this.data.length;n++){var o=this.data[n];1==o.got_status?e=e.concat(o):t=t.concat(o)}for(n=0;n<e.length;n++)for(var i=n+1;i<e.length;i++)if(e[n].id>e[i].id){var a=e[n];e[n]=e[i],e[i]=a}for(n=0;n<t.length;n++)for(i=n+1;i<t.length;i++)if(2==t[n].got_status&&0==t[i].got_status){a=t[n];t[n]=t[i],t[i]=a}for(n=0;n<t.length;n++)for(i=n+1;i<t.length;i++)if(2==t[n].got_status&&2==t[i].got_status&&t[n].id>t[i].id){a=t[n];t[n]=t[i],t[i]=a}this.data=e.concat(t),c.LogWrap.log("\u6392\u5e8f\u540e\u7684\u6570\u636e",this.data)},t.prototype.updateData=function(){this.data.unshift({id:-1,got_status:1});var e={id:this.data[this.data.length-1].id+1,got_status:2};this.data.push(e)},t.prototype.timestampToTimeString=function(e){return new Date(parseInt(e)+288e5).toJSON().substr(0,19).replace("T"," ").split(" ")[0].replace(/-/g,".")},i([v(sp.Skeleton)],t.prototype,"spine_haibao",void 0),i([v(m.default)],t.prototype,"scroll_info",void 0),i([v(cc.Label)],t.prototype,"action_time",void 0),i([v(cc.Node)],t.prototype,"content",void 0),t=i([y],t)}(cc.Component);n.default=b,cc._RF.pop()},{"../../../common/Text":"Text","../../../common/log/LogWrap":"LogWrap","../../../manager/EventManager":"EventManager","../../../manager/NetManager":"NetManager","../../../manager/ResManager":"ResManager","../../../manager/UIManager":"UIManager","../../../net/NetCmd":"NetCmd","../../common/List":"List","../../common/componet/ButtonEx":"ButtonEx"}],Activity:[function(e,t,n){"use strict";cc._RF.push(t,"3f2f3pIDNdHJY4BJLn2ZWqp","Activity");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../base/PopupView"),c=e("../../../manager/NetManager"),l=e("../../common/componet/ButtonEx"),p=e("../../../manager/EventManager"),u=e("../../../net/NetCmd"),h=e("../../common/List"),d=e("../../../manager/ResManager"),g=e("../../../common/log/LogWrap"),f=cc._decorator,m=f.ccclass,_=(f.property,{1:"ActivityGift",2:"ActivityAchievement",3:"ActivityCommon",4:"ActivityRecharge",7:"ActivityValidBet",9:"ActivityClubInvite",10:"ActivityRebate",100:"ActivityBindInviteCode",101:"ActivityExchange"}),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.index=0,t}return o(t,e),t.prototype.start=function(){this.updateTab(),c.NetManager.protocolHall.sendTheActionReq(this.data.action_type[0].type,this.data.action_type[0].id)},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this))},t.prototype.initEvent=function(){p.EventManager.on(this,u.ProtocolHallCmd.ActivityListResp,this.onActivityListResp.bind(this)),p.EventManager.on(this,u.ProtocolHallCmd.ActivityResp,this.onActivityResp.bind(this)),p.EventManager.on(this,u.ProtocolHallCmd.GetRewardNotify,this.onGetRewardNotify.bind(this))},t.prototype.openAnimation=function(){this.getComponent(cc.Animation).play()},t.prototype.onClickClose=function(){this.close(!1)},t.prototype.onTabListRender=function(e,t){var n=this,o=this.data.action_type[t],i=e.getComponentInChildren(cc.Label);i.string=o.name;var a=e.getComponent(l.default);a.transition=cc.Button.Transition.SPRITE,e.getChildByName("red_point").active=o.red_point>0,this.index==t?(a.interactable=!1,i.fontSize=28,i.node.color=cc.color(147,98,30)):(a.interactable=!0,i.fontSize=26,i.node.color=cc.color(226,205,198)),a.registerClick(function(){n.index=t,c.NetManager.protocolHall.sendTheActionReq(o.type,o.id),a.interactable=!1,i.fontSize=28,i.node.color=cc.color(147,98,30),n.getItem("scroll_tab").content.children.forEach(function(t){var n=t.getComponentInChildren(cc.Label);t!=e&&(n.fontSize=26,n.node.color=cc.color(226,205,198),t.getComponent(l.default).interactable=!0)})})},t.prototype.updateTab=function(){this.data&&this.data.action_type&&(this.getItem("scroll_tab").node.getComponent(h.default).numItems=this.data.action_type.length)},t.prototype.updateActivity=function(e){return a(this,void 0,void 0,function(){var t,n,o,i,a;return r(this,function(r){switch(r.label){case 0:return _[e.type]?(t=this.getItem("node_activity").getChildByName(_[e.type]))?[3,2]:[4,d.ResManager.loadResAsync("prefabs/activity/"+_[e.type],cc.Prefab)]:[3,3];case 1:(n=r.sent())&&cc.isValid(this.node)&&((t=cc.instantiate(n)).name=_[e.type],this.getItem("node_activity").addChild(t)),r.label=2;case 2:for(o=0,i=this.getItem("node_activity").children;o<i.length;o++)(a=i[o]).active=a.name==_[e.type];t.getComponent(_[e.type]).init(e,this.data.action_type[this.index]),r.label=3;case 3:return[2]}})})},t.prototype.onActivityListResp=function(e){this.data=e,this.updateTab()},t.prototype.onActivityResp=function(e){this.updateActivity(e)},t.prototype.onGetRewardNotify=function(e){for(var t=0;t<this.data.action_type.length;t++){var n=this.data.action_type[t];n.id==e.id&&(n.red_point-=1)}g.LogWrap.log("\u66f4\u65b0\u7684\u6d3b\u52a8ID",e.id),this.updateTab()},t=i([m],t)}(s.default);n.default=y,cc._RF.pop()},{"../../../common/log/LogWrap":"LogWrap","../../../manager/EventManager":"EventManager","../../../manager/NetManager":"NetManager","../../../manager/ResManager":"ResManager","../../../net/NetCmd":"NetCmd","../../base/PopupView":"PopupView","../../common/List":"List","../../common/componet/ButtonEx":"ButtonEx"}],AlertPhoneNum:[function(e,t,n){"use strict";cc._RF.push(t,"c22b5buQmFOe7Up3fVzd3jD","AlertPhoneNum");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/EventManager"),s=e("../../net/NetCmd"),c=e("../../manager/DataManager"),l=e("../../manager/UIManager"),p=e("../../common/Text"),u=e("../../manager/NetManager"),h=cc._decorator,d=h.ccclass,g=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isAnimation=!0,t.canGetCode=!0,t.timeNumber=60,t.type=4,t}return o(t,e),t.prototype.start=function(){this.showCheckView()},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_next").registerClick(this.onClickNext.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this)),this.getItem("btn_auth").registerClick(this.onClickAuth.bind(this))},t.prototype.initEvent=function(){r.EventManager.on(this,s.ProtocolAccountCmd.CheckBoundPhoneVercodeResp,this.onCheckBoundPhoneVercodeResp.bind(this)),r.EventManager.on(this,s.ProtocolAccountCmd.ModifyBindMobilePhoneResp,this.onModifyBindMobilePhoneResp.bind(this))},t.prototype.onClickClose=function(){this.close()},t.prototype.onClickAuth=function(){var e=this,t=this.getItem("input_phone").string;this.canGetCode&&(4==this.type?t=c.DataManager.userInfo.phone_number:5==this.type&&(t=this.getItem("input_phone").string),t&&11==t.length?/^1[3456789]\d{9}$/.test(t)?(this.canGetCode=!1,u.NetManager.requestPostUrl(s.HttpCmd.GetVerificationCode,{phonenumber:t,type:this.type,channel:c.DataManager.channel,user_id:c.DataManager.userInfo&&c.DataManager.userInfo.userid||0},function(t,n){"success"==t?1==n.ok?(l.UIManager.showTips(p.Tips.SendCodeSuccess),e.updateTimer()):(e.canGetCode=!0,l.UIManager.showTips(n.err_msg||p.Tips.SendCodeFail)):(e.canGetCode=!0,l.UIManager.showTips(p.Tips.SendCodeFail+n))})):l.UIManager.showTips(p.Tips.PhoneNumberError):l.UIManager.showTips(p.Tips.InputPhone))},t.prototype.updateTimer=function(){var e=this;this.node.stopAllActions(),this.timeNumber=60,this.getItem("label_auth").string=this.timeNumber+"s",cc.tween(this.node).repeatForever(cc.sequence(cc.delayTime(1),cc.callFunc(function(){e.timeNumber--,e.timeNumber>0?e.getItem("label_auth").string=e.timeNumber+"s":(e.canGetCode=!0,e.getItem("label_auth").string="\u83b7 \u53d6")}))).start()},t.prototype.onClickSure=function(){var e=this.getItem("input_phone").string,t=this.getItem("input_auth").string;4==this.type?e=c.DataManager.userInfo.phone_number:5==this.type&&(e=this.getItem("input_phone").string),e&&11==e.length?/^1[3456789]\d{9}$/.test(e)?t&&6==t.length?u.NetManager.protocolAccount.sendModifyBindMobilePhoneSecond(e,t):l.UIManager.showTips(p.Tips.InputCode):l.UIManager.showTips(p.Tips.PhoneNumberError):l.UIManager.showTips(p.Tips.InputPhone)},t.prototype.onClickNext=function(){var e=this.getItem("input_auth").string;e&&6==e.length?u.NetManager.protocolAccount.sendModifyBindMobilePhone(e):l.UIManager.showTips(p.Tips.InputCode)},t.prototype.showCheckView=function(){this.getItem("btn_sure").node.active=!1,this.getItem("btn_next").node.active=!0,this.getItem("node_phone").active=!0,this.getItem("input_phone").node.active=!1;var e=c.DataManager.userInfo.phone_number;this.getItem("label_phone").string=this.replaceStr(e)},t.prototype.showNextView=function(){this.getItem("btn_sure").node.active=!0,this.getItem("btn_next").node.active=!1,this.getItem("node_phone").active=!1,this.getItem("input_phone").node.active=!0,this.getItem("input_auth").string="",this.getItem("btn_auth").enabled=!0,this.getItem("label_auth").string="\u83b7\u53d6",this.node.stopAllActions(),this.canGetCode=!0},t.prototype.replaceStr=function(e){return e?(console.log(e),e.substring(0,4)+"***"+e.substr(7)):e},t.prototype.onCheckBoundPhoneVercodeResp=function(){this.type=5,this.showNextView()},t.prototype.onModifyBindMobilePhoneResp=function(){l.UIManager.showTips(p.Tips.ChangePhoneSuccess),this.onClickClose()},t=i([d],t)}(a.default));n.default=g,cc._RF.pop()},{"../../common/Text":"Text","../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],AppStart:[function(e,t,n){"use strict";cc._RF.push(t,"87c56Qq2+lO+L6mGOniaO82","AppStart");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./manager/EventManager"),r=e("./Define"),s=e("./common/log/LogWrap"),c=e("./manager/DataManager"),l=e("./manager/UIManager"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.canvas=null,t.node_view=null,t.node_popup=null,t.node_system=null,t.node_tips=null,t.backgroundTime=0,t}return o(t,e),t.prototype.onLoad=function(){cc.sys.isNative&&s.LogWrap.log(jsb.fileUtils.getSearchPaths()),cc.sys.OS_IOS!=cc.sys.os&&cc.sys.OS_ANDROID!=cc.sys.os||jsb.Device.setKeepScreenOn(!0),l.UIManager.init(this),c.DataManager.loadVersion(),this.initEvent()},t.prototype.initEvent=function(){cc.game.on(cc.game.EVENT_HIDE,this.onGameHide,this),cc.game.on(cc.game.EVENT_SHOW,this.onGameShow,this)},t.prototype.onSizeChanged=function(){cc.log("onSizeChanged"),a.EventManager.emit(r.EventDef.SizeChanged)},t.prototype.onDestroy=function(){cc.game.targetOff(this),a.EventManager.off(this)},t.prototype.start=function(){l.UIManager.open("prefabs/UpdateView")},t.prototype.onGameShow=function(){var e=cc.sys.now()-this.backgroundTime;s.LogWrap.log("\u8fdb\u5165\u540e\u53f0\u65f6\u95f4",e),cc.audioEngine.resumeAll(),a.EventManager.emit(r.EventDef.GameShow,e)},t.prototype.onGameHide=function(){this.backgroundTime=cc.sys.now(),cc.audioEngine.pauseAll(),a.EventManager.emit(r.EventDef.GameHide)},i([h(cc.Canvas)],t.prototype,"canvas",void 0),i([h(cc.Node)],t.prototype,"node_view",void 0),i([h(cc.Node)],t.prototype,"node_popup",void 0),i([h(cc.Node)],t.prototype,"node_system",void 0),i([h(cc.Node)],t.prototype,"node_tips",void 0),t=i([u],t)}(cc.Component);n.default=d,cc._RF.pop()},{"./Define":"Define","./common/log/LogWrap":"LogWrap","./manager/DataManager":"DataManager","./manager/EventManager":"EventManager","./manager/UIManager":"UIManager"}],AudioManager:[function(e,t,n){"use strict";cc._RF.push(t,"caeccp216dH1J1sF8podYE+","AudioManager");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./DataManager"),s=e("../common/log/LogWrap"),c=e("./ResManager"),l=e("../common/utils/Utils"),p=cc._decorator,u=p.ccclass,h=(p.property,function(){function e(){this._bgmVolume=1,this._sfxVolume=1,this._playMusic=!0,this._playSound=!0,this.bgmAudioID=-1,this.bgmUrl="",this.audioIdObj={}}var t;return t=e,Object.defineProperty(e.prototype,"playMusic",{get:function(){return this._playMusic},set:function(e){this._playMusic=e,e?cc.audioEngine.isMusicPlaying()||cc.audioEngine.resumeMusic():cc.audioEngine.pauseMusic()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"playSound",{get:function(){return this._playSound},set:function(e){this._playSound=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bgmVolume",{get:function(){return this._bgmVolume},set:function(e){this._bgmVolume=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sfxVolume",{get:function(){return this._sfxVolume},set:function(e){this._sfxVolume=e},enumerable:!0,configurable:!0}),e.prototype.saveSoundConfig=function(){r.DataManager.storage.set("soundConfig",{playMusic:this.playMusic,playSound:this.playSound,bgmVolume:this.bgmVolume,sfxVolume:this.sfxVolume})},e.prototype.addAudioId=function(e,t){this.audioIdObj[e],this.audioIdObj[e]=t},e.prototype.playBGM=function(e,t){var n=this;void 0===t&&(t="sounds/");var o=cc.path.extname(e);o&&(e=e.slice(0,-o.length));var i=t+e;this.bgmUrl!=i?(this.bgmUrl=i,cc.loader.loadRes(i,cc.AudioClip,function(t,o){t?s.LogWrap.err("\u80cc\u666f\u97f3\u4e50\u51fa\u9519",i):(s.LogWrap.log("playBGM",l.default.getFormatDate(cc.sys.now(),"hh-mm-ss"),e),n.bgmAudioID=cc.audioEngine.playMusic(o,!0))})):s.LogWrap.warn("playBGM \u76f8\u540c",i)},e.prototype.playGameBGM=function(e){var t="game/"+r.DataManager.getGameName(r.DataManager.gameType)+"/audio/";this.playBGM(e,t)},e.prototype.playSFX=function(e,t,n){var o=this;void 0===t&&(t=!1),void 0===n&&(n="sounds/"),s.LogWrap.log("playSFX",e);var i=cc.path.extname(e);return i&&(e=e.slice(0,-i.length)),this.sfxVolume>0&&this.playSound&&cc.loader.loadRes(n+e,cc.AudioClip,function(i,a){if(i)s.LogWrap.err("\u97f3\u6548\u51fa\u9519",n+e);else{var r=cc.audioEngine.playEffect(a,t);o.addAudioId(e,r)}}),null},e.prototype.playGameSFX=function(e,t){void 0===t&&(t=!1);var n="game/"+r.DataManager.getGameName(r.DataManager.gameType)+"/audio/";this.playSFX(e,t,n)},e.prototype.setSFXVolume=function(e){this.sfxVolume=e,this.playSound=e>0,cc.audioEngine.setEffectsVolume(this.sfxVolume)},e.prototype.setBGMVolume=function(e){e>0?(this._playMusic=!0,cc.audioEngine.isMusicPlaying()||cc.audioEngine.resumeMusic()):(this._playMusic=!1,cc.audioEngine.pauseMusic()),this.bgmVolume=e,cc.audioEngine.setMusicVolume(this.bgmVolume)},e.prototype.pauseAll=function(){cc.audioEngine.pauseAll()},e.prototype.resumeAll=function(){cc.audioEngine.resumeAll()},e.prototype.stopAllEffects=function(){cc.audioEngine.stopAllEffects()},e.prototype.stopEffect=function(e){s.LogWrap.log("\u505c\u6b62\u5355\u4e2a\u97f3\u6548"),null!=this.audioIdObj[e]&&(cc.audioEngine.stopEffect(this.audioIdObj[e]),this.audioIdObj[e]=null)},e.prototype.stopBGM=function(){this.bgmUrl="",cc.audioEngine.stopMusic()},e.prototype.playHallBGM=function(){return i(this,void 0,void 0,function(){var e,t;return a(this,function(o){switch(o.label){case 0:return(e=r.DataManager.getBgms())[r.DataManager.bgm]?"\u66f2\u76ee1"!=e[r.DataManager.bgm].name?[3,1]:(n.AudioManager.playBGM(e[r.DataManager.bgm].path),[3,3]):[3,3];case 1:return this.bgmUrl=e[r.DataManager.bgm].path,[4,c.ResManager.loadAsync(this.bgmUrl)];case 2:t=o.sent(),this.bgmAudioID=cc.audioEngine.playMusic(t,!0),o.label=3;case 3:return[2]}})})},e.instance=new t,e=t=o([u],e)}());n.AudioManager=h.instance,cc._RF.pop()},{"../common/log/LogWrap":"LogWrap","../common/utils/Utils":"Utils","./DataManager":"DataManager","./ResManager":"ResManager"}],BankAddCard:[function(e,t,n){"use strict";cc._RF.push(t,"88e90MQMY1ICpy9scnC5XH4","BankAddCard");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../manager/UIManager"),r=e("../../manager/NetManager"),s=e("../base/PopupView"),c=e("../../manager/EventManager"),l=e("../../net/NetCmd"),p=cc._decorator,u=p.ccclass,h=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageType=0,t.cardData=null,t}return o(t,e),t.prototype.start=function(){this.updateUI(this.data.type,this.data.data)},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this))},t.prototype.initEvent=function(){c.EventManager.on(this,l.ProtocolBankCmd.BindBankcardResp,this.onBindBankcardResp.bind(this)),c.EventManager.on(this,l.ProtocolBankCmd.ChangeBoundBankCardResp,this.onBindBankcardResp.bind(this))},t.prototype.onBindBankcardResp=function(){this.close()},t.prototype.updateUI=function(e,t){this.pageType=e,1==e?(this.getItem("img_title_change").active=!0,this.getItem("img_name_disable").active=!0,this.getItem("img_name").active=!1):(this.getItem("img_title_add").active=!0,t&&t.name?(this.getItem("img_name_disable").active=!0,this.getItem("img_name").active=!1):(this.getItem("img_name_disable").active=!1,this.getItem("img_name").active=!0)),this.cardData=t,t&&1==e?(this.getItem("label_name_disable").string=t.name,this.getItem("input_name").string=t.name,this.getItem("input_bank_name").string=t.card_name,this.getItem("input_bank_card").placeholder="\u8bf7\u518d\u6b21\u8f93\u5165\u65b0\u7684\u94f6\u884c\u5361\u8d26\u53f7"):t&&(this.getItem("label_name_disable").string=t.name,this.getItem("input_name").string=t.name)},t.prototype.onClickSure=function(){var e=this.getItem("input_name").string,t=this.getItem("input_bank_name").string,n=this.getItem("input_bank_card").string,o=this.getItem("input_safe_code").string;e?t?n?o?0==this.pageType?r.NetManager.protocolBank.sendBindBankcard(e,t,n,o):r.NetManager.protocolBank.sendChangeBoundBankCard(e,t,n,o,this.cardData.index):a.UIManager.showTips("\u8bf7\u8f93\u5165\u5b89\u5168\u5bc6\u7801"):a.UIManager.showTips("\u8bf7\u8f93\u5165\u65b0\u7684\u94f6\u884c\u5361\u8d26\u53f7"):a.UIManager.showTips("\u8bf7\u8f93\u5165\u94f6\u884c\u540d\u79f0"):a.UIManager.showTips("\u8bf7\u8f93\u5165\u5f00\u6237\u4eba\u59d3\u540d")},t=i([u],t)}(s.default));n.default=h,cc._RF.pop()},{"../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],BankHistory:[function(e,t,n){"use strict";cc._RF.push(t,"83a34wA+ntC8KTkwqkeRq7t","BankHistory");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../common/componet/ButtonEx"),r=e("../../manager/EventManager"),s=e("../../net/NetCmd"),c=e("../common/List"),l=e("../../common/utils/Utils"),p=e("../../manager/NetManager"),u=cc._decorator,h=u.ccclass,d=u.property,g=[["\u660e\u7ec6\u7c7b\u578b","\u6536\u652f\u91d1\u989d","\u65f6\u95f4"],["\u63d0\u73b0\u72b6\u6001","\u63d0\u73b0\u91d1\u989d","\u65f6\u95f4"],["\u5145\u503c\u72b6\u6001","\u5145\u503c\u91d1\u989d","\u65f6\u95f4"]],f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_type=null,t.btn_day=null,t.node_type=null,t.node_day=null,t.scroll_detail=null,t.img_type_arrow=null,t.img_day_arrow=null,t.label_titles=[],t.label_type=null,t.label_time=null,t.label_tips=null,t.detailData=[],t.withdrawData=[],t.rechargeData=[],t.index=0,t.type=0,t.time=0,t.page=1,t.pageCount=30,t}return o(t,e),t.prototype.onLoad=function(){var e=this;this.btn_type.registerClick(this.onClickType.bind(this)),this.btn_day.registerClick(this.onClickDay.bind(this)),this.initEvent(),this.scroll_detail.node.on("scroll-to-bottom",function(){e.page+=1,e.page>e.pageCount?e.page=e.pageCount:e.send()})},t.prototype.onDestroy=function(){r.EventManager.off(this)},t.prototype.start=function(){},t.prototype.init=function(){this.page=1,this.node_type.active=!1,this.img_type_arrow.scaleY=1,this.node_day.active=!1,this.img_day_arrow.scaleY=1},t.prototype.onEnable=function(){this.clear(),this.send()},t.prototype.initEvent=function(){r.EventManager.on(this,s.ProtocolBankCmd.GetAccountDetailsResp,this.onGetAccountDetailsResp.bind(this)),r.EventManager.on(this,s.ProtocolBankCmd.GetWithdrawalsRecordResp,this.onGetWithdrawalsRecordResp.bind(this)),r.EventManager.on(this,s.ProtocolBankCmd.GetRechargeRecordResp,this.onGetRechargeRecordResp.bind(this))},t.prototype.send=function(){switch(this.index){case 0:p.NetManager.protocolBank.sendGetAccountDetails(this.type,this.time,this.page,this.pageCount);break;case 1:p.NetManager.protocolBank.sendGetWithdrawalsRecord(this.time,this.page,this.pageCount);break;case 2:p.NetManager.protocolBank.sendGetRechargeRecord(this.time,this.page,this.pageCount)}},t.prototype.clear=function(){this.detailData=[],this.withdrawData=[],this.rechargeData=[],this.page=1},t.prototype.onGetAccountDetailsResp=function(e){if(this.index=0,this.detailData=this.detailData.concat(e.accountDetailList),!this.detailData||0==this.detailData.length)return this.label_tips.node.active=!0,void(this.scroll_detail.numItems=0);this.label_tips.node.active=!1,this.scroll_detail.numItems=this.detailData.length},t.prototype.onGetWithdrawalsRecordResp=function(e){if(this.index=1,this.withdrawData=this.withdrawData.concat(e.withdrawalsRecordList),!this.withdrawData||0==this.withdrawData.length)return this.label_tips.node.active=!0,void(this.scroll_detail.numItems=0);this.label_tips.node.active=!1,this.scroll_detail.numItems=this.withdrawData.length},t.prototype.onGetRechargeRecordResp=function(e){if(this.index=2,this.rechargeData=this.rechargeData.concat(e.rechargeRecordList),!this.rechargeData||0==this.rechargeData.length)return this.label_tips.node.active=!0,void(this.scroll_detail.numItems=0);this.label_tips.node.active=!1,this.scroll_detail.numItems=this.rechargeData.length},t.prototype.onClickType=function(){this.node_type.active=!this.node_type.active,this.img_type_arrow.scaleY=this.node_type.active?-1:1,this.node_day.active=!1,this.img_day_arrow.scaleY=1},t.prototype.onClickDay=function(){this.node_day.active=!this.node_day.active,this.img_day_arrow.scaleY=this.node_day.active?-1:1,this.node_type.active=!1,this.img_type_arrow.scaleY=1},t.prototype.onToggleIndex=function(e){this.index=parseInt(e.node.name.replace("toggle_index",""));for(var t=0;t<g[this.index].length;t++)this.label_titles[t].string=g[this.index][t];switch(this.index){case 0:this.btn_type.node.active=!0;break;default:this.btn_type.node.active=!1}this.node_day.active=!1,this.img_day_arrow.scaleY=1,this.node_type.active=!1,this.img_type_arrow.scaleY=1,this.clear(),this.send()},t.prototype.onToggleType=function(e){this.onClickType(),this.type=parseInt(e.node.name.replace("toggle_type","")),this.label_type.string=e.getComponentsInChildren(cc.Label)[0].string,this.clear(),this.send()},t.prototype.onToggleDay=function(e){this.onClickDay(),this.time=parseInt(e.node.name.replace("toggle_day","")),this.label_time.string=e.getComponentsInChildren(cc.Label)[0].string,this.clear(),this.send()},t.prototype.onListRender=function(e,t){var n=e.getComponentsInChildren(cc.Label);switch(this.index){case 0:if(!this.detailData[t])return;var o=l.default.timestampToTimeString(1e3*this.detailData[t].time),i=this.detailData[t].detailTypeStr,a=this.detailData[t].budgetGold;n[0].string=i,n[1].string=a,n[2].string=o;break;case 1:if(!this.withdrawData[t])return;o=l.default.timestampToTimeString(1e3*this.withdrawData[t].time);var r=this.withdrawData[t].withdrawalsStatusStr,s=this.withdrawData[t].withdrawalsGold;n[0].string=r,n[1].string=s,n[2].string=o;break;case 2:if(!this.rechargeData[t])return;o=l.default.timestampToTimeString(1e3*this.rechargeData[t].time);var c=this.rechargeData[t].rechargeStatusStr,p=this.rechargeData[t].rechargeGold;n[0].string=c,n[1].string=p,n[2].string=o}},i([d(a.default)],t.prototype,"btn_type",void 0),i([d(a.default)],t.prototype,"btn_day",void 0),i([d(cc.Node)],t.prototype,"node_type",void 0),i([d(cc.Node)],t.prototype,"node_day",void 0),i([d(c.default)],t.prototype,"scroll_detail",void 0),i([d(cc.Node)],t.prototype,"img_type_arrow",void 0),i([d(cc.Node)],t.prototype,"img_day_arrow",void 0),i([d(cc.Label)],t.prototype,"label_titles",void 0),i([d(cc.Label)],t.prototype,"label_type",void 0),i([d(cc.Label)],t.prototype,"label_time",void 0),i([d(cc.Label)],t.prototype,"label_tips",void 0),t=i([h],t)}(cc.Component);n.default=f,cc._RF.pop()},{"../../common/utils/Utils":"Utils","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../net/NetCmd":"NetCmd","../common/List":"List","../common/componet/ButtonEx":"ButtonEx"}],BankSafeBox:[function(e,t,n){"use strict";cc._RF.push(t,"6c896d73JdPi7xXg2q+/YhM","BankSafeBox");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../common/log/LogWrap"),r=e("../common/componet/ButtonEx"),s=e("../../manager/UIManager"),c=e("../../manager/NetManager"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bar_money=null,t.slider_money=null,t.label_account_money=null,t.label_box_money=null,t.input_money=null,t.label_input=null,t.node_account_money=null,t.node_box_money=null,t.btn_clear=null,t.btn_sure=null,t.btn_max=null,t.isDeposit=!0,t.maxGold=0,t}return o(t,e),t.prototype.onLoad=function(){this.btn_clear.registerClick(this.clear.bind(this)),this.btn_sure.registerClick(this.onClickSure.bind(this)),this.btn_max.registerClick(this.onClickMax.bind(this))},t.prototype.start=function(){},t.prototype.init=function(e){this.maxGold=Number(e.account_balance),this.label_account_money.string=e.account_balance||"0",this.label_box_money.string=e.safe_balance||"0",this.clear(),this.updateUI()},t.prototype.onSliderMoney=function(e){0!=this.maxGold?(this.bar_money.progress=e.progress,this.input_money.string=(e.progress*this.maxGold).toFixed(2)):this.clear()},t.prototype.onClickTitle=function(e){this.isDeposit="toggle_deposit"==e.node.name,this.updateUI()},t.prototype.onChangeEdit=function(e){if(a.LogWrap.log(e),e<=0)this.input_money.string="";else{/^\d+(\.\d+)?$/.test(e)||(this.input_money.string="")}this.checkInput()},t.prototype.checkInput=function(){if(0!=this.maxGold){var e=parseFloat(this.input_money.string||"0");this.input_money.string=e.toFixed(2);var t=e/this.maxGold;t=(t=t>1?1:t)<0?0:t,this.bar_money.progress=t,this.slider_money.progress=t}else this.clear()},t.prototype.updateUI=function(){this.node_account_money.x=this.isDeposit?-180:180,this.node_box_money.x=this.isDeposit?180:-180,this.maxGold=this.isDeposit?Number(this.label_account_money.string):Number(this.label_box_money.string),this.input_money.placeholder=this.isDeposit?"\u8bf7\u8f93\u5165\u5b58\u5165\u91d1\u989d":"\u8bf7\u8f93\u5165\u53d6\u51fa\u91d1\u989d",this.label_input.string=this.isDeposit?"\u5b58\u5165\u91d1\u989d":"\u53d6\u51fa\u91d1\u989d",this.slider_money.progress=0,this.bar_money.progress=0,this.input_money.string=""},t.prototype.clear=function(){this.input_money.string="",this.slider_money.progress=0,this.bar_money.progress=0},t.prototype.onClickSure=function(){var e=this.input_money.string;0!=this.maxGold?e?parseFloat(e||"0")<0||parseFloat(e||"0")>this.maxGold?s.UIManager.showTips("\u8f93\u5165\u91d1\u989d\u8d85\u51fa\u9650\u5236"):parseFloat(e||"0")<=0?s.UIManager.showTips("\u8bf7\u8f93\u5165\u5927\u4e8e0\u7684\u91d1\u989d"):this.isDeposit?c.NetManager.protocolBank.sendAccountToSafeBox(e):c.NetManager.protocolBank.sendSafeBoxToAccount(e):s.UIManager.showTips("\u8bf7\u8f93\u5165\u91d1\u989d"):s.UIManager.showTips("\u4f59\u989d\u4e3a0")},t.prototype.onClickMax=function(){0!=this.maxGold?(this.input_money.string=this.maxGold.toFixed(2),this.slider_money.progress=1,this.bar_money.progress=1):this.clear()},i([u(cc.ProgressBar)],t.prototype,"bar_money",void 0),i([u(cc.Slider)],t.prototype,"slider_money",void 0),i([u(cc.Label)],t.prototype,"label_account_money",void 0),i([u(cc.Label)],t.prototype,"label_box_money",void 0),i([u(cc.EditBox)],t.prototype,"input_money",void 0),i([u(cc.Label)],t.prototype,"label_input",void 0),i([u(cc.Node)],t.prototype,"node_account_money",void 0),i([u(cc.Node)],t.prototype,"node_box_money",void 0),i([u(r.default)],t.prototype,"btn_clear",void 0),i([u(r.default)],t.prototype,"btn_sure",void 0),i([u(r.default)],t.prototype,"btn_max",void 0),t=i([p],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../common/log/LogWrap":"LogWrap","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../common/componet/ButtonEx":"ButtonEx"}],BankTransfer:[function(e,t,n){"use strict";cc._RF.push(t,"74205oyvOtFqbLuORBzDo3D","BankTransfer");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../common/componet/ButtonEx"),r=e("../../manager/UIManager"),s=e("../../manager/NetManager"),c=e("../../manager/EventManager"),l=e("../../net/NetCmd"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_info=null,t.label_account_money=null,t.label_box_money=null,t.label_money=null,t.input_account=null,t.input_transfer_money=null,t.input_safe_code=null,t.btn_sure=null,t.isDeposit=!0,t.maxGold=0,t.data=null,t}return o(t,e),t.prototype.onLoad=function(){this.btn_sure.registerClick(this.onClickSure.bind(this)),c.EventManager.on(this,l.ProtocolBankCmd.TransferToOtherResp,this.onTransferToOtherResp.bind(this))},t.prototype.onDestroy=function(){c.EventManager.off(this)},t.prototype.start=function(){},t.prototype.init=function(e){this.data=e,this.maxGold=Number(e.account_balance),this.label_account_money.string=e.account_balance||"0",this.label_box_money.string=e.safe_balance||"0",this.label_money.string=e.transferable_balance||"0";var t="";parseFloat(e.transfer_rate)>0&&(t=", \u6bcf\u6b21\u8f6c\u8d26\u6263\u9664"+100*parseFloat(e.transfer_rate)+"%\u7684\u624b\u7eed\u8d39"),this.label_info.string="\u6e29\u99a8\u63d0\u793a: \u8f6c\u8d26\u65f6\u4f18\u5148\u4ece\u4fdd\u9669\u7bb1\u4f59\u989d\u6263\u9664"+t+"\u3002\u8f6c\u8d26\u8303\u56f4\u4e3a"+e.transfer_min_gold+"-"+e.transfer_max_gold+"\u5143, \u8f6c\u8d26\u540e\u8d26\u6237\u4f59\u989d\u9700\u2265"+e.transfer_frozen_gold+"\u5143",this.clear()},t.prototype.clear=function(){this.input_account.string="",this.input_transfer_money.string="",this.input_safe_code.string=""},t.prototype.onClickSure=function(){!this.input_account.string||this.input_account.string.length<9?r.UIManager.showTips("\u73a9\u5bb6ID\u4e0d\u5b58\u5728\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165"):this.input_transfer_money.string?parseFloat(this.input_transfer_money.string)>parseFloat(this.data.transferable_balance)?r.UIManager.showTips("\u8bf7\u8f93\u5165\u9002\u5408\u7684\u91d1\u989d"):this.input_safe_code.string?s.NetManager.protocolBank.sendTransferToOther(parseInt(this.input_account.string),this.input_transfer_money.string,this.input_safe_code.string):r.UIManager.showTips("\u8bf7\u8f93\u5165\u5b89\u5168\u5bc6\u7801"):r.UIManager.showTips("\u8bf7\u8f93\u5165\u8f6c\u8d26\u91d1\u989d")},t.prototype.onEventEditChange=function(e,t){t.string=t.string||"0",t.string=parseFloat(t.string)<parseFloat(this.data.transfer_min_gold||"0")?this.data.transfer_min_gold:parseFloat(t.string).toFixed(2)+"",t.string=parseFloat(t.string)>parseFloat(this.data.transfer_max_gold||"0")?this.data.transfer_max_gold:parseFloat(t.string).toFixed(2)+"",t.string=t.string||""},t.prototype.onTransferToOtherResp=function(){this.clear()},i([h(cc.Label)],t.prototype,"label_info",void 0),i([h(cc.Label)],t.prototype,"label_account_money",void 0),i([h(cc.Label)],t.prototype,"label_box_money",void 0),i([h(cc.Label)],t.prototype,"label_money",void 0),i([h(cc.EditBox)],t.prototype,"input_account",void 0),i([h(cc.EditBox)],t.prototype,"input_transfer_money",void 0),i([h(cc.EditBox)],t.prototype,"input_safe_code",void 0),i([h(a.default)],t.prototype,"btn_sure",void 0),t=i([u],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../common/componet/ButtonEx":"ButtonEx"}],BankWithdraw:[function(e,t,n){"use strict";cc._RF.push(t,"579a62SSUxA5pDG4zJydR4+","BankWithdraw");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../common/componet/ButtonEx"),r=e("../../manager/UIManager"),s=e("../../manager/NetManager"),c=e("../../manager/EventManager"),l=e("../../net/NetCmd"),p=e("../common/List"),u=cc._decorator,h=u.ccclass,d=u.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_info=null,t.label_account_money=null,t.label_box_money=null,t.label_select_bank=null,t.label_money=null,t.input_transfer_money=null,t.input_safe_code=null,t.btn_sure=null,t.btn_add_card=null,t.btn_modify=null,t.btn_arrow=null,t.img_arrow=null,t.node_bank=null,t.scroll_bank=null,t.isDeposit=!0,t.maxGold=0,t.data=null,t.bankCards=[],t.selectCard=0,t}return o(t,e),t.prototype.onLoad=function(){this.btn_sure.registerClick(this.onClickSure.bind(this)),this.btn_add_card.registerClick(this.onClickAddCard.bind(this)),this.btn_modify.registerClick(this.onClickModify.bind(this)),this.btn_arrow.registerClick(this.onClickArrow.bind(this)),c.EventManager.on(this,l.ProtocolBankCmd.GetBoundBankCardResp,this.onGetBoundBankCardResp.bind(this)),c.EventManager.on(this,l.ProtocolBankCmd.WithDrawToBankcardResp,this.onWithDrawToBankcardResp.bind(this))},t.prototype.onTouchEnd=function(){this.img_arrow.scaleY=1,this.node_bank.active=!1},t.prototype.onDestroy=function(){c.EventManager.off(this)},t.prototype.onEnable=function(){s.NetManager.protocolBank.sendGetBoundBankCard()},t.prototype.start=function(){this.btn_arrow.disabledScale()},t.prototype.init=function(e){this.data=e,this.maxGold=Number(e.account_balance),this.label_account_money.string=e.account_balance||"0",this.label_box_money.string=e.safe_balance||"0",this.label_money.string=e.withdrawable_balance||"0",this.onHideNodeBank();var t="";parseFloat(e.withdraw_rate)>0&&(t=", \u6bcf\u6b21\u63d0\u73b0\u6263\u9664"+100*parseFloat(e.withdraw_rate)+"%\u7684\u624b\u7eed\u8d39"),this.label_info.string="\u6e29\u99a8\u63d0\u793a: \u63d0\u73b0\u65f6\u4f18\u5148\u4ece\u4fdd\u9669\u7bb1\u4f59\u989d\u6263\u9664"+t+"\u3002\u63d0\u73b0\u8303\u56f4\u4e3a"+e.cash_min_gold+"-"+e.cash_max_gold+"\u5143, \u63d0\u73b0\u540e\u8d26\u6237\u4f59\u989d\u9700\u2265"+e.cash_frozen_gold+"\u5143",this.clear()},t.prototype.clear=function(){this.input_transfer_money.string="",this.input_safe_code.string=""},t.prototype.onClickSure=function(){this.bankCards[this.selectCard]?this.input_transfer_money.string?parseFloat(this.input_transfer_money.string)>parseFloat(this.data.withdrawable_balance)?r.UIManager.showTips("\u8bf7\u8f93\u5165\u9002\u5408\u7684\u91d1\u989d"):this.input_safe_code.string?s.NetManager.protocolBank.sendWithdrawToBankCard(this.selectCard,this.input_transfer_money.string,this.input_safe_code.string):r.UIManager.showTips("\u8bf7\u8f93\u5165\u5b89\u5168\u5bc6\u7801"):r.UIManager.showTips("\u8bf7\u8f93\u5165\u63d0\u73b0\u91d1\u989d"):r.UIManager.showTips("\u8bf7\u9009\u62e9\u4e00\u5f20\u94f6\u884c\u5361")},t.prototype.onClickAddCard=function(){r.UIManager.popup("prefabs/bank/BankAddCard",{type:0,data:this.bankCards[this.selectCard]})},t.prototype.onClickModify=function(){this.bankCards[this.selectCard]?r.UIManager.popup("prefabs/bank/BankAddCard",{type:1,data:this.bankCards[this.selectCard]}):r.UIManager.showTips("\u5f53\u524d\u6ca1\u6709\u53ef\u4fee\u6539\u7684\u94f6\u884c\u5361")},t.prototype.onClickArrow=function(){if(0!=this.bankCards.length){var e=-1==this.img_arrow.scaleY;this.img_arrow.scaleY=e?1:-1,this.node_bank.active=!e,this.node_bank.active&&(this.scroll_bank.numItems=this.bankCards.length)}},t.prototype.onHideNodeBank=function(){this.img_arrow.scaleY=1,this.node_bank.active=!1},t.prototype.onEventEditChange=function(e,t){/^\d+(\.\d+)?$/.test(t.string)?(t.string=parseFloat(t.string)<parseFloat(this.data.cash_min_gold||"0")?this.data.cash_min_gold:parseFloat(t.string).toFixed(2)+"",t.string=parseFloat(t.string)>parseFloat(this.data.cash_max_gold||"0")?this.data.cash_max_gold:parseFloat(t.string).toFixed(2)+""):t.string="0.00"},t.prototype.onGetBoundBankCardResp=function(e){this.bankCards=e.bankCardItem,this.bankCards[this.selectCard]&&(this.label_select_bank.string=this.bankCards[this.selectCard].cardid),this.node_bank.active&&(this.scroll_bank.numItems=this.bankCards.length),this.bankCards.length>0?(this.btn_modify.transition=cc.Button.Transition.SCALE,this.btn_modify.interactable=!0,this.btn_modify.node.getChildByName("img_on").active=!0,this.btn_modify.node.getChildByName("img_off").active=!1):(this.btn_modify.transition=cc.Button.Transition.SPRITE,this.btn_modify.interactable=!1,this.btn_modify.node.getChildByName("img_on").active=!1,this.btn_modify.node.getChildByName("img_off").active=!0)},t.prototype.onWithDrawToBankcardResp=function(){this.clear()},t.prototype.onListRender=function(e,t){var n=this,o=e.getComponentInChildren(cc.Label),i=e.getChildByName("img_select");o.string=this.bankCards[t].cardid,this.selectCard==t?i.active=!0:i.active=!1,e.getComponent(a.default).registerClick(function(){n.selectCard=t,n.label_select_bank.string=n.bankCards[n.selectCard].cardid,n.onClickArrow()})},i([d(cc.Label)],t.prototype,"label_info",void 0),i([d(cc.Label)],t.prototype,"label_account_money",void 0),i([d(cc.Label)],t.prototype,"label_box_money",void 0),i([d(cc.Label)],t.prototype,"label_select_bank",void 0),i([d(cc.Label)],t.prototype,"label_money",void 0),i([d(cc.EditBox)],t.prototype,"input_transfer_money",void 0),i([d(cc.EditBox)],t.prototype,"input_safe_code",void 0),i([d(a.default)],t.prototype,"btn_sure",void 0),i([d(a.default)],t.prototype,"btn_add_card",void 0),i([d(a.default)],t.prototype,"btn_modify",void 0),i([d(a.default)],t.prototype,"btn_arrow",void 0),i([d(cc.Node)],t.prototype,"img_arrow",void 0),i([d(cc.Node)],t.prototype,"node_bank",void 0),i([d(p.default)],t.prototype,"scroll_bank",void 0),t=i([h],t)}(cc.Component);n.default=g,cc._RF.pop()},{"../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../common/List":"List","../common/componet/ButtonEx":"ButtonEx"}],Bank:[function(e,t,n){"use strict";cc._RF.push(t,"2592bCThaZDco49K1m6lQ47","Bank");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/EventManager"),s=e("../../net/NetCmd"),c=e("../../manager/NetManager"),l=e("./BankSafeBox"),p=e("./BankTransfer"),u=e("./BankWithdraw"),h=e("./BankHistory"),d=e("../../common/log/LogWrap"),g=cc._decorator,f=g.ccclass,m=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bankSafeBox=null,t.bankTransfer=null,t.bankWithDraw=null,t.bankHistory=null,t.index=0,t.animName=null,t.node_childs=[],t}return o(t,e),t.prototype.openAnimation=function(){var e=this.getItem("btn_close").node;e.scale=.1,e.runAction(cc.scaleTo(.3,1)),this.getComponent(cc.Animation).play(),this.getItem("sp_title").addAnimation(0,"loop",!0)},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this))},t.prototype.initEvent=function(){r.EventManager.on(this,s.ProtocolBankCmd.ResearchBankInfoResp,this.onResearchBankInfoResp.bind(this))},t.prototype.onClickClose=function(){this.close(!1)},t.prototype.initButton=function(e){var t=this;if(!this.animName){var n=[0,1,2];if(1==e.close_transform){var o=n.indexOf(1);n.splice(o,1)}if(1==e.close_withdraw){o=n.indexOf(2);n.splice(o,1)}var i=n.join("");this.animName={"012":"1-","01":"2-","02":"3-",0:"4-"}[i],d.LogWrap.log(this.animName);var a=this.getItem("sp_button");a.setAnimation(0,this.animName+"btn"+(this.index+1),!0);for(var r=function(e){s.getItem("btn_"+e).registerClick(function(){t.index!=n[e]&&(t.index=n[e],a.setAnimation(0,t.animName+"btn"+(t.index+1),!0),t.updateUI(),t.getComponent(cc.Animation).play())})},s=this,c=0;c<n.length;c++)r(c)}},t.prototype.onResearchBankInfoResp=function(e){this.data=e,this.initButton(e),this.updateUI()},t.prototype.start=function(){c.NetManager.protocolBank.sendResearchBankInfo()},t.prototype.updateUI=function(){for(var e=0;e<this.node_childs.length;e++)e==this.index?this.node_childs[e].active=!0:this.node_childs[e].active=!1;switch(this.index){case 0:this.bankSafeBox.init(this.data);break;case 1:this.bankTransfer.init(this.data);break;case 2:this.bankWithDraw.init(this.data);break;case 3:this.bankHistory.init()}},i([m(l.default)],t.prototype,"bankSafeBox",void 0),i([m(p.default)],t.prototype,"bankTransfer",void 0),i([m(u.default)],t.prototype,"bankWithDraw",void 0),i([m(h.default)],t.prototype,"bankHistory",void 0),i([m(cc.Node)],t.prototype,"node_childs",void 0),t=i([f],t)}(a.default);n.default=_,cc._RF.pop()},{"../../common/log/LogWrap":"LogWrap","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView","./BankHistory":"BankHistory","./BankSafeBox":"BankSafeBox","./BankTransfer":"BankTransfer","./BankWithdraw":"BankWithdraw"}],Base64:[function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cc._RF.push(t,"c866b5H0WZC8K8p4Fo35baS","Base64"),function(e,n){"function"==typeof define&&define.amd?define([],n):"object"===(void 0===t?"undefined":o(t))&&t.exports?t.exports=n():(void 0).Base=n()}(0,function(){function e(){this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}return e.prototype.encode=function(e){var t,n,o,i,a,r,s,c="",l=0;for(e=this._utf8_encode(e);l<e.length;)i=(t=e.charCodeAt(l++))>>2,a=(3&t)<<4|(n=e.charCodeAt(l++))>>4,r=(15&n)<<2|(o=e.charCodeAt(l++))>>6,s=63&o,isNaN(n)?r=s=64:isNaN(o)&&(s=64),c=c+this._keyStr.charAt(i)+this._keyStr.charAt(a)+this._keyStr.charAt(r)+this._keyStr.charAt(s);return c},e.prototype.decode=function(e){var t,n,o,i,a,r,s="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=this._keyStr.indexOf(e.charAt(c++))<<2|(i=this._keyStr.indexOf(e.charAt(c++)))>>4,n=(15&i)<<4|(a=this._keyStr.indexOf(e.charAt(c++)))>>2,o=(3&a)<<6|(r=this._keyStr.indexOf(e.charAt(c++))),s+=String.fromCharCode(t),64!=a&&(s+=String.fromCharCode(n)),64!=r&&(s+=String.fromCharCode(o));return s=this._utf8_decode(s)},e.prototype._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},e.prototype._utf8_decode=function(e){for(var t="",n=0,o=0,i=0,a=0;n<e.length;)(o=e.charCodeAt(n))<128?(t+=String.fromCharCode(o),n++):o>191&&o<224?(i=e.charCodeAt(n+1),t+=String.fromCharCode((31&o)<<6|63&i),n+=2):(i=e.charCodeAt(n+1),a=e.charCodeAt(n+2),t+=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a),n+=3);return t},new e}),cc._RF.pop()},{}],BaseView:[function(e,t,n){"use strict";cc._RF.push(t,"fa6391gerxFU6i05GXqzjTZ","BaseView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../manager/EventManager"),r=e("../../common/UIHelper"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.items={},t.data=null,t}return o(t,e),t.prototype.onLoad=function(){this.items=r.default.loadItem(this.node),this.init()},t.prototype.start=function(){},t.prototype.onDestroy=function(){a.EventManager.off(this)},t.prototype.init=function(){this.initComponent(),this.initEvent()},t.prototype.initComponent=function(){},t.prototype.initEvent=function(){},t.prototype.close=function(){this.node.destroy()},t.prototype.initData=function(e){this.data=e},t.prototype.getItem=function(e){return this.items[e]},t=i([c],t)}(cc.Component));n.default=l,cc._RF.pop()},{"../../common/UIHelper":"UIHelper","../../manager/EventManager":"EventManager"}],BattleFriendsHelp:[function(e,t,n){"use strict";cc._RF.push(t,"e81ad+ZlTVHSq4LvilcEeOd","BattleFriendsHelp");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this))},t.prototype.onClickClose=function(){this.node.destroy()},i([c(cc.Node)],t.prototype,"btn_close",void 0),t=i([s],t)}(a.default);n.default=l,cc._RF.pop()},{"../base/PopupView":"PopupView"}],BindInviteCode:[function(e,t,n){"use strict";cc._RF.push(t,"989329rjqlAyKELKlwNcmnM","BindInviteCode");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/EventManager"),s=e("../../net/NetCmd"),c=e("../../manager/UIManager"),l=e("../../manager/DataManager"),p=e("../../manager/NetManager"),u=cc._decorator,h=u.ccclass,d=u.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.invite_reward=null,t.editbox=null,t.invite_num=0,t}return o(t,e),t.prototype.start=function(){this.showInviteReward(this.data.award),this.updateTitle()},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_confirm").registerClick(this.onClickConfirm.bind(this)),this.getItem("btn_exchange").registerClick(this.onClickExchange.bind(this))},t.prototype.initEvent=function(){r.EventManager.on(this,s.ProtocolHallCmd.BindParentIdResp,this.onSubBindRes.bind(this)),r.EventManager.on(this,s.ProtocolHallCmd.ExchangeCodeRes,this.onExchangeCodeRes.bind(this))},t.prototype.onClickClose=function(){this.node.destroy()},t.prototype.updateTitle=function(){0!=l.DataManager.userInfo.parent_id&&(this.getItem("title_tj_bg").active=!1,this.getItem("node_invite").active=!1,this.getItem("node_exchange").active=!0),l.DataManager.userInfo.exchange_code&&(this.getItem("title_tj_bg").active=!1,this.getItem("node_invite").active=!0,this.getItem("node_exchange").active=!1),this.getItem("img_title_code").active=""==l.DataManager.userInfo.exchange_code,this.getItem("img_title_invite").active=0==l.DataManager.userInfo.parent_id},t.prototype.onClickTitle=function(e){"invite"!=e.node.name.replace("toggle_","")?(this.getItem("node_invite").active=!1,this.getItem("node_exchange").active=!0):(this.getItem("node_invite").active=!0,this.getItem("node_exchange").active=!1)},t.prototype.onClickConfirm=function(){var e=this.editbox.string;/^[\d]+$/.test(e)&&parseInt(e)!=l.DataManager.userInfo.userid?p.NetManager.protocolHall.sendBindParentIdReq(parseInt(e),1):c.UIManager.showTips("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u53f7\u7801")},t.prototype.onClickExchange=function(){var e=this.getItem("input_code").string;e?p.NetManager.protocolHall.sendExchangeCode(e):c.UIManager.showTips("\u8bf7\u8f93\u5165\u5151\u6362\u7801")},t.prototype.onSubBindRes=function(e){0==e.status?c.UIManager.showTips("\u7ed1\u5b9a\u5931\u8d25"):2==e.status?c.UIManager.showTips("\u7ed1\u5b9a\u5931\u8d25, \u5df2\u7ecf\u5b58\u5728\u4e0a\u7ea7id"):3==e.status?c.UIManager.showTips("\u73a9\u5bb6id\u4e0d\u5b58\u5728"):4==e.status?c.UIManager.showTips("\u7ed1\u5b9a\u5931\u8d25\uff0c\u5b58\u5728\u4e0b\u7ea7\u5173\u8054"):(c.UIManager.showTips("\u7ed1\u5b9a\u6210\u529f"),this.close())},t.prototype.onExchangeCodeRes=function(e){c.UIManager.showTips(e.err_msg),this.close()},t.prototype.showInviteReward=function(e){"0"!=e?(this.getItem("img_ty").active=!0,this.invite_reward.string="\u7ed1\u5b9a\u6210\u529f\u540e\u5c06\u83b7\u5f97"+e+"\u91d1\u5e01"):this.getItem("img_ty").active=!1},i([d(cc.Label)],t.prototype,"invite_reward",void 0),i([d(cc.EditBox)],t.prototype,"editbox",void 0),t=i([h],t)}(a.default);n.default=g,cc._RF.pop()},{"../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],BindPhoneNum:[function(e,t,n){"use strict";cc._RF.push(t,"8feb3DeWYxDXZPWmuLWoccy","BindPhoneNum");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/UIManager"),s=e("../../common/Text"),c=e("../../manager/NetManager"),l=e("../../net/NetCmd"),p=e("../../manager/EventManager"),u=e("../../manager/DataManager"),h=cc._decorator,d=h.ccclass,g=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.canGetCode=!0,t.timeNumber=60,t}return o(t,e),t.prototype.start=function(){},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this)),this.getItem("btn_auth").registerClick(this.onClickAuth.bind(this))},t.prototype.initEvent=function(){p.EventManager.on(this,l.ProtocolAccountCmd.BindMobilePhoneResp,this.onBindMobilePhoneResp.bind(this))},t.prototype.onBindMobilePhoneResp=function(e){e.ok?(this.close(),r.UIManager.showTips(s.Tips.BindPhoneSuccess),this.data&&this.data(!0)):r.UIManager.showTips(s.Tips.BindPhoneFail)},t.prototype.onClickClose=function(){this.close(),this.data&&this.data&&this.data()},t.prototype.onClickAuth=function(){var e=this,t=this.getItem("input_phone").string;this.canGetCode&&(t&&11==t.length?/^1[3456789]\d{9}$/.test(t)?(this.canGetCode=!1,c.NetManager.requestPostUrl(l.HttpCmd.GetVerificationCode,{phonenumber:t,type:3,channel:u.DataManager.channel,user_id:u.DataManager.userInfo&&u.DataManager.userInfo.userid||0},function(t,n){"success"==t?1==n.ok?(r.UIManager.showTips(s.Tips.SendCodeSuccess),e.updateTimer()):(e.canGetCode=!0,r.UIManager.showTips(n.err_msg||s.Tips.SendCodeFail)):(e.canGetCode=!0,r.UIManager.showTips(s.Tips.SendCodeFail+n))})):r.UIManager.showTips(s.Tips.PhoneNumberError):r.UIManager.showTips(s.Tips.InputPhone))},t.prototype.updateTimer=function(){var e=this;this.node.stopAllActions(),this.timeNumber=60,this.getItem("label_auth").string=this.timeNumber+"s",cc.tween(this.node).repeatForever(cc.sequence(cc.delayTime(1),cc.callFunc(function(){e.timeNumber--,e.timeNumber>0?e.getItem("label_auth").string=e.timeNumber+"s":(e.canGetCode=!0,e.getItem("label_auth").string="\u83b7 \u53d6")}))).start()},t.prototype.onClickSure=function(){var e=this.getItem("input_phone").string,t=this.getItem("input_auth").string;e&&11==e.length?/^1[3456789]\d{9}$/.test(e)?t&&6==t.length?c.NetManager.protocolAccount.sendBindMobilePhone(e,t):r.UIManager.showTips(s.Tips.InputCode):r.UIManager.showTips(s.Tips.PhoneNumberError):r.UIManager.showTips(s.Tips.InputPhone)},t=i([d],t)}(a.default));n.default=g,cc._RF.pop()},{"../../common/Text":"Text","../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],BorderTime:[function(e,t,n){"use strict";cc._RF.push(t,"c9ee5MXfrxAvLzMjKs3Y2/c","BorderTime");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../manager/AudioManager"),r=e("../../common/Device"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.border_time=null,t.border_dot=null,t._CountDown=0,t.vibrate=!1,t.playAudio=!1,t.triggerTime=3,t.all_time=null,t.animState=null,t}return o(t,e),t.prototype.setGameTimer=function(e){var t=e.limit_time,n=e.all_limit_time||t,o=e.position;if(this.all_time=n,this.node.active=!0,o&&(this.node.position=o),!t||t<=0)return console.log("error time***************!"),void(this.node.active=!1);null!=e.vibrate&&1==e.vibrate?this.vibrate=!0:this.vibrate=!1,null!=e.playAudio&&1==e.playAudio?this.playAudio=!0:this.playAudio=!1,null!=e.triggerTime?this.triggerTime=e.triggerTime:this.triggerTime=3,this._CountDown=t;var i=this.border_time.getClips(),a=0;i&&i.length>0?(a=i[0].duration*(1-t/this.all_time),this.animState=this.border_time.play(null,a),this.playDot(a),this.animState.speed=1/this.all_time,this.schedule(this.onUpdateTimer,1)):console.log("\u9519\u8bef\uff1a\u6ca1\u6709\u52a8\u753b\u5185\u5bb9")},t.prototype.getLeng=function(e,t,n,o){var i,a=this.node.width,r=this.node.height,s=Math.atan(a/r)/Math.PI/2,c=Math.atan(r/a)/Math.PI/2;if(0==n){var l=(e-t)/s*Math.atan(a/r);0==o&&(l=(1-(e-t)/s)*Math.atan(a/r)),i=Math.tan(l)*r/2,0==o&&(i=a/2-i),i=i*(a-6)/a}else{l=(e-t)/c*Math.atan(r/a);0==o&&(l=(1-(e-t)/c)*Math.atan(r/a)),i=Math.tan(l)*a/2,0==o&&(i=r/2-i),i=i*(r-6)/r}return i},t.prototype.playDot=function(e){if(this.border_dot){var t=e,n=this.node.width,o=this.node.height,i=Math.atan(n/o)/Math.PI/2,a=Math.atan(o/n)/Math.PI/2,r=i,s=r+a,c=s+a,l=c+i,p=l+i,u=p+a,h=u+a,d=h+i;if(t<r){var g=this.getLeng(t,0,0,1);this.border_dot.setPosition(cc.v2(g,o/2-3))}else if(t<s){var f=o/2-3-this.getLeng(t,r,1,0);this.border_dot.setPosition(cc.v2(n/2-3,f))}else if(t<c){f=0-this.getLeng(t,s,1,1);this.border_dot.setPosition(cc.v2(n/2-3,f))}else if(t<l){g=n/2-3-this.getLeng(t,c,0,0);this.border_dot.setPosition(cc.v2(g,3-o/2))}else if(t<p){g=0-this.getLeng(t,l,0,1);this.border_dot.setPosition(cc.v2(g,3-o/2))}else if(t<u){f=this.getLeng(t,p,1,0)-o/2+3;this.border_dot.setPosition(cc.v2(3-n/2,f))}else if(t<h){f=this.getLeng(t,u,1,1)+0;this.border_dot.setPosition(cc.v2(3-n/2,f))}else if(t<d){g=this.getLeng(t,h,0,0)-n/2+3;this.border_dot.setPosition(cc.v2(g,o/2-3))}this.border_dot.active=!0}},t.prototype.resetDot=function(){this.border_dot&&(this.border_dot.stopAllActions(),this.border_dot.setPosition(cc.v2(0,this.node.height/2)),this.border_dot.active=!1)},t.prototype.onUpdateTimer=function(){if(this._CountDown--,this._CountDown<0)return this.onUpdateTimer&&this.unschedule(this.onUpdateTimer),this.border_time.stop(),void(this.node.active=!1);this._CountDown<=this.triggerTime&&(1==this.playAudio&&a.AudioManager.playSFX("game_dingdong"),1==this.vibrate&&r.default.vibrate())},t.prototype.onKillTimer=function(){this._CountDown=0,this.border_time.stop(),this.resetDot(),this.node.active=!1,this.animState=null,this.all_time=null,this.onUpdateTimer&&this.unschedule(this.onUpdateTimer)},t.prototype.update=function(e){this.border_dot&&this.border_dot.active&&this.all_time&&(this.playDot(this.animState.time),this.animState.time>=1&&this.onKillTimer())},i([l(cc.Animation)],t.prototype,"border_time",void 0),i([l(cc.Node)],t.prototype,"border_dot",void 0),t=i([c],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../common/Device":"Device","../../manager/AudioManager":"AudioManager"}],ButtonEx:[function(e,t,n){"use strict";cc._RF.push(t,"a9eadl+BKFLyKm+b0wKl3hE","ButtonEx");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,s=(a.property,a.menu),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onLoad=function(){this.transition!=cc.Button.Transition.SPRITE&&(this.transition=cc.Button.Transition.SCALE,this.zoomScale=.9)},t.prototype.disabledScale=function(){this.transition=cc.Button.Transition.NONE},t.prototype.registerClickEx=function(e,t,n,o){void 0===o&&(o="");var i=new cc.Component.EventHandler;return i.target=t,i.component=n,i.handler=e,i.customEventData=o,this.clickEvents.push(i),this},t.prototype.registerClick=function(e){return this.node.off("click"),this.node.on("click",function(){e&&e()}),this},t=i([r,s("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/ButtonEx")],t)}(cc.Button);n.default=c,cc._RF.pop()},{}],CardTypeList:[function(e,t,n){"use strict";cc._RF.push(t,"7e7d9qyEA1Ao4bQ0Hqs6kYS","CardTypeList");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../common/utils/Utils"),r=e("../../view/base/PopupView"),s={1:"game/public/image/paixing/nn_paixing",5:"game/public/image/paixing/nn_paixing",10:"game/public/image/paixing/nn_paixing",3:"game/public/image/paixing/zjh_paixing",7:"game/public/image/paixing/sg_paixing",11:"game/public/image/paixing/jszjh_paixing",12:"game/public/image/paixing/dzpk_paixing"},c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isAnimation=!1,t.CloseClick=null,t.ScrollView=null,t.viewContent=null,t.game_type=null,t}return o(t,e),t.prototype.start=function(){this.loadSprInfo(this.data)},t.prototype.onLoad=function(){var e=this;a.default.addClickEventEND(this.CloseClick,function(t){e.close()})},t.prototype.loadSprInfo=function(e){var t=this;this.game_type=e,cc.loader.loadRes(s[e],cc.SpriteFrame,function(e,n){e&&console.log("\u52a0\u8f7d\u9519\u8bef");var o=new cc.Node;o.addComponent(cc.Sprite),o.getComponent(cc.Sprite).spriteFrame=n,t.viewContent.addChild(o)})},t.prototype.onDestroy=function(){var e=this.game_type;cc.loader.releaseRes(s[e],cc.SpriteFrame)},i([p(cc.Node)],t.prototype,"CloseClick",void 0),i([p(cc.ScrollView)],t.prototype,"ScrollView",void 0),i([p(cc.Node)],t.prototype,"viewContent",void 0),t=i([l],t)}(r.default);n.default=u,cc._RF.pop()},{"../../common/utils/Utils":"Utils","../../view/base/PopupView":"PopupView"}],ChangePasswordPopup:[function(e,t,n){"use strict";cc._RF.push(t,"165b1YzRFBKS6GZW/TcSJp0","ChangePasswordPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/UIManager"),s=e("../../common/Text"),c=e("../../manager/NetManager"),l=e("../../manager/EventManager"),p=e("../../net/NetCmd"),u=cc._decorator,h=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this)),this.getItem("btn_seek").registerClick(this.onClickSeek.bind(this))},t.prototype.initEvent=function(){l.EventManager.on(this,p.ProtocolAccountCmd.ModifyLoginPasswordResp,this.onModifyLoginPasswordResp.bind(this))},t.prototype.onModifyLoginPasswordResp=function(e){e.ok?(r.UIManager.showTips(s.Tips.ModifySuccess),this.close()):r.UIManager.showTips(s.Tips.ModifyFail)},t.prototype.onClickClose=function(){this.close()},t.prototype.onClickSure=function(){var e=this.getItem("input_old").string,t=this.getItem("input_new").string,n=this.getItem("input_confirm").string;e?!t||t.length<6||t.length>16?r.UIManager.showTips(s.Tips.InputPassword):e!=t?t==n?c.NetManager.protocolAccount.sendModifyLoginPassword(e,t):r.UIManager.showTips(s.Tips.PasswordNotSame):r.UIManager.showTips(s.Tips.InputNewOldNotSame):r.UIManager.showTips(s.Tips.InputOldPassword)},t.prototype.onClickSeek=function(){r.UIManager.popup("prefabs/login/ForgotPasswordPopup",1)},t=i([h],t)}(a.default));n.default=d,cc._RF.pop()},{"../../common/Text":"Text","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],ChangeSafeCodePopup:[function(e,t,n){"use strict";cc._RF.push(t,"cba304rRiZOG7NZuSFjFQyx","ChangeSafeCodePopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/UIManager"),s=e("../../manager/NetManager"),c=e("../../manager/EventManager"),l=e("../../net/NetCmd"),p=e("../../common/Text"),u=cc._decorator,h=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this)),this.getItem("btn_seek").registerClick(this.onClickSeek.bind(this))},t.prototype.initEvent=function(){c.EventManager.on(this,l.ProtocolAccountCmd.ModifySecureResp,this.onModifySecureResp.bind(this))},t.prototype.onModifySecureResp=function(e){e.ok?(r.UIManager.showTips(p.Tips.ModifySuccess),this.close()):r.UIManager.showTips(p.Tips.ModifyFail)},t.prototype.onClickClose=function(){this.close()},t.prototype.onClickSeek=function(){r.UIManager.popup("prefabs/account/ForgotSafeCodePopup")},t.prototype.onClickSure=function(){var e=this.getItem("input_old").string,t=this.getItem("input_new").string,n=this.getItem("input_confirm").string;if(e)if(!t||t.length<6||t.length>16)r.UIManager.showTips("\u8bf7\u8f93\u51656-16\u4f4d\u5b89\u5168\u7801");else if(e!=t)if(t==n){/^[\d]+$/.test(n)?s.NetManager.protocolAccount.sendModifySecure(e,t):r.UIManager.showTips("\u8bf7\u8f93\u5165\u7b26\u5408\u7684\u683c\u5f0f")}else r.UIManager.showTips("\u4e24\u6b21\u8f93\u5165\u7684\u5b89\u5168\u7801\u4e0d\u4e00\u81f4");else r.UIManager.showTips("\u65b0\u65e7\u5b89\u5168\u7801\u4e0d\u80fd\u76f8\u540c");else r.UIManager.showTips("\u8bf7\u8f93\u5165\u539f\u5b89\u5168\u7801")},t=i([h],t)}(a.default));n.default=d,cc._RF.pop()},{"../../common/Text":"Text","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],Chat:[function(e,t,n){"use strict";cc._RF.push(t,"914721EzyRH15Q3z3wVgxo4","Chat");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../base/BaseView"),c=e("../../manager/EventManager"),l=e("../../net/NetCmd"),p=e("../../manager/DataManager"),u=e("../../common/UIHelper"),h=e("../../common/utils/Utils"),d=e("./componet/ButtonEx"),g=e("../../manager/NetManager"),f=e("../../manager/UIManager"),m=e("../../manager/ResManager"),_=e("../../Define"),y=e("../../manager/UpdateManager"),v=e("./ListEx"),b=e("../../manager/FileManager"),C=cc._decorator,M=C.ccclass,w=C.property,I=["666","yuanbao","hongbao2"],R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_talk=null,t.item_short=null,t.talk_bg=[],t.label_info=null,t.isNext=!0,t.marquee=[],t.isTopNext=!0,t.marqueeTop=[],t.timeTop=3,t.vipLimit=0,t.chatShorts=["\u6d4b\u8bd5\u77ed\u8bed1","\u6d4b\u8bd5\u77ed\u8bed2","\u6d4b\u8bd5\u77ed\u8bed3","\u6d4b\u8bd5\u77ed\u8bed4","\u6d4b\u8bd5\u77ed\u8bed5","\u6d4b\u8bd5\u77ed\u8bed6","\u6d4b\u8bd5\u77ed\u8bed7","\u6d4b\u8bd5\u77ed\u8bed8","\u6d4b\u8bd5\u77ed\u8bed9","\u6d4b\u8bd5\u77ed\u8bed10"],t.spineNode=null,t.bgIndex=1,t}return o(t,e),t.prototype.initComponent=function(){this.label_info=this.getItem("label_info"),this.getItem("btn_send").registerClick(this.onClickSend.bind(this)),this.getItem("btn_short").registerClick(this.onClickShort.bind(this)),this.getItem("btn_talk").registerClick(this.onClickTalk.bind(this)),this.getItem("node_talk").on("touchend",this.onTouchEnd,this),this.getItem("btn_talk").node.active=!1,this.label_info.node.anchorX=0,this.label_info.node.x=-this.label_info.node.parent.width/2,this.label_info.node.parent.getComponent(cc.Widget).top=3,this.label_info.node.parent.getComponent(cc.Widget).bottom=3},t.prototype.initEvent=function(){c.EventManager.on(this,l.ProtocolGameCmd.LoginFriendRoomResp,this.onLoginFriendRoomResp.bind(this)),c.EventManager.on(this,l.ProtocolChatCmd.ChatMsgNotify,this.onChatMsgNotify.bind(this)),c.EventManager.on(this,l.ProtocolChatCmd.GetChatMsgRecordResp,this.onGetChatMsgRecordResp.bind(this)),c.EventManager.on(this,_.EventDef.UpdateUserInfo,this.checkVipLevel.bind(this))},t.prototype.onTouchEnd=function(){this.getItem("node_short").active?this.getItem("node_short").active=!1:this.getItem("node_talk").active=!1},t.prototype.start=function(){if(p.DataManager.isFriendGame){if(p.DataManager.friendRoomId){var e=f.UIManager.isInGameView()?2:1;g.NetManager.protocolChat.sendGetChatMsgRecordReq(e)}}else{e=f.UIManager.isInGameView()?2:1;g.NetManager.protocolChat.sendGetChatMsgRecordReq(e)}},t.prototype.update=function(){if(this.isNext){var e=this.marquee.pop();e&&this.play(e)}if(this.isTopNext){var t=this.marqueeTop.pop();t&&this.getItem("node_talk").active&&this.playTop(t)}},t.prototype.checkVipLevel=function(){if(p.DataManager.isTourist())return this.getItem("label_vip_limit").node.active=!0,this.getItem("label_vip_limit").string="\u6e38\u5ba2\u4e0d\u5f00\u653e\u6b64\u529f\u80fd!",void(this.getItem("node_talk_bottom").active=!1);p.DataManager.userInfo.vip_level>=this.vipLimit?(this.getItem("label_vip_limit").node.active=!1,this.getItem("node_talk_bottom").active=!0):(this.getItem("label_vip_limit").node.active=!0,this.getItem("label_vip_limit").string="VIP"+this.vipLimit+"\u53ca\u4ee5\u4e0a\u624d\u80fd\u53d1\u8a00!",this.getItem("node_talk_bottom").active=!1)},t.prototype.onLoginFriendRoomResp=function(e){var t=f.UIManager.isInGameView()?2:1;g.NetManager.protocolChat.sendGetChatMsgRecordReq(t)},t.prototype.onChatMsgNotify=function(e){(2!=(f.UIManager.isInGameView()?2:1)||2==e.chat_content.place_id&&1!=e.content_type)&&3!=e.chat_content.place_id&&(this.updateItems(),this.upateMarquee(e.chat_content),this.updateItemTop())},t.prototype.onGetChatMsgRecordResp=function(e){this.timeTop=e.place_front_time||this.timeTop,this.vipLimit=e.less_speak_vip_level||this.vipLimit,this.chatShorts=e.quick_msg_list||this.chatShorts,this.upateShort(this.chatShorts),this.checkVipLevel(),this.updateItems(),this.upateMarquee(),this.updateItemTop(),1==e.chat_switch?(this.node.active=!0,this.getItem("btn_talk").node.active=!0):(this.node.active=!1,this.getItem("btn_talk").node.active=!1)},t.prototype.play=function(e){var t=this;this.isNext=!1;var n=""==this.label_info.string;n&&(this.label_info.string=e);var o=this.label_info.node.getContentSize();if(this.label_info.node.y=0,0==this.marquee.length&&n){this.label_info.node.y=0;var i=cc.sequence(cc.delayTime(2),cc.callFunc(function(){t.isNext=!0}));this.label_info.node.runAction(i)}else{var a=cc.moveTo(1,cc.v2(this.label_info.node.x,o.height)),r=cc.sequence(a,cc.callFunc(function(){t.label_info.string=e,t.label_info.node.y=-o.height,t.label_info.node.runAction(cc.sequence(cc.moveTo(1,cc.v2(t.label_info.node.x,0)),cc.delayTime(2),cc.callFunc(function(){t.isNext=!0})))}));this.label_info.node.runAction(r)}},t.prototype.playTop=function(e){return a(this,void 0,void 0,function(){var t,n,o,i,a,s,c,l,d,g,f,_=this;return r(this,function(r){switch(r.label){case 0:return this.isTopNext=!1,t=this.getItem("item_top"),e?(t.active=!0,this.showEffect(),this.scroll_talk.view&&(this.scroll_talk.view.height=this.scroll_talk.view.height-t.height,this.scroll_talk.view.y=this.scroll_talk.view.y-t.height,this.scroll_talk.scrollView.scrollToBottom(0),this.scroll_talk.updateItems()),n=t.getChildByName("node_head"),o=n.getChildByName("node_head_mask").getChildByName("img_head_talk"),i=t.getChildByName("label_name").getComponent(cc.Label),a=t.getChildByName("node_msg"),s=a.getChildByName("label_room_info").getComponent(cc.Label),c=a.getChildByName("label_msg").getComponent(cc.Label),l=n.getChildByName("img_vip"),t.getChildByName("label_system_name").getComponent(cc.Label),e.room_msg_info&&""!=e.room_msg_info.game_des?(s.node.active=!0,s.string=e.room_msg_info.game_des||""):s.node.active=!1,c.string=e.raw_content,e.user_info&&2!=e.send_id?(d=p.DataManager.userInfo.userid==e.user_info.user_id,i.string=e.user_info.nick_name,u.default.setCircleHeadIcon(e.user_info.headimg_id,o),d?(u.default.setVipLevel(e.user_info.vip_level,l),[3,3]):[3,1]):[3,4]):[3,7];case 1:return[4,m.ResManager.loadResAsync("view/common/img_vip_v"+e.user_info.vip_level,cc.SpriteFrame,!1)];case 2:g=r.sent(),l&&g&&(l.getComponent(cc.Sprite).spriteFrame=g),r.label=3;case 3:return[3,5];case 4:i.string="\u7cfb\u7edf",u.default.setCircleHeadIcon("9999",o),r.label=5;case 5:return l.active=2!=e.send_id,t.stopAllActions(),t.runAction(cc.sequence(cc.delayTime(this.timeTop),cc.callFunc(function(){_.isTopNext=!0,0==_.marqueeTop.length&&(t.active=!1),_.scroll_talk.view&&(_.scroll_talk.view.height=_.scroll_talk.view.height+t.height,_.scroll_talk.view.y=_.scroll_talk.view.y+t.height,_.scroll_talk.scrollView.scrollToBottom(0),_.scroll_talk.updateItems())}))),[4,m.ResManager.loadResAsync("animation/spine/chat/kuang"+h.default.getRandomInt(1,2),sp.SkeletonData)];case 6:return(f=r.sent())&&cc.isValid(t)&&(this.getItem("sp_top").skeletonData=f,this.getItem("sp_top").animation="animation"),[3,8];case 7:t.active=!1,r.label=8;case 8:return[2]}})})},t.prototype.upateMarquee=function(e){e?this.marquee.push(e.raw_content):this.data&&this.data[this.data.length-1]&&this.marquee.push(this.data[this.data.length-1].raw_content)},t.prototype.updateItems=function(){var e=f.UIManager.isInGameView()?2:1;this.data=1==e?g.NetManager.protocolChat.getAllChatRecords():g.NetManager.protocolChat.getChatRecords(e),this.data.forEach(function(e){e.raw_content&&(e.raw_content=e.raw_content.replace(/[\r\n]/g,"")),3==e.content_type||4==e.content_type?2==e.send_id?e.templete=5:e.templete=2:2==e.send_id?e.templete=e.raw_content.length<15?3:4:e.templete=e.raw_content.length<15?0:1}),this.getItem("img_tips")&&(this.getItem("img_tips").active=0==this.data.length),this.getItem("node_talk").active&&this.scroll_talk&&(this.scroll_talk.datas=this.data)},t.prototype.upateShort=function(e){var t=this;this.getItem("node_short").destroyAllChildren(),this.getItem("node_short").removeAllChildren(),e.forEach(function(e){var n=cc.instantiate(t.item_short);n.active=!0,n.getComponentInChildren(cc.Label).string=e,n.getComponent(d.default).registerClick(function(){t.getItem("node_short").active=!1,g.NetManager.protocolChat.sendChatMsgReq(f.UIManager.isInGameView()?2:1,e)}),t.getItem("node_short").addChild(n)})},t.prototype.updateItemTop=function(){if(!f.UIManager.isInGameView()&&this.data){var e=this.data[this.data.length-1];e&&1==e.msg_index&&this.marqueeTop.push(e)}},t.prototype.onListRender=function(e,t){var n=this.data[t];3==n.content_type||4==n.content_type?2==n.send_id?this.showSystemInvite(e,n):this.showItemTalk(e,n):2==n.send_id?this.showSystemTalk(e,n):this.showItemTalk(e,n)},t.prototype.setGameIcon=function(e,t){var n=this,o=p.DataManager.getGameName(t),i=_.UpdateUrl+"icon/img_yx_"+o+".png";if(cc.sys.isNative){var s="img_yx_"+o+".png";b.FileManager.downloadFile(i,s,function(t){return a(n,void 0,void 0,function(){var n;return r(this,function(o){switch(o.label){case 0:return t?[4,m.ResManager.loadAsync(s)]:[3,2];case 1:n=o.sent(),cc.isValid(e)&&(e.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n)),o.label=2;case 2:return[2]}})})})}else cc.loader.load(i,function(t,n){t||cc.isValid(e)&&(e.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n))})},t.prototype.showItemTalk=function(e,t,n){return void 0===n&&(n=!0),a(this,void 0,void 0,function(){var o,i,a,s,c,l,g,f,_,y,v,b,C,M,w,I=this;return r(this,function(r){switch(r.label){case 0:return o=e.getChildByName("node_head"),i=o.getChildByName("node_head_mask").getChildByName("img_head_talk"),a=e.getChildByName("label_name").getComponent(cc.Label),s=e.getChildByName("node_msg"),c=s.getChildByName("label_msg").getComponent(cc.Label),l=o.getChildByName("img_vip"),g=e.getChildByName("img_nvite_bg"),f=e.getChildByName("node_invite_msg"),3==t.content_type||4==t.content_type?(s.active=!1,f.active=!0,g&&(g.active=!0),_=f.getChildByName("icon_game"),y=null,_?(y=_.getChildByName("label_room_info").getComponent(cc.Label),this.setGameIcon(_,t.room_msg_info.game_id)):y=f.getChildByName("label_room_info").getComponent(cc.Label),f.getChildByName("label_msg").getComponent(cc.Label).string=t.raw_content,y.string=t.room_msg_info&&t.room_msg_info.game_des||"",f.getChildByName("btn_enter")&&((v=f.getChildByName("btn_enter").getComponent(d.default)).registerClick(function(){4!=t.content_type&&I.onEnterRoom(t)}),v.node.opacity=4!=t.content_type?255:0)):(s.active=!0,f.active=!1,g&&(g.active=!1)),b=p.DataManager.userInfo.userid==t.user_info.user_id,a.string=t.user_info.nick_name,c.string=h.default.insretNewLine(t.raw_content,15),u.default.setCircleHeadIcon(t.user_info.headimg_id,i),b?(u.default.setVipLevel(t.user_info.vip_level,l),[3,3]):[3,1];case 1:return[4,m.ResManager.loadResAsync("view/common/img_vip_v"+t.user_info.vip_level,cc.SpriteFrame,!1)];case 2:C=r.sent(),l&&C&&(l.getComponent(cc.Sprite).spriteFrame=C),r.label=3;case 3:return n?(o.x=b?Math.abs(o.x):-Math.abs(o.x),a.node.anchorX=b?1:0,a.node.x=b?Math.abs(a.node.x):-Math.abs(a.node.x),c.node.anchorX=b?1:0,s.x=b?Math.abs(s.x):-Math.abs(s.x),f.anchorX=b?1:0,f.x=b?Math.abs(f.x):-Math.abs(f.x),g&&(g.scaleX=b?-1:1,g.x=b?Math.abs(g.x):-Math.abs(g.x)),this.talk_bg.length>0?(s.getComponent(cc.Sprite).spriteFrame=b?this.talk_bg[0]:this.talk_bg[1],[3,8]):[3,4]):[2];case 4:return b?(M=s.getComponent(cc.Sprite),[4,m.ResManager.loadResAsync("view/chat/img_tiaotian_right",cc.SpriteFrame)]):[3,6];case 5:return M.spriteFrame=r.sent(),[3,8];case 6:return w=s.getComponent(cc.Sprite),[4,m.ResManager.loadResAsync("view/chat/img_tiaotian_left",cc.SpriteFrame)];case 7:w.spriteFrame=r.sent(),r.label=8;case 8:return[2]}})})},t.prototype.showSystemTalk=function(e,t){var n=e.getChildByName("node_msg");(n?n.getChildByName("label_msg").getComponent(cc.Label):e.getChildByName("label_msg").getComponent(cc.Label)).string=t.raw_content},t.prototype.showSystemInvite=function(e,t){var n=this;e.active=!0;var o=e.getChildByName("node_msg"),i=o.getChildByName("btn_enter").getComponent(d.default),a=o.getChildByName("icon_game"),r=a.getChildByName("label_room_info").getComponent(cc.Label),s=o.getChildByName("label_msg").getComponent(cc.Label);r.string=t.room_msg_info&&t.room_msg_info.game_des||"",s.string=t.raw_content,i.registerClick(function(){n.onEnterRoom(t)}),i.node.active=4!=t.content_type,this.setGameIcon(a,t.room_msg_info.game_id)},t.prototype.showEffect=function(){return a(this,void 0,void 0,function(){var e,t,n,o,i,a,s=this;return r(this,function(r){switch(r.label){case 0:return!this.spineNode&&this.getItem("item_top").active&&this.getItem("node_talk").active?(e=h.default.getRandomInt(0,I.length-1),t=I[e],[4,m.ResManager.loadResAsync("animation/spine/chat/"+t,sp.SkeletonData)]):[2];case 1:return(n=r.sent())&&(this.spineNode=new cc.Node,(o=this.spineNode.addComponent(sp.Skeleton)).skeletonData=n,o.animation="animation",o.setCompleteListener(function(){s.spineNode.destroy(),s.spineNode=null}),this.node.addChild(this.spineNode)),i=this.getItem("sp_caishen"),[4,m.ResManager.loadResAsync("animation/spine/chat/caishen"+(e+1),sp.SkeletonData)];case 2:return(a=r.sent())&&cc.isValid(i.node)&&(i.skeletonData=a,i.animation="animation"),[2]}})})},t.prototype.onClickSend=function(){var e=this.getItem("input_talk").string;e&&""!=e&&(g.NetManager.protocolChat.sendChatMsgReq(f.UIManager.isInGameView()?2:1,e),this.getItem("input_talk").string="")},t.prototype.onClickShort=function(){this.getItem("node_short").active=!this.getItem("node_short").active},t.prototype.onClickTalk=function(){this.getItem("node_talk").active=!this.getItem("node_talk").active,this.getItem("node_talk").active&&(this.updateItems(),this.showEffect())},t.prototype.onEnterRoom=function(e){if(e.room_msg_info){var t=p.DataManager.getGameName(e.room_msg_info.game_id);if(y.UpdateManager.isDowlaoding(t))f.UIManager.showTips("\u6b63\u5728\u66f4\u65b0\u4e2d...");else if(y.UpdateManager.isInstall(t))if(y.UpdateManager.isNeedUpdate(t))f.UIManager.showTipsPopup("\u6e38\u620f\u672a\u66f4\u65b0\uff0c\u662f\u5426\u66f4\u65b0\uff1f",function(e){e&&y.UpdateManager.update(t)});else if(e.room_msg_info.friend_room_id&&p.DataManager.userInfo.vip_level<g.NetManager.protocolAccount.vip_lock_level)f.UIManager.showTipsPopup("VIP\u7b49\u7ea7\u2265"+g.NetManager.protocolAccount.vip_lock_level+"\u624d\u53ef\u4f7f\u7528\u6b64\u529f\u80fd",function(e){e&&g.NetManager.protocolBank.sendRechargePlatformReq()});else{var n=function(t,n){void 0===t&&(t=""),void 0===n&&(n=!1);var o={room_level:e.room_msg_info.room_level,game_type:e.room_msg_info.game_id};t&&(o.token2=JSON.stringify({carryGold:t,autoAddCarry:n})),g.NetManager.protocolHall.sendEnterRoom(o)};e.room_msg_info.needChooseCarry?f.UIManager.popup("prefabs/game/set_bring_gold",{minBring:e.room_msg_info.room_min_entrance,callback:n}):n()}else f.UIManager.showTipsPopup("\u6e38\u620f\u672a\u4e0b\u8f7d\uff0c\u662f\u5426\u4e0b\u8f7d\uff1f",function(e){e&&y.UpdateManager.update(t)})}else f.UIManager.showTips("\u65e0\u623f\u95f4\u6570\u636e!")},i([w(v.default)],t.prototype,"scroll_talk",void 0),i([w(cc.Node)],t.prototype,"item_short",void 0),i([w([cc.SpriteFrame])],t.prototype,"talk_bg",void 0),t=i([M],t)}(s.default);n.default=R,cc._RF.pop()},{"../../Define":"Define","../../common/UIHelper":"UIHelper","../../common/utils/Utils":"Utils","../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/FileManager":"FileManager","../../manager/NetManager":"NetManager","../../manager/ResManager":"ResManager","../../manager/UIManager":"UIManager","../../manager/UpdateManager":"UpdateManager","../../net/NetCmd":"NetCmd","../base/BaseView":"BaseView","./ListEx":"ListEx","./componet/ButtonEx":"ButtonEx"}],ClubChat:[function(e,t,n){"use strict";cc._RF.push(t,"85498yBmlpGMJdhdiongzve","ClubChat");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Chat"),r=e("../../manager/NetManager"),s=e("../../manager/DataManager"),c=e("../../manager/UIManager"),l=e("../../manager/UpdateManager"),p=e("./componet/ButtonEx"),u=cc._decorator,h=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.club=null,t}return o(t,e),t.prototype.initComponent=function(){e.prototype.initComponent.call(this);var t=.3*(cc.winSize.width-1280);t>0&&(this.getItem("btn_talk").node.x-=t)},t.prototype.start=function(){},t.prototype.initChat=function(e){this.club=e,r.NetManager.protocolChat.sendGetChatMsgRecordReq(3,this.club.club_id)},t.prototype.updateItems=function(){this.data=r.NetManager.protocolChat.getAllChatRecordsInPlace(3,this.club.club_id),this.data.forEach(function(e){e.raw_content&&(e.raw_content=e.raw_content.replace(/[\r\n]/g,"")),3==e.content_type?2==e.send_id?e.templete=5:e.templete=2:2==e.send_id?e.templete=e.raw_content.length<15?3:4:e.templete=e.raw_content.length<15?0:1}),this.getItem("img_tips")&&(this.getItem("img_tips").active=0==this.data.length),this.scroll_talk&&(this.scroll_talk.datas=this.data)},t.prototype.onChatMsgNotify=function(e){3==e.chat_content.place_id&&e.chat_content.club_id==this.club.club_id&&(this.updateItems(),this.upateMarquee(e.chat_content),this.updateItemTop())},t.prototype.upateShort=function(e){var t=this;this.getItem("node_short").destroyAllChildren(),this.getItem("node_short").removeAllChildren(),e.forEach(function(e){var n=cc.instantiate(t.item_short);n.active=!0,n.getComponentInChildren(cc.Label).string=e,n.getComponent(p.default).registerClick(function(){t.getItem("node_short").active=!1,r.NetManager.protocolChat.sendChatMsgReq(3,e,t.club.club_id)}),t.getItem("node_short").addChild(n)})},t.prototype.onClickSend=function(){var e=this.getItem("input_talk").string;e&&""!=e&&(r.NetManager.protocolChat.sendChatMsgReq(3,e,this.club.club_id),this.getItem("input_talk").string="")},t.prototype.onEnterRoom=function(e){if(e.room_msg_info){var t=s.DataManager.getGameName(e.room_msg_info.game_id);l.UpdateManager.isDowlaoding(t)?c.UIManager.showTips("\u6b63\u5728\u66f4\u65b0\u4e2d..."):l.UpdateManager.isInstall(t)?l.UpdateManager.isNeedUpdate(t)?c.UIManager.showTipsPopup("\u6e38\u620f\u672a\u66f4\u65b0\uff0c\u662f\u5426\u66f4\u65b0\uff1f",function(e){e&&l.UpdateManager.update(t)}):r.NetManager.protocolClub.sendJointClubRoomReq(this.club.club_id,parseInt(e.room_msg_info.friend_room_id)):c.UIManager.showTipsPopup("\u6e38\u620f\u672a\u4e0b\u8f7d\uff0c\u662f\u5426\u4e0b\u8f7d\uff1f",function(e){e&&l.UpdateManager.update(t)})}else c.UIManager.showTips("\u65e0\u623f\u95f4\u6570\u636e!")},t=i([h],t)}(a.default));n.default=d,cc._RF.pop()},{"../../manager/DataManager":"DataManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../manager/UpdateManager":"UpdateManager","./Chat":"Chat","./componet/ButtonEx":"ButtonEx"}],ClubCreatePopup:[function(e,t,n){"use strict";cc._RF.push(t,"7feae3OehVHv5d1kT6qCCU/","ClubCreatePopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/NetManager"),s=e("../../manager/UIManager"),c=e("../../manager/EventManager"),l=e("../../net/NetCmd"),p=e("../../common/utils/Utils"),u=cc._decorator,h=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this)),this.getItem("input_name").node.on("text-changed",this.onEventEditChange,this)},t.prototype.initEvent=function(){c.EventManager.on(this,l.ProtocolClubCmd.SendCreateClubResp,this.onCreateClubResp.bind(this))},t.prototype.start=function(){},t.prototype.onClickSure=function(){var e=this.getItem("input_name").string;e&&""!=e?r.NetManager.protocolClub.sendCreateClub(e):s.UIManager.showTips("\u8bf7\u8f93\u5165\u5185\u5bb9")},t.prototype.onEventEditChange=function(e){var t=e.string.replace(/[\u0391-\uFFE5]/g,"aa").length;this.getItem("input_name").string=p.default.getNameStr(e.string),t>e.maxLength&&e.blur()},t.prototype.onCreateClubResp=function(e){this.close()},t=i([h],t)}(a.default));n.default=d,cc._RF.pop()},{"../../common/utils/Utils":"Utils","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],ClubCreateRoomPopup:[function(e,t,n){"use strict";cc._RF.push(t,"17354rSXdZBA70vWrLAtv6F","ClubCreateRoomPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../common/componet/ButtonEx"),s=e("../../manager/NetManager"),c=e("../../manager/EventManager"),l=e("../../net/NetCmd"),p=e("../../manager/DataManager"),u=e("../../manager/UIManager"),h=e("../../manager/UpdateManager"),d=e("../common/DynamicList"),g=cc._decorator,f=g.ccclass,m=g.property,_=["\u5168\u90e8\u6e38\u620f","\u725b\u725b\u6e38\u620f","\u70b8\u91d1\u82b1\u6e38\u620f","\u7eb8\u724c\u6e38\u620f"," \u9ebb\u5c06\u6e38\u620f","\u767e\u4eba\u6e38\u620f"],y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_game=null,t.toggle_game=null,t.toggle=null,t.itemRules={},t.roomInfo=null,t.games=[],t.gameIndex=0,t.gameId=-1,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this)),this.getItem("btn_create").registerClick(this.onClickCreate.bind(this))},t.prototype.initEvent=function(){c.EventManager.on(this,l.ProtocolClubCmd.GetCreateRoomInfoResp,this.onGetCreateRoomInfoResp.bind(this)),c.EventManager.on(this,l.ProtocolClubCmd.ClubGameListResp,this.updateGame.bind(this)),c.EventManager.on(this,l.ProtocolClubCmd.ClubAddLeagueResp,this.onClubAddLeagueResp.bind(this)),c.EventManager.on(this,l.ProtocolClubCmd.ClubQuitLeagueResp,this.onClubQuitLeagueResp.bind(this)),c.EventManager.on(this,l.ProtocolClubCmd.ClubListAutoPushResp,this.onClubListAutoPushResp.bind(this))},t.prototype.start=function(){this.updateGame()},t.prototype.updateGame=function(){this.games=s.NetManager.protocolClub.getGameList(),this.scroll_game.datas=this.games},t.prototype.onChildRender=function(e,t,n){e.name=n.game_id.toString();var o=e.getComponentsInChildren(cc.Label);o[0].string=n.game_name,o[1].string=n.game_name,-1==this.gameId&&(this.gameId=n.game_id,s.NetManager.protocolClub.sendGetCreateRoomInfoReq(this.data.club_id,this.gameId))},t.prototype.onListRender=function(e,t){var n=this,o=this.games[t],i=e.getChildByName("btn_game_tag"),a=(e.getChildByName("node_game"),i.getChildByName("normal")),s=i.getChildByName("press"),c=i.getComponentsInChildren(cc.Label);c[0].string=_[o.tag-1],c[1].string=_[o.tag-1],i.getComponent(r.default).registerClick(function(){n.gameIndex!=t&&(n.gameId=-1),n.gameIndex=t,n.scroll_game.setOpen(t)}),this.gameIndex==t&&this.scroll_game.getOpenIndex()==t?(a.active=!1,s.active=!0):(a.active=!0,s.active=!1)},t.prototype.onClickGameTag=function(e){this.gameId=parseInt(e.node.name),cc.log("onClickGameTag",this.gameId),this.getItem("node_rule").destroyAllChildren(),this.getItem("node_rule").removeAllChildren(),s.NetManager.protocolClub.sendGetCreateRoomInfoReq(this.data.club_id,this.gameId)},t.prototype.onClickToggle=function(e){var t=e.node.name.indexOf(":"),n=e.node.name.substring(0,t),o=e.node.name.substring(t+1,e.node.name.length);if("room_base_note"==n){var i=this.roomInfo.room_base_note.indexOf(o);this.itemRules.room_min_entrance.children.forEach(function(e,t){t==i&&(e.getComponent(cc.Toggle).isChecked=!0)})}cc.log(n,o)},t.prototype.createRule=function(e,t,n,o){var i=this;void 0===o&&(o=!0);var a=cc.instantiate(this.getItem("item_rule"));a.active=!0,this.getItem("node_rule").addChild(a);var r=a.getChildByName("node_title").getComponentInChildren(cc.Label),s=a.getChildByName("tc_select"),c=a.getChildByName("img_line");r.string=e;for(var l=function(e){a.runAction(cc.sequence(cc.delayTime(.02*e),cc.callFunc(function(){var r=i.roomInfo[t][e],l=cc.instantiate(i.toggle);l.name=t+":"+r,l.active=!0,l.getComponentInChildren(cc.Label).string=n?n[r]:r,o||(l.getComponent(cc.Toggle).interactable=!1),s.addChild(l),e==i.roomInfo[t].length-1&&(s.getComponent(cc.Layout).updateLayout(),a.height=s.height,c.y=-a.height)})))},p=0;p<this.roomInfo[t].length;p++)l(p);this.itemRules[t]=s},t.prototype.getItemIndex=function(e){for(var t=0;t<this.itemRules[e].childrenCount;t++){if(this.itemRules[e].children[t].getComponent(cc.Toggle).isChecked)return t}},t.prototype.onGetCreateRoomInfoResp=function(e){this.roomInfo=e,this.updateRule()},t.prototype.updateRule=function(){var e=this;this.itemRules={},this.roomInfo.show_area&&0==this.data.add_league&&(this.roomInfo.show_area=[2]),this.getItem("node_rule").destroyAllChildren(),this.getItem("node_rule").removeAllChildren(),this.createRule("\u5e95\u6ce8:","room_base_note");var t=[cc.delayTime(.02*this.roomInfo.room_base_note.length),cc.callFunc(function(){e.createRule("\u51c6\u5165:","room_min_entrance",null,!1)}),cc.delayTime(.02*this.roomInfo.room_min_entrance.length),cc.callFunc(function(){e.createRule("\u4eba\u6570:","player_num")}),cc.delayTime(.02*this.roomInfo.player_num.length),cc.callFunc(function(){e.createRule("\u53ef\u89c1:","show_area",{1:"\u5168\u90e8\u53ef\u89c1",2:"\u4ff1\u4e50\u90e8\u53ef\u89c1",3:"\u8054\u76df\u53ef\u89c1"})})];this.getItem("node_rule").stopAllActions(),this.getItem("node_rule").runAction(cc.sequence(t))},t.prototype.onClickCreate=function(){var e=p.DataManager.getGameName(this.gameId);if(h.UpdateManager.isDowlaoding(e))u.UIManager.showTips("\u6b63\u5728\u66f4\u65b0\u4e2d...");else if(h.UpdateManager.isInstall(e))if(h.UpdateManager.isNeedUpdate(e))u.UIManager.showTipsPopup("\u6e38\u620f\u672a\u66f4\u65b0\uff0c\u662f\u5426\u66f4\u65b0\uff1f",function(t){t&&h.UpdateManager.update(e)});else{var t=this.getItemIndex("room_base_note"),n=this.getItemIndex("room_min_entrance"),o=this.getItemIndex("player_num"),i=this.getItemIndex("show_area");s.NetManager.protocolClub.sendCreateClubRoomReq(this.data.club_id,this.gameId,t+1,this.roomInfo.room_base_note[t],this.roomInfo.room_min_entrance[n],this.roomInfo.player_num[o],this.roomInfo.show_area[i])}else u.UIManager.showTipsPopup("\u6e38\u620f\u672a\u4e0b\u8f7d\uff0c\u662f\u5426\u4e0b\u8f7d\uff1f",function(t){t&&h.UpdateManager.update(e)})},t.prototype.onClubAddLeagueResp=function(e){1==e.state&&this.data.club_id==e.club_id&&(this.data.add_league=1,this.updateRule())},t.prototype.onClubQuitLeagueResp=function(e){1==e.state&&this.data.club_id==e.club_id&&(this.data.add_league=0,this.updateRule())},t.prototype.onClubListAutoPushResp=function(e){e.club_info.club_id==this.data.club_id&&(3==e.modify_type?this.close():this.data.add_league!=e.club_info.add_league&&(this.data.add_league=e.club_info.add_league,this.updateRule()))},i([m(d.default)],t.prototype,"scroll_game",void 0),i([m(cc.Node)],t.prototype,"toggle_game",void 0),i([m(cc.Node)],t.prototype,"toggle",void 0),t=i([f],t)}(a.default);n.default=y,cc._RF.pop()},{"../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../manager/UpdateManager":"UpdateManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView","../common/DynamicList":"DynamicList","../common/componet/ButtonEx":"ButtonEx"}],ClubEditNamePopup:[function(e,t,n){"use strict";cc._RF.push(t,"9c9c9Xjj2hJc5mLILmS/QWN","ClubEditNamePopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/NetManager"),s=e("../../manager/UIManager"),c=e("../../manager/EventManager"),l=e("../../net/NetCmd"),p=e("../../common/utils/Utils"),u=cc._decorator,h=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this)),this.getItem("input_name").node.on("text-changed",this.onEventEditChange,this)},t.prototype.initEvent=function(){c.EventManager.on(this,l.ProtocolClubCmd.ClubReNameResp,this.onClubReNameResp.bind(this)),c.EventManager.on(this,l.ProtocolClubCmd.ClubListAutoPushResp,this.onClubListAutoPushResp.bind(this))},t.prototype.start=function(){this.getItem("label_name").string=this.data.club_name},t.prototype.onClickSure=function(){var e=this.getItem("input_name").string;e&&""!=e?r.NetManager.protocolClub.sendClubReNameReq(this.data.club_id,e):s.UIManager.showTips("\u8bf7\u8f93\u5165\u5185\u5bb9")},t.prototype.onEventEditChange=function(e){var t=e.string.replace(/[\u0391-\uFFE5]/g,"aa").length;this.getItem("input_name").string=p.default.getNameStr(e.string),t>e.maxLength&&e.blur()},t.prototype.onClubReNameResp=function(e){1==e.state&&this.close()},t.prototype.onClubListAutoPushResp=function(e){e.club_info.club_id==this.data.club_id&&3==e.modify_type&&this.close()},t=i([h],t)}(a.default));n.default=d,cc._RF.pop()},{"../../common/utils/Utils":"Utils","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],ClubExitLeaguePopup:[function(e,t,n){"use strict";cc._RF.push(t,"2595cOq+GNPG75y9cH6KN4R","ClubExitLeaguePopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/EventManager"),s=e("../../net/NetCmd"),c=e("../../manager/NetManager"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this)),this.getItem("btn_exit").registerClick(this.onClickSure.bind(this))},t.prototype.initEvent=function(){r.EventManager.on(this,s.ProtocolClubCmd.ClubQuitLeagueResp,this.onClubQuitLeagueResp.bind(this))},t.prototype.start=function(){},t.prototype.onClickSure=function(){c.NetManager.protocolClub.sendClubQuitLeagueReq(this.data.club_id)},t.prototype.onClubQuitLeagueResp=function(e){1==e.state&&this.close()},t=i([p],t)}(a.default));n.default=u,cc._RF.pop()},{"../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],ClubHelpPopup:[function(e,t,n){"use strict";cc._RF.push(t,"3bc50z7DL5GvKqblP9CiqL1","ClubHelpPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/NetManager"),s=e("../../net/NetCmd"),c=e("../../manager/EventManager"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initEvent=function(){c.EventManager.on(this,s.ProtocolClubCmd.GetClubListResp,this.onGetClubListResp.bind(this))},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this))},t.prototype.start=function(){this.updateUI()},t.prototype.updateUI=function(){this.getItem("label_info").string="\u4ff1\u4e50\u90e8\u8bf4\u660e\uff1a\u6bcf\u4e2a\u73a9\u5bb6\u6700\u591a\u62e5\u670910\u4e2a\u4ff1\u4e50\u90e8\uff0c\u5f53\u4ff1\u4e50\u90e8\u4eba\u6570\uff1c"+(r.NetManager.protocolClub.clubConfig.cancel_club_less_than||5)+"\u4eba\u4e14\u8fde\u7eed"+(r.NetManager.protocolClub.clubConfig.cancel_club_un_game_day||5)+"\u5929\u8be5\u4ff1\u4e50\u90e8\u6210\u5458\u672a\u5728\u4ff1\u4e50\u90e8\u8fdb\u884c\u8fc7\u6e38\u620f\uff0c\u5219\u7531\u7cfb\u7edf\u5f3a\u5236\u89e3\u6563\u3002",this.getItem("label_info1").string="\u4ff1\u4e50\u90e8\u623f\u95f4\uff1a\u4ece\u623f\u95f4\u521b\u5efa\u6216\u8be5\u623f\u95f4\u6700\u540e\u4e00\u5c40\u6e38\u620f\u7ed3\u675f\u7b97\u8d77\uff0c\u82e5\u8fde\u7eed"+(r.NetManager.protocolClub.clubConfig.cancel_room_time||10)+"\u5206\u949f\u90fd\u672a\u8fdb\u884c\u4e0b\u4e00\u5c40\uff0c\u5219\u7531\u7cfb\u7edf\u5f3a\u5236\u89e3\u6563\u3002"},t.prototype.onGetClubListResp=function(){this.updateUI()},t=i([p],t)}(a.default));n.default=u,cc._RF.pop()},{"../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],ClubInvitePlayerPopup:[function(e,t,n){"use strict";cc._RF.push(t,"e1c23IBOQxH47DtX4v1ISap","ClubInvitePlayerPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/NetManager"),s=e("../../manager/UIManager"),c=e("../../manager/EventManager"),l=e("../../net/NetCmd"),p=cc._decorator,u=p.ccclass,h=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this))},t.prototype.initEvent=function(){c.EventManager.on(this,l.ProtocolClubCmd.ClubInviteResp,this.onClubInvitePlayerResp.bind(this)),c.EventManager.on(this,l.ProtocolClubCmd.ClubListAutoPushResp,this.onClubListAutoPushResp.bind(this))},t.prototype.start=function(){},t.prototype.onClubInvitePlayerResp=function(e){1==e.state&&(this.getItem("input_id").string=""),e.other_msg&&s.UIManager.showTips(e.other_msg)},t.prototype.onClickSure=function(){var e=this.getItem("input_id").string;e||""!=e?r.NetManager.protocolClub.sendInvitePlayer(parseInt(e),this.data.club_id,this.data.create_user_id):s.UIManager.showTips("\u8bf7\u8f93\u5165id")},t.prototype.onClubListAutoPushResp=function(e){e.club_info.club_id==this.data.club_id&&3==e.modify_type&&this.close()},t=i([u],t)}(a.default));n.default=h,cc._RF.pop()},{"../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],ClubInvitePopup:[function(e,t,n){"use strict";cc._RF.push(t,"1d58ekuVpBDB6tjOq2ApBJ4","ClubInvitePopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/UIManager"),s=e("../../common/Device"),c=e("../../common/UIHelper"),l=e("../../manager/EventManager"),p=e("../../net/NetCmd"),u=cc._decorator,h=u.ccclass,d=u.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.qrcode=null,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this)),this.getItem("btn_invite").registerClick(this.onClickInvite.bind(this)),this.getItem("btn_save").registerClick(this.onClicSave.bind(this)),this.getItem("btn_copy_id").registerClick(this.onClickCopyId.bind(this)),this.getItem("btn_copy_url").registerClick(this.onClicCopyUrl.bind(this))},t.prototype.initEvent=function(){l.EventManager.on(this,p.ProtocolClubCmd.ClubListAutoPushResp,this.onClubListAutoPushResp.bind(this))},t.prototype.start=function(){this.getItem("label_name").string=this.data.club_name,this.getItem("label_id").string=this.data.club_id,this.getItem("input_url").string=this.data.club_invite_link,this.qrcode.getComponent("QRCode").url=this.data.club_invite_link},t.prototype.onClickInvite=function(){r.UIManager.popup("prefabs/club/ClubInvitePlayerPopup",this.data)},t.prototype.onClicSave=function(){c.default.screenShotToLocal(this.getItem("node_code"),"screen_invite_shot.png",!1,function(e,t){r.UIManager.showTips("\u4fdd\u5b58\u6210\u529f")})},t.prototype.onClickCopyId=function(){var e=this.getItem("label_id").string;s.default.setClipBoard(e)&&r.UIManager.showTips("\u590d\u5236\u6210\u529f")},t.prototype.onClicCopyUrl=function(){s.default.setClipBoard(this.data.club_invite_link)&&r.UIManager.showTips("\u590d\u5236\u6210\u529f")},t.prototype.onClubListAutoPushResp=function(e){e.club_info.club_id==this.data.club_id&&3==e.modify_type&&this.close()},i([d(cc.Node)],t.prototype,"qrcode",void 0),t=i([h],t)}(a.default);n.default=g,cc._RF.pop()},{"../../common/Device":"Device","../../common/UIHelper":"UIHelper","../../manager/EventManager":"EventManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],ClubJoinLeaguePopup:[function(e,t,n){"use strict";cc._RF.push(t,"99913fo4zdE4pSbwy1o0HBh","ClubJoinLeaguePopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/NetManager"),s=e("../../manager/EventManager"),c=e("../../net/NetCmd"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this))},t.prototype.initEvent=function(){s.EventManager.on(this,c.ProtocolClubCmd.ClubAddLeagueResp,this.onClubAddLeagueResp.bind(this)),s.EventManager.on(this,c.ProtocolClubCmd.GetClubListResp,this.onGetClubListResp.bind(this))},t.prototype.start=function(){this.getItem("label_num").string="\u4ff1\u4e50\u90e8\u4eba\u6570\uff1e"+r.NetManager.protocolClub.clubConfig.add_league_limit},t.prototype.onGetClubListResp=function(){this.getItem("label_num").string="\u4ff1\u4e50\u90e8\u4eba\u6570\uff1e"+r.NetManager.protocolClub.clubConfig.add_league_limit},t.prototype.onClickSure=function(){r.NetManager.protocolClub.sendClubAddLeagueReq(this.data.club_id)},t.prototype.onClubAddLeagueResp=function(e){1==e.state&&this.close()},t=i([p],t)}(a.default));n.default=u,cc._RF.pop()},{"../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],ClubJoinPopup:[function(e,t,n){"use strict";cc._RF.push(t,"40a93OLsO9NBaThI96FWLDk","ClubJoinPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/UIManager"),s=e("../../manager/NetManager"),c=e("../../net/NetCmd"),l=e("../../manager/EventManager"),p=cc._decorator,u=p.ccclass,h=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this)),this.getItem("btn_scan").registerClick(this.onClickScan.bind(this))},t.prototype.initEvent=function(){l.EventManager.on(this,c.ProtocolClubCmd.SendJoinClubResp,this.onJoinClubResp.bind(this))},t.prototype.start=function(){1==s.NetManager.protocolClub.inviteType&&(this.getItem("btn_scan").node.active=!1)},t.prototype.onJoinClubResp=function(e){2==e.state&&this.close()},t.prototype.onClickScan=function(){r.UIManager.popup("prefabs/club/ClubListPopup")},t.prototype.onClickSure=function(){var e=this.getItem("input_id").string;e||""!=e?s.NetManager.protocolClub.sendJoinClub(parseInt(e)):r.UIManager.showTips("\u4ff1\u4e50\u90e8ID\u4e0d\u80fd\u4e3a\u7a7a")},t=i([u],t)}(a.default));n.default=h,cc._RF.pop()},{"../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],ClubJoinRoomPopup:[function(e,t,n){"use strict";cc._RF.push(t,"63da5GWilJKko8jdkrQJCOl","ClubJoinRoomPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../common/componet/ButtonEx"),s=e("../../manager/NetManager"),c=e("../../net/NetCmd"),l=e("../../manager/EventManager"),p=["\u8bf7","\u8f93","\u5165","\u623f","\u95f4","\u53f7"],u=cc._decorator,h=u.ccclass,d=u.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.text_num=[],t.btn_input=[],t.btn_delete=null,t.btn_reset=null,t.btn_close=null,t.input_num="",t.input_idx=0,t.full_flag=!1,t}return o(t,e),t.prototype.start=function(){},t.prototype.initComponent=function(){var e=this;this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_delete").registerClick(this.onDeleteEvent.bind(this)),this.getItem("btn_reset").registerClick(this.onResetEvent.bind(this));for(var t=function(t){n.btn_input[t].getComponent(r.default).registerClick(function(){e.onInputEvent({tag:t})})},n=this,o=0;o<this.btn_input.length;o++)t(o)},t.prototype.initEvent=function(){l.EventManager.on(this,c.ProtocolClubCmd.ClubListAutoPushResp,this.onClubListAutoPushResp.bind(this))},t.prototype.onClickClose=function(){this.node.destroy()},t.prototype.onInputEvent=function(e){this.full_flag&&this.input_idx>=6&&(this.onResetEvent(),this.full_flag=!1);var t=e.tag,n=this.input_idx;if(this.text_num[n].string=t,this.text_num[n].node.color=cc.color(255,46,46),this.input_num+=t,this.input_idx++,this.input_idx>=6){this.full_flag=!0;s.NetManager.protocolClub.sendJointClubRoomReq(this.data.club_id,parseFloat(this.input_num))}},t.prototype.onDeleteEvent=function(){var e=this.input_idx;0!=e?(this.text_num[e-1].string=p[e-1],this.text_num[e-1].node.color=cc.color(192,183,173),this.input_num=this.input_num.slice(0,this.input_num.length-1),this.input_idx--):console.log("\u6ca1\u6570\u5b57\u53ef\u4ee5\u5220\u4e86")},t.prototype.onResetEvent=function(){this.input_idx=0;for(var e=0;e<this.text_num.length;e++){var t=this.text_num[e];t.string=p[e],t.node.color=cc.color(192,183,173),this.input_num=""}},t.prototype.onClubListAutoPushResp=function(e){e.club_info.club_id==this.data.club_id&&3==e.modify_type&&this.close()},i([d(cc.Label)],t.prototype,"text_num",void 0),i([d(cc.Node)],t.prototype,"btn_input",void 0),i([d(cc.Node)],t.prototype,"btn_delete",void 0),i([d(cc.Node)],t.prototype,"btn_reset",void 0),i([d(cc.Node)],t.prototype,"btn_close",void 0),t=i([h],t)}(a.default);n.default=g,cc._RF.pop()},{"../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView","../common/componet/ButtonEx":"ButtonEx"}],ClubListPopup:[function(e,t,n){"use strict";cc._RF.push(t,"9897bmdPJlGf76Vf9f5m1wK","ClubListPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../common/componet/ButtonEx"),s=e("../../manager/NetManager"),c=e("../common/List"),l=e("../../manager/EventManager"),p=e("../../net/NetCmd"),u=cc._decorator,h=u.ccclass,d=u.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scorll_club=null,t.page=0,t.pageTotal=1,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this)),this.getItem("btn_page_left").registerClick(this.onClickPageLeft.bind(this)),this.getItem("btn_page_right").registerClick(this.onClickPageRight.bind(this))},t.prototype.initEvent=function(){l.EventManager.on(this,p.ProtocolClubCmd.GetSearchClubListResp,this.onGetSearchClubListResp.bind(this)),l.EventManager.on(this,p.ProtocolClubCmd.SendJoinClubResp,this.onJoinClubResp.bind(this))},t.prototype.start=function(){s.NetManager.protocolClub.sendGetSearchClubList()},t.prototype.onGetSearchClubListResp=function(e){this.data=e.club_info||[],this.pageTotal=Math.ceil(e.totals/9)||1,this.page>this.pageTotal-1&&(this.page=this.pageTotal-1),this.updateList()},t.prototype.onJoinClubResp=function(e){2==e.state&&s.NetManager.protocolClub.sendGetSearchClubList()},t.prototype.updateList=function(){this.scorll_club.numItems=this.data.length,this.getItem("label_tips").node.active=0==this.data.length,this.updatePage()},t.prototype.onClubListRender=function(e,t){var n=this.data[t],o=e.getChildByName("label_name").getComponent(cc.Label),i=e.getChildByName("label_id").getComponent(cc.Label),a=e.getChildByName("label_player_num").getComponent(cc.Label),c=e.getChildByName("label_room_num").getComponent(cc.Label),l=e.getChildByName("btn_join").getComponent(r.default);o.string=n.club_name,i.string=n.club_id,a.string=n.club_members,c.string=n.open_rooms,l.registerClick(function(){s.NetManager.protocolClub.sendJoinClub(n.club_id)})},t.prototype.updatePage=function(){this.getItem("label_page_num").string=(this.page+1).toString(),this.getItem("label_page_total").string="/"+this.pageTotal,this.getItem("btn_page_left").interactable=0!=this.page,this.getItem("btn_page_right").interactable=this.page!=this.pageTotal-1},t.prototype.onClickPageLeft=function(){this.page--,this.page<0&&(this.page=0),s.NetManager.protocolClub.sendGetSearchClubList(this.page+1),this.updatePage()},t.prototype.onClickPageRight=function(){this.page++,this.page>this.pageTotal-1&&(this.page=this.pageTotal-1),s.NetManager.protocolClub.sendGetSearchClubList(this.page+1),this.updatePage()},i([d(c.default)],t.prototype,"scorll_club",void 0),t=i([h],t)}(a.default);n.default=g,cc._RF.pop()},{"../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView","../common/List":"List","../common/componet/ButtonEx":"ButtonEx"}],ClubMessagePopup:[function(e,t,n){"use strict";cc._RF.push(t,"5026aLhsm5KIKDviZQBOri0","ClubMessagePopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../manager/EventManager"),r=e("../../manager/NetManager"),s=e("../../net/NetCmd"),c=e("../base/PopupView"),l=e("../common/componet/ButtonEx"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_tabs=[],t}return o(t,e),t.prototype.initComponent=function(){var e=this;this.getItem("btn_close").registerClick(this.close.bind(this)),this.btn_tabs.forEach(function(t,n){t.getComponent(l.default).registerClick(function(){e.onTitleClickEvent(n)})})},t.prototype.initEvent=function(){a.EventManager.on(this,s.ProtocolClubCmd.ClubListAutoPushResp,this.onClubListAutoPushResp.bind(this)),a.EventManager.on(this,s.ProtocolClubCmd.GetClubListResp,this.updateUI.bind(this))},t.prototype.start=function(){this.data?this.getItem("label_notice").string=this.data.announcement||"\u8fd9\u4e2a\u4ff1\u4e50\u90e8\u7684\u521b\u5efa\u4eba\u5f88\u61d2\uff0c\u5c1a\u672a\u8bbe\u7f6e\u4ff1\u4e50\u90e8\u516c\u544a":this.getItem("label_notice").string="\u672a\u52a0\u5165\u4ff1\u4e50\u90e8",this.updateUI(),this.onTitleClickEvent(0)},t.prototype.onClubListAutoPushResp=function(e){e.club_info.club_id==this.data.club_id&&(3==e.modify_type?this.getItem("label_notice").string="\u672a\u52a0\u5165\u4ff1\u4e50\u90e8":this.getItem("label_notice").string=e.club_info.announcement||"\u8fd9\u4e2a\u4ff1\u4e50\u90e8\u7684\u521b\u5efa\u4eba\u5f88\u61d2\uff0c\u5c1a\u672a\u8bbe\u7f6e\u4ff1\u4e50\u90e8\u516c\u544a")},t.prototype.updateUI=function(){this.getItem("label_info").string="\u4ff1\u4e50\u90e8\u8bf4\u660e\uff1a\u6bcf\u4e2a\u73a9\u5bb6\u6700\u591a\u62e5\u670910\u4e2a\u4ff1\u4e50\u90e8\uff0c\u5f53\u4ff1\u4e50\u90e8\u4eba\u6570\uff1c"+(r.NetManager.protocolClub.clubConfig.cancel_club_less_than||5)+"\u4eba\u4e14\u8fde\u7eed"+(r.NetManager.protocolClub.clubConfig.cancel_club_un_game_day||5)+"\u5929\u8be5\u4ff1\u4e50\u90e8\u6210\u5458\u672a\u5728\u4ff1\u4e50\u90e8\u8fdb\u884c\u8fc7\u6e38\u620f\uff0c\u5219\u7531\u7cfb\u7edf\u5f3a\u5236\u89e3\u6563\u3002",this.getItem("label_info1").string="\u4ff1\u4e50\u90e8\u623f\u95f4\uff1a\u4ece\u623f\u95f4\u521b\u5efa\u6216\u8be5\u623f\u95f4\u6700\u540e\u4e00\u5c40\u6e38\u620f\u7ed3\u675f\u7b97\u8d77\uff0c\u82e5\u8fde\u7eed"+(r.NetManager.protocolClub.clubConfig.cancel_room_time||10)+"\u5206\u949f\u90fd\u672a\u8fdb\u884c\u4e0b\u4e00\u5c40\uff0c\u5219\u7531\u7cfb\u7edf\u5f3a\u5236\u89e3\u6563\u3002"},t.prototype.onTitleClickEvent=function(e){for(var t=0;t<this.btn_tabs.length;t++){var n=this.btn_tabs[t];n.getChildByName("menu_off").active=t!=e,n.getChildByName("menu_on").active=t==e}this.getItem("label_notice").node.active=0==e,this.getItem("node_help").active=1==e},i([h(cc.Node)],t.prototype,"btn_tabs",void 0),t=i([u],t)}(c.default);n.default=d,cc._RF.pop()},{"../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView","../common/componet/ButtonEx":"ButtonEx"}],ClubNoticePopup:[function(e,t,n){"use strict";cc._RF.push(t,"781caisbklFn74FyiAX6cF1","ClubNoticePopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/EventManager"),s=e("../../net/NetCmd"),c=cc._decorator,l=c.ccclass,p=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this))},t.prototype.initEvent=function(){r.EventManager.on(this,s.ProtocolClubCmd.ClubListAutoPushResp,this.onClubListAutoPushResp.bind(this))},t.prototype.onClubListAutoPushResp=function(e){e.club_info.club_id==this.data.club_id&&(3==e.modify_type?this.close():this.getItem("label_info").string=e.club_info.announcement||"\u8fd9\u4e2a\u4ff1\u4e50\u90e8\u7684\u521b\u5efa\u4eba\u5f88\u61d2\uff0c\u5c1a\u672a\u8bbe\u7f6e\u4ff1\u4e50\u90e8\u516c\u544a")},t.prototype.start=function(){this.getItem("label_info").string=this.data.announcement||"\u8fd9\u4e2a\u4ff1\u4e50\u90e8\u7684\u521b\u5efa\u4eba\u5f88\u61d2\uff0c\u5c1a\u672a\u8bbe\u7f6e\u4ff1\u4e50\u90e8\u516c\u544a"},t=i([l],t)}(a.default));n.default=p,cc._RF.pop()},{"../../manager/EventManager":"EventManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],ClubPlayerAuditPopup:[function(e,t,n){"use strict";cc._RF.push(t,"4018cnEh4ZDpoea6mMjsoOR","ClubPlayerAuditPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../base/PopupView"),c=e("../common/List"),l=e("../common/componet/ButtonEx"),p=e("../../manager/EventManager"),u=e("../../net/NetCmd"),h=e("../../manager/NetManager"),d=e("../../common/UIHelper"),g=e("../../manager/ResManager"),f=e("../../manager/UIManager"),m=cc._decorator,_=m.ccclass,y=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scorll_player=null,t.page=0,t.pageTotal=1,t.playerList=[],t.selectPlayers={},t.status=0,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this)),this.getItem("btn_refuse").registerClick(this.onClickRefuse.bind(this)),this.getItem("btn_agree").registerClick(this.onClickAgree.bind(this)),this.getItem("btn_cancel_refuse").registerClick(this.onClickCancelRefuse.bind(this)),this.getItem("btn_sure_refuse").registerClick(this.onClickSureRefuse.bind(this)),this.getItem("btn_sure_agree").registerClick(this.onClickSureAgree.bind(this)),this.getItem("btn_cancel_agree").registerClick(this.onClickCancelAgree.bind(this)),this.getItem("btn_page_left").registerClick(this.onClickPageLeft.bind(this)),this.getItem("btn_page_right").registerClick(this.onClickPageRight.bind(this))},t.prototype.initEvent=function(){p.EventManager.on(this,u.ProtocolClubCmd.ClubNeedCheckerListResp,this.onClubNeedCheckerListResp.bind(this)),p.EventManager.on(this,u.ProtocolClubCmd.ClubPassRefuseResp,this.onClubPassRefuseResp.bind(this)),p.EventManager.on(this,u.ProtocolClubCmd.ClubListAutoPushResp,this.onClubListAutoPushResp.bind(this))},t.prototype.start=function(){h.NetManager.protocolClub.sendClubNeedCheckerListReq(this.data.club_id)},t.prototype.onClubListAutoPushResp=function(e){e.club_info.club_id==this.data.club_id&&3==e.modify_type&&this.close()},t.prototype.onClubNeedCheckerListResp=function(e){this.playerList=e.members||[],this.pageTotal=Math.ceil(e.totals/16)||1,this.page>this.pageTotal-1&&(this.page=this.pageTotal-1),this.updatePlayerList()},t.prototype.onClubPassRefuseResp=function(e){1==e.state&&(this.selectPlayers={},h.NetManager.protocolClub.sendClubNeedCheckerListReq(this.data.club_id,this.page+1)),e.other_msg&&f.UIManager.showTips(e.other_msg)},t.prototype.updatePlayerList=function(){this.scorll_player.numItems=this.playerList.length,this.getItem("label_tips").node.active=0==this.playerList.length,this.updatePage()},t.prototype.onPlayerListRender=function(e,t){return a(this,void 0,void 0,function(){var n,o,i,a,s,c,p,u=this;return r(this,function(r){switch(r.label){case 0:return n=this.playerList[t],o=e.getChildByName("label_name").getComponent(cc.Label),i=e.getChildByName("label_id").getComponent(cc.Label),a=e.getChildByName("img_head"),s=e.getChildByName("img_frame"),c=e.getChildByName("img_select"),o.string=n.nick_name,i.string=n.user_id,d.default.setCircleHeadIcon(n.img_url,a),[4,g.ResManager.loadResAsync("view/club/head_vip/img_touxiangkuang_v"+n.vip_level+"_jlb",cc.SpriteFrame)];case 1:return p=r.sent(),cc.isValid(s)&&(s.getComponent(cc.Sprite).spriteFrame=p),this.selectPlayers[n.user_id]?c.active=!0:c.active=!1,e.getComponent(l.default).registerClick(function(){0!=u.status&&(u.selectPlayers[n.user_id]?delete u.selectPlayers[n.user_id]:u.selectPlayers[n.user_id]=!0,c.active=1==u.selectPlayers[n.user_id])}),[2]}})})},t.prototype.onClickRefuse=function(){this.getItem("btn_refuse").node.active=!1,this.getItem("btn_agree").node.active=!1,this.getItem("btn_cancel_refuse").node.active=!0,this.getItem("btn_sure_refuse").node.active=!0,this.status=1},t.prototype.onClickAgree=function(){this.getItem("btn_refuse").node.active=!1,this.getItem("btn_agree").node.active=!1,this.getItem("btn_cancel_agree").node.active=!0,this.getItem("btn_sure_agree").node.active=!0,this.status=2},t.prototype.onClickCancelRefuse=function(){this.getItem("btn_refuse").node.active=!0,this.getItem("btn_agree").node.active=!0,this.getItem("btn_cancel_refuse").node.active=!1,this.getItem("btn_sure_refuse").node.active=!1,this.status=0,this.selectPlayers={},this.updatePlayerList()},t.prototype.onClickSureRefuse=function(){var e=[];for(var t in this.selectPlayers)e.push(parseInt(t));h.NetManager.protocolClub.sendClubPassRefuseReq(this.data.club_id,e,0)},t.prototype.onClickSureAgree=function(){var e=[];for(var t in this.selectPlayers)e.push(parseInt(t));h.NetManager.protocolClub.sendClubPassRefuseReq(this.data.club_id,e,1)},t.prototype.onClickCancelAgree=function(){this.getItem("btn_refuse").node.active=!0,this.getItem("btn_agree").node.active=!0,this.getItem("btn_cancel_agree").node.active=!1,this.getItem("btn_sure_agree").node.active=!1,this.status=0,this.selectPlayers={},this.updatePlayerList()},t.prototype.updatePage=function(){this.getItem("label_page_num").string=(this.page+1).toString(),this.getItem("label_page_total").string="/"+this.pageTotal,this.getItem("btn_page_left").interactable=0!=this.page,this.getItem("btn_page_right").interactable=this.page!=this.pageTotal-1},t.prototype.onClickPageLeft=function(){this.page--,this.page<0&&(this.page=0),h.NetManager.protocolClub.sendClubNeedCheckerListReq(this.data.club_id,this.page+1),this.updatePage()},t.prototype.onClickPageRight=function(){this.page++,this.page>this.pageTotal-1&&(this.page=this.pageTotal-1),h.NetManager.protocolClub.sendClubNeedCheckerListReq(this.data.club_id,this.page+1),this.updatePage()},i([y(c.default)],t.prototype,"scorll_player",void 0),t=i([_],t)}(s.default);n.default=v,cc._RF.pop()},{"../../common/UIHelper":"UIHelper","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/ResManager":"ResManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView","../common/List":"List","../common/componet/ButtonEx":"ButtonEx"}],ClubPlayerListPopup:[function(e,t,n){"use strict";cc._RF.push(t,"f635eI//iZMBr6lcYLIvIhF","ClubPlayerListPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../base/PopupView"),c=e("../common/componet/ButtonEx"),l=e("../common/List"),p=e("../../net/NetCmd"),u=e("../../manager/EventManager"),h=e("../../manager/NetManager"),d=e("../../common/UIHelper"),g=e("../../manager/ResManager"),f=e("../../manager/UIManager"),m=cc._decorator,_=m.ccclass,y=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scorll_player=null,t.page=0,t.pageTotal=1,t.playerList=[],t.selectPlayers={},t.status=0,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this)),this.getItem("btn_delete_player").registerClick(this.onClickDeletePlayer.bind(this)),this.getItem("btn_set_manager").registerClick(this.onClickSetManager.bind(this)),this.getItem("btn_cancel_delete").registerClick(this.onClickCancelDelete.bind(this)),this.getItem("btn_sure_delete").registerClick(this.onClickSureDelete.bind(this)),this.getItem("btn_sure_set").registerClick(this.onClickSureSet.bind(this)),this.getItem("btn_cancel_set").registerClick(this.onClickCancelSet.bind(this)),this.getItem("btn_search").registerClick(this.onClickSearch.bind(this)),this.getItem("btn_page_left").registerClick(this.onClickPageLeft.bind(this)),this.getItem("btn_page_right").registerClick(this.onClickPageRight.bind(this))},t.prototype.initEvent=function(){u.EventManager.on(this,p.ProtocolClubCmd.GetPlayerListResp,this.onGetGetPlayerListResp.bind(this)),u.EventManager.on(this,p.ProtocolClubCmd.ClubDeleteMemberResp,this.onClubDeleteMemberResp.bind(this)),u.EventManager.on(this,p.ProtocolClubCmd.ClubReSetManagerResp,this.onClubReSetManagerResp.bind(this)),u.EventManager.on(this,p.ProtocolClubCmd.MembersListAutoPushResp,this.onMembersListAutoPushResp.bind(this)),u.EventManager.on(this,p.ProtocolClubCmd.ClubListAutoPushResp,this.onClubListAutoPushResp.bind(this))},t.prototype.start=function(){h.NetManager.protocolClub.sendGetPlayerList(this.data.club_id),3==this.data.identity_type?(this.getItem("btn_delete_player").node.active=!1,this.getItem("btn_set_manager").node.active=!1):2==this.data.identity_type&&(this.getItem("btn_set_manager").node.active=!1)},t.prototype.onClubListAutoPushResp=function(e){e.club_info.club_id==this.data.club_id&&3==e.modify_type&&this.close()},t.prototype.onMembersListAutoPushResp=function(e){h.NetManager.protocolClub.sendGetPlayerList(this.data.club_id,this.page+1)},t.prototype.onClubDeleteMemberResp=function(e){this.selectPlayers={},h.NetManager.protocolClub.sendGetPlayerList(this.data.club_id,this.page+1),e.other_msg&&f.UIManager.showTips(e.other_msg)},t.prototype.onClubReSetManagerResp=function(e){h.NetManager.protocolClub.sendGetPlayerList(this.data.club_id,this.page+1),e.other_msg&&f.UIManager.showTips(e.other_msg)},t.prototype.onGetGetPlayerListResp=function(e){this.playerList=e.members||[],this.pageTotal=Math.ceil(e.totals/16)||1,this.page>this.pageTotal-1&&(this.page=this.pageTotal-1),this.updatePlayerList()},t.prototype.updatePlayerList=function(){this.scorll_player.numItems=this.playerList.length,this.updatePage()},t.prototype.onPlayerListRender=function(e,t){return a(this,void 0,void 0,function(){var n,o,i,a,s,l,p,u,h,m,_,y=this;return r(this,function(r){switch(r.label){case 0:return n=this.playerList[t],o=e.getChildByName("label_name").getComponent(cc.Label),i=e.getChildByName("label_id").getComponent(cc.Label),a=e.getChildByName("img_head"),s=e.getChildByName("img_frame"),l=e.getChildByName("img_select"),p=e.getChildByName("icon_create"),u=e.getChildByName("icon_manager"),h=e.getChildByName("icon_online"),m=e.getChildByName("icon_offline"),p.active=!1,u.active=!1,h.active=!1,m.active=!1,o.string=n.nick_name,i.string=n.user_id,d.default.setCircleHeadIcon(n.img_url,a),[4,g.ResManager.loadResAsync("view/club/head_vip/img_touxiangkuang_v"+n.vip_level+"_jlb",cc.SpriteFrame)];case 1:return _=r.sent(),cc.isValid(s)&&(s.getComponent(cc.Sprite).spriteFrame=_),1==n.identity_type?p.active=!0:2==n.identity_type?u.active=!0:1==n.online?h.active=!0:m.active=!0,this.selectPlayers[n.user_id]?l.active=!0:l.active=!1,e.getComponent(c.default).registerClick(function(){if(0!=y.status){if(y.selectPlayers[n.user_id])delete y.selectPlayers[n.user_id];else{if(1==n.identity_type)return void f.UIManager.showTips("\u8be5\u73a9\u5bb6\u4e3a\u521b\u59cb\u4eba\uff0c\u4e0d\u53ef\u88ab\u9009\u4e2d");if(2==y.data.identity_type&&2==n.identity_type)return void f.UIManager.showTips("\u8be5\u73a9\u5bb6\u4e3a\u7ba1\u7406\u5458\uff0c\u4e0d\u53ef\u88ab\u9009\u4e2d");if(2==y.status&&3==Object.keys(y.selectPlayers).length)return void f.UIManager.showTips("\u4e00\u4e2a\u4ff1\u4e50\u90e8\u6700\u591a\u62e5\u67093\u4e2a\u7ba1\u7406\u5458");y.selectPlayers[n.user_id]=!0}l.active=1==y.selectPlayers[n.user_id]}}),[2]}})})},t.prototype.onClickDeletePlayer=function(){this.getItem("btn_delete_player").node.active=!1,this.getItem("btn_set_manager").node.active=!1,this.getItem("btn_cancel_delete").node.active=!0,this.getItem("btn_sure_delete").node.active=!0,this.status=1},t.prototype.onClickSetManager=function(){var e=this;this.getItem("btn_delete_player").node.active=!1,this.getItem("btn_set_manager").node.active=!1,this.getItem("btn_cancel_set").node.active=!0,this.getItem("btn_sure_set").node.active=!0,this.status=2,1==this.data.identity_type&&(this.playerList.forEach(function(t){2==t.identity_type&&(e.selectPlayers[t.user_id]=!0)}),this.updatePlayerList())},t.prototype.onClickCancelDelete=function(){this.getItem("btn_delete_player").node.active=!0,this.getItem("btn_set_manager").node.active=!0,this.getItem("btn_cancel_delete").node.active=!1,this.getItem("btn_sure_delete").node.active=!1,this.status=0,this.selectPlayers={},this.updatePlayerList()},t.prototype.onClickSureDelete=function(){var e=this;0!=Object.keys(this.selectPlayers).length?f.UIManager.showTipsPopup("\u60a8\u786e\u5b9a\u8981\u5220\u9664\u9009\u4e2d\u6210\u5458\u5417?",function(t){if(t){var n=[];for(var o in e.selectPlayers)n.push(parseInt(o));h.NetManager.protocolClub.sendClubDeleteMemberReq(e.data.club_id,n)}},3):f.UIManager.showTips("\u8bf7\u9009\u62e9\u73a9\u5bb6")},t.prototype.onClickSureSet=function(){var e=[];for(var t in this.selectPlayers)e.push(parseInt(t));h.NetManager.protocolClub.sendClubReSetManagerReq(this.data.club_id,e,2)},t.prototype.onClickCancelSet=function(){this.getItem("btn_delete_player").node.active=!0,this.getItem("btn_set_manager").node.active=!0,this.getItem("btn_cancel_set").node.active=!1,this.getItem("btn_sure_set").node.active=!1,this.status=0,this.selectPlayers={},this.updatePlayerList()},t.prototype.onClickSearch=function(){var e=this.getItem("input_search").string;e&&""!=e?h.NetManager.protocolClub.sendGetPlayerList(this.data.club_id,this.page+1,parseInt(e)):f.UIManager.showTips("\u8bf7\u8f93\u5165\u73a9\u5bb6ID")},t.prototype.onEditEnd=function(){""==this.getItem("input_search").string&&h.NetManager.protocolClub.sendGetPlayerList(this.data.club_id,this.page+1)},t.prototype.updatePage=function(){this.getItem("label_page_num").string=(this.page+1).toString(),this.getItem("label_page_total").string="/"+this.pageTotal,this.getItem("btn_page_left").interactable=0!=this.page,this.getItem("btn_page_right").interactable=this.page!=this.pageTotal-1},t.prototype.onClickPageLeft=function(){this.page--,this.page<0&&(this.page=0),h.NetManager.protocolClub.sendGetPlayerList(this.data.club_id,this.page+1),this.updatePage()},t.prototype.onClickPageRight=function(){this.page++,this.page>this.pageTotal-1&&(this.page=this.pageTotal-1),h.NetManager.protocolClub.sendGetPlayerList(this.data.club_id,this.page+1),this.updatePage()},i([y(l.default)],t.prototype,"scorll_player",void 0),t=i([_],t)}(s.default);n.default=v,cc._RF.pop()},{"../../common/UIHelper":"UIHelper","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/ResManager":"ResManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView","../common/List":"List","../common/componet/ButtonEx":"ButtonEx"}],ClubProfitPopup:[function(e,t,n){"use strict";cc._RF.push(t,"92166XE5yRA/YN6VlGuVIjd","ClubProfitPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/EventManager"),s=e("../../net/NetCmd"),c=e("../common/List"),l=e("../../manager/NetManager"),p=e("../../common/utils/Utils"),u=e("../../manager/UIManager"),h=cc._decorator,d=h.ccclass,g=h.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_profit=null,t.profitList=[],t.page=0,t.pageTotal=1,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this)),this.getItem("btn_recive").registerClick(this.onClickRecive.bind(this)),this.getItem("btn_page_left").registerClick(this.onClickPageLeft.bind(this)),this.getItem("btn_page_right").registerClick(this.onClickPageRight.bind(this)),this.getItem("btn_tips").registerClick(this.onClickTips.bind(this))},t.prototype.initEvent=function(){r.EventManager.on(this,s.ProtocolClubCmd.ClubProfitResp,this.onClubProfitResp.bind(this)),r.EventManager.on(this,s.ProtocolClubCmd.ClubGetProfitResp,this.onClubGetProfitResp.bind(this))},t.prototype.start=function(){l.NetManager.protocolClub.sendClubProfitReq(this.data.club_id),this.getItem("label_tips").string="1.\u672c\u5c40\u6536\u76ca\uff1c0.01\u5219\u672c\u5c40\u4e0d\u4ea7\u751f\u6536\u76ca\u3002\n2.\u5f53\u65e5\u4f63\u91d1\u6b21\u65e5\u9886\u53d6\uff0c\u8fc7\u65f6\u81ea\u52a8\u53d1\u653e\u3002\n3.\u6536\u76ca\u81ea\u52a8\u6263\u9664\u6210\u5458\u7684\u5145\u503c\u8d60\u9001\uff0c\u5982\u6709\u7591\u95ee\u8bf7\u8054\u7cfb\u5ba2\u670d\u3002"},t.prototype.onClubGetProfitResp=function(e){1==e.state&&this.updateStatus(e),e.other_msg&&u.UIManager.showTips(e.other_msg)},t.prototype.onClubProfitResp=function(e){this.profitList=e.profit_list||[],this.pageTotal=Math.ceil(e.totals/7)||1,this.page>this.pageTotal-1&&(this.page=this.pageTotal-1),this.updatePage(),this.scroll_profit.numItems=this.profitList.length,this.getItem("record_none").active=0==this.profitList.length,this.updateStatus(e)},t.prototype.updateStatus=function(e){this.getItem("btn_recive").interactable=e.not_get_profit>0,this.getItem("img_recive_nor").active=e.not_get_profit>0,this.getItem("img_recive_dis").active=e.not_get_profit<=0,this.getItem("label_recived").string="\u5f53\u524d\u5df2\u9886:"+e.got_profit,this.getItem("label_recive").string="\u5f53\u524d\u672a\u9886:"+e.not_get_profit},t.prototype.onListRender=function(e,t){var n=this.profitList[t],o=e.getChildByName("label_num").getComponent(cc.Label),i=e.getChildByName("label_name").getComponent(cc.Label),a=e.getChildByName("label_code").getComponent(cc.Label),r=e.getChildByName("label_id").getComponent(cc.Label),s=e.getChildByName("label_win").getComponent(cc.Label),c=e.getChildByName("label_profit").getComponent(cc.Label),l=e.getChildByName("label_time").getComponent(cc.Label),u=e.getChildByName("label_status").getComponent(cc.Label);o.string=(t+1+7*this.page).toString(),i.string=1==n.type?"\u4ff1\u4e50\u90e8\u623f\u6536\u76ca":"\u8054\u76df\u623f\u6536\u76ca",a.string=n.card_num,r.string=n.user_id,s.string=n.win_score,c.string=n.profit,l.string=p.default.getFormatDate(1e3*n.end_time,"yyyy-MM-dd\nhh:mm"),u.string=1==n.state?"\u5df2\u9886":"\u672a\u9886",u.node.color=1==n.state?cc.color(255,0,0):cc.color(17,146,84)},t.prototype.updatePage=function(){this.getItem("label_page_num").string=(this.page+1).toString(),this.getItem("label_page_total").string="/"+this.pageTotal,this.getItem("btn_page_left").interactable=0!=this.page,this.getItem("btn_page_right").interactable=this.page!=this.pageTotal-1},t.prototype.onClickPageLeft=function(){this.page--,this.page<0&&(this.page=0),l.NetManager.protocolClub.sendClubProfitReq(this.data.club_id,this.page+1),this.updatePage()},t.prototype.onClickPageRight=function(){this.page++,this.page>this.pageTotal-1&&(this.page=this.pageTotal-1),l.NetManager.protocolClub.sendClubProfitReq(this.data.club_id,this.page+1),this.updatePage()},t.prototype.onClickRecive=function(){l.NetManager.protocolClub.sendClubProfitReciveReq(this.data.club_id)},t.prototype.onClickTips=function(){this.getItem("node_tips").active=!this.getItem("node_tips").active},i([g(c.default)],t.prototype,"scroll_profit",void 0),t=i([d],t)}(a.default);n.default=f,cc._RF.pop()},{"../../common/utils/Utils":"Utils","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView","../common/List":"List"}],ClubSetPopup:[function(e,t,n){"use strict";cc._RF.push(t,"b1763fgQx9A6qTSKyaVw95y","ClubSetPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/NetManager"),s=e("../../manager/EventManager"),c=e("../../net/NetCmd"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this))},t.prototype.initEvent=function(){s.EventManager.on(this,c.ProtocolClubCmd.ClubReConfigResp,this.onClubReConfigResp.bind(this)),s.EventManager.on(this,c.ProtocolClubCmd.ClubListAutoPushResp,this.onClubListAutoPushResp.bind(this))},t.prototype.start=function(){1==this.data.join_type?this.getItem("toggle_all").isChecked=!0:this.getItem("toggle_audit").isChecked=!0,this.getItem("input_notice").string=this.data.announcement},t.prototype.onClickToggle=function(e){},t.prototype.onEditEnd=function(){},t.prototype.onClickSure=function(){var e=this.getItem("input_notice").string,t=this.getItem("toggle_all").isChecked?1:2;r.NetManager.protocolClub.sendClubReConfigReq(this.data.club_id,t,e)},t.prototype.onClubReConfigResp=function(e){1==e.state&&this.close()},t.prototype.onClubListAutoPushResp=function(e){e.club_info.club_id==this.data.club_id&&(3==e.modify_type?this.close():(1==e.club_info.join_type?this.getItem("toggle_all").isChecked=!0:this.getItem("toggle_audit").isChecked=!0,this.getItem("input_notice").string=e.club_info.announcement))},t=i([p],t)}(a.default));n.default=u,cc._RF.pop()},{"../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],ClubTable:[function(e,t,n){"use strict";cc._RF.push(t,"9c37c6DuspEfY9KejWxb+uO","ClubTable");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../manager/ResManager"),c=e("../../manager/DataManager"),l=e("../../Define"),p=e("../../manager/FileManager"),u=e("../../common/UIHelper"),h=e("../common/componet/ButtonEx"),d=e("../../manager/NetManager"),g=e("../../manager/UIManager"),f=e("../../manager/UpdateManager"),m=cc._decorator,_=m.ccclass,y=(m.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tables={},t}return o(t,e),t.prototype.init=function(e,t){return a(this,void 0,void 0,function(){var n,o,i,m,_,y,v,b,C,M,w,I,R,P,k,E,N,T,S=this;return r(this,function(D){switch(D.label){case 0:return(n=this.tables[e.max_users])?[3,2]:[4,s.ResManager.loadResAsync("prefabs/club/table/table_"+e.max_users,cc.Prefab)];case 1:if(!(o=D.sent())||!cc.isValid(this.node))return[2];n=cc.instantiate(o),this.node.addChild(n),this.tables[e.max_users]=n,D.label=2;case 2:for(C in this.tables)cc.isValid(this.tables[C])&&(this.tables[C].active=C==e.max_users);(i=n.getChildByName("img_table").getComponent(h.default)).disabledScale(),m=n.getChildByName("img_game_name"),_=n.getChildByName("img_full"),y=n.getChildByName("img_start"),v=n.getChildByName("label_limit").getComponent(cc.Label),b=n.getChildByName("label_num").getComponent(cc.Label),e.limit_min_red>0?v.string="h"+e.limit_min_red+"-"+e.limit_max_red:v.string="r"+e.limit_enter,b.string=e.current_users+"/"+e.max_users,i.registerClick(function(){var n=c.DataManager.getGameName(e.game_id);f.UpdateManager.isDowlaoding(n)?g.UIManager.showTips("\u6b63\u5728\u66f4\u65b0\u4e2d..."):f.UpdateManager.isInstall(n)?f.UpdateManager.isNeedUpdate(n)?g.UIManager.showTipsPopup("\u6e38\u620f\u672a\u66f4\u65b0\uff0c\u662f\u5426\u66f4\u65b0\uff1f",function(e){e&&f.UpdateManager.update(n)}):1!=e.game_state?e.current_users!=e.max_users?d.NetManager.protocolClub.sendJointClubRoomReq(t.club_id,parseInt(e.u_room_id)):g.UIManager.showTips("\u623f\u95f4\u5df2\u6ee1..."):g.UIManager.showTips("\u6e38\u620f\u5df2\u5f00\u59cb..."):g.UIManager.showTipsPopup("\u6e38\u620f\u672a\u4e0b\u8f7d\uff0c\u662f\u5426\u4e0b\u8f7d\uff1f",function(e){e&&f.UpdateManager.update(n)})}),C=0,D.label=3;case 3:return C<e.max_users?cc.isValid(n)?(M=C+1,(w=n.getChildByName("img_head"+M))?(I=n.getChildByName("img_frame"+M),R=n.getChildByName("img_name"+M),P=n.getChildByName("label_name"+M).getComponent(cc.Label),e.player_Info[C]?(w.active=!0,I.active=!0,P.node.active=!1,R.active=!1,P.string=e.player_Info[C].username,u.default.setCircleHeadIcon(e.player_Info[C].headimg_id,w),[4,s.ResManager.loadResAsync("view/club/head_vip/img_touxiangkuang_v"+e.player_Info[C].vip_level+"_jlb",cc.SpriteFrame)]):[3,5]):[3,6]):[2]:[3,7];case 4:return k=D.sent(),cc.isValid(I)&&(I.getComponent(cc.Sprite).spriteFrame=k),[3,6];case 5:w.active=!1,I.active=!1,P.node.active=!1,R.active=!1,D.label=6;case 6:return C++,[3,3];case 7:return 0==e.game_state?(y.active=!1,_.active=e.current_users==e.max_users):(y.active=!0,_.active=!1),E=c.DataManager.getGameName(e.game_id),N=l.UpdateUrl+"club/table/jlb_font_"+E+".png",cc.sys.isNative?(T="jlb_table_font_"+E+".png",p.FileManager.downloadFile(N,T,function(e){return a(S,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return e?[4,s.ResManager.loadAsync(T)]:[3,2];case 1:t=n.sent(),cc.isValid(m)&&(m.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t)),n.label=2;case 2:return[2]}})})})):cc.loader.load(N,function(e,t){e||cc.isValid(m)&&(m.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t))}),[2]}})})},t=i([_],t)}(cc.Component));n.default=y,cc._RF.pop()},{"../../Define":"Define","../../common/UIHelper":"UIHelper","../../manager/DataManager":"DataManager","../../manager/FileManager":"FileManager","../../manager/NetManager":"NetManager","../../manager/ResManager":"ResManager","../../manager/UIManager":"UIManager","../../manager/UpdateManager":"UpdateManager","../common/componet/ButtonEx":"ButtonEx"}],ClubView:[function(e,t,n){"use strict";cc._RF.push(t,"e6cc22QT6RJ84DVi5k2mUxF","ClubView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../base/BaseView"),c=e("../common/componet/ButtonEx"),l=e("../../manager/UIManager"),p=e("../common/List"),u=e("../../manager/ResManager"),h=e("../../manager/FileManager"),d=e("../../manager/DataManager"),g=e("../../Define"),f=e("./ClubTable"),m=e("../../manager/EventManager"),_=e("../../net/NetCmd"),y=e("../../manager/NetManager"),v=e("../common/ClubChat"),b=e("../common/DynamicList"),C=e("../../common/log/LogWrap"),M=cc._decorator,w=M.ccclass,I=M.property,R=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sroll_club=null,t.scroll_game=null,t.scroll_table=null,t.toggle_game=null,t.clubIndex=0,t.gameIndex=0,t.gameId=-1,t.page=0,t.pageTotal=1,t.games=[],t.tables=[],t.tab="club",t.chat=null,t.btnTags=[],t.tag=-1,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_back").registerClick(this.onClickBack.bind(this)),this.getItem("btn_club").registerClick(this.updateTag.bind(this,0)),this.getItem("btn_game").registerClick(this.updateTag.bind(this,1)),this.getItem("btn_message").registerClick(this.onClickMessage.bind(this)),this.getItem("btn_set").registerClick(this.onClickSet.bind(this)),this.getItem("btn_profit").registerClick(this.onClickProfit.bind(this)),this.getItem("btn_invite").registerClick(this.onClickInvite.bind(this)),this.getItem("btn_audit").registerClick(this.onClickAudit.bind(this)),this.getItem("btn_league").registerClick(this.onClickLeague.bind(this)),this.getItem("btn_player").registerClick(this.onClickPlayer.bind(this)),this.getItem("btn_create_club").registerClick(this.onClickCreatClub.bind(this)),this.getItem("btn_search_club").registerClick(this.onClickSearchCulb.bind(this)),this.getItem("btn_join").registerClick(this.onClickJoin.bind(this)),this.getItem("btn_create").registerClick(this.onClickCreate.bind(this)),this.getItem("btn_club_set").registerClick(this.onClickClubSet.bind(this)),this.getItem("btn_club_edit_name").registerClick(this.onClickClubEidtName.bind(this)),this.getItem("btn_club_dismiss").registerClick(this.onClickClubDismiss.bind(this)),this.getItem("btn_club_exit").registerClick(this.onClickClubExit.bind(this)),this.getItem("btn_club_cancel_exit").registerClick(this.onClickClubCancelExit.bind(this)),this.getItem("btn_page_left").registerClick(this.onClickPageLeft.bind(this)),this.getItem("btn_page_right").registerClick(this.onClickPageRight.bind(this)),this.getItem("btn_tab_club").registerClick(this.onClickTabClub.bind(this)).disabledScale(),this.getItem("btn_tab_league").registerClick(this.onClickTabLeague.bind(this)).disabledScale(),this.btnTags=this.getItem("node_tag").getComponentsInChildren(c.default);var e=.3*(cc.winSize.width-1280);e>0&&(this.getItem("node_game").x-=e)},t.prototype.updateTag=function(e){void 0===e&&(e=0),this.tag=e,this.btnTags.forEach(function(t,n){t.node.getChildByName("img_text_nor").active=n!=e,t.node.getChildByName("img_text_pre").active=n==e,t.interactable=n!=e}),this.getItem("node_club").active=0==e,this.scroll_game.node.active=1==e,0==e?this.updateClub():this.updateGame()},t.prototype.initEvent=function(){m.EventManager.on(this,_.ProtocolClubCmd.GetClubListResp,this.onGetClubListResp.bind(this)),m.EventManager.on(this,_.ProtocolClubCmd.SendCreateClubResp,this.onCreateClubResp.bind(this)),m.EventManager.on(this,_.ProtocolClubCmd.GetClubRoomsResp,this.onGetClubRoomsResp.bind(this)),m.EventManager.on(this,_.ProtocolClubCmd.SendJoinClubResp,this.onCreateClubResp.bind(this)),m.EventManager.on(this,_.ProtocolClubCmd.ClubCancelResp,this.onClubCancelResp.bind(this)),m.EventManager.on(this,_.ProtocolClubCmd.ClubQuitResp,this.onClubQuitResp.bind(this)),m.EventManager.on(this,_.ProtocolClubCmd.ClubListAutoPushResp,this.onClubListAutoPushResp.bind(this)),m.EventManager.on(this,_.ProtocolClubCmd.ClubGameListResp,this.onClubGameListResp.bind(this)),m.EventManager.on(this,_.ProtocolClubCmd.ClubReNameResp,this.onClubReNameResp.bind(this)),m.EventManager.on(this,_.ProtocolClubCmd.RoomListAutoPushResp,this.onRoomListAutoPushResp.bind(this)),m.EventManager.on(this,_.ProtocolClubCmd.ClubAddLeagueResp,this.onClubLeagueResp.bind(this)),m.EventManager.on(this,_.ProtocolClubCmd.ClubQuitLeagueResp,this.onClubLeagueResp.bind(this)),m.EventManager.on(this,_.ProtocolAccountCmd.LoginResp,this.onLoginResp.bind(this)),m.EventManager.on(this,g.EventDef.ClubUpateLeague,this.onClubUpateLeague.bind(this)),m.EventManager.on(this,_.ProtocolClubCmd.ClubGetProfitResp,this.onClubGetProfitResp.bind(this))},t.prototype.onClubLeagueResp=function(){if("club"!=this.tab){var e=y.NetManager.protocolClub.clubList[this.clubIndex];if(e&&0==e.add_league)return this.tables=[],void this.updateTable();this.sendRoomList()}},t.prototype.onLoginResp=function(){y.NetManager.protocolClub.sendGetClubList(),this.sendRoomList()},t.prototype.onRoomListAutoPushResp=function(e){if(cc.isValid(this.node)){if(this.tables.length>0&&1==e.modify_type)for(var t=0;t<this.tables.length;t++)this.tables[t].u_room_id==e.club_room_list.u_room_id&&(this.tables[t]=e.club_room_list,this.updateTable());else this.sendRoomList();e.other_msg&&l.UIManager.showTips(e.other_msg)}},t.prototype.onClubListAutoPushResp=function(e){(this.updateClub(),this.checkClub(),2==e.modify_type&&1==y.NetManager.protocolClub.clubList.length)&&(y.NetManager.protocolClub.clubList[this.clubIndex]&&(this.sendRoomList(),this.initChat()))},t.prototype.onClubUpateLeague=function(e){var t=y.NetManager.protocolClub.clubList[this.clubIndex];t&&e.club_id==t.club_id&&0==e.add_league&&this.sendRoomList()},t.prototype.onClubGetProfitResp=function(){this.updateClubOperate()},t.prototype.onClubReNameResp=function(e){this.updateClub()},t.prototype.onClubGameListResp=function(e){this.updateGame(),-1==this.gameId&&this.games[this.gameIndex]&&(this.gameId=this.games[this.gameIndex].items[0].game_id,this.sendRoomList())},t.prototype.onGetClubListResp=function(e){this.updateClub(),this.checkClub(),y.NetManager.protocolClub.clubList[this.clubIndex]&&(this.initChat(),this.updateClubOperate()),-1==this.tag&&this.updateTag(0)},t.prototype.onCreateClubResp=function(e){(this.updateClub(),1==y.NetManager.protocolClub.clubList.length)&&(y.NetManager.protocolClub.clubList[this.clubIndex]&&(this.sendRoomList(),this.initChat()))},t.prototype.onGetClubRoomsResp=function(e){if(cc.isValid(this.node)){if(C.LogWrap.log(e.club_room_list.length),this.page>this.pageTotal-1)return C.LogWrap.log("\u8d85\u51fa\u9875\u9762\u91cd\u65b0\u8bf7\u6c42\u6570\u636e"),this.page=this.pageTotal-1,void this.sendRoomList();var t=y.NetManager.protocolClub.clubList[this.clubIndex];if(!t||t.club_id!=e.club_id)return C.LogWrap.log("\u4ff1\u4e50\u90e8\u6570\u636e\u4e0d\u4e00\u6837"),void this.updateTable();this.pageTotal=Math.ceil(e.totals/6)||1,C.LogWrap.log("onGetClubRoomsResp",this.pageTotal),this.updatePage(),this.tables=e.club_room_list||[],this.updateTable(),this.getItem("node_page_index").active=!0,this.scroll_table.skipPage(this.page,.3)}},t.prototype.onClubCancelResp=function(e){1==e.state&&(this.clubIndex=0,this.getItem("node_set").active=!1,this.updateClub(),this.checkClub(),this.sendRoomList())},t.prototype.onClubQuitResp=function(e){1==e.state&&(this.clubIndex=0,this.getItem("node_set").active=!1,this.updateClub(),this.checkClub(),this.sendRoomList())},t.prototype.openAnimation=function(){var e=this.getItem("node_top").getComponent(cc.Widget);e.updateAlignment(),e.enabled=!1,this.getItem("node_top").runAction(cc.sequence(cc.moveTo(.4,0,this.getItem("node_top").y-this.getItem("node_top").height).easing(cc.easeOut(.4)),cc.callFunc(function(){e.top=0,e.enabled=!0})))},t.prototype.start=function(){this.openAnimation(),y.NetManager.protocolClub.sendGetClubList(),y.NetManager.protocolClub.sendClubGameListReq(0)},t.prototype.initChat=function(){return a(this,void 0,void 0,function(){var e,t,n;return r(this,function(o){switch(o.label){case 0:return(e=y.NetManager.protocolClub.clubList[this.clubIndex])?(this.clearChat(),[4,u.ResManager.loadResAsync("prefabs/club/ClubChat",cc.Prefab)]):[3,2];case 1:(t=o.sent())&&cc.isValid(this.node)&&(n=cc.instantiate(t),this.chat=n.getComponent(v.default),this.chat.initChat(e),this.node.addChild(n)),o.label=2;case 2:return[2]}})})},t.prototype.clearChat=function(){this.chat&&cc.isValid(this.chat.node)&&(this.chat.node.destroy(),this.chat=null)},t.prototype.checkClub=function(){0==y.NetManager.protocolClub.clubList.length&&(this.clearChat(),this.scroll_table.numItems=0,this.getItem("img_room_tips").active=!1,this.getItem("img_league_tips").active=!1,1!=y.NetManager.protocolClub.inviteType&&l.UIManager.showTipsPopup("\u60a8\u76ee\u524d\u6ca1\u6709\u52a0\u5165\u4efb\u4f55\u4ff1\u4e50\u90e8\uff0c\u662f\u5426\u6253\u5f00\u4ff1\u4e50\u90e8\u5217\u8868\u9009\u62e9\u4ff1\u4e50\u90e8\u52a0\u5165\uff1f\uff08\u5173\u95ed\u540e\u60a8\u53ef\u901a\u8fc7\u6211\u7684\u8054\u76df\u70b9\u51fb\u641c\u7d22\u6309\u94ae-\u67e5\u770b\u8054\u76df\u5217\u8868\u518d\u6b21\u67e5\u770b\uff09",function(e){e&&l.UIManager.popup("prefabs/club/ClubListPopup")}))},t.prototype.updateGame=function(){this.games=y.NetManager.protocolClub.getGameList(),this.scroll_game.datas=this.games},t.prototype.onGameChildRender=function(e,t,n){var o=this;-1==this.gameId&&(this.gameId=n.game_id,this.sendRoomList()),e.name=n.game_id.toString(),e.active=!0;var i=e.getChildByName("img_game_name"),s=d.DataManager.getGameName(n.game_id),c=g.UpdateUrl+"club/jlb_font_"+s+".png";if(cc.sys.isNative){var l="jlb_font_"+s+".png";h.FileManager.downloadFile(c,l,function(e){return a(o,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return e?[4,u.ResManager.loadAsync(l)]:[3,2];case 1:t=n.sent(),cc.isValid(i)&&(i.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t)),n.label=2;case 2:return[2]}})})})}else cc.loader.load(c,function(e,t){e||cc.isValid(i)&&(i.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t))})},t.prototype.onGameListRender=function(e,t){return a(this,void 0,void 0,function(){var n,o,i,a,s,l=this;return r(this,function(r){switch(r.label){case 0:return n=this.games[t],o=e.getChildByName("btn_tab"),i=o.getChildByName("img_name").getComponent(cc.Sprite),a=o.getChildByName("img_select"),e.getChildByName("tc_game"),o.getComponent(c.default).registerClick(function(){l.gameIndex!=t&&(l.gameId=-1),l.gameIndex=t,l.scroll_game.setOpen(l.gameIndex)}),this.scroll_game.getOpenIndex()==t?a.active=!0:a.active=!1,s=i,[4,u.ResManager.loadResAsync("view/club/jlb_tab_font_"+(n.tag-1),cc.SpriteFrame)];case 1:return s.spriteFrame=r.sent(),[2]}})})},t.prototype.onClickGameTag=function(e){this.gameId=parseInt(e.node.name),cc.log("onClickGameTag",this.gameId),this.page=0,this.sendRoomList()},t.prototype.clearPage=function(){C.LogWrap.log("clearPage"),this.page=0,this.pageTotal=1,this.updatePage()},t.prototype.updatePage=function(){C.LogWrap.log("updatePage",this.pageTotal),this.getItem("label_page_num").string=(this.page+1).toString(),this.getItem("label_page_total").string="/"+this.pageTotal,this.getItem("btn_page_left").interactable=0!=this.page,this.getItem("btn_page_right").interactable=this.page!=this.pageTotal-1},t.prototype.updateTable=function(){return a(this,void 0,void 0,function(){var e;return r(this,function(t){return(e=y.NetManager.protocolClub.clubList[this.clubIndex])&&0!=this.tables.length?(this.scroll_table.numItems=this.pageTotal,this.tab?(this.getItem("img_room_tips").active=0==this.tables.length,this.getItem("img_league_tips").active=!1):(this.getItem("img_room_tips").active=!1,this.getItem("img_league_tips").active=0==this.tables.length,this.getItem("label_league_tips").string=1==e.add_league?"\u6682\u65e0\u623f\u95f4\uff0c\u8d76\u5feb\u53bb\u521b\u5efa\u623f\u95f4\u548c\u597d\u53cb\u4e00\u8d77\u73a9\u5427":"\u6682\u65e0\u8054\u76df\uff0c\u5feb\u53bb\u8054\u7cfb\u521b\u5efa\u4eba\u52a0\u5165\u8054\u76df\u5427"),[2]):(this.scroll_table.numItems=0,this.getItem("img_room_tips").active="club"==this.tab,this.getItem("img_league_tips").active="club"!=this.tab,e&&1==e.add_league?this.getItem("label_league_tips").string="\u6682\u65e0\u623f\u95f4\uff0c\u8d76\u5feb\u53bb\u521b\u5efa\u623f\u95f4\u548c\u597d\u53cb\u4e00\u8d77\u73a9\u5427":this.getItem("label_league_tips").string="\u6682\u65e0\u8054\u76df\uff0c\u5feb\u53bb\u8054\u7cfb\u521b\u5efa\u4eba\u52a0\u5165\u8054\u76df\u5427",[2])})})},t.prototype.onClubTablePageChange=function(e){this.page=e,this.updatePage(),this.sendRoomList()},t.prototype.onClubTableListRender=function(e,t){for(var n=0;n<6;n++){var o=n,i=this.tables[o];if(i){e.children[n].active=!0;var a=y.NetManager.protocolClub.clubList[this.clubIndex];e.children[n].getComponent(f.default).init(i,a)}else e.children[n].active=!1}},t.prototype.updateClub=function(){var e=y.NetManager.protocolClub.clubList;this.sroll_club.numItems=e.length,this.getItem("label_club_tips").node.active=0==e.length,this.getItem("img_club_id").active=0!=e.length,this.getItem("img_club_tips").active=0==e.length,0==e.length&&(this.getItem("label_club_name").string="",this.getItem("label_club_id").string=""),0==e.length?(this.getItem("btn_profit").node.active=!1,this.getItem("btn_audit").node.active=!1,this.getItem("btn_league").node.active=!1,this.getItem("btn_set").node.active=!1,this.getItem("btn_invite").node.active=!1,this.getItem("btn_tab_club").node.active=!1,this.getItem("btn_tab_league").node.active=!1,this.getItem("btn_player").node.active=!1,this.getItem("btn_create").node.active=!1,this.getItem("btn_join").node.active=!1,this.getItem("node_page_index").active=!1):(this.getItem("btn_invite").node.active=!0,this.getItem("btn_set").node.active=!0,this.getItem("btn_tab_club").node.active=!0,this.getItem("btn_tab_league").node.active=!0,this.getItem("btn_create").node.active=!0,this.getItem("btn_join").node.active=!0)},t.prototype.updateClubOperate=function(){var e=y.NetManager.protocolClub.clubList[this.clubIndex];3==e.identity_type?(this.getItem("btn_profit").node.active=!1,this.getItem("btn_audit").node.active=!1,this.getItem("btn_league").node.active=!1,this.getItem("btn_club_set").node.active=!1,this.getItem("btn_club_edit_name").node.active=!1,this.getItem("btn_invite").node.active=!1,this.getItem("btn_club_dismiss").node.active=!1,this.getItem("btn_player").node.active=!1,e.quit_time>0?(this.getItem("btn_club_cancel_exit").node.active=!0,this.getItem("btn_club_exit").node.active=!1):(this.getItem("btn_club_exit").node.active=!0,this.getItem("btn_club_cancel_exit").node.active=!1)):(this.getItem("btn_audit").node.active=!0,this.getItem("btn_club_set").node.active=!0,this.getItem("btn_club_edit_name").node.active=!0,this.getItem("btn_invite").node.active=!0,this.getItem("node_audit_tip").active=1==e.exist_checked_show_red,this.getItem("btn_player").node.active=!0,1==e.identity_type?(this.getItem("btn_profit").node.active=!0,this.getItem("btn_league").node.active=!0,this.getItem("btn_club_cancel_exit").node.active=!1,this.getItem("btn_club_exit").node.active=!1,this.getItem("btn_club_dismiss").node.active=!0):(this.getItem("btn_profit").node.active=!1,this.getItem("btn_league").node.active=!1,this.getItem("btn_club_dismiss").node.active=!1,e.quit_time>0?(this.getItem("btn_club_cancel_exit").node.active=!0,this.getItem("btn_club_exit").node.active=!1):(this.getItem("btn_club_exit").node.active=!0,this.getItem("btn_club_cancel_exit").node.active=!1))),this.getItem("label_club_name").string=e.club_name,this.getItem("label_club_id").string=e.club_id,this.getItem("img_club_id").active=!0,this.getItem("node_profit_tip").active=1==e.red_bot},t.prototype.onClubListRender=function(e,t){var n=this,o=y.NetManager.protocolClub.clubList[t],i=e.getChildByName("img_bg_nor"),a=e.getChildByName("img_bg_sel"),r=e.getChildByName("label_name").getComponent(cc.Label),s=e.getChildByName("label_id").getComponent(cc.Label),l=e.getChildByName("label_player_num").getComponent(cc.Label),p=e.getChildByName("label_room_num").getComponent(cc.Label),u=e.getChildByName("node_quit"),h=u.getChildByName("label_time").getComponent(cc.Label);r.string=o.club_name,s.string=o.club_id,l.string=o.club_members,p.string=o.open_rooms,i.active=this.clubIndex!=t,a.active=this.clubIndex==t;var d=function(){var e=1e3*o.quit_time-cc.sys.now();return e<0&&(e=0),Math.floor(e%864e5/36e5)+"\u65f6"+Math.floor(e%864e5%36e5/6e4)+"\u5206"+Math.floor(e%864e5%36e5%6e4/600)+"\u79d2"};u.active=0!=o.quit_time,u.stopAllActions(),u.active&&(h.string=d(),u.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1),cc.callFunc(function(){h.string=d()}))))),this.clubIndex==t&&(this.getItem("label_club_name").string=o.club_name,this.getItem("label_club_id").string=o.club_id,C.LogWrap.log("onClubListRender"),this.updateClubOperate()),e.getComponent(c.default).registerClick(function(){n.clubIndex=t,n.updateClubOperate(),n.getItem("node_set").active=!1,n.updateClub(),n.clearPage(),n.sendRoomList(),n.initChat()})},t.prototype.onClickBack=function(){d.DataManager.clubId=null,l.UIManager.open("prefabs/HallView")},t.prototype.onClickSet=function(){this.getItem("node_set").active=!this.getItem("node_set").active},t.prototype.onClickProfit=function(){var e=y.NetManager.protocolClub.clubList[this.clubIndex];e&&l.UIManager.popup("prefabs/club/ClubProfitPopup",e)},t.prototype.onClickInvite=function(){var e=y.NetManager.protocolClub.clubList[this.clubIndex];e&&l.UIManager.popup("prefabs/club/ClubInvitePopup",e)},t.prototype.onClickMessage=function(){var e=y.NetManager.protocolClub.clubList[this.clubIndex];l.UIManager.popup("prefabs/club/ClubMessagePopup",e)},t.prototype.onClickAudit=function(){var e=y.NetManager.protocolClub.clubList[this.clubIndex];e&&l.UIManager.popup("prefabs/club/ClubPlayerAuditPopup",e)},t.prototype.onClickLeague=function(){var e=y.NetManager.protocolClub.clubList[this.clubIndex];e&&(1==e.add_league?l.UIManager.popup("prefabs/club/ClubExitLeaguePopup",e):l.UIManager.popup("prefabs/club/ClubJoinLeaguePopup",e))},t.prototype.onClickPlayer=function(){var e=y.NetManager.protocolClub.clubList[this.clubIndex];e&&l.UIManager.popup("prefabs/club/ClubPlayerListPopup",e)},t.prototype.onClickCreatClub=function(){l.UIManager.popup("prefabs/club/ClubCreatePopup")},t.prototype.onClickSearchCulb=function(){l.UIManager.popup("prefabs/club/ClubJoinPopup")},t.prototype.onClickJoin=function(){var e=y.NetManager.protocolClub.clubList[this.clubIndex];e&&l.UIManager.popup("prefabs/club/ClubJoinRoomPopup",e)},t.prototype.onClickCreate=function(){var e=y.NetManager.protocolClub.clubList[this.clubIndex];e&&l.UIManager.popup("prefabs/club/ClubCreateRoomPopup",e)},t.prototype.onClickClubSet=function(){var e=y.NetManager.protocolClub.clubList[this.clubIndex];e&&l.UIManager.popup("prefabs/club/ClubSetPopup",e)},t.prototype.onClickClubEidtName=function(){var e=y.NetManager.protocolClub.clubList[this.clubIndex];e&&l.UIManager.popup("prefabs/club/ClubEditNamePopup",e)},t.prototype.onClickClubDismiss=function(){var e=y.NetManager.protocolClub.clubList[this.clubIndex];l.UIManager.showTipsPopup("\u60a8\u786e\u5b9a\u8981\u89e3\u6563\u3010"+e.club_name+"\u3011\u5417?",function(t){t&&y.NetManager.protocolClub.sendClubCancelReq(e.club_id)},3)},t.prototype.onClickClubExit=function(){var e=y.NetManager.protocolClub.clubList[this.clubIndex];l.UIManager.showTipsPopup("\u60a8\u786e\u5b9a\u9000\u51fa\u4ff1\u4e50\u90e8\u3010"+e.club_name+"\u3011\u5417?",function(t){t&&y.NetManager.protocolClub.sendClubQuitReq(e.club_id)},3)},t.prototype.onClickClubCancelExit=function(){var e=y.NetManager.protocolClub.clubList[this.clubIndex];l.UIManager.showTipsPopup("\u53d6\u6d88\u9000\u51fa\u4ff1\u4e50\u90e8\u3010"+e.club_name+"\u3011\u5417",function(t){t&&y.NetManager.protocolClub.sendClubQuitReq(e.club_id,1)},3)},t.prototype.onClickTabClub=function(){this.updateTab("club")},t.prototype.onClickTabLeague=function(){this.updateTab("league")},t.prototype.onClickPageLeft=function(){this.page--,this.page<0&&(this.page=0),this.updatePage(),this.scroll_table.skipPage(this.page,.3)},t.prototype.onClickPageRight=function(){this.page++,this.page>this.pageTotal-1&&(this.page=this.pageTotal-1),this.updatePage(),this.scroll_table.skipPage(this.page,.3)},t.prototype.updateTab=function(e,t){void 0===t&&(t=!0),this.tab=e;var n=this.getItem("btn_tab_club").node,o=this.getItem("btn_tab_league").node,i=n.getComponent(sp.Skeleton),a=o.getComponent(sp.Skeleton);"club"==e?(i.setSkin("jlb-1"),i.setToSetupPose(),i.setAnimation(0,"animation",!0),a.setSkin("lm-2"),a.setToSetupPose(),a.setAnimation(0,"animation2",!0)):(i.setSkin("jlb-2"),i.setToSetupPose(),i.setAnimation(0,"animation2",!0),a.setSkin("lm-1"),a.setToSetupPose(),a.setAnimation(0,"animation",!0)),t&&(this.clearPage(),this.sendRoomList())},t.prototype.sendRoomList=function(){cc.log("sendRoomList==============");var e=y.NetManager.protocolClub.clubList[this.clubIndex];if(e&&-1!=this.gameId){if("club"!=this.tab&&0==e.add_league)return this.tables=[],void this.updateTable();y.NetManager.protocolClub.sendGetClubRooms(e.club_id,this.gameId,"club"==this.tab?1:2,this.page+1)}},i([I(p.default)],t.prototype,"sroll_club",void 0),i([I(b.default)],t.prototype,"scroll_game",void 0),i([I(p.default)],t.prototype,"scroll_table",void 0),i([I(cc.Node)],t.prototype,"toggle_game",void 0),t=i([w],t)}(s.default);n.default=R,cc._RF.pop()},{"../../Define":"Define","../../common/log/LogWrap":"LogWrap","../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/FileManager":"FileManager","../../manager/NetManager":"NetManager","../../manager/ResManager":"ResManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/BaseView":"BaseView","../common/ClubChat":"ClubChat","../common/DynamicList":"DynamicList","../common/List":"List","../common/componet/ButtonEx":"ButtonEx","./ClubTable":"ClubTable"}],CodeLoginPopup:[function(e,t,n){"use strict";cc._RF.push(t,"dc2e2SaE8NFho4IuDWsIEld","CodeLoginPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/UIManager"),s=e("../../common/Text"),c=e("../../manager/NetManager"),l=e("../../net/NetCmd"),p=e("../../manager/DataManager"),u=cc._decorator,h=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.canGetCode=!0,t.timeNumber=60,t.model=null,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_login").registerClick(this.onClickLogin.bind(this)),this.getItem("btn_password_login").registerClick(this.onClickPasswordLogin.bind(this)),this.getItem("btn_auth").registerClick(this.onClickAuth.bind(this)),this.getItem("btn_forgot_password").registerClick(this.onClickForgotPassword.bind(this))},t.prototype.initEvent=function(){},t.prototype.onClickClose=function(){this.node.destroy()},t.prototype.onClickAuth=function(){var e=this,t=this.getItem("input_phone").string;this.canGetCode&&(t&&11==t.length?/^1[3456789]\d{9}$/.test(t)?(this.canGetCode=!1,c.NetManager.requestPostUrl(l.HttpCmd.GetVerificationCode,{phonenumber:t,type:1,channel:p.DataManager.channel,user_id:p.DataManager.userInfo&&p.DataManager.userInfo.userid||0},function(t,n){"success"==t?1==n.ok?(r.UIManager.showTips(s.Tips.SendCodeSuccess),e.updateTimer()):(e.canGetCode=!0,r.UIManager.showTips(n.err_msg||s.Tips.SendCodeFail)):(e.canGetCode=!0,r.UIManager.showTips(s.Tips.SendCodeFail+n))})):r.UIManager.showTips(s.Tips.PhoneNumberError):r.UIManager.showTips(s.Tips.InputPhone))},t.prototype.updateTimer=function(){var e=this;this.node.stopAllActions(),this.timeNumber=60,this.getItem("label_auth").string=this.timeNumber+"s",cc.tween(this.node).repeatForever(cc.sequence(cc.delayTime(1),cc.callFunc(function(){e.timeNumber--,e.timeNumber>0?e.getItem("label_auth").string=e.timeNumber+"s":(e.canGetCode=!0,e.getItem("label_auth").string="\u83b7 \u53d6")}))).start()},t.prototype.onClickLogin=function(){var e=this.getItem("input_phone").string,t=this.getItem("input_auth").string;e&&11==e.length?/^1[3456789]\d{9}$/.test(e)?t&&6==t.length?c.NetManager.protocolAccount.sendLogin({account:e,password:"",login_type:3,ver_code:t,model:cc.sys.os,channel:p.DataManager.channel}):r.UIManager.showTips(s.Tips.InputCode):r.UIManager.showTips(s.Tips.PhoneNumberError):r.UIManager.showTips(s.Tips.InputPhone)},t.prototype.onClickForgotPassword=function(){this.onClickClose(),r.UIManager.popup("prefabs/login/ForgotPasswordPopup")},t.prototype.onClickPasswordLogin=function(){this.onClickClose(),r.UIManager.popup("prefabs/login/PasswordLoginPopup")},t=i([h],t)}(a.default));n.default=d,cc._RF.pop()},{"../../common/Text":"Text","../../manager/DataManager":"DataManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],CodeLogin:[function(e,t,n){"use strict";cc._RF.push(t,"9235ewogzxIyJhmW6sSkGzQ","CodeLogin");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/UIManager"),s=e("../../common/Text"),c=e("../../manager/NetManager"),l=e("../../net/NetCmd"),p=e("../../manager/DataManager"),u=cc._decorator,h=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isAnimation=!1,t.canGetCode=!0,t.timeNumber=60,t.model=null,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_login").registerClick(this.onClickLogin.bind(this)),this.getItem("btn_auth").registerClick(this.onClickAuth.bind(this))},t.prototype.initEvent=function(){},t.prototype.onClickClose=function(){this.node.destroy()},t.prototype.onClickAuth=function(){var e=this,t=this.getItem("input_phone").string;this.canGetCode&&(t&&11==t.length?/^1[3456789]\d{9}$/.test(t)?(this.canGetCode=!1,c.NetManager.requestPostUrl(l.HttpCmd.GetVerificationCode,{phonenumber:t,type:1,channel:p.DataManager.channel,user_id:p.DataManager.userInfo&&p.DataManager.userInfo.userid||0},function(t,n){"success"==t?1==n.ok?(r.UIManager.showTips(s.Tips.SendCodeSuccess),e.updateTimer()):(e.canGetCode=!0,r.UIManager.showTips(n.err_msg||s.Tips.SendCodeFail)):(e.canGetCode=!0,r.UIManager.showTips(s.Tips.SendCodeFail+n))})):r.UIManager.showTips(s.Tips.PhoneNumberError):r.UIManager.showTips(s.Tips.InputPhone))},t.prototype.updateTimer=function(){var e=this;this.node.stopAllActions(),this.timeNumber=60,this.getItem("label_auth").string=this.timeNumber+"s",cc.tween(this.node).repeatForever(cc.sequence(cc.delayTime(1),cc.callFunc(function(){e.timeNumber--,e.timeNumber>0?e.getItem("label_auth").string=e.timeNumber+"s":(e.canGetCode=!0,e.getItem("label_auth").string="\u83b7 \u53d6")}))).start()},t.prototype.onClickLogin=function(){var e=this.getItem("input_phone").string,t=this.getItem("input_auth").string;e&&11==e.length?/^1[3456789]\d{9}$/.test(e)?t&&6==t.length?c.NetManager.protocolAccount.sendLogin({account:e,password:"",login_type:3,ver_code:t,model:cc.sys.os,channel:p.DataManager.channel}):r.UIManager.showTips(s.Tips.InputCode):r.UIManager.showTips(s.Tips.PhoneNumberError):r.UIManager.showTips(s.Tips.InputPhone)},t.prototype.onClickPasswordLogin=function(){this.onClickClose(),r.UIManager.popup("prefabs/login/PasswordLoginPopup")},t=i([h],t)}(a.default));n.default=d,cc._RF.pop()},{"../../common/Text":"Text","../../manager/DataManager":"DataManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],CountDown:[function(e,t,n){"use strict";cc._RF.push(t,"cf305DXrQNCqIhKJzWKDbs/","CountDown");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,s=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_time_num=null,t.timeSchedule=null,t}return o(t,e),t.prototype.setTimeSchedule=function(e,t,n){var o=this;if(e){var i=t;this.label_time_num.string=this.timeStrFormat(i),null!=this.timeSchedule&&this.unschedule(this.timeSchedule),this.timeSchedule=function(){if(i--,o.label_time_num.string=o.timeStrFormat(i),i<=0)return n&&n(),o.unschedule(o.timeSchedule),void(o.timeSchedule=null)},this.schedule(this.timeSchedule,1,cc.macro.REPEAT_FOREVER)}else this.timeSchedule&&(this.unschedule(this.timeSchedule),this.timeSchedule=null)},t.prototype.timeStrFormat=function(e){var t=Math.floor(e/3600),n=t<10?"0"+t:t,o=Math.floor(e/60%60),i=o<10?"0"+o:o,a=Math.floor(e%60);return n+":"+i+":"+(a<10?"0"+a:a)},i([s(cc.Label)],t.prototype,"label_time_num",void 0),t=i([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],CreateRoom:[function(e,t,n){"use strict";cc._RF.push(t,"08fde+RVA5HrJil7ekke8cu","CreateRoom");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/BaseView"),r=e("../common/componet/ButtonEx"),s=e("../../manager/NetManager"),c=e("../../manager/EventManager"),l=e("../../net/NetCmd"),p=e("../common/List"),u=e("../../manager/DataManager"),h=e("../../manager/UpdateManager"),d=e("../../Define"),g=e("../../manager/UIManager"),f=e("../../common/Text"),m=e("../../common/Device"),_=e("../../common/utils/Utils"),y=e("../../common/log/LogWrap"),v=cc._decorator,b=v.ccclass,C=v.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameIndex=0,t.scroll_game=null,t.scroll_room=null,t.tabIndx=d.GameTab.All,t.gameList=[],t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_join").registerClick(this.onClickJoin.bind(this)),this.getItem("btn_help").registerClick(this.onClickHelp.bind(this)),this.getItem("btn_set").registerClick(this.onClickSet.bind(this)),this.getItem("btn_fankui").registerClick(this.onClickFanKui.bind(this)),this.getItem("btn_bind").registerClick(this.onClickBind.bind(this)),this.getItem("btn_add").registerClick(this.onClickAdd.bind(this)),this.getItem("btn_quanbu").registerClick(this.onClickAll.bind(this)).disabledScale(),this.getItem("btn_remen").registerClick(this.onClickHot.bind(this)).disabledScale(),this.getItem("btn_dianzi").registerClick(this.onClickDigital.bind(this)).disabledScale(),this.getItem("btn_bairen").registerClick(this.onClickBaiRen.bind(this)).disabledScale()},t.prototype.initEvent=function(){c.EventManager.on(this,l.ProtocolHallCmd.GetFriendGameInfoResp,this.onGetFriendGameInfoResp.bind(this)),c.EventManager.on(this,l.ProtocolHallCmd.BindWindowResp,this.onBindWindowResp.bind(this)),c.EventManager.on(this,l.ProtocolBankCmd.RechargePlatformResp,this.onRechargePlatformResp.bind(this)),c.EventManager.on(this,d.EventDef.HotUpdateProgress,this.onHotUpdateProgress.bind(this)),c.EventManager.on(this,d.EventDef.HotUpdateFail,this.onHotUpdateFail.bind(this)),c.EventManager.on(this,d.EventDef.HotUpdateFinish,this.onHotUpdateFinish.bind(this))},t.prototype.onGetFriendGameInfoResp=function(e){this.data&&JSON.stringify(this.data)==JSON.stringify(s.NetManager.protocolHall.game_deploy_info)||this.updateGames()},t.prototype.onClickClose=function(){g.UIManager.open("prefabs/HallView")},t.prototype.onClickJoin=function(){g.UIManager.popup("prefabs/hall/JoinRoom")},t.prototype.onClickHelp=function(){g.UIManager.popup("prefabs/hall/BattleFriendsHelp")},t.prototype.onClickSet=function(){g.UIManager.popup("prefabs/hall/HallSetting")},t.prototype.onClickFanKui=function(){s.NetManager.requestPostUrl(l.HttpCmd.GetVersion,{channel:u.DataManager.channel},function(e,t){if(1==t.ok){var n=t.info;if(""==n.serviceLink)return void g.UIManager.showTips(f.Tips.NotKeFu);m.default.openUrl(n.serviceLink)}else g.UIManager.showTips(f.Tips.NotKeFu)})},t.prototype.onClickBind=function(){s.NetManager.protocolHall.sendBindWindow()},t.prototype.onClickAdd=function(){s.NetManager.protocolBank.sendRechargePlatformReq()},t.prototype.start=function(){g.UIManager.hideMarquee(),this.getItem("sp_title").addAnimation(0,"loop",!0),s.NetManager.protocolHall.sendGetFriendGameInfo(),this.updateUserInfo(),s.NetManager.protocolHall.game_deploy_info&&this.updateGames()},t.prototype.updateUserInfo=function(){var e=u.DataManager.userInfo;this.getItem("label_money").string=_.default.getFormatGold(e.gold),u.DataManager.userSafeInfo||y.LogWrap.log("\u65e0\u7528\u6237\u5b89\u5168\u4fe1\u606f")},t.prototype.onRechargePlatformResp=function(e){e.platform_Info.length>0?g.UIManager.popup("prefabs/hall/RechargeView",e):g.UIManager.showTips("\u6682\u65e0\u5145\u503c\u5e73\u53f0, \u8bf7\u8054\u7cfb\u5ba2\u670d")},t.prototype.onBindWindowResp=function(e){g.UIManager.popup("prefabs/account/BindInviteCode",e)},t.prototype.onClickAll=function(){this.updateTab("quanbu",d.GameTab.All)},t.prototype.onClickHot=function(){this.updateTab("remen",d.GameTab.Hot)},t.prototype.onClickDigital=function(){this.updateTab("dianzi",d.GameTab.DianZi)},t.prototype.onClickBaiRen=function(){this.updateTab("bairen",d.GameTab.BaiRen)},t.prototype.updateTab=function(e,t){this.tabIndx!=t&&(this.tabIndx=t,this.getItem("node_tab").children.forEach(function(t){var n=t.getComponent(sp.Skeleton),o=t.name.replace("btn_","");o==e?(n.setSkin(o),n.setToSetupPose(),n.setAnimation(0,"animation",!0)):(n.setSkin(o+"1"),n.setToSetupPose(),n.setAnimation(0,"animation2",!0))}),this.updateGames())},t.prototype.updateGames=function(){var e=this;this.data=s.NetManager.protocolHall.game_deploy_info,this.gameList=[],this.data.forEach(function(t){var n=t.game_info.game_tab&e.tabIndx;u.DataManager.getGameName(t.game_info.game_type)&&n&&e.gameList.push(t)}),this.gameIndex=0,this.scroll_game.numItems=this.gameList.length,this.scroll_room.numItems=this.gameList[this.gameIndex]&&this.gameList[this.gameIndex].game_room_lists.length||0},t.prototype.onHotUpdateProgress=function(e,t,n){if(u.DataManager.getGameName(this.gameList[this.gameIndex].game_info.game_type)==n){var o=this.scroll_game.getItemByListId(this.gameIndex);if(o)o.getChildByName("bar_download").getComponent(cc.ProgressBar).progress=t}},t.prototype.onHotUpdateFail=function(e){u.DataManager.getGameName(this.gameList[this.gameIndex].game_info.game_type)==e&&(this.scroll_game.updateItem(this.gameIndex),g.UIManager.showTips(f.Tips.DownloadFail))},t.prototype.onHotUpdateFinish=function(e){u.DataManager.getGameName(this.gameList[this.gameIndex].game_info.game_type)==e&&this.scroll_game.updateItem(this.gameIndex)},t.prototype.onListGameRender=function(e,t){var n=this,o=e.getChildByName("img_select"),i=e.getChildByName("bar_download").getComponent(cc.ProgressBar),a=e.getChildByName("icon_download"),s=e.getChildByName("label_name").getComponent(cc.Label),c=e.getChildByName("label_name").getComponent(cc.LabelOutline);s.string=this.gameList[t].game_info.game_name;var l=u.DataManager.getGameName(this.gameList[t].game_info.game_type),p=!h.UpdateManager.isInstall(l)||h.UpdateManager.isNeedUpdate(l);p?a.active=!0:(i.progress=0,a.active=!1),this.gameIndex==t?(o.active=!0,s.node.color=cc.color(102,73,49),c.enabled=!0):(o.active=!1,s.node.color=cc.color(110,33,25),c.enabled=!1),e.getComponent(r.default).registerClick(function(){if(!h.UpdateManager.isDowlaoding(l)&&(p&&h.UpdateManager.update(l),n.gameIndex!=t)){o.active=!0,s.node.color=cc.color(102,73,49),c.enabled=!0;var e=n.gameIndex;n.gameIndex=t,n.scroll_game.updateItem(e),n.scroll_room.numItems=n.gameList[n.gameIndex].game_room_lists.length}})},t.prototype.onListRoomRender=function(e,t){var n=this,o=this.gameList[this.gameIndex].game_room_lists[t],i=e.getChildByName("label_title").getComponent(cc.Label),a=e.getChildByName("label_max_num").getComponent(cc.Label),c=e.getChildByName("label_dizhu").getComponent(cc.Label),l=e.getChildByName("label_dizhu_num").getComponent(cc.Label),p=e.getChildByName("label_enter_num").getComponent(cc.Label),d=e.getChildByName("btn_create").getComponent(r.default);p.string=o.room_min_entrance,i.string=o.room_info,a.string=0==o.max_player?"\u65e0\u9650\u5236":o.min_player+" - "+o.max_player,o.bet_limit.length>0?(c.string="\u9650\u7ea2",l.string=o.bet_limit[0]+"-"+o.bet_limit[1]):(c.string="\u5e95\u6ce8",l.string=o.room_base_note),d.registerClick(function(){var e=n.gameList[n.gameIndex].game_info.game_type,t=u.DataManager.getGameName(e);if(h.UpdateManager.isDowlaoding(t))g.UIManager.showTips("\u6b63\u5728\u66f4\u65b0\u4e2d...");else if(h.UpdateManager.isInstall(t))if(h.UpdateManager.isNeedUpdate(t))g.UIManager.showTipsPopup("\u6e38\u620f\u672a\u66f4\u65b0\uff0c\u662f\u5426\u66f4\u65b0\uff1f",function(e){e&&h.UpdateManager.update(t)});else{var i={game_type:e,room_level:o.room_level};s.NetManager.protocolHall.sendFriendGameCreate(i)}else g.UIManager.showTipsPopup("\u6e38\u620f\u672a\u4e0b\u8f7d\uff0c\u662f\u5426\u4e0b\u8f7d\uff1f",function(e){e&&h.UpdateManager.update(t)})})},i([C(p.default)],t.prototype,"scroll_game",void 0),i([C(p.default)],t.prototype,"scroll_room",void 0),t=i([b],t)}(a.default);n.default=M,cc._RF.pop()},{"../../Define":"Define","../../common/Device":"Device","../../common/Text":"Text","../../common/log/LogWrap":"LogWrap","../../common/utils/Utils":"Utils","../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../manager/UpdateManager":"UpdateManager","../../net/NetCmd":"NetCmd","../base/BaseView":"BaseView","../common/List":"List","../common/componet/ButtonEx":"ButtonEx"}],DataManager:[function(e,t,n){"use strict";cc._RF.push(t,"3d6a0igmkxM74E66O2OUOdR","DataManager");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../common/utils/LocalStorage"),s=e("./ResManager"),c=e("./AudioManager"),l=e("../Define"),p=e("../common/Device"),u=cc._decorator,h=u.ccclass,d=(u.property,function(){function e(){this.storage=new r.default,this.loginInfo=null,this.userInfo=null,this.userSafeInfo=null,this.vipInfos=null,this.account=null,this.games=null,this.gameToken=null,this.gameToken2=null,this.version="1.0.0",this.gameType=null,this.gameLevel=1,this.isFriendGame=!1,this.friendRoomId=null,this.isCreaterUser=!1,this.roomId=null,this.roomType=l.RoomType.None,this.clubId=null,this.gameVersions=null,this.marquee=[],this.isTouristLogin=!0,this.loginType=0,this.bindPhoneCheck={},this.bindPhoneGiveCoin=0,this.isFirst=!0,this.isFirstLogin=!0,this.gameConfig={},this.channel=l.Channel,this.httpUrl=l.HttpUrls[0],this.httpUrlIndex=0,this.ip="",this.isVibrate=!0,this.parentId=0,this.inviteClubId=0,this.inviteClubCreateId=0,this.bgm=0,this.bgms={"\u66f2\u76ee1":{path:"main_bg.mp3",name:"\u66f2\u76ee1",index:0}},this.loginInfo=this.storage.get("loginInfo"),this.account=this.storage.get("account"),this.gameVersions=this.storage.get("gameVersions");var e=this.storage.get("soundConfig");e&&(c.AudioManager.playMusic=e.playMusic,c.AudioManager.playSound=e.playSound,c.AudioManager.setBGMVolume(e.bgmVolume),c.AudioManager.setSFXVolume(e.sfxVolume));var t=this.storage.get("bgm");t&&(this.bgm=parseInt(t)||0);var n=this.storage.get("bgms");n&&(this.bgms=n);var o=this.storage.get("vibrate");null!=o&&(this.isVibrate=1==o);var i=this.storage.get("firstLogin");null!=i&&(this.isFirstLogin=1==i),this.channel=p.default.getChannel();var a=this.storage.get("parentId"),s=this.storage.get("clubId"),u=this.storage.get("clubCreateId"),h=p.default.getClipBoard();if(h&&-1!=h.indexOf("&")){var d=h.indexOf("&"),g=h.substring(0,d),f=h.substring(d+1,h.length);(m=/^[\d]+$/).test(f)&&s!=f&&(s=f,this.storage.set("clubId",s)),m.test(g)&&u!=g&&(u=g,this.storage.set("clubCreateId",u)),p.default.setClipBoard("")}else{var m;(m=/^[\d]+$/).test(h)&&a!=h&&(a=h,this.storage.set("parentId",a))}this.parentId=a&&parseInt(a)||0,this.inviteClubId=s&&parseInt(s)||0,this.inviteClubCreateId=u&&parseInt(u)||0}var t;return t=e,e.prototype.loadVersion=function(){return i(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return[4,s.ResManager.loadResAsync("version",cc.TextAsset)];case 1:return e=t.sent(),this.version=e.text,[2]}})})},e.prototype.getGameName=function(e){for(var t in this.gameConfig)if(this.gameConfig[t].gameType==e)return t;return l.GameName[e]?l.GameName[e]:null},e.prototype.getGameVersion=function(e){return this.gameVersions?this.gameVersions[e]:null},e.prototype.getGameNumVersion=function(e){return this.gameVersions&&this.gameVersions[e]?parseInt(this.gameVersions[e].replace(/\./g,"")):-1},e.prototype.isTipsQuickRecharge=function(){var e=this.storage.getItem(this.account+"QuickRecharge");return!!e&&"true"==e},e.prototype.saveTipsQuickRecharge=function(e){this.storage.setItem(this.account+"QuickRecharge",e)},e.prototype.saveGameVersion=function(e,t){this.gameVersions||(this.gameVersions={}),this.gameVersions[e]=t,this.storage.set("gameVersions",this.gameVersions)},e.prototype.saveLoginInfo=function(){this.storage.set("loginInfo",this.loginInfo)},e.prototype.saveAccount=function(){this.storage.set("account",this.account)},e.prototype.saveBgm=function(){this.storage.set("bgm",this.bgm)},e.prototype.clearLoginInfo=function(){this.storage.remove("loginInfo"),this.loginInfo=null,this.userInfo=null,this.games=null},e.prototype.clearAccount=function(){this.storage.remove("account")},e.prototype.clearInvite=function(){this.storage.remove("clubId"),this.storage.remove("clubCreateId"),this.inviteClubId=0,this.inviteClubCreateId=0},e.prototype.saveSoundConfig=function(){this.storage.set("soundConfig",{playMusic:c.AudioManager.playMusic,playSound:c.AudioManager.playSound,bgmVolume:c.AudioManager.bgmVolume,sfxVolume:c.AudioManager.sfxVolume})},e.prototype.saveIpChannel=function(){this.storage.set("ip",this.httpUrl),this.storage.set("channel",this.channel)},e.prototype.saveVibrate=function(){this.storage.set("vibrate",this.isVibrate?1:0)},e.prototype.saveFirstLogin=function(){this.storage.set("firstLogin",this.isFirstLogin?1:0)},e.prototype.getVipInfoByLevel=function(e){for(var t=0,n=this.vipInfos;t<n.length;t++){var o=n[t];if(o.vip_level==e)return o}return null},e.prototype.isTourist=function(){return n.DataManager.userInfo&&2==n.DataManager.userInfo.login_type},e.prototype.isAccount=function(){return n.DataManager.userInfo&&2!=n.DataManager.userInfo.login_type},e.prototype.isCheckBindPhone=function(e){return!(1!=this.bindPhoneCheck[e]||!this.isAccount())},e.prototype.addBgm=function(e,t){this.bgms[e]=t,this.storage.set("bgms",this.bgms)},e.prototype.getBgms=function(){var e=[];for(var t in this.bgms)e.push({name:t,path:this.bgms[t].path,index:this.bgms[t].index});return e.sort(function(e,t){return e.index-t.index}),e},e.instance=new t,e=t=o([h],e)}());n.DataManager=d.instance,cc._RF.pop()},{"../Define":"Define","../common/Device":"Device","../common/utils/LocalStorage":"LocalStorage","./AudioManager":"AudioManager","./ResManager":"ResManager"}],Define:[function(e,t,n){"use strict";var o,i,a;cc._RF.push(t,"cd0ffaEmOZMlZXkl1e+afIb","Define"),Object.defineProperty(n,"__esModule",{value:!0}),n.XXTeaSerectKey="vdNwFdfvgsd3dsdfv9xgdt34wed3sdyD",function(e){e[e.Hall=0]="Hall",e[e.Game=1]="Game"}(n.SocketType||(n.SocketType={})),n.UpdateUrl="http://qplx.oss-cn-shenzhen.aliyuncs.com/",n.HttpUrls=["http://localhost:9090/","http://139.199.174.44:9090/"],n.Channel="develop",n.FtpUrl="ftp.jiasheshangmao.com:21",n.FtpAccount="admin",n.FtpPassword="ShL3m&at%xg2&SVwjDh8",n.EventDef={SocketOpen:"event_socket_open",SocketError:"event_socket_error",SocektClose:"event_socket_close",SocketInitSuccess:"event_socket_init_success",SizeChanged:"event_size_changed",HotUpdateProgress:"event_hot_update_progress",HotUpdateUnzip:"event_hot_update_unzip",HotUpdateFinish:"event_hot_update_finish",HotUpdateFail:"event_hot_update_fail",UpdateUserInfo:"event_update_user_info",UpdateUserSafeInfo:"event_update_user_safe_info",UpdateUserGold:"event_update_user_gold",UserSelectTimeMsg:"user_select_time_msg",GameShow:"event_game_show",GameHide:"event_game_hide",ClubUpateLeague:"evnt_update_league"},n.UpdateEnabled=cc.sys.isMobile,n.HeartEnabled=cc.sys.isMobile,function(e){e[e.QZNN=1]="QZNN",e[e.DHT=2]="DHT",e[e.ZJH=3]="ZJH",e[e.WZRY=4]="WZRY",e[e.KPNN=5]="KPNN",e[e.EBG=6]="EBG",e[e.SG=7]="SG",e[e.BRNN=8]="BRNN",e[e.QZPJ=9]="QZPJ",e[e.TBNN=10]="TBNN",e[e.JSZJH=11]="JSZJH",e[e.DZPK=12]="DZPK",e[e.DDZ=13]="DDZ",e[e.FRUIT=14]="FRUIT",e[e.BCBM=15]="BCBM",e[e.JSYS=16]="JSYS",e[e.LHD=17]="LHD",e[e.WRZJH=18]="WRZJH",e[e.QHB=19]="QHB",e[e.SSS=20]="SSS",e[e.ESYD=21]="ESYD",e[e.LRS=22]="LRS",e[e.TB=23]="TB",e[e.TZW=24]="TZW",e[e.ERMJ=25]="ERMJ",e[e.XLCH=26]="XLCH",e[e.MFWZ=27]="MFWZ",e[e.BY=28]="BY",e[e.KYSSS=630]="KYSSS",e[e.KY21=600]="KY21",e[e.KYSLWH=920]="KYSLWH",e[e.KYWRZJH=1950]="KYWRZJH",e[e.KYXLCH=650]="KYXLCH",e[e.KYERMJ=740]="KYERMJ",e[e.KYSHARK=1940]="KYSHARK",e[e.KYBENZBMW=1960]="KYBENZBMW",e[e.KYFISH=510]="KYFISH",e[e.KYDDZ=610]="KYDDZ"}(a=n.GameType||(n.GameType={})),n.GameName=((o={})[a.QZNN]="qznn",o[a.DHT]="dht",o[a.ZJH]="zjh",o[a.WZRY]="wzry",o[a.KPNN]="kpnn",o[a.EBG]="ebg",o[a.SG]="sg",o[a.BRNN]="brnn",o[a.QZPJ]="qzpj",o[a.TBNN]="tbnn",o[a.JSZJH]="jszjh",o[a.DZPK]="dzpk",o[a.FRUIT]="fruit",o[a.BCBM]="bcbm",o[a.JSYS]="jsys",o[a.LHD]="lhd",o[a.WRZJH]="wrzjh",o[a.QHB]="qhb",o[a.LRS]="lrs",o[a.TB]="tb",o[a.TZW]="tzw",o[a.SSS]="sss",o[a.ESYD]="esyd",o[a.DDZ]="ddz",o[a.ERMJ]="ermj",o[a.XLCH]="xlch",o[a.MFWZ]="mfwz",o[a.BY]="by",o[a.KYSSS]="kysss",o[a.KY21]="ky21",o[a.KYSLWH]="kyslwh",o[a.KYWRZJH]="kywrzjh",o[a.KYXLCH]="kyxlch",o[a.KYERMJ]="kyermj",o[a.KYSHARK]="kyshark",o[a.KYBENZBMW]="kybenzbmw",o[a.KYFISH]="kyfish",o[a.KYDDZ]="kyddz",o),n.NotSeletRoomGame=((i={})[a.WZRY]=!0,i[a.FRUIT]=!0,i),n.PhonePermission={WriteExternalStotage:"android.permission.WRITE_EXTERNAL_STORAGE"},n.ENABLE_MULTI_TOUCH=!1,function(e){e[e.All=1]="All",e[e.Hot=2]="Hot",e[e.DianZi=4]="DianZi",e[e.BaiRen=8]="BaiRen"}(n.GameTab||(n.GameTab={})),function(e){e[e.Tourist=1]="Tourist",e[e.Password=2]="Password",e[e.Account=4]="Account",e[e.Code=8]="Code"}(n.LoginType||(n.LoginType={})),function(e){e[e.None=0]="None",e[e.Match=1]="Match",e[e.Friend=2]="Friend",e[e.Club=3]="Club"}(n.RoomType||(n.RoomType={})),n.BGM=["bgm1.mp3","bgm2.mp3","bgm3.mp3","bgm4.mp3","bgm5.mp3","bgm6.mp3","bgm7.mp3","bgm8.mp3","bgm9.mp3","bgm10.mp3"],cc._RF.pop()},{}],DestorySelf:[function(e,t,n){"use strict";cc._RF.push(t,"867b7LpKeRNQZGTOCxCn+vE","DestorySelf");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.destroySelf=function(){this.node.destroy()},t=i([r],t)}(cc.Component));n.default=s,cc._RF.pop()},{}],Device:[function(e,t,n){"use strict";cc._RF.push(t,"a3b7dk+cEtC77diILJ5746S","Device");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./log/LogWrap"),a=e("../Define"),r=e("../manager/DataManager"),s=cc._decorator,c=s.ccclass,l=(s.property,function(){function e(){}return e.nativeCallBack=function(e,t){var n=JSON.parse(t);cc.log(e,n)},e.vibrate=function(e){void 0===e&&(e=1),i.LogWrap.log("vibrate:",r.DataManager.isVibrate,e),cc.sys.isMobile&&r.DataManager.isVibrate&&jsb.Device.vibrate(e)},e.openUrl=function(e){cc.sys.openURL(e)},e.getDeviceId=function(){var e="";return cc.sys.isNative&&(cc.sys.OS_ANDROID==cc.sys.os?e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Device","getDeviceId","()Ljava/lang/String;"):cc.sys.OS_IOS==cc.sys.os&&(e=jsb.reflection.callStaticMethod("Device","getDeviceId"))),e},e.getModel=function(){var e="";return cc.sys.isNative&&(cc.sys.OS_ANDROID==cc.sys.os?e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Device","getModel","()Ljava/lang/String;"):cc.sys.OS_IOS==cc.sys.os&&(e=jsb.reflection.callStaticMethod("Device","getModel"))),e},e.getClipBoard=function(){var e="";return cc.sys.isNative&&(cc.sys.OS_ANDROID==cc.sys.os?e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Device","getClipBoard","()Ljava/lang/String;"):cc.sys.OS_IOS==cc.sys.os&&(e=jsb.reflection.callStaticMethod("Device","getClipBoard"))),e},e.setClipBoard=function(e){var t=!1;return cc.sys.isNative&&(cc.sys.OS_ANDROID==cc.sys.os?t=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Device","setClipBoard","(Ljava/lang/String;)Z",e):cc.sys.OS_IOS==cc.sys.os&&(t=jsb.reflection.callStaticMethod("Device","setClipBoard:",e))),t},e.getSystemVersion=function(){var e="";return cc.sys.isNative&&(cc.sys.OS_ANDROID==cc.sys.os?e="android"+(e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Device","getSystemVersion","()Ljava/lang/String;")):cc.sys.OS_IOS==cc.sys.os&&(e="ios"+(e=jsb.reflection.callStaticMethod("Device","getSystemVersion")))),e},e.getAppVersion=function(){var e="3.0.0";return cc.sys.isNative&&(cc.sys.OS_ANDROID==cc.sys.os?e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Device","getAppVersion","()Ljava/lang/String;"):cc.sys.OS_IOS==cc.sys.os&&(e=jsb.reflection.callStaticMethod("Device","getAppVersion"))),e},e.getAppCode=function(){var e=0;return cc.sys.isNative&&(cc.sys.OS_ANDROID==cc.sys.os?e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Device","getAppCode","()J"):cc.sys.OS_IOS==cc.sys.os&&(e=jsb.reflection.callStaticMethod("Device","getAppCode"))),e},e.getLocation=function(){var e={cityName:"",longitude:0,latitude:0};if(cc.sys.isNative){var t=null;cc.sys.OS_ANDROID==cc.sys.os?t=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/SDKMap","getMapLocation","()Ljava/lang/String;"):cc.sys.OS_IOS==cc.sys.os&&(t=jsb.reflection.callStaticMethod("SDKMap","getMapLocation")),t&&(e=JSON.parse(t))}return e},e.startLocation=function(){cc.sys.isNative&&(cc.sys.OS_ANDROID==cc.sys.os?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/sdk/SDKMap","startLocation","()V"):cc.sys.OS_IOS==cc.sys.os&&jsb.reflection.callStaticMethod("SDKMap","startLocation"))},e.saveTextureToLocal=function(e){cc.sys.isNative&&(cc.sys.OS_ANDROID==cc.sys.os?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Device","saveTextureToLocal","(Ljava/lang/String;)V",e):cc.sys.OS_IOS==cc.sys.os&&jsb.reflection.callStaticMethod("Device","saveTextureToLocal:",e))},e.checkSelfPermission=function(e){var t=0;return cc.sys.isNative&&(cc.sys.OS_ANDROID==cc.sys.os?t=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Device","checkSelfPermission","(Ljava/lang/String;)I",e):cc.sys.OS_IOS==cc.sys.os&&(t=jsb.reflection.callStaticMethod("Device","checkSelfPermission:",e))),i.LogWrap.log("checkSelfPermission",t),0==t},e.requestPermission=function(e){cc.sys.isNative&&(cc.sys.OS_ANDROID==cc.sys.os?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Device","requestPermission","(Ljava/lang/String;)V",e):cc.sys.OS_IOS==cc.sys.os&&jsb.reflection.callStaticMethod("Device","requestPermission:",e))},e.screenToShot=function(e){var t=!1;return cc.sys.isNative&&cc.sys.OS_IOS==cc.sys.os&&(t=jsb.reflection.callStaticMethod("Device","screenToShot:",e)),t},e.getNotchHeight=function(){var e=0;return cc.sys.isNative&&cc.sys.OS_ANDROID==cc.sys.os&&(e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Device","getNotchHeight","()I")),e},e.patchApk=function(e,t){var n=-1;return cc.sys.isNative&&cc.sys.OS_ANDROID==cc.sys.os&&(n=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Device","patchApk","(Ljava/lang/String;Ljava/lang/String;)I",e,t)),i.LogWrap.log("patchApk",n),n},e.installApk=function(e){cc.sys.isNative&&cc.sys.OS_ANDROID==cc.sys.os&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Device","installApk","(Ljava/lang/String;)V",e)},e.getChannel=function(){var e="";return cc.sys.isNative&&(cc.sys.OS_ANDROID==cc.sys.os?e=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Device","getChannel","()Ljava/lang/String;"):cc.sys.OS_IOS==cc.sys.os&&(e=jsb.reflection.callStaticMethod("Device","getChannel"))),i.LogWrap.log("channel",e),""==e?a.Channel:e},e.getSafeArea=function(){var e=null;if(cc.sys.isNative)if(cc.sys.OS_ANDROID==cc.sys.os){var t=jsb.reflection.callStaticMethod("org/cocos2dx/javascript/Device","getSafeArea","()[F");e=cc.rect(t[0],t[1],t[2],t[3])}else e=cc.sys.getSafeAreaRect();return i.LogWrap.log("getSafeArea",e),e},e=o([c],e)}());n.default=l,window.Device=l,cc._RF.pop()},{"../Define":"Define","../manager/DataManager":"DataManager","./log/LogWrap":"LogWrap"}],DynamicList:[function(e,t,n){"use strict";cc._RF.push(t,"efc37q4G71NyqeHFLVI1rPQ","DynamicList");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../common/log/LogWrap"),r=cc._decorator,s=r.ccclass,c=r.property,l=r.menu,p=r.requireComponent,u=r.executionOrder,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollView=null,t.content=null,t._datas=null,t.itemTemplete=null,t.itemTempleteChild=null,t.itemChildName="item_child",t.frameCount=1,t.items={},t.isOpen={0:!0},t.viewSize=null,t.startIndex=0,t.endIndex=0,t.pool=[],t.displayData=[],t.isUpdate=!1,t.renderEvent=new cc.Component.EventHandler,t.renderChildEvent=new cc.Component.EventHandler,t}return o(t,e),t.prototype.onLoad=function(){this.scrollView=this.node.getComponent(cc.ScrollView),this.content=this.scrollView.content,this.viewSize=this.scrollView.node.getContentSize(),this.itemTemplete&&this.itemTemplete.removeFromParent(),this.itemTempleteChild&&this.itemTempleteChild.removeFromParent(),this.content.removeComponent(cc.Layout),this.node.on("scrolling",this.onScrolling,this,!0)},t.prototype.start=function(){},Object.defineProperty(t.prototype,"datas",{get:function(){return this._datas},set:function(e){this._datas=e,this.updateItems()},enumerable:!0,configurable:!0}),t.prototype.getTemplete=function(e){for(var t=this.pool.length-1;t>=0;t--){if(this.pool[t].templete==e.name&&!this.pool[t].isBusy)return this.pool[t].isBusy=!0,this.pool[t].node}var n=cc.instantiate(e);return this.pool.push({templete:e.name,node:n,isBusy:!0}),n},t.prototype.putTemplete=function(e){for(var t=this.pool.length-1;t>=0;t--)if(this.pool[t].node==e&&this.pool[t].isBusy){this.pool[t].isBusy=!1,e.parent=null;break}},t.prototype.initTemplete=function(){for(var e=this.pool.length-1;e>=0;e--)this.pool[e].isBusy=!1,this.pool[e].node.parent=null},t.prototype.setOpen=function(e){for(var t in this.isOpen[e]?this.isOpen[e]=!1:this.isOpen[e]=!0,this.isOpen)parseInt(t)!=e&&(this.isOpen[t]=!1);this.scrollView.stopAutoScroll(),this.updateItems(!0),this.updateRender()},t.prototype.getOpenIndex=function(){for(var e in this.isOpen)if(1==this.isOpen[e])return e;return-1},t.prototype.restHeight=function(){var e=0,t=this.getOpenIndex();-1!=t&&this.isOpen[t]&&this.itemTempleteChild&&this.datas[t]&&this.datas[t].items&&(e=this.datas[t].items.length*this.itemTempleteChild.height),this.content.height=this.datas.length*this.itemTemplete.height+e},t.prototype.updateRender=function(){for(var e in this.items)cc.Component.EventHandler.emitEvents([this.renderEvent],this.items[e],e,this.datas[e])},t.prototype.updateItems=function(e){if(void 0===e&&(e=!1),this.datas&&this.content){this.restHeight();var t=this.content.getPosition();a.LogWrap.log("updateItems",t.y,this.content.height-this.viewSize.height);var n=0,o=0,i=this.displayData;this.displayData=[];for(var r=0;r<this.datas.length;r++){n=r*this.itemTemplete.height+o;var s=t.y,c=t.y+this.viewSize.height,l=0;this.isOpen[r]&&this.itemTempleteChild&&this.datas[r].items&&(o+=l=this.datas[r].items.length*this.itemTempleteChild.height),n>=s&&n+this.itemTemplete.height+l<=c?this.displayData.push(r):(n<s&&n+this.itemTemplete.height+l>s||n<c&&n+this.itemTemplete.height+l>c)&&this.displayData.push(r)}if(this.displayData.sort(),i.toString()!=this.displayData.toString()||e)for(var r in this.isUpdate=!0,e&&(this.startIndex=0),this.items){var p=this.items[r],u=p.getChildByName(this.itemChildName),h=u.getComponent(cc.ToggleContainer);if(!this.isOpen[r]&&this.itemTempleteChild&&this.datas[r].items&&u){p.stopAllActions(),h&&(h.enabled=!1);for(var d=u.childrenCount-1;d>=0;d--)this.putTemplete(u.children[d]);h&&(h.enabled=!0)}if(-1==this.displayData.indexOf(parseInt(r))){if(this.isOpen[r]&&u){p.stopAllActions(),h&&(h.enabled=!1);for(d=u.childrenCount-1;d>=0;d--)this.putTemplete(u.children[d]);h&&(h.enabled=!0)}this.putTemplete(this.items[r]),delete this.items[r]}}}},t.prototype.update=function(){var e=this;if(!(this.frameCount<=0)&&this.isUpdate){this.endIndex=this.startIndex+this.frameCount;for(var t=this.getOpenIndex(),n=function(n){var i=o.displayData[n],a=o.items[i];if(null!=i&&(a||(a=o.getTemplete(o.itemTemplete),o.content.addChild(a),cc.Component.EventHandler.emitEvents([o.renderEvent],a,i,o.datas[i])),a.y=-i*a.height,-1!=t&&i>t&&o.itemTempleteChild&&o.datas[t].items&&(a.y-=o.datas[t].items.length*o.itemTempleteChild.height),o.items[i]=a,o.isOpen[i]&&o.itemTempleteChild&&o.datas[i].items)){var r=a.getChildByName(o.itemChildName);if(r&&r.childrenCount!=o.datas[i].items.length){a.stopAllActions();for(var s=function(t){a.runAction(cc.sequence(cc.delayTime(.02*t),cc.callFunc(function(){if(!r.children[t]){var n=e.getTemplete(e.itemTempleteChild);r.addChild(n),cc.Component.EventHandler.emitEvents([e.renderChildEvent],n,t,e.datas[i].items[t]),n.getComponent(cc.Toggle)&&0==t&&(n.getComponent(cc.Toggle).isChecked=!0)}})))},c=0;c<o.datas[i].items.length;c++)s(c)}}},o=this,i=this.startIndex;i<this.endIndex;i++)n(i);if(this.startIndex+=this.frameCount,this.endIndex>=this.displayData.length&&(this.startIndex=0,Object.keys(this.items).length==this.displayData.length)){this.isUpdate=!1;for(i=0;i<this.displayData.length;i++)this.items[this.displayData[i]]||(this.startIndex=i)}}},t.prototype.onScrolling=function(){this.content.y<=0&&(this.content.y=0);var e=this.content.height-this.viewSize.height;this.content.y>=e&&(this.content.y=e),this.updateItems()},t.prototype.onDestroy=function(){if(this.node.off("scrolling",this.onScrolling,this,!0),this.pool)for(var e=this.pool.length-1;e>=0;e--)!this.pool[e].isBusy&&cc.isValid(this.pool[e].node)&&this.pool[e].node.destroy();this.pool=null,this.itemTemplete&&this.itemTemplete.destroy(),this.itemTemplete=null,this.itemTempleteChild&&this.itemTempleteChild.destroy(),this.itemTempleteChild=null},i([c(cc.Node)],t.prototype,"itemTemplete",void 0),i([c(cc.Node)],t.prototype,"itemTempleteChild",void 0),i([c(cc.String)],t.prototype,"itemChildName",void 0),i([c(cc.Integer)],t.prototype,"frameCount",void 0),i([c(cc.Component.EventHandler)],t.prototype,"renderEvent",void 0),i([c(cc.Component.EventHandler)],t.prototype,"renderChildEvent",void 0),t=i([s,l("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/DynamicList"),p(cc.ScrollView),u(-5e3)],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../common/log/LogWrap":"LogWrap"}],EditNickName:[function(e,t,n){"use strict";cc._RF.push(t,"496947n8dNEpLbDINad1DWT","EditNickName");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/DataManager"),s=e("../../common/utils/Utils"),c=e("../../manager/NetManager"),l=e("../../manager/UIManager"),p=e("../../net/NetCmd"),u=e("../../manager/EventManager"),h=cc._decorator,d=h.ccclass,g=(h.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){this.getItem("label_name").string=r.DataManager.userInfo.nickname},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_confirm").registerClick(this.onClickConfirm.bind(this)),this.getItem("input_name").node.on("text-changed",this.onEventEditChange,this)},t.prototype.initEvent=function(){u.EventManager.on(this,p.ProtocolAccountCmd.EditDataResp,this.onEditDataResp.bind(this))},t.prototype.onEditDataResp=function(){this.close()},t.prototype.onClickClose=function(){this.close()},t.prototype.onClickConfirm=function(e){var t=this.getItem("input_name").string;if(t){var n=parseInt(r.DataManager.userInfo.headimgurl);n=n||1,c.NetManager.protocolAccount.sendEditData(n,t,1)}else l.UIManager.showTips("\u8bf7\u8f93\u5165\u65b0\u6635\u79f0")},t.prototype.onEventEditChange=function(e){var t=e.string.replace(/[\u0391-\uFFE5]/g,"aa").length;this.getItem("input_name").string=s.default.getNameStr(e.string),t>e.maxLength&&e.blur()},t=i([d],t)}(a.default));n.default=g,cc._RF.pop()},{"../../common/utils/Utils":"Utils","../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],EditReplaceHead:[function(e,t,n){"use strict";cc._RF.push(t,"92369DKcVhB1bof66DnxwS4","EditReplaceHead");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../base/PopupView"),c=e("../common/componet/ButtonEx"),l=e("../../manager/EventManager"),p=e("../../Define"),u=e("../../manager/DataManager"),h=e("../../common/UIHelper"),d=e("../../manager/NetManager"),g=e("../common/List"),f=e("../../manager/ResManager"),m=cc._decorator,_=m.ccclass,y=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_head=null,t.manList=[1,2,3,4,5,6,7,8,9,10,11,12,13,14],t.womanList=[201,202,203,204,205,206,207,208,209,210,211,212,213,214],t.sex=0,t.imgIndex=1,t}return o(t,e),t.prototype.start=function(){this.initView()},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_save").registerClick(this.onClickSave.bind(this))},t.prototype.initEvent=function(){l.EventManager.on(this,p.EventDef.UpdateUserInfo,this.onUpdateUserInfo)},t.prototype.onClickTitle=function(e){this.sex=parseInt(e.node.name.replace("toggle_sex","")),this.updateHeadList()},t.prototype.onUpdateUserInfo=function(){this.initView()},t.prototype.initView=function(){return a(this,void 0,void 0,function(){var e,t,n;return r(this,function(o){switch(o.label){case 0:return e=u.DataManager.userInfo,this.imgIndex=parseInt(u.DataManager.userInfo.headimgurl),this.sex=this.imgIndex<=200?0:1,this.getItem("toggle_sex"+this.sex).isChecked=!0,h.default.setHeadIcon(this.imgIndex.toString(),this.getItem("img_head")),t=e.vip_level&&e.vip_level||0,[4,f.ResManager.loadResAsync("view/home_page/img_txk_geren_v"+t,cc.SpriteFrame)];case 1:return(n=o.sent())&&(this.getItem("img_vip_kuang").getComponent(cc.Sprite).spriteFrame=n),h.default.setVipLevel(t,this.getItem("img_vip")),this.updateHeadList(),[2]}})})},t.prototype.updateHeadList=function(){this.data=0==this.sex?this.manList:this.womanList,this.scroll_head.numItems=this.data.length},t.prototype.onListRender=function(e,t){var n=this,o=e.getChildByName("node_mask").getChildByName("img_player_head"),i=e.getChildByName("img_select");h.default.setHeadIcon(this.data[t],o),this.data[t]==this.imgIndex?i.active=!0:i.active=!1,e.getComponent(c.default).registerClick(function(){i.active=!0;var e=n.data.indexOf(n.imgIndex);n.imgIndex=n.data[t],-1!=e&&n.scroll_head.updateItem(e)})},t.prototype.onClickClose=function(){this.close()},t.prototype.onClickSave=function(){d.NetManager.protocolAccount.sendEditData(this.imgIndex,u.DataManager.userInfo.nickname,2)},i([y(g.default)],t.prototype,"scroll_head",void 0),t=i([_],t)}(s.default);n.default=v,cc._RF.pop()},{"../../Define":"Define","../../common/UIHelper":"UIHelper","../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/ResManager":"ResManager","../base/PopupView":"PopupView","../common/List":"List","../common/componet/ButtonEx":"ButtonEx"}],ErrorLog:[function(e,t,n){"use strict";cc._RF.push(t,"837b4u43XhONox1DmJ7i6hk","ErrorLog");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../view/base/PopupView"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this))},t.prototype.onClickClose=function(){this.close()},t.prototype.start=function(){this.data&&(this.getItem("label_msg").string=this.data)},t=i([s],t)}(a.default));n.default=c,cc._RF.pop()},{"../../view/base/PopupView":"PopupView"}],EventManager:[function(e,t,n){"use strict";cc._RF.push(t,"fd7722046FMoYQiegVg1EtW","EventManager");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../common/log/LogWrap"),a=cc._decorator,r=a.ccclass,s=(a.property,function(){function e(){this.events={},this.id=1e3}var t;return t=e,e.prototype.on=function(e,t,n,o){this.events[t]||(this.events[t]=[]),this.events[t].push({target:e,callback:n,id:o||this.id});this.events[t].sort(function(e,t){return e.id<t.id})},e.prototype.off=function(e){for(var t in this.events)for(var n=this.events[t],o=n.length-1;o>=0;o--)n[o].target==e&&n.splice(o,1)},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=this.events[e];o?o.forEach(function(e){var n;(n=e.callback).call.apply(n,[e.target].concat(t))}):i.LogWrap.log(e+" no register!")},e.prototype.clear=function(){},e.instance=new t,e=t=o([r],e)}());n.EventManager=s.instance,cc._RF.pop()},{"../common/log/LogWrap":"LogWrap"}],FileManager:[function(e,t,n){"use strict";cc._RF.push(t,"35830OCvjxEkYz4Ts3zCrBW","FileManager");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});e("../common/log/LogWrap");var i=cc._decorator,a=i.ccclass,r=(i.property,function(){function e(){this.tools=null,this.chaches={}}var t;return t=e,e.prototype.downloadFile=function(e,t,n){},e.prototype.downloadFileEx=function(e,t,n,o,i){},e.prototype.unzip=function(e,t){},e.prototype.syncUnzipGame=function(e,t,n){},e.prototype.writeStringFile=function(e,t){},e.prototype.createFolder=function(e){},e.prototype.baseName=function(e){var t=e.lastIndexOf("/");return(t=t>-1?t:e.lastIndexOf("\\"))<0?e:e.substring(t+1)},e.Instance=new t,e=t=o([a],e)}());n.FileManager=r.Instance,cc._RF.pop()},{"../common/log/LogWrap":"LogWrap"}],ForgotPasswordPopup:[function(e,t,n){"use strict";cc._RF.push(t,"514bbJixlhIFohLIIAGrKsI","ForgotPasswordPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/UIManager"),s=e("../../common/Text"),c=e("../../manager/NetManager"),l=e("../../net/NetCmd"),p=e("../../manager/EventManager"),u=e("../../manager/DataManager"),h=cc._decorator,d=h.ccclass,g=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.canGetCode=!0,t.timeNumber=60,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this)),this.getItem("btn_auth").registerClick(this.onClickAuth.bind(this)),this.getItem("btn_show_password").registerClick(this.onClickShowPassword.bind(this)),this.getItem("btn_hide_password").registerClick(this.onClickHidePassword.bind(this))},t.prototype.initEvent=function(){p.EventManager.on(this,l.ProtocolAccountCmd.RetrievePasswordResp,this.onRetrievePasswordResp.bind(this))},t.prototype.onRetrievePasswordResp=function(e){e.ok?(r.UIManager.showTips(s.Tips.RetrievePasswordSuccess),this.close()):r.UIManager.showTips(s.Tips.RetrievePasswordFail)},t.prototype.onClickClose=function(){this.close()},t.prototype.onClickAuth=function(){var e=this,t=this.getItem("input_phone").string;this.canGetCode&&(t&&11==t.length?/^1[3456789]\d{9}$/.test(t)?(this.canGetCode=!1,c.NetManager.requestPostUrl(l.HttpCmd.GetVerificationCode,{phonenumber:t,type:2,channel:u.DataManager.channel,user_id:u.DataManager.userInfo&&u.DataManager.userInfo.userid||0},function(t,n){"success"==t?1==n.ok?(r.UIManager.showTips(s.Tips.SendCodeSuccess),e.updateTimer()):(e.canGetCode=!0,r.UIManager.showTips(n.err_msg||s.Tips.SendCodeFail)):(e.canGetCode=!0,r.UIManager.showTips(s.Tips.SendCodeFail+n))})):r.UIManager.showTips(s.Tips.PhoneNumberError):r.UIManager.showTips(s.Tips.InputPhone))},t.prototype.updateTimer=function(){var e=this;this.node.stopAllActions(),this.timeNumber=60,this.getItem("label_auth").string=this.timeNumber+"s",cc.tween(this.node).repeatForever(cc.sequence(cc.delayTime(1),cc.callFunc(function(){e.timeNumber--,e.timeNumber>0?e.getItem("label_auth").string=e.timeNumber+"s":(e.canGetCode=!0,e.getItem("label_auth").string="\u83b7 \u53d6")}))).start()},t.prototype.onClickSure=function(){var e=this,t=this.getItem("input_phone").string,n=this.getItem("input_auth").string,o=this.getItem("input_password").string;t&&11==t.length?/^1[3456789]\d{9}$/.test(t)?n&&6==n.length?!o||o.length<6||o.length>16?r.UIManager.showTips(s.Tips.InputPassword):1!=this.data?c.NetManager.requestPostUrl(l.HttpCmd.RetrievePassword,{account:t,ver_code:n,password:o,channel:u.DataManager.channel},function(t,n){"success"==t?1==n.ok?(r.UIManager.showTips(s.Tips.RetrievePasswordSuccess),e.close(!1),r.UIManager.popup("prefabs/login/PasswordLoginPopup")):r.UIManager.showTips(n.err_msg||s.Tips.RetrievePasswordFail):r.UIManager.showTips(s.Tips.RetrievePasswordFail)}):c.NetManager.protocolAccount.sendRetrievePassword(t,n,o):r.UIManager.showTips(s.Tips.InputCode):r.UIManager.showTips(s.Tips.PhoneNumberError):r.UIManager.showTips(s.Tips.InputPhone)},t.prototype.onClickShowPassword=function(){this.getItem("input_password").inputFlag=cc.EditBox.InputFlag.PASSWORD,this.getItem("btn_show_password").node.active=!1,this.getItem("btn_hide_password").node.active=!0},t.prototype.onClickHidePassword=function(){this.getItem("input_password").inputFlag=cc.EditBox.InputFlag.DEFAULT,this.getItem("btn_show_password").node.active=!0,this.getItem("btn_hide_password").node.active=!1},t=i([d],t)}(a.default));n.default=g,cc._RF.pop()},{"../../common/Text":"Text","../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],ForgotSafeCodePopup:[function(e,t,n){"use strict";cc._RF.push(t,"08f5f5mgU5Jj4zRTphUszhu","ForgotSafeCodePopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/UIManager"),s=e("../../common/Text"),c=e("../../manager/NetManager"),l=e("../../net/NetCmd"),p=e("../../manager/EventManager"),u=e("../../manager/DataManager"),h=cc._decorator,d=h.ccclass,g=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.canGetCode=!0,t.timeNumber=60,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this)),this.getItem("btn_auth").registerClick(this.onClickAuth.bind(this)),this.getItem("btn_show_code").registerClick(this.onClickShowCode.bind(this)),this.getItem("btn_hide_code").registerClick(this.onClickHideCode.bind(this))},t.prototype.initEvent=function(){p.EventManager.on(this,l.ProtocolAccountCmd.RetrieveSafeCodeResp,this.onRetrieveSafeCodeResp.bind(this))},t.prototype.onRetrieveSafeCodeResp=function(e){e.ok?(r.UIManager.showTips(s.Tips.RetrieveSafeCodeSuccess),this.close()):r.UIManager.showTips(s.Tips.RetrieveSafeCodeFail)},t.prototype.onClickClose=function(){this.close()},t.prototype.onClickAuth=function(){var e=this,t=this.getItem("input_phone").string;this.canGetCode&&(t&&11==t.length?/^1[3456789]\d{9}$/.test(t)?(this.canGetCode=!1,c.NetManager.requestPostUrl(l.HttpCmd.GetVerificationCode,{phonenumber:t,type:6,channel:u.DataManager.channel,user_id:u.DataManager.userInfo&&u.DataManager.userInfo.userid||0},function(t,n){"success"==t?1==n.ok?(r.UIManager.showTips(s.Tips.SendCodeSuccess),e.updateTimer()):(e.canGetCode=!0,r.UIManager.showTips(n.err_msg||s.Tips.SendCodeFail)):(e.canGetCode=!0,r.UIManager.showTips(s.Tips.SendCodeFail+n))})):r.UIManager.showTips(s.Tips.PhoneNumberError):r.UIManager.showTips(s.Tips.InputPhone))},t.prototype.updateTimer=function(){var e=this;this.node.stopAllActions(),this.timeNumber=60,this.getItem("label_auth").string=this.timeNumber+"s",cc.tween(this.node).repeatForever(cc.sequence(cc.delayTime(1),cc.callFunc(function(){e.timeNumber--,e.timeNumber>0?e.getItem("label_auth").string=e.timeNumber+"s":(e.canGetCode=!0,e.getItem("label_auth").string="\u83b7 \u53d6")}))).start()},t.prototype.onClickSure=function(){var e=this.getItem("input_phone").string,t=this.getItem("input_auth").string,n=this.getItem("input_code").string;e&&11==e.length?/^1[3456789]\d{9}$/.test(e)?t&&6==t.length?!n||n.length<6||n.length>16?r.UIManager.showTips(s.Tips.InputSafeCode):c.NetManager.protocolAccount.sendRetrieveSafeCode(e,t,n):r.UIManager.showTips(s.Tips.InputCode):r.UIManager.showTips(s.Tips.PhoneNumberError):r.UIManager.showTips(s.Tips.InputPhone)},t.prototype.onClickShowCode=function(){this.getItem("input_code").inputFlag=cc.EditBox.InputFlag.PASSWORD,this.getItem("btn_show_code").node.active=!1,this.getItem("btn_hide_code").node.active=!0},t.prototype.onClickHideCode=function(){this.getItem("input_code").inputFlag=cc.EditBox.InputFlag.DEFAULT,this.getItem("btn_show_code").node.active=!0,this.getItem("btn_hide_code").node.active=!1},t=i([d],t)}(a.default));n.default=g,cc._RF.pop()},{"../../common/Text":"Text","../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],GPSView:[function(e,t,n){"use strict";cc._RF.push(t,"9b0cbZbF6ZDcKeLYnsT0w8B","GPSView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../common/log/LogWrap"),c=e("../../common/UIHelper"),l=e("../../common/utils/Utils"),p=e("../../Define"),u=e("../../manager/DataManager"),h=e("../../manager/ResManager"),d=e("../../view/base/PopupView"),g=cc._decorator,f=g.ccclass,m=(g.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.n_table=null,t.n_line=null,t.n_player=null,t}return o(t,e),t.prototype.initComponent=function(){var e=this;this.getItem("btn_close").registerClick(function(){e.close()})},t.prototype.initEvent=function(){},t.prototype.start=function(){this.showGPSView()},t.prototype.showGPSView=function(){var e=this,t=this.data.player_info;u.DataManager.gameType==p.GameType.DDZ?(this.getItem("view1").active=!0,this.n_table=this.getItem("view1").getChildByName("table"),this.n_line=this.getItem("view1").getChildByName("line"),this.n_player=this.getItem("view1").getChildByName("player")):(this.getItem("view").active=!0,this.n_table=this.getItem("view").getChildByName("table"),this.n_line=this.getItem("view").getChildByName("line"),this.n_player=this.getItem("view").getChildByName("player")),t.forEach(function(t,n){var o=e.n_player.getChildByName("player"+n);o.active=!0;var i=cc.find("mask/spr_head",o);c.default.setHeadIcon(t.headimg_id,i);var a=cc.find("frame",o);c.default.setHeadFrame(t.vip_level,a);var r=l.default.getSubStringLengTxt(t.username)||l.default.getReplaceStrToStar(t.player_id);cc.find("label_username",o).getComponent(cc.Label).string=r,cc.find("wait_enter",o).active=!1});for(var n=!1,o=0;o<t.length;o++){var i=t[o].longitude_latitude;if(i)for(var a=o+1;a<t.length;a++){var r=t[a].longitude_latitude;if(r){var s=this.getDistance(i,r),h=this.n_line.getChildByName("line_"+o+"_"+a),d=this.n_table.getChildByName("table_"+o+"_"+a);d.getChildByName("distance").getComponent(cc.Label).string=s>=1e3?(s/1e3).toFixed(1)+"km":s.toFixed(1)+"m",s<=300?(0==n&&(n=!0),this.loadSprRedLine(h.getComponent(cc.Sprite),2),this.loadSprRedTable(d.getComponent(cc.Sprite),2)):(this.loadSprRedLine(h.getComponent(cc.Sprite),1),this.loadSprRedTable(d.getComponent(cc.Sprite),1))}else{g=this.n_player.getChildByName("player"+a);cc.find("none_permission",g).active=!0}}else{var g=this.n_player.getChildByName("player"+o);cc.find("none_permission",g).active=!0}}n&&(this.getItem("warm_tips").active=!0)},t.prototype.loadSprRedLine=function(e,t){return a(this,void 0,void 0,function(){var n,o;return r(this,function(i){switch(i.label){case 0:return n=1==t?"g":"b",[4,h.ResManager.loadResAsync("game/public/image/gps/img_line_"+n,cc.SpriteFrame)];case 1:return o=i.sent(),e.spriteFrame=o,[2]}})})},t.prototype.loadSprRedTable=function(e,t){return a(this,void 0,void 0,function(){var n,o;return r(this,function(i){switch(i.label){case 0:return n=1==t?"g":"b",[4,h.ResManager.loadResAsync("game/public/image/gps/img_biaoshi_"+n,cc.SpriteFrame)];case 1:return o=i.sent(),e.spriteFrame=o,[2]}})})},t.prototype.rad=function(e){return e*Math.PI/180},t.prototype.getDistance=function(e,t){var n=e.split(",")[0],o=e.split(",")[1],i=t.split(",")[0],a=t.split(",")[1],r=this.rad(o),c=this.rad(a),l=r-c,p=this.rad(n)-this.rad(i),u=2*Math.asin(Math.sqrt(Math.pow(Math.sin(l/2),2)+Math.cos(r)*Math.cos(c)*Math.pow(Math.sin(p/2),2)));u*=6378.137;var h=u=Math.round(1e4*u)/10,d="";return d=h>=1?(h/1e3).toFixed(1)+"km":1*h+"m",s.LogWrap.log("\u8ddd\u79bb\u662f",u),s.LogWrap.log("\u8ddd\u79bb\u662f",d),u},t=i([f],t)}(d.default));n.default=m,cc._RF.pop()},{"../../Define":"Define","../../common/UIHelper":"UIHelper","../../common/log/LogWrap":"LogWrap","../../common/utils/Utils":"Utils","../../manager/DataManager":"DataManager","../../manager/ResManager":"ResManager","../../view/base/PopupView":"PopupView"}],GameChat:[function(e,t,n){"use strict";cc._RF.push(t,"0b4cfhht1xHQpyGeft+8X6X","GameChat");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./Chat"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.setTalkPositionY=function(e){void 0===e&&(e=14),this.getItem("btn_talk").node.getComponent(cc.Widget).top=e},t.prototype.setTalkPositionX=function(e,t){void 0===e&&(e=10),void 0===t&&(t=!0),this.getItem("btn_talk").node.getComponent(cc.Widget).isAlignLeft=!0,this.getItem("btn_talk").node.getComponent(cc.Widget).isAbsoluteLeft=t,this.getItem("btn_talk").node.getComponent(cc.Widget).left=e},t.prototype.setTalkPosition=function(e,t){this.getItem("btn_talk").node.x=e,this.getItem("btn_talk").node.y=t},t=i([s],t)}(a.default));n.default=c,cc._RF.pop()},{"./Chat":"Chat"}],GameDownload:[function(e,t,n){"use strict";cc._RF.push(t,"153b8goPXlHEqFSY+M3Vx6I","GameDownload");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/EventManager"),s=e("../../Define"),c=e("../../manager/UIManager"),l=e("../../common/Text"),p=e("../../manager/UpdateManager"),u=cc._decorator,h=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gameName="",t.callback=null,t}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this),"string"==typeof this.data?this.gameName=this.data:(this.gameName=this.data.gameName,this.callback=this.data.callback)},t.prototype.start=function(){p.UpdateManager.update(this.gameName),this.showAnimation()},t.prototype.initEvent=function(){r.EventManager.on(this,s.EventDef.HotUpdateProgress,this.onHotUpdateProgress.bind(this)),r.EventManager.on(this,s.EventDef.HotUpdateFail,this.onHotUpdateFail.bind(this)),r.EventManager.on(this,s.EventDef.HotUpdateFinish,this.onHotUpdateFinish.bind(this))},t.prototype.onHotUpdateProgress=function(e,t,n){this.gameName==n&&(this.getItem("label_progress").string=Math.ceil(100*t)+"%")},t.prototype.onHotUpdateFail=function(e){this.gameName==e&&(this.close(),c.UIManager.showTips(l.Tips.DownloadFail))},t.prototype.onHotUpdateFinish=function(e){this.gameName==e&&(this.callback&&this.callback(),this.close())},t.prototype.showAnimation=function(){var e=cc.repeatForever(cc.rotateBy(2,360));this.getItem("img_circle").runAction(e)},t=i([h],t)}(a.default));n.default=d,cc._RF.pop()},{"../../Define":"Define","../../common/Text":"Text","../../manager/EventManager":"EventManager","../../manager/UIManager":"UIManager","../../manager/UpdateManager":"UpdateManager","../base/PopupView":"PopupView"}],GameItem:[function(e,t,n){"use strict";cc._RF.push(t,"e9afda1IrRPTY0jbNfBPfGt","GameItem");var o,i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c,l=e("../common/componet/ButtonEx"),p=e("../../manager/EventManager"),u=e("../../Define"),h=e("../../manager/UpdateManager"),d=e("../../manager/NetManager"),g=e("../../manager/UIManager"),f=e("../../manager/DataManager"),m=e("../../common/Text"),_=e("../../manager/ResManager"),y=e("../../manager/FileManager"),v=e("../../common/log/LogWrap"),b=e("../../common/UIHelper"),C=cc._decorator,M=C.ccclass,w=C.property;(function(e){e[e.QZNN=1]="QZNN",e[e.DHT=2]="DHT",e[e.ZJH=3]="ZJH",e[e.WZRY=4]="WZRY",e[e.KPNN=5]="KPNN",e[e.EBG=6]="EBG",e[e.SG=7]="SG",e[e.BRNN=8]="BRNN",e[e.QZPJ=9]="QZPJ",e[e.TBNN=10]="TBNN",e[e.JSZJH=11]="JSZJH",e[e.DZPK=12]="DZPK",e[e.DDZ=13]="DDZ",e[e.FRUIT=14]="FRUIT",e[e.KYSSS=630]="KYSSS",e[e.KY21=600]="KY21",e[e.KYSLWH=920]="KYSLWH",e[e.KYWRZJH=1950]="KYWRZJH",e[e.KYXLCH=650]="KYXLCH",e[e.KYERMJ=740]="KYERMJ",e[e.KYSHARK=1940]="KYSHARK",e[e.KYBENZBMW=1960]="KYBENZBMW",e[e.KYFISH=510]="KYFISH",e[e.KYDDZ=610]="KYDDZ"})(c||(c={}));(o={})[c.QZNN]="qznn/qiangzhuangniuniu",o[c.DHT]="dht/dahuatou",o[c.ZJH]="zjh/zhajinhua",o[c.WZRY]="wzry/wangzherongyao",o[c.KPNN]="kpnn/kansanzhangpai",o[c.EBG]="erbagang/erbagang",o[c.SG]="sg/sangong",o[c.BRNN]="brnn/bairenniuniu",o[c.QZPJ]="qzpj/qiangzhuangpaijiu",o[c.TBNN]="tbnn/tongbiniuniu",o[c.JSZJH]="jszjh/jisuzhajinhua",o[c.DZPK]="dzpk/dezhoupuke",o[c.DDZ]="ddz/doudizhu",o[c.FRUIT]="fruit/shuiguoji",o[c.KYSSS]="ky_sss/shisanshui",o[c.KY21]="ky_21/21dian",o[c.KYSLWH]="ky_slwh/senlinwuhui",o[c.KYWRZJH]="ky_wrzjh/wanrenzhajinhua",o[c.KYXLCH]="ky_xlch/xueliuchenghe",o[c.KYERMJ]="ky_ermj/erenmajiang",o[c.KYSHARK]="ky_shark/jinshayinsha",o[c.KYBENZBMW]="ky_benzbmw/benchibaoma",o[c.KYFISH]="ky_fish/buyu",o[c.KYDDZ]="ky_ddz/doudizhu";var I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sp_game_icon=null,t.node_upate=null,t.icon_update=null,t.icon_download=null,t.sp_tips=null,t.node_progress=null,t.img_circle=null,t.label_progress=null,t.game_type=null,t.is_open=!0,t.gameName="fruit",t.isUpdate=!1,t.isDownloadIcon=!1,t.downCount=0,t.isGuestOpen=!0,t}return i(t,e),t.prototype.onLoad=function(){this.node.getComponent(l.default).registerClick(this.onClickGame.bind(this)),this.initEvent()},t.prototype.start=function(){this.updateStatus()},t.prototype.init=function(e){if(e&&this.game_type!=e.game_type){this.game_type=e.game_type,this.gameName=f.DataManager.getGameName(this.game_type),this.is_open=e.is_open,e.is_open?(this.node.getComponent(l.default).interactable=!0,this.sp_tips.active=!1):this.sp_tips.active=!0,this.updateStatus(),this.sp_game_icon.skeletonData=null,this.isDownloadIcon=!1,this.downCount=0;var t=null;e.extral&&""!=e.extral&&(t=JSON.parse(e.extral)),t&&(this.isGuestOpen=1==t.guest_open)}},t.prototype.loadSpine=function(){return r(this,void 0,void 0,function(){var e,t,n,o,i,a,c,l,p,h=this;return s(this,function(d){if(!this.sp_game_icon.skeletonData)if(cc.sys.isNative){if(this.isDownloadIcon)return[2];if(this.downCount>=2)return v.LogWrap.log("down fail",this.gameName),[2];e=this.gameName,t=e+".atlas",n=e+".json",o=e+".png",null,null,null,i=0,a=function(e){return r(this,void 0,void 0,function(){var a,r,c,l;return s(this,function(s){switch(s.label){case 0:return e?3!=++i?[3,4]:[4,_.ResManager.loadAsync(o)]:[3,5];case 1:return a=s.sent(),[4,_.ResManager.loadAsync(t)];case 2:return r=s.sent(),[4,_.ResManager.loadAsync(n)];case 3:c=s.sent(),(l=new sp.SkeletonData).skeletonJson=c,l.atlasText=r,l.textures=[a],l.textureNames=[o],this.sp_game_icon&&(this.sp_game_icon.skeletonData=l,this.sp_game_icon.setToSetupPose(),this.sp_game_icon.animation="animation"),s.label=4;case 4:return[3,6];case 5:this.isDownloadIcon=!1,s.label=6;case 6:return[2]}})})}.bind(this),this.isDownloadIcon=!0,this.downCount++,y.FileManager.downloadFile(u.UpdateUrl+"icon/"+t,t,function(e){a(e),e&&y.FileManager.downloadFile(u.UpdateUrl+"icon/"+n,n,function(e){a(e),e&&y.FileManager.downloadFile(u.UpdateUrl+"icon/"+o,o,function(e){a(e)})})})}else c=u.UpdateUrl+"icon/"+this.gameName+".png",l=u.UpdateUrl+"icon/"+this.gameName+".json",p=u.UpdateUrl+"icon/"+this.gameName+".atlas",cc.loader.load(c,function(e,t){cc.loader.load({url:p,type:"txt"},function(e,n){cc.loader.load({url:l,type:"txt"},function(e,o){if(!e){var i=new sp.SkeletonData;i.skeletonJson=o,i.atlasText=n,i.textures=[t],i.textureNames=[h.gameName+".png"],h.sp_game_icon&&(h.sp_game_icon.skeletonData=i,h.sp_game_icon.animation="animation")}})})});return[2]})})},t.prototype.initEvent=function(){p.EventManager.on(this,u.EventDef.HotUpdateProgress,this.onHotUpdateProgress.bind(this)),p.EventManager.on(this,u.EventDef.HotUpdateFail,this.onHotUpdateFail.bind(this)),p.EventManager.on(this,u.EventDef.HotUpdateFinish,this.onHotUpdateFinish.bind(this))},t.prototype.onDestroy=function(){p.EventManager.off(this)},t.prototype.updateStatus=function(){if(!(this.game_type>100))return h.UpdateManager.isDowlaoding(this.gameName)?(this.isUpdate=!0,void this.showAnimation()):void(h.UpdateManager.isInstall(this.gameName)?h.UpdateManager.isNeedUpdate(this.gameName)?(this.node_upate.active=!0,this.icon_download.active=!1,this.icon_update.active=!0):this.node_upate.active=!1:(this.node_upate.active=!0,this.icon_download.active=!0,this.icon_update.active=!1))},t.prototype.onHotUpdateProgress=function(e,t,n){this.gameName==n&&(this.label_progress.string=Math.ceil(100*t)+"%")},t.prototype.onHotUpdateFail=function(e){this.gameName==e&&(this.isUpdate=!1,this.node_upate.active=!0,this.hideAnimation(),g.UIManager.showTips(m.Tips.DownloadFail))},t.prototype.onHotUpdateFinish=function(e){this.gameName==e&&(this.isUpdate=!1,this.updateStatus(),this.hideAnimation())},t.prototype.onClickGame=function(){var e=this;if(this.is_open&&(this.isGuestOpen||b.default.checkTourist(function(t){t&&e.onClickGame()})))if(this.game_type>100){if(!b.default.checkTourist(function(t){t&&d.NetManager.protocolHall.sendKYGameUrlReq(e.game_type)}))return;d.NetManager.protocolHall.sendKYGameUrlReq(this.game_type)}else{if(h.UpdateManager.isNeedUpdate(this.gameName)){if(this.isUpdate)return;return this.isUpdate=!0,this.showAnimation(),void h.UpdateManager.update(this.gameName)}if(u.NotSeletRoomGame[this.game_type])d.NetManager.protocolHall.sendEnterRoom({room_level:1,game_type:this.game_type});else{_.ResManager.loadSubSettings(this.gameName);var t="game/"+this.gameName+"/"+this.gameName.toUpperCase()+"RoomView";cc.loader._getResUuid(t)?_.ResManager.loadSubPackage(this.gameName,function(n){return r(e,void 0,void 0,function(){return s(this,function(e){return n||!cc.sys.isMobile?g.UIManager.open(t,this.game_type):g.UIManager.open("prefabs/RoomView",this.game_type),[2]})})}):g.UIManager.open("prefabs/RoomView",this.game_type)}}},t.prototype.showAnimation=function(){if(!this.node_progress.active){this.node_progress.active=!0,this.node_upate.active=!1;var e=cc.repeatForever(cc.rotateBy(2,360));this.img_circle.runAction(e)}},t.prototype.hideAnimation=function(){this.img_circle.stopAllActions(),this.node_progress.active=!1},a([w(sp.Skeleton)],t.prototype,"sp_game_icon",void 0),a([w(cc.Node)],t.prototype,"node_upate",void 0),a([w(cc.Node)],t.prototype,"icon_update",void 0),a([w(cc.Node)],t.prototype,"icon_download",void 0),a([w(cc.Node)],t.prototype,"sp_tips",void 0),a([w(cc.Node)],t.prototype,"node_progress",void 0),a([w(cc.Node)],t.prototype,"img_circle",void 0),a([w(cc.Label)],t.prototype,"label_progress",void 0),t=a([M],t)}(cc.Component);n.default=I,cc._RF.pop()},{"../../Define":"Define","../../common/Text":"Text","../../common/UIHelper":"UIHelper","../../common/log/LogWrap":"LogWrap","../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/FileManager":"FileManager","../../manager/NetManager":"NetManager","../../manager/ResManager":"ResManager","../../manager/UIManager":"UIManager","../../manager/UpdateManager":"UpdateManager","../common/componet/ButtonEx":"ButtonEx"}],GameLoading:[function(e,t,n){"use strict";cc._RF.push(t,"d536dffJ6tPWooTYWw5oQEC","GameLoading");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../common/utils/Utils"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipText=null,t.bar=null,t.cancelText=null,t.cancelBtn=null,t.cancelCall=null,t}return o(t,e),t.prototype.init=function(e){var t=this;this.tipText.string=e.tipText||"\u52a0\u8f7d\u4e2d...",this.cancelText.string=e.cancelText||"\u53d6\u6d88",this.cancelBtn.active=e.showCancel,this.cancelCall=e.cancelCall,this.node.opacity=255,this.cancelBtn.active&&a.default.addClickEventEND(this.cancelBtn,function(e){t.cancelCall&&t.cancelCall(),t.node.destroy()})},i([c(cc.Label)],t.prototype,"tipText",void 0),i([c(cc.Node)],t.prototype,"bar",void 0),i([c(cc.Label)],t.prototype,"cancelText",void 0),i([c(cc.Node)],t.prototype,"cancelBtn",void 0),t=i([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../common/utils/Utils":"Utils"}],GameRecord:[function(e,t,n){"use strict";cc._RF.push(t,"b8c0e1ygqZH16kvUeT3pOWR","GameRecord");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../common/utils/Utils"),s=e("../../common/Device"),c=e("../../manager/UIManager"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item_record=null,t.record_none=null,t.recordContent=null,t.btn_close=null,t}return o(t,e),t.prototype.start=function(){this.showRecordView(this.data)},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this))},t.prototype.onClickClose=function(){this.node.destroy()},t.prototype.showRecordView=function(e){var t=this,n=e.game_record_detail;this.record_none.active=0==n.length,this.recordContent.destroyAllChildren();for(var o=function(e){var o=cc.instantiate(i.item_record);o.active=!0,r.default.addClickEventEND(o,function(){t.onCopyRoomCode(n[e].room_code)}),o.getChildByName("spr").active=e%2==0;var a=o.getChildByName("record_num"),s=e+1+"";a.getComponent(cc.Label).string=s,o.getChildByName("record_code").getComponent(cc.Label).string=n[e].room_code,o.getChildByName("room_level").getComponent(cc.Label).string=n[e].room_name||"-",o.getChildByName("game_profit").getComponent(cc.Label).string=n[e].score;var c=o.getChildByName("game_time"),l=n[e].conclude_time,p=new RegExp("-","g"),u=r.default.timestampToTime(l).replace(p,".");u=u.slice(0,u.length-3),c.getComponent(cc.Label).string=u,i.recordContent.addChild(o)},i=this,a=0;a<n.length;a++)o(a)},t.prototype.onCopyRoomCode=function(e){if(cc.sys.isNative){var t=e;s.default.setClipBoard(t)?c.UIManager.showTips("\u590d\u5236\u6210\u529f"):c.UIManager.showTips("\u590d\u5236\u5931\u8d25")}},i([u(cc.Node)],t.prototype,"item_record",void 0),i([u(cc.Node)],t.prototype,"record_none",void 0),i([u(cc.Node)],t.prototype,"recordContent",void 0),i([u(cc.Node)],t.prototype,"btn_close",void 0),t=i([p],t)}(a.default);n.default=h,cc._RF.pop()},{"../../common/Device":"Device","../../common/utils/Utils":"Utils","../../manager/UIManager":"UIManager","../base/PopupView":"PopupView"}],GameRuleList:[function(e,t,n){"use strict";cc._RF.push(t,"699df3NBHJLQregrkGOQysE","GameRuleList");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../view/base/PopupView"),c=e("../../view/common/componet/ButtonEx"),l=e("../../manager/DataManager"),p=e("../../manager/ResManager"),u=cc._decorator,h=u.ccclass,d=u.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_tabs=[],t.infoScrollView=null,t.infoSpr=null,t.titleIdx=0,t}return o(t,e),t.prototype.start=function(){this.onTitleClickEvent(0)},t.prototype.initComponent=function(){var e=this;this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.btn_tabs.forEach(function(t,n){t.getComponent(c.default).registerClick(function(){e.onTitleClickEvent(n)})})},t.prototype.onClickClose=function(){this.close()},t.prototype.onTitleClickEvent=function(e){this.titleIdx=e;for(var t=0;t<this.btn_tabs.length;t++){var n=this.btn_tabs[t];n.getChildByName("menu_off").active=t!=e,n.getChildByName("menu_on").active=t==e}this.showRuleInfo()},t.prototype.showRuleInfo=function(){return a(this,void 0,void 0,function(){var e,t,n,o,i,a,s,c,u,h;return r(this,function(r){switch(r.label){case 0:if(this.infoScrollView.content.destroyAllChildren(),e=this.data,t=this.titleIdx,n=l.DataManager.getGameName(e),o="game/"+n+"/rule/"+n,i="",a=null,0==t?(i=o+"_1","ermj"==n&&(a=3)):1==t?(i=o+"_2","qzpj"==n&&(a=2)):2==t&&(i="game/public/image/rule/font_ty"),null==a)return[3,5];s=0,r.label=1;case 1:return s<a?(c=i+"_"+(s+1),[4,p.ResManager.loadResAsync(c,cc.SpriteFrame)]):[3,4];case 2:u=r.sent(),h=cc.instantiate(this.infoSpr),cc.isValid(u)&&(h.getComponent(cc.Sprite).spriteFrame=u,h.active=!0,this.infoScrollView.content.addChild(h)),r.label=3;case 3:return s++,[3,1];case 4:return[3,7];case 5:return[4,p.ResManager.loadResAsync(i,cc.SpriteFrame)];case 6:u=r.sent(),h=cc.instantiate(this.infoSpr),cc.isValid(u)&&(h.getComponent(cc.Sprite).spriteFrame=u,h.active=!0,this.infoScrollView.content.addChild(h)),r.label=7;case 7:return this.infoScrollView.scrollToTop(.01),[2]}})})},i([d(cc.Node)],t.prototype,"btn_tabs",void 0),i([d(cc.ScrollView)],t.prototype,"infoScrollView",void 0),i([d(cc.Node)],t.prototype,"infoSpr",void 0),t=i([h],t)}(s.default);n.default=g,cc._RF.pop()},{"../../manager/DataManager":"DataManager","../../manager/ResManager":"ResManager","../../view/base/PopupView":"PopupView","../../view/common/componet/ButtonEx":"ButtonEx"}],GoldenGoose:[function(e,t,n){"use strict";cc._RF.push(t,"530deFQ8dFCzZ2yI+nWgTcz","GoldenGoose");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../common/log/LogWrap"),r=e("../../common/Text"),s=e("../../manager/EventManager"),c=e("../../manager/NetManager"),l=e("../../manager/UIManager"),p=e("../../net/NetCmd"),u=e("../base/PopupView"),h=cc._decorator,d=h.ccclass,g=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.originPos=cc.v2(),t.hitGold=0,t.use_act_num=0,t.have_act_num=0,t.scheduleNum=null,t.isAnimation=!1,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_shake").registerClick(this.onClickShake.bind(this)),this.getItem("node_shake").on(cc.Node.EventType.TOUCH_END,this.onClickShake.bind(this))},t.prototype.initEvent=function(){s.EventManager.on(this,p.ProtocolHallCmd.HitMoneyTreeRes,this.onHitMoneyTreeRes.bind(this))},t.prototype.start=function(){this.originPos=this.getItem("node_flutter").position,this.getItem("btn_close").zoomScale=1.1,this.showView()},t.prototype.showView=function(){this.use_act_num=this.data.money_tree_data.use_act_num,this.have_act_num=this.data.money_tree_data.have_act_num,this.getItem("label_use_num").string="( \u6d88\u8017:"+this.formatInfo(this.data.money_tree_data.use_act_num)+" )",this.getItem("label_have_num").string=this.formatInfo(this.data.money_tree_data.have_act_num)+" \u79ef\u5206";var e=this.getItem("sp_yaoqianshu");e.clearTracks(),e.setToSetupPose(),e.setAnimation(0,"animation",!0)},t.prototype.onHitMoneyTreeRes=function(e){1==e.ret_status&&(this.have_act_num=e.have_act_num,c.NetManager.protocolHall.money_tree_data.have_act_num=e.have_act_num,this.getItem("label_have_num").string=this.formatInfo(e.have_act_num)+" \u79ef\u5206",this.hitGold=e.hit_gold),l.UIManager.showTips(e.msg)},t.prototype.showFlutter=function(){var e=this,t=this.getItem("label_money_num"),n=this.getItem("node_flutter");n.stopAllActions(),n.opacity=0,n.position=this.originPos,n.active=!0,null!=this.scheduleNum&&(this.unschedule(this.scheduleNum),this.scheduleNum=null);var o=cc.sequence(cc.delayTime(2.8),cc.callFunc(function(){var o=e.getItem("sp_yaoqianshu");o.clearTracks(),o.setToSetupPose(),o.setAnimation(0,"fei",!1),o.setCompleteListener(function(){a.LogWrap.log("\u98de\u5b8c\u52a8\u753b"),o.setCompleteListener(null),o.setAnimation(0,"animation",!0),c.NetManager.protocolAccount.sendGetUserInfo()}),t.string="+"+e.hitGold,n.opacity=255;var i,r=e.hitGold/parseFloat(50..toFixed(2)),s=0;e.scheduleNum=function(){i=(s+=r).toFixed(2),t.string=""+i,s>=e.hitGold&&(i=e.hitGold.toString(),t.string=""+parseFloat(i).toFixed(2),e.unschedule(e.scheduleNum),e.scheduleNum=null)},e.schedule(e.scheduleNum,.01,cc.macro.REPEAT_FOREVER)}),cc.moveBy(.5,cc.v2(0,50)),cc.delayTime(.6),cc.fadeOut(1),cc.callFunc(function(){n.stopAllActions(),n.active=!1}));n.runAction(o)},t.prototype.onClickClose=function(){c.NetManager.protocolAccount.sendGetUserInfo(),this.close()},t.prototype.onClickShake=function(){if(this.have_act_num>=this.use_act_num){this.have_act_num-=this.use_act_num,c.NetManager.protocolHall.sendHitMoneyTreeReq();var e=this.getItem("sp_yaoqianshu");e.clearTracks(),e.setToSetupPose(),e.setAnimation(0,"yao",!1),this.showFlutter()}else l.UIManager.showTips(r.Tips.ShakeGoldenGoose)},t.prototype.formatInfo=function(e){return e>=1e4?(e/1e4).toString().substring(0,4)+"W":e},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.unschedule(this.scheduleNum),this.scheduleNum=null},t=i([d],t)}(u.default));n.default=g,cc._RF.pop()},{"../../common/Text":"Text","../../common/log/LogWrap":"LogWrap","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],HallSetting:[function(e,t,n){"use strict";cc._RF.push(t,"c007cXvE8dCS4+/1VHE7p8F","HallSetting");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../common/componet/ButtonEx"),s=e("../../common/log/LogWrap"),c=e("../../manager/AudioManager"),l=e("../../manager/DataManager"),p=e("../../manager/NetManager"),u=e("../../manager/UIManager"),h=e("../common/List"),d=cc._decorator,g=d.ccclass,f=d.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MusicSlider=null,t.SoundSlider=null,t.BtnExit=null,t.BtnClose=null,t.BtnMusic=null,t.BtnSound=null,t.scorll_bgm=null,t.bgms=[],t}return o(t,e),t.prototype.start=function(){if(this.bgms=l.DataManager.getBgms(),this.getItem("btn_select_bgm").disabledScale(),this.updateUI(),u.UIManager.isInGameView()){var e=l.DataManager.getGameName(l.DataManager.gameType);if(e){var t=l.DataManager.getGameVersion(e)||"1.0.0";this.getItem("label_version").string=e+" "+t}else this.getItem("label_version").string=l.DataManager.version}else this.getItem("label_version").string=l.DataManager.version},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_exit").registerClick(this.onClickExit.bind(this)),this.getItem("btn_commit").registerClick(this.onClickCommit.bind(this)),this.getItem("btn_music").registerClick(this.onClickMusic.bind(this)),this.getItem("btn_sound").registerClick(this.onClickSound.bind(this)),this.getItem("btn_select_bgm").registerClick(this.onClickBgm.bind(this)),s.LogWrap.log(c.AudioManager.bgmVolume),s.LogWrap.log(c.AudioManager.sfxVolume)},t.prototype.onClickClose=function(){this.close(),l.DataManager.saveSoundConfig(),l.DataManager.saveVibrate()},t.prototype.onClickExit=function(){this.node.destroy(),p.NetManager.closeAll(),l.DataManager.clearLoginInfo(),u.UIManager.open("prefabs/LoginView")},t.prototype.updateUI=function(){this.getItem("music_open").active=c.AudioManager.playMusic,this.getItem("music_close").active=!c.AudioManager.playMusic,this.getItem("sound_open").active=c.AudioManager.playSound,this.getItem("sound_close").active=!c.AudioManager.playSound,this.getItem("slider_music").progress=c.AudioManager.bgmVolume,this.getItem("slider_sound").progress=c.AudioManager.sfxVolume,this.getItem("label_bgm").string=this.bgms[l.DataManager.bgm]?this.bgms[l.DataManager.bgm].name:"\u66f2\u76ee1";var e=this.getItem("slider_music").node,t=e.width*c.AudioManager.bgmVolume,n=e.getChildByName("Mask");n.width=t,t=(e=this.getItem("slider_sound").node).width*c.AudioManager.sfxVolume,(n=e.getChildByName("Mask")).width=t,this.getItem("toggle_vibrate").isChecked=l.DataManager.isVibrate,this.getItem("img_off").active=!l.DataManager.isVibrate},t.prototype.onClickMusic=function(){c.AudioManager.playMusic=!c.AudioManager.playMusic,c.AudioManager.playMusic?c.AudioManager.setBGMVolume(1):c.AudioManager.setBGMVolume(0),this.updateUI()},t.prototype.onClickSound=function(){c.AudioManager.playSound=!c.AudioManager.playSound,c.AudioManager.playSound?c.AudioManager.setSFXVolume(1):c.AudioManager.setSFXVolume(0),this.updateUI()},t.prototype.onClickBgm=function(){this.getItem("node_select").active=!this.getItem("node_select").active,this.getItem("img_select_bgm").height=this.getItem("node_select").active?195:45,this.getItem("img_arrow").scaleY=this.getItem("node_select").active?1:-1,this.getItem("node_select").active&&this.updateBgms()},t.prototype.onClickCommit=function(){s.LogWrap.submitLog()?u.UIManager.showTips("\u63d0\u4ea4\u65e5\u5fd7\u6210\u529f"):u.UIManager.showTips("\u63d0\u4ea4\u65e5\u5fd7\u5931\u8d25")},t.prototype.onSlider=function(e){var t=e.progress,n=e.node.name;s.LogWrap.log(n,t),"slider_music"==n?(c.AudioManager.setBGMVolume(t),this.updateUI()):"slider_sound"==n&&(c.AudioManager.setSFXVolume(t),this.updateUI())},t.prototype.onClickVibrate=function(e){l.DataManager.isVibrate=e.isChecked,this.getItem("img_off").active=!l.DataManager.isVibrate},t.prototype.onListRender=function(e,t){var n=this;e.getComponentInChildren(cc.Label).string=this.bgms[t].name,e.getComponent(r.default).registerClick(function(){l.DataManager.bgm=t,n.bgms[t]&&(n.getItem("label_bgm").string=n.bgms[t].name,l.DataManager.saveBgm(),u.UIManager.isInGameView()||c.AudioManager.playHallBGM()),n.onClickBgm()})},t.prototype.updateBgms=function(){this.bgms=l.DataManager.getBgms(),this.scorll_bgm.numItems=this.bgms.length},i([f(cc.Slider)],t.prototype,"MusicSlider",void 0),i([f(cc.Slider)],t.prototype,"SoundSlider",void 0),i([f(cc.Node)],t.prototype,"BtnExit",void 0),i([f(cc.Node)],t.prototype,"BtnClose",void 0),i([f(cc.Node)],t.prototype,"BtnMusic",void 0),i([f(cc.Node)],t.prototype,"BtnSound",void 0),i([f(h.default)],t.prototype,"scorll_bgm",void 0),t=i([g],t)}(a.default);n.default=m,cc._RF.pop()},{"../../common/log/LogWrap":"LogWrap","../../manager/AudioManager":"AudioManager","../../manager/DataManager":"DataManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../base/PopupView":"PopupView","../common/List":"List","../common/componet/ButtonEx":"ButtonEx"}],HallView:[function(e,t,n){"use strict";cc._RF.push(t,"85ccatgiC5H4ZHvxhEabCJ7","HallView");var o,i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},s=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var c=e("./base/BaseView"),l=e("../manager/EventManager"),p=e("../net/NetCmd"),u=e("../Define"),h=e("../manager/UIManager"),d=e("../manager/DataManager"),g=e("../common/Text"),f=e("../manager/NetManager"),m=e("../manager/ResManager"),_=e("../common/utils/Utils"),y=e("../common/log/LogWrap"),v=e("./hall/GameItem"),b=e("../common/Device"),C=e("../common/UIHelper"),M=e("../manager/AudioManager"),w=e("./common/CountDown"),I=((o={})[u.GameTab.All]="quanbu",o[u.GameTab.Hot]="remen",o[u.GameTab.DianZi]="dianzi",o[u.GameTab.BaiRen]="bairen",o),R=u.GameTab.All,P=0,k=cc._decorator,E=k.ccclass,N=k.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.coin=null,t}return i(t,e),t.prototype.openAnimation=function(){var e=this,t=this.getItem("page_game").node,n=this.getItem("node_girl").x,o=t.x;t.x=cc.winSize.width/2,this.getItem("node_girl").x=-cc.winSize.width/2-this.getItem("node_girl").width;this.getItem("node_girl").runAction(cc.moveTo(.4,n,this.getItem("node_girl").y).easing(cc.easeOut(.4))),t.runAction(cc.sequence(cc.moveTo(.4,o,t.y).easing(cc.easeOut(.4)),cc.callFunc(function(){return r(e,void 0,void 0,function(){var e,t;return s(this,function(n){switch(n.label){case 0:return[4,m.ResManager.loadResAsync("prefabs/common/Chat",cc.Prefab,!1)];case 1:return(e=n.sent())&&cc.isValid(this.node)&&(t=cc.instantiate(e),this.node.addChild(t)),[2]}})})})))},t.prototype.initComponent=function(){this.getItem("btn_head").registerClick(this.onClickHead.bind(this)),this.getItem("btn_add").registerClick(this.onClickAdd.bind(this)),this.getItem("btn_spread").registerClick(this.onClickSpread.bind(this)),this.getItem("btn_email").registerClick(this.onClickEmail.bind(this)),this.getItem("btn_activity").registerClick(this.onClickActivity.bind(this)),this.getItem("btn_bank").registerClick(this.onClickBank.bind(this)),this.getItem("btn_recharge").registerClick(this.onClickRecharge.bind(this)),this.getItem("btn_battle").registerClick(this.onClickBattle.bind(this)),this.getItem("btn_rank").registerClick(this.onClickRank.bind(this)),this.getItem("btn_set").registerClick(this.onClickSet.bind(this)),this.getItem("btn_fankui").registerClick(this.onClickFanKui.bind(this)),this.getItem("btn_bind").registerClick(this.onClickBind.bind(this)),this.getItem("btn_club").registerClick(this.onClickClub.bind(this)),this.getItem("btn_quanbu").registerClick(this.onClickAll.bind(this)).disabledScale(),this.getItem("btn_remen").registerClick(this.onClickHot.bind(this)).disabledScale(),this.getItem("btn_dianzi").registerClick(this.onClickDigital.bind(this)).disabledScale(),this.getItem("btn_bairen").registerClick(this.onClickBaiRen.bind(this)).disabledScale();var e=.4*(cc.winSize.width-1280);y.LogWrap.log("offsetX:",e),e>0?(this.getItem("node_girl").x-=e,this.getItem("page_game").node.x-=e):e=0,this.getItem("page_game").node.width+=(cc.winSize.width-1280)/2+e,this.getItem("page_game").content.getComponent(cc.Widget).updateAlignment(),this.getItem("page_game").node.on("scrolling",this.onPageTurn.bind(this)),this.getItem("btn_red_packet").registerClick(this.onClickRedPacket.bind(this)),this.getItem("btn_cashcow").registerClick(this.onClickCashCow.bind(this))},t.prototype.initEvent=function(){l.EventManager.on(this,p.ProtocolAccountCmd.GetUserInfoResp,this.onGetUserInfoResp.bind(this)),l.EventManager.on(this,p.ProtocolAccountCmd.AccoutSafetyResp,this.onAccoutSafetyResp.bind(this)),l.EventManager.on(this,p.ProtocolHallCmd.GetGameAllListResp,this.onGetGameAllListResp.bind(this)),l.EventManager.on(this,p.ProtocolHallCmd.AskJoinedGameInfoResp,this.onAskJoinedGameInfoResp.bind(this)),l.EventManager.on(this,p.ProtocolHallCmd.EnterRoomResp,this.onEnterRoomResp.bind(this)),l.EventManager.on(this,p.ProtocolHallCmd.FriendGameJoinResp,this.onFriendGameJoinResp.bind(this)),l.EventManager.on(this,p.ProtocolHallCmd.FriendGameGreateResp,this.onFriendGameJoinResp.bind(this)),l.EventManager.on(this,p.ProtocolHallCmd.BindWindowResp,this.onBindWindowResp.bind(this)),l.EventManager.on(this,p.ProtocolHallCmd.NotReadNoticeNotify,this.onNotReadNoticeNotify.bind(this)),l.EventManager.on(this,p.ProtocolHallCmd.KyGameUrlResp,this.onKyGameUrlResp.bind(this)),l.EventManager.on(this,p.ProtocolHallCmd.PromoteMsgResp,this.onPromoteMsgResp.bind(this)),l.EventManager.on(this,p.ProtocolHallCmd.GetGameRecordListResp,this.onGetGameRecordListResp.bind(this)),l.EventManager.on(this,p.ProtocolHallCmd.GetUserMailResp,this.onGetUserMailResp.bind(this)),l.EventManager.on(this,p.ProtocolBankCmd.RechargePlatformResp,this.onRechargePlatformResp.bind(this)),l.EventManager.on(this,p.ProtocolHallCmd.GetAllAttainmentResp,this.onGetAllAttainmentResp.bind(this)),l.EventManager.on(this,p.ProtocolHallCmd.ActivityListResp,this.onActivityListResp.bind(this)),l.EventManager.on(this,p.ProtocolHallCmd.ActivityResp,this.onActivityResp.bind(this)),l.EventManager.on(this,u.EventDef.UpdateUserInfo,this.updateUserInfo),l.EventManager.on(this,p.ProtocolHallCmd.GetRedbagRainActRes,this.onGetRedbagRainActRes.bind(this)),l.EventManager.on(this,p.ProtocolHallCmd.GetMoneyTreeActRes,this.onGetMoneyTreeActRes.bind(this)),l.EventManager.on(this,p.ProtocolHallCmd.GetLobbyRankListShowRes,this.updateRank.bind(this)),l.EventManager.on(this,p.ProtocolAccountCmd.LoginResp,this.onLoginResp.bind(this))},t.prototype.onLoginResp=function(){y.LogWrap.log("\u5927\u5385\u754c\u9762\u6536\u5230\u91cd\u8fde"),f.NetManager.protocolHall.sendGetRedbagRainActReq(),f.NetManager.protocolHall.sendGetMoneyTreeActReq()},t.prototype.start=function(){this.initSpine(),this.updateUserInfo(),this.openAnimation(),this.updateTab(I[R]),h.UIManager.hideMarquee(),this.showPhoneBindReward(),f.NetManager.protocolAccount.sendGetUserInfo(),f.NetManager.protocolHall.sendGetRedbagRainActReq(),f.NetManager.protocolHall.sendGetMoneyTreeActReq(),f.NetManager.protocolHall.sendGetLobbyRankListShowReq(),M.AudioManager.playHallBGM()},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),P=this.getItem("page_game").getCurrentPageIndex()},t.prototype.showPhoneBindReward=function(){d.DataManager.userSafeInfo.has_bind_phone?d.DataManager.isFirst&&(d.DataManager.isFirst=!1,h.UIManager.popup("prefabs/hall/RegisterBindAction")):d.DataManager.isFirst&&(d.DataManager.isFirst=!1,d.DataManager.bindPhoneGiveCoin>0?h.UIManager.popup("prefabs/hall/RegisterAction"):h.UIManager.popup("prefabs/hall/RegisterBindAction"))},t.prototype.onClickHead=function(){h.UIManager.popup("prefabs/account/HomePage")},t.prototype.onClickAdd=function(){f.NetManager.protocolBank.sendRechargePlatformReq()},t.prototype.onClickSpread=function(){h.UIManager.popup("prefabs/hall/Promotion")},t.prototype.onClickEmail=function(){h.UIManager.popup("prefabs/hall/Mail")},t.prototype.onClickActivity=function(){f.NetManager.protocolHall.sendActionReq()},t.prototype.onClickBank=function(){var e=function(){C.default.checkBindSafeCode(function(e){e&&h.UIManager.popup("prefabs/bank/Bank")})&&h.UIManager.popup("prefabs/bank/Bank")};if(d.DataManager.isAccount()){if(d.DataManager.isCheckBindPhone("bank_need_phone")){if(!C.default.checkBindPhone(function(t){t&&e()},g.Tips.BindPhoneAndSafeCode))return}else if(!d.DataManager.userSafeInfo.has_bind_phone)return void h.UIManager.showTipsPopup(g.Tips.BindPhoneAndSafeCode,function(t){t?h.UIManager.popup("prefabs/account/BindPhoneNum",e):e()},3,{sure:"\u7ed1   \u5b9a",cancel:"\u8df3   \u8fc7"})}else if(!C.default.checkBindPhone(function(t){t&&e()},g.Tips.BindPhoneAndSafeCode))return;e()},t.prototype.onClickRecharge=function(){f.NetManager.protocolBank.sendRechargePlatformReq()},t.prototype.onClickBattle=function(){var e=function(){d.DataManager.userInfo.vip_level>=f.NetManager.protocolAccount.vip_lock_level?h.UIManager.open("prefabs/hall/CreateRoom"):h.UIManager.showTipsPopup("VIP\u7b49\u7ea7\u2265"+f.NetManager.protocolAccount.vip_lock_level+"\u624d\u53ef\u4f7f\u7528\u6b64\u529f\u80fd",function(e){e&&f.NetManager.protocolBank.sendRechargePlatformReq()})};if(d.DataManager.isAccount()){if(d.DataManager.isCheckBindPhone("friend_need_phone")&&!C.default.checkBindPhone(function(t){t&&e()}))return}else if(!C.default.checkBindPhone(function(t){t&&e()}))return;e()},t.prototype.onClickRank=function(){h.UIManager.popup("prefabs/hall/Rank")},t.prototype.onClickSet=function(){h.UIManager.popup("prefabs/hall/HallSetting")},t.prototype.onClickFanKui=function(){f.NetManager.requestPostUrl(p.HttpCmd.GetVersion,{channel:d.DataManager.channel},function(e,t){if(1==t.ok){var n=t.info;if(""==n.serviceLink)return void h.UIManager.showTips(g.Tips.NotKeFu);b.default.openUrl(n.serviceLink)}else h.UIManager.showTips(g.Tips.NotKeFu)})},t.prototype.onClickBind=function(){f.NetManager.protocolHall.sendBindWindow()},t.prototype.onClickClub=function(){var e=function(){d.DataManager.userInfo.vip_level>=f.NetManager.protocolAccount.vip_lock_level?h.UIManager.open("prefabs/club/ClubView"):h.UIManager.showTipsPopup("VIP\u7b49\u7ea7\u2265"+f.NetManager.protocolAccount.vip_lock_level+"\u624d\u53ef\u4f7f\u7528\u6b64\u529f\u80fd",function(e){e&&f.NetManager.protocolBank.sendRechargePlatformReq()})};if(d.DataManager.isAccount()){if(d.DataManager.isCheckBindPhone("club_need_phone")&&!C.default.checkBindPhone(function(t){t&&e()}))return}else if(!C.default.checkBindPhone(function(t){t&&e()}))return;e()},t.prototype.onClickAll=function(){P=0,this.updateTab("quanbu",u.GameTab.All)},t.prototype.onClickHot=function(){P=0,this.updateTab("remen",u.GameTab.Hot)},t.prototype.onClickDigital=function(){P=0,this.updateTab("dianzi",u.GameTab.DianZi)},t.prototype.onClickBaiRen=function(){P=0,this.updateTab("bairen",u.GameTab.BaiRen)},t.prototype.updateTab=function(e,t){t&&R==t||(R=t||R,this.getItem("node_tab").children.forEach(function(t){var n=t.getComponent(sp.Skeleton),o=t.name.replace("btn_","");o==e?(n.setSkin(o),n.setToSetupPose(),n.setAnimation(0,"animation",!0)):(n.setSkin(o+"1"),n.setToSetupPose(),n.setAnimation(0,"animation2",!0))}),this.updateGames())},t.prototype.initSpine=function(){},t.prototype.updateUserInfo=function(){return r(this,void 0,void 0,function(){var e,t,n;return s(this,function(o){switch(o.label){case 0:return(e=d.DataManager.userInfo)&&this.isValid?(this.onNotReadNoticeNotify(),C.default.setHeadIcon(e.headimgurl,this.getItem("img_head")),this.getItem("label_money").string=_.default.getFormatGold(e.gold),t=e.vip_level&&e.vip_level||0,[4,m.ResManager.loadResAsync("view/common/img_touxiangkuang_v"+t,cc.SpriteFrame,!1)]):[2];case 1:return(n=o.sent())&&(this.getItem("img_frame").getComponent(cc.Sprite).spriteFrame=n),C.default.setVipLevel(t,this.getItem("img_vip")),d.DataManager.userSafeInfo?[2]:(y.LogWrap.log("\u65e0\u7528\u6237\u5b89\u5168\u4fe1\u606f"),[2])}})})},t.prototype.updateRank=function(e){return r(this,void 0,void 0,function(){var t,n;return s(this,function(o){for(t=0;t<3;t++)n=this.getItem("img_toutou"+(t+1)),e.gold_rank_list[t]&&C.default.setCircleHeadIcon(e.gold_rank_list[t].headimg_id,n);return[2]})})},t.prototype.updateGames=function(){return r(this,void 0,void 0,function(){var e,t,n,o,i,a,r,c,l,p,u,h,g,_,b,C,M;return s(this,function(s){switch(s.label){case 0:if(!(e=d.DataManager.games))return f.NetManager.protocolHall.sendGetGameAllList(),[2];for(t=[],e.game_lists.forEach(function(e){var n=e.game_tab&R;d.DataManager.getGameName(e.game_type)&&n&&t.push(e)}),(n=this.getItem("page_game")).stopAutoScroll(),o=n.content,i=n.node.getContentSize(),o.x=-i.width/2,a=t.length,r=Math.ceil(a/8),n.removeAllPages(),u=0;u<r;u++)(g=o.children[u])||((g=new cc.Node).name="page"+u,g.setContentSize(i.width,i.height),this.getItem("page_game").addPage(g)),g.children.forEach(function(e){e.active=!1});c=(cc.winSize.width-1280)/2,l=100+.2*c,p=(i.width-l)/4,y.LogWrap.log("updateGames content",i.width,i.height,p,l,o.x),u=0,s.label=1;case 1:return u<a?(h=Math.floor(u/8),g=o.children[h],_=u%8,(b=g.children[_])?[3,3]:[4,m.ResManager.loadResAsync("prefabs/hall/GameItem",cc.Prefab)]):[3,5];case 2:C=s.sent(),b=cc.instantiate(C),g.addChild(b),s.label=3;case 3:b.active=!0,M=o.x+b.width/2+l,_%2==0?(b.x=M+_/2*p,b.y=100):(b.x=M+Math.floor(_/2)*p,b.y=-100),b.getComponent(v.default).init(t[u]),s.label=4;case 4:return u++,[3,1];case 5:return r>P&&(y.LogWrap.log("DefaultPage",P),n.scrollToPage(P,0)),this.onPageTurn(),[2]}})})},t.prototype.onPageTurn=function(){for(var e=this.getItem("page_game").node,t=e.convertToWorldSpaceAR(cc.Vec2.ZERO),n=this.getItem("page_game").content,o=cc.rect(t.x,t.y+e.height/2,e.width,e.height),i=0;i<n.childrenCount;i++){n.children[i].children.forEach(function(e){var t=e.convertToWorldSpaceAR(cc.Vec2.ZERO),n=cc.rect(t.x-e.width/2,t.y+e.height/2,e.width,e.height);o.intersects(n)?(e.opacity=255,e.getComponent(v.default).loadSpine()):e.opacity=0})}},t.prototype.updateRedPoint=function(e){this.getItem("email_point").active=e},t.prototype.onGetUserInfoResp=function(){this.updateUserInfo()},t.prototype.onAccoutSafetyResp=function(){this.showPhoneBindReward()},t.prototype.onGetGameAllListResp=function(){this.updateGames()},t.prototype.onAskJoinedGameInfoResp=function(){},t.prototype.onEnterRoomResp=function(){},t.prototype.onFriendGameJoinResp=function(){},t.prototype.onBindWindowResp=function(e){h.UIManager.popup("prefabs/account/BindInviteCode",e)},t.prototype.onBindParentIdResp=function(e){},t.prototype.onNotReadNoticeNotify=function(){this.getItem("email_point").active=f.NetManager.protocolHall.is_have_mail,this.getItem("activity_point").active=f.NetManager.protocolHall.is_have_activity,this.getItem("spread_point").active=f.NetManager.protocolHall.is_have_promotion},t.prototype.onKyGameUrlResp=function(e){e.ky_game_url?h.UIManager.popup("prefabs/hall/WebView",{url:e.ky_game_url,game_type:e.game_type}):h.UIManager.showTips(g.Tips.NetError)},t.prototype.onPromoteMsgResp=function(){},t.prototype.onGetGoldRankListResp=function(e){h.UIManager.popup("prefabs/hall/RankList",e)},t.prototype.onGetGameRecordListResp=function(){},t.prototype.onGetUserMailResp=function(){},t.prototype.onRechargePlatformResp=function(e){e.platform_Info.length>0?h.UIManager.popup("prefabs/hall/RechargeView",e):h.UIManager.showTips("\u6682\u65e0\u5145\u503c\u5e73\u53f0, \u8bf7\u8054\u7cfb\u5ba2\u670d")},t.prototype.onGetAllAttainmentResp=function(){},t.prototype.onActivityListResp=function(e){e.action_type.length>0?h.UIManager.popup("prefabs/activity/Activity",e):h.UIManager.showTips(g.Tips.NotActivity)},t.prototype.onActivityResp=function(){},t.prototype.onClickRedPacket=function(){h.UIManager.showTips(g.Tips.RedPacketRainCD)},t.prototype.onClickCashCow=function(){var e=this,t={money_tree_data:f.NetManager.protocolHall.money_tree_data,callFunc:function(){e.playCoinAnim()}};h.UIManager.popup("prefabs/hall/GoldenGoose",t)},t.prototype.onGetRedbagRainActRes=function(e){var t=this;y.LogWrap.log("\u6536\u5230\u7ea2\u5305\u96e8\u7684\u901a\u77e5",e);var n=e.switch_state;this.getItem("btn_red_packet").node.active=1==n;var o=e.left_time,i=null;0!=e.left_act_time&&(i=function(){y.LogWrap.log("%c\u89e6\u53d1\u7ea2\u5305\u96e8","color:red;font-size:34px"),e.callFunc=function(){t.playCoinAnim()},h.UIManager.popup("prefabs/hall/RedPacketRain",e)}),this.getItem("btn_red_packet").node.getComponent(w.default).setTimeSchedule(1==e.switch_state,o,i)},t.prototype.onGetMoneyTreeActRes=function(e){y.LogWrap.log("\u6536\u5230\u6447\u94b1\u6811\u7684\u901a\u77e5",e);var t=e.switch_state;this.getItem("btn_cashcow").node.active=1==t,f.NetManager.protocolHall.money_tree_data=e},t.prototype.playCoinAnim=function(){var e=cc.v2(0,0),t=this.getItem("img_yuanbao"),n=cc.find("Canvas/node_parent/node_system"),o=cc.instantiate(this.getItem("node_coin"));o.parent=n;var i=t.parent.convertToWorldSpaceAR(t.position),a=cc.v2(o.convertToNodeSpaceAR(i));this.playCoinFlyAnim(e,a)},t.prototype.getCirclePoints=function(e,t,n,o){void 0===o&&(o=60);for(var i=[],a=Math.PI/180*Math.round(360/n),r=0;r<n;r++){var s=t.x+e*Math.sin(a*r),c=t.y+e*Math.cos(a*r);i.unshift(cc.v3(s+Math.random()*o,c+Math.random()*o,0))}return i},t.prototype.playCoinFlyAnim=function(e,t,n){return void 0===n&&(n=130),r(this,void 0,void 0,function(){var o,i,a,r,c=this;return s(this,function(s){return o=10*Math.random()+5,i=cc.find("Canvas/node_parent/node_system/node_coin"),a=this.getCirclePoints(n,e,o),(r=(r=a.map(function(n){var o=cc.instantiate(c.coin);return o.setPosition(e),i.addChild(o),{node:o,stPos:e,mdPos:n,edPos:t,dis:n.sub(t).mag()}})).sort(function(e,t){return e.dis-t.dis>0?1:e.dis-t.dis<0?-1:0})).forEach(function(e,t){e.node.runAction(cc.sequence(cc.moveTo(.3,e.mdPos),cc.delayTime(.05*t),cc.moveTo(.5,e.edPos),cc.callFunc(function(){e.node.removeFromParent(),t==r.length-1&&i.removeFromParent()})))}),[2]})})},a([N(cc.Prefab)],t.prototype,"coin",void 0),t=a([E],t)}(c.default);n.default=T,cc._RF.pop()},{"../Define":"Define","../common/Device":"Device","../common/Text":"Text","../common/UIHelper":"UIHelper","../common/log/LogWrap":"LogWrap","../common/utils/Utils":"Utils","../manager/AudioManager":"AudioManager","../manager/DataManager":"DataManager","../manager/EventManager":"EventManager","../manager/NetManager":"NetManager","../manager/ResManager":"ResManager","../manager/UIManager":"UIManager","../net/NetCmd":"NetCmd","./base/BaseView":"BaseView","./common/CountDown":"CountDown","./hall/GameItem":"GameItem"}],HomePage:[function(e,t,n){"use strict";cc._RF.push(t,"3ff07WAEw5NYYpCMlgA5U3F","HomePage");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../common/List"),c=e("../base/PopupView"),l=e("../common/componet/ButtonEx"),p=e("../../manager/EventManager"),u=e("../../net/NetCmd"),h=e("../../Define"),d=e("../../manager/DataManager"),g=e("../../common/utils/Utils"),f=e("../../common/UIHelper"),m=e("../../common/Device"),_=e("../../manager/UIManager"),y=e("../../manager/NetManager"),v=e("../../common/Text"),b=e("../../manager/ResManager"),C=cc._decorator,M=C.ccclass,w=C.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_data_game=null,t.scroll_data_other=null,t.label_page_num=null,t.label_day_start=null,t.label_day_end=null,t.label_type=null,t.node_game=null,t.node_other=null,t.img_btns=[],t.mian_type=1,t.sub_type=0,t.page=1,t.start_time=0,t.end_time=0,t._start_time="",t._end_time="",t._game_str="\u5168\u90e8\u6e38\u620f",t._other_str="\u5168\u90e8\u7c7b\u578b",t.page_count=0,t.time_days=30,t}return o(t,e),t.prototype.start=function(){this.updateUserInfo();var e=(new Date).getTime(),t=e-24*(this.time_days-1)*60*60*1e3,n=g.default.getFormatDate(e,"yyyy-MM-dd"),o=g.default.getFormatDate(t,"yyyy-MM-dd");this.start_time=t,this.end_time=e,this._start_time=o,this._end_time=n,this.send(),this.initTopLabel()},t.prototype.openAnimation=function(){var e=this.getItem("btn_close").node;e.scale=.1,e.runAction(cc.scaleTo(.3,1)),this.getComponent(cc.Animation).play(),this.getItem("sp_title").addAnimation(0,"loop",!0)},t.prototype.initComponent=function(){var e=this;this.setBtnEnable(this.getItem("btn_last"),!1),this.setBtnEnable(this.getItem("btn_next"),!1),this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_modify").registerClick(this.onClickEditName.bind(this)),this.getItem("btn_head").registerClick(this.onClickEditHead.bind(this)),this.getItem("btn_recharge").registerClick(this.onClickRecharge.bind(this)),this.getItem("btn_copy").registerClick(this.onClickCopy.bind(this)),this.getItem("btn_vip").registerClick(this.onClickVip.bind(this)),this.getItem("btn_achievemtnt").registerClick(this.onClickAchievement.bind(this)),this.getItem("btn_gamelist").registerClick(this.onClickGame.bind(this)),this.getItem("btn_otherlist").registerClick(this.onClickOther.bind(this)),this.getItem("btn_day").registerClick(this.onClickDay.bind(this)),this.getItem("btn_last").registerClick(this.onClickLast.bind(this)),this.getItem("btn_next").registerClick(this.onClickNext.bind(this)),this.getItem("node_buttons").getComponentsInChildren(l.default).forEach(function(t,n){t.registerClick(function(){e.getItem("sp_button").setAnimation(0,"btn"+(n+1),!0);var t=d.DataManager.userSafeInfo;switch(n){case 0:if(t.has_safe_password)return void _.UIManager.popup("prefabs/account/ChangeSafeCodePopup");if(d.DataManager.isAccount())_.UIManager.popup("prefabs/account/SetSafeCodePopup");else{if(!t.has_bind_phone)return _.UIManager.showTips(v.Tips.BindPhoneShort),void _.UIManager.popup("prefabs/account/BindPhoneNum");_.UIManager.popup("prefabs/account/SetSafeCodePopup")}break;case 1:if(t.has_bind_phone)return void _.UIManager.popup("prefabs/account/AlertPhoneNum");_.UIManager.popup("prefabs/account/BindPhoneNum");break;case 2:if(t.has_password)return void _.UIManager.popup("prefabs/account/ChangePasswordPopup");if(!t.has_bind_phone)return _.UIManager.showTips(v.Tips.BindPhoneShort),void _.UIManager.popup("prefabs/account/BindPhoneNum");_.UIManager.popup("prefabs/account/SetPasswordPopup")}})})},t.prototype.initEvent=function(){p.EventManager.on(this,h.EventDef.UpdateUserInfo,this.updateUserInfo),p.EventManager.on(this,u.ProtocolHallCmd.GoldDetialRes,this.onGoldDetialResp.bind(this)),p.EventManager.on(this,h.EventDef.UserSelectTimeMsg,this.sendSelect.bind(this))},t.prototype.sendSelect=function(e){this.start_time=Number(e.start),this.end_time=Number(e.end),this._start_time=e.startstr,this._end_time=e.endstr,1==this.mian_type?(0!=e.sub_type?this.sub_type=e.sub_type:this.sub_type=0,this._game_str=e.typestr):(6==e.sub_type?this.sub_type=9:this.sub_type=e.sub_type,this._other_str=e.typestr),this.page=1,this.send(),this.initTopLabel()},t.prototype.send=function(){var e={cur_page:this.page,main_type:this.mian_type,sub_type:Number(this.sub_type),time_start:Math.floor(this.start_time/1e3)-28800,time_end:Math.floor(this.end_time/1e3)};y.NetManager.protocolHall.sendGetGoldDetialReq(e)},t.prototype.initList=function(e){this.page=e.cur_page,this.page_count=Math.ceil(e.total_page/5),this.setBtnEnable(this.getItem("btn_last"),1!=e.cur_page),this.setBtnEnable(this.getItem("btn_next"),this.page_count!=e.cur_page),this.label_page_num.string=this.page+"/"+this.page_count,this.data=e.game_detial,1==e.data_type?this.scroll_data_game.numItems=e.game_detial.length:this.scroll_data_other.numItems=e.game_detial.length},t.prototype.onGoldDetialResp=function(e){this.initList(e)},t.prototype.updateUserInfo=function(){return a(this,void 0,void 0,function(){var e,t,n,o,i,a;return r(this,function(r){switch(r.label){case 0:return e=d.DataManager.userInfo,t=d.DataManager.userSafeInfo,n=g.default.timestampToTimeString(1e3*t.last_login_time),o=m.default.getLocation(),this.getItem("label_login_time").string="\u6700\u8fd1\u767b\u5165:"+(o.cityName&&o.cityName+" "||"")+(n?n.split(" ")[0]:""),f.default.setHeadIcon(e.headimgurl,this.getItem("player_head")),this.getItem("label_money").string=g.default.getFormatGold(e.gold),this.getItem("label_name").string=g.default.getSubStringLengTxt(e.nickname)||e.userid+"",this.getItem("label_id").string=e.platform_userid||e.userid+"",i=e.vip_level&&e.vip_level||0,[4,b.ResManager.loadResAsync("view/home_page/img_txk_geren_v"+i,cc.SpriteFrame)];case 1:return(a=r.sent())&&(this.getItem("img_vip_kuang").getComponent(cc.Sprite).spriteFrame=a),f.default.setVipLevel(i,this.getItem("img_vip")),[2]}})})},t.prototype.onClickGame=function(){this.mian_type=1;var e=this.getItem("btn_gamelist").node,t=this.getItem("btn_otherlist").node;e.getChildByName("text1").active=!0,e.getChildByName("text2").active=!1,t.getChildByName("text1").active=!1,t.getChildByName("text2").active=!0,e.getComponent(cc.Sprite).spriteFrame=this.img_btns[0],e.getComponent(cc.Sprite).spriteFrame=this.img_btns[0],t.getComponent(cc.Sprite).spriteFrame=this.img_btns[1],this.initTopLabel(),this.page=1,this.send()},t.prototype.onClickOther=function(){this.mian_type=2;var e=this.getItem("btn_gamelist").node,t=this.getItem("btn_otherlist").node;e.getChildByName("text1").active=!1,e.getChildByName("text2").active=!0,t.getChildByName("text1").active=!0,t.getChildByName("text2").active=!1,e.getComponent(cc.Sprite).spriteFrame=this.img_btns[1],t.getComponent(cc.Sprite).spriteFrame=this.img_btns[0],this.initTopLabel(),this.page=1,this.send()},t.prototype.onClickDay=function(){var e,t=7;if(1==this.mian_type){var n=1;d.DataManager.games.game_lists.forEach(function(e,t){e.is_open&&(n+=1)}),t=n,e=d.DataManager.games.game_lists}else t=d.DataManager.userInfo.query_types.length,e=d.DataManager.userInfo.query_types;var o={type:this.mian_type,tag:this.mian_type,num:t,game:e,daynum:this.time_days};_.UIManager.popup("prefabs/hall/PromotionSelect",o)},t.prototype.onClickClose=function(){this.close(!1)},t.prototype.onClickEditName=function(){_.UIManager.popup("prefabs/account/EditNickName")},t.prototype.onClickEditHead=function(){_.UIManager.popup("prefabs/account/EditReplaceHead")},t.prototype.onClickRecharge=function(){y.NetManager.protocolBank.sendRechargePlatformReq()},t.prototype.onClickCopy=function(){var e=this.getItem("label_id").string;m.default.setClipBoard(e)&&_.UIManager.showTips(v.Tips.CopySuccess)},t.prototype.onClickVip=function(){_.UIManager.popup("prefabs/account/VipPrivilege")},t.prototype.onClickAchievement=function(){_.UIManager.popup("prefabs/account/Achievement")},t.prototype.onClickLast=function(){this.page-=1,this.page<1&&(this.page=1),this.send()},t.prototype.onClickNext=function(){this.page+=1,this.page>this.page_count&&(this.page=this.page_count),this.send()},t.prototype.setBtnEnable=function(e,t){e.interactable=t,e.node.getChildByName("normal").active=t,e.node.getChildByName("gray").active=!t},t.prototype.initTopLabel=function(){this.label_day_start.string="\u5f00\u59cb"+this._start_time,this.label_day_end.string="\u7ed3\u675f"+this._end_time,1==this.mian_type?this.label_type.string=this._game_str:this.label_type.string=this._other_str,this.node_game.active=1==this.mian_type,this.node_other.active=2==this.mian_type},t.prototype.onListRender=function(e,t){if(!(this.data.length<1)){var n=g.default.getFormatDate(1e3*this.data[t].the_time,"yyyy-MM-dd-hh:mm:ss"),o=e.getComponentsInChildren(cc.Label);"scroll_datag"==e.parent.parent.parent.name?(o[1].string=this.data[t].pos,o[2].string=this.data[t].before_money,o[3].string=this.data[t].win_loss):"scroll_datao"==e.parent.parent.parent.name&&(o[1].string=this.data[t].before_money,o[2].string=this.data[t].win_loss,o[3].string=this.data[t].pos),o[0].string=this.data[t].detial_type,o[4].string=this.data[t].after_money,o[5].string=n}},t.prototype.sortAchieve=function(e){for(var t=[],n=[],o=0;o<e.length;o++)1==e[o].state?n=n.concat(e[o]):2!=e[o].state&&3!=e[o].state||(t=t.concat(e[o]));var i=t.concat(n);return console.log("\u6392\u5e8f\u540e\u7684\u6210\u5c31\u6570\u7ec4",i),i},i([w(s.default)],t.prototype,"scroll_data_game",void 0),i([w(s.default)],t.prototype,"scroll_data_other",void 0),i([w(cc.Label)],t.prototype,"label_page_num",void 0),i([w(cc.Label)],t.prototype,"label_day_start",void 0),i([w(cc.Label)],t.prototype,"label_day_end",void 0),i([w(cc.Label)],t.prototype,"label_type",void 0),i([w(cc.Node)],t.prototype,"node_game",void 0),i([w(cc.Node)],t.prototype,"node_other",void 0),i([w(cc.SpriteFrame)],t.prototype,"img_btns",void 0),t=i([M],t)}(c.default);n.default=I,cc._RF.pop()},{"../../Define":"Define","../../common/Device":"Device","../../common/Text":"Text","../../common/UIHelper":"UIHelper","../../common/utils/Utils":"Utils","../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/ResManager":"ResManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView","../common/List":"List","../common/componet/ButtonEx":"ButtonEx"}],JoinRoom:[function(e,t,n){"use strict";cc._RF.push(t,"4afba+NiaFLKqB25UABldGw","JoinRoom");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../common/componet/ButtonEx"),s=e("../../manager/NetManager"),c=["\u8bf7","\u8f93","\u5165","\u623f","\u95f4","\u53f7"],l=cc._decorator,p=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.text_num=[],t.btn_input=[],t.btn_delete=null,t.btn_reset=null,t.btn_close=null,t.className="JoinRoom",t.input_num="",t.input_idx=0,t.full_flag=!1,t}return o(t,e),t.prototype.start=function(){},t.prototype.initComponent=function(){var e=this;this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_delete").registerClick(this.onDeleteEvent.bind(this)),this.getItem("btn_reset").registerClick(this.onResetEvent.bind(this));for(var t=function(t){n.btn_input[t].getComponent(r.default).registerClick(function(){e.onInputEvent({tag:t})})},n=this,o=0;o<this.btn_input.length;o++)t(o)},t.prototype.onClickClose=function(){this.node.destroy()},t.prototype.onInputEvent=function(e){this.full_flag&&this.input_idx>=6&&(this.onResetEvent(),this.full_flag=!1);var t=e.tag,n=this.input_idx;if(this.text_num[n].string=t,this.text_num[n].node.color=cc.color(255,46,46),this.input_num+=t,this.input_idx++,this.input_idx>=6){this.full_flag=!0;s.NetManager.protocolHall.sendFriendPrePareGameJoin(parseFloat(this.input_num))}},t.prototype.onDeleteEvent=function(){var e=this.input_idx;0!=e?(this.text_num[e-1].string=c[e-1],this.text_num[e-1].node.color=cc.color(192,183,173),this.input_num=this.input_num.slice(0,this.input_num.length-1),this.input_idx--):console.log("\u6ca1\u6570\u5b57\u53ef\u4ee5\u5220\u4e86")},t.prototype.onResetEvent=function(){this.input_idx=0;for(var e=0;e<this.text_num.length;e++){var t=this.text_num[e];t.string=c[e],t.node.color=cc.color(192,183,173),this.input_num=""}},i([u(cc.Label)],t.prototype,"text_num",void 0),i([u(cc.Node)],t.prototype,"btn_input",void 0),i([u(cc.Node)],t.prototype,"btn_delete",void 0),i([u(cc.Node)],t.prototype,"btn_reset",void 0),i([u(cc.Node)],t.prototype,"btn_close",void 0),t=i([p],t)}(a.default);n.default=h,cc._RF.pop()},{"../../manager/NetManager":"NetManager","../base/PopupView":"PopupView","../common/componet/ButtonEx":"ButtonEx"}],ListEx:[function(e,t,n){"use strict";cc._RF.push(t,"2d78eZY1Z9HFq+ityntD+pC","ListEx");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,s=a.property,c=a.menu,l=a.requireComponent,p=a.executionOrder,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemTemplete=[],t.renderEvent=new cc.Component.EventHandler,t.scrollView=null,t.content=null,t.view=null,t._datas=null,t.startIndex=0,t.endIndex=0,t.pool=[],t.fixed=.15,t}return o(t,e),t.prototype.onLoad=function(){this.scrollView=this.node.getComponent(cc.ScrollView),this.content=this.scrollView.content,this.view=this.content.parent,this.node.on("scrolling",this.onScrolling,this,!0)},Object.defineProperty(t.prototype,"datas",{get:function(){return this._datas},set:function(e){this._datas=e,this.init(),this.updateItems()},enumerable:!0,configurable:!0}),t.prototype.init=function(){if(this.content){for(var e=0,t=0;t<this.datas.length;t++){var n=this.datas[t];if(n){var o=n.templete||0;e+=this.itemTemplete[o].height}}this.content.height=e,this.content.removeAllChildren(),this.content.height>this.scrollView.node.height&&this.scrollView.scrollToBottom(0),this.initTemplete()}},t.prototype.getTemplete=function(e){for(var t=this.pool.length-1;t>=0;t--){if(this.pool[t].templete==e&&!this.pool[t].isBusy)return this.pool[t].isBusy=!0,this.pool[t].node}var n=cc.instantiate(this.itemTemplete[e]);return this.pool.push({templete:e,node:n,isBusy:!0}),n},t.prototype.putTemplete=function(e){for(var t=this.pool.length-1;t>=0;t--)if(this.pool[t].node==e&&this.pool[t].isBusy){this.pool[t].isBusy=!1,e.parent=null;break}},t.prototype.initTemplete=function(){for(var e=this.pool.length-1;e>=0;e--)this.pool[e].isBusy=!1,this.pool[e].node.parent=null},t.prototype.updateItems=function(){var e=this;if(this.datas&&this.content)for(var t=this.content.getPosition(),n=this.content.height,o=function(o){var a=i.datas[o];if(a){var r=a.templete||0;n-=i.itemTemplete[r].height;var s=!1;if(i.content.children.forEach(function(o){(Math.abs(o.y)-o.height/2<t.y-e.scrollView.node.height*e.fixed||Math.abs(o.y)+o.height/2>t.y+e.scrollView.node.height*(1+e.fixed))&&e.putTemplete(o);var i=-n-o.height/2;Math.abs(o.y-i)<=.1&&(s=!0)}),!s&&n>=t.y-i.scrollView.node.height*i.fixed&&n+i.itemTemplete[r].height<=t.y+i.scrollView.node.height*(1+i.fixed)){var c=i.getTemplete(r);cc.Component.EventHandler.emitEvents([i.renderEvent],c,o,a),i.content.addChild(c),c.y=-n-c.height/2}}},i=this,a=this.datas.length-1;a>=0;a--)o(a)},t.prototype.onScrolling=function(){this.updateItems()},t.prototype.onDestroy=function(){if(this.node.off("scrolling",this.onScrolling,this,!0),this.pool)for(var e=this.pool.length-1;e>=0;e--)!this.pool[e].isBusy&&cc.isValid(this.pool[e].node)&&this.pool[e].node.destroy();if(this.pool=null,this.itemTemplete)for(e=this.itemTemplete.length;e>=0;e--)cc.isValid(this.itemTemplete[e])&&this.itemTemplete[e].destroy();this.itemTemplete=null},i([s([cc.Node])],t.prototype,"itemTemplete",void 0),i([s(cc.Component.EventHandler)],t.prototype,"renderEvent",void 0),t=i([r,c("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/ListEx"),l(cc.ScrollView),p(-5e3)],t)}(cc.Component);n.default=u,cc._RF.pop()},{}],ListItem:[function(e,t,n){"use strict";cc._RF.push(t,"c5fcaYYes5OHLOu06CFIbWG","ListItem");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a,r=cc._decorator,s=r.ccclass,c=r.property,l=r.disallowMultiple,p=r.menu,u=r.executionOrder;(function(e){e[e.NONE=0]="NONE",e[e.TOGGLE=1]="TOGGLE",e[e.SWITCH=2]="SWITCH"})(a||(a={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.title=null,t.selectedMode=a.NONE,t.selectedFlag=null,t.selectedSpriteFrame=null,t._unselectedSpriteFrame=null,t.adaptiveSize=!1,t._selected=!1,t._eventReg=!1,t}return o(t,e),Object.defineProperty(t.prototype,"selected",{get:function(){return this._selected},set:function(e){if(this._selected=e,this.selectedFlag)switch(this.selectedMode){case a.TOGGLE:this.selectedFlag.active=e;break;case a.SWITCH:var t=this.selectedFlag.getComponent(cc.Sprite);t&&(t.spriteFrame=e?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"btnCom",{get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){if(this.selectedMode==a.SWITCH){var e=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=e.spriteFrame}},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},t.prototype._registerEvent=function(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},t.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node)},t.prototype.createEvt=function(e,t,n){if(void 0===n&&(n=null),e.isValid){e.comName=e.comName||e.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var o=new cc.Component.EventHandler;return o.target=n||e.node,o.component=e.comName,o.handler=t,o}},t.prototype.showAni=function(e,t,n){var o,i=this;switch(e){case 0:o=[cc.scaleTo(.2,.7),cc.moveBy(.3,0,2*this.node.height)];break;case 1:o=[cc.scaleTo(.2,.7),cc.moveBy(.3,2*this.node.width,0)];break;case 2:o=[cc.scaleTo(.2,.7),cc.moveBy(.3,0,-2*this.node.height)];break;case 3:o=[cc.scaleTo(.2,.7),cc.moveBy(.3,-2*this.node.width,0)];break;default:o=[cc.scaleTo(.3,.1)]}(t||n)&&o.push(cc.callFunc(function(){if(n){i.list._delSingleItem(i.node);for(var e=i.list.displayData.length-1;e>=0;e--)if(i.list.displayData[e].id==i.listId){i.list.displayData.splice(e,1);break}}t()})),this.node.runAction(cc.sequence(o))},t.prototype.onClickThis=function(){this.list.selectedId=this.listId},i([c({type:cc.Sprite,tooltip:!1})],t.prototype,"icon",void 0),i([c({type:cc.Node,tooltip:!1})],t.prototype,"title",void 0),i([c({type:cc.Enum(a),tooltip:!1})],t.prototype,"selectedMode",void 0),i([c({type:cc.Node,tooltip:!1,visible:function(){return this.selectedMode>a.NONE}})],t.prototype,"selectedFlag",void 0),i([c({type:cc.SpriteFrame,tooltip:!1,visible:function(){return this.selectedMode==a.SWITCH}})],t.prototype,"selectedSpriteFrame",void 0),i([c({tooltip:!1})],t.prototype,"adaptiveSize",void 0),t=i([s,l(),p("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List Item"),u(-5001)],t)}(cc.Component);n.default=h,cc._RF.pop()},{}],List:[function(e,t,n){"use strict";cc._RF.push(t,"8f2c5hv159CcK2HnoFuaVMO","List");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a,r,s,c=cc._decorator,l=c.ccclass,p=c.property,u=c.disallowMultiple,h=c.menu,d=c.executionOrder,g=c.requireComponent,f=e("./ListItem");(function(e){e[e.NODE=1]="NODE",e[e.PREFAB=2]="PREFAB"})(a||(a={})),function(e){e[e.NORMAL=1]="NORMAL",e[e.ADHERING=2]="ADHERING",e[e.PAGE=3]="PAGE"}(r||(r={})),function(e){e[e.NONE=0]="NONE",e[e.SINGLE=1]="SINGLE",e[e.MULT=2]="MULT"}(s||(s={}));var m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.templateType=a.NODE,t.tmpNode=null,t.tmpPrefab=null,t._slideMode=r.NORMAL,t.pageDistance=.3,t.pageChangeEvent=new cc.Component.EventHandler,t._virtual=!0,t.cyclic=!1,t.lackCenter=!1,t.lackSlide=!1,t._updateRate=0,t.isInitItem=!1,t.frameByFrameRenderNum=0,t.renderEvent=new cc.Component.EventHandler,t.selectedMode=s.NONE,t.repeatEventSingle=!1,t.selectedEvent=null,t._selectedId=-1,t._forceUpdate=!1,t._updateDone=!0,t._numItems=0,t._inited=!1,t._needUpdateWidget=!1,t._aniDelRuning=!1,t._doneAfterUpdate=!1,t.adhering=!1,t._adheringBarrier=!1,t.curPageNum=0,t}return o(t,e),Object.defineProperty(t.prototype,"slideMode",{get:function(){return this._slideMode},set:function(e){this._slideMode=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"virtual",{get:function(){return this._virtual},set:function(e){null!=e&&(this._virtual=e),0!=this._numItems&&this._onScrolling()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updateRate",{get:function(){return this._updateRate},set:function(e){e>=0&&e<=6&&(this._updateRate=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedId",{get:function(){return this._selectedId},set:function(e){var t,n=this;switch(n.selectedMode){case s.SINGLE:if(!n.repeatEventSingle&&e==n._selectedId)return;t=n.getItemByListId(e);var o=void 0;if(n._selectedId>=0?n._lastSelectedId=n._selectedId:n._lastSelectedId=null,n._selectedId=e,t&&((o=t.getComponent(f.default)).selected=!0),n._lastSelectedId>=0&&n._lastSelectedId!=n._selectedId){var i=n.getItemByListId(n._lastSelectedId);i&&(i.getComponent(f.default).selected=!1)}n.selectedEvent&&cc.Component.EventHandler.emitEvents([n.selectedEvent],t,e%this._actualNumItems,null==n._lastSelectedId?null:n._lastSelectedId%this._actualNumItems);break;case s.MULT:if(!(t=n.getItemByListId(e)))return;o=t.getComponent(f.default);n._selectedId>=0&&(n._lastSelectedId=n._selectedId),n._selectedId=e;var a=!o.selected;o.selected=a;var r=n.multSelected.indexOf(e);a&&r<0?n.multSelected.push(e):!a&&r>=0&&n.multSelected.splice(r,1),n.selectedEvent&&cc.Component.EventHandler.emitEvents([n.selectedEvent],t,e%this._actualNumItems,null==n._lastSelectedId?null:n._lastSelectedId%this._actualNumItems,a)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numItems",{get:function(){return this._actualNumItems},set:function(e){var t=this;if(t.checkInited(!1))if(null==e||e<0)cc.error("numItems set the wrong::",e);else if(t._actualNumItems=t._numItems=e,t._forceUpdate=!0,t._virtual)t._resizeContent(),t.cyclic&&(t._numItems=t._cyclicNum*t._numItems),t._onScrolling(),t.frameByFrameRenderNum||t.slideMode!=r.PAGE||(t.curPageNum=t.nearestListId);else{var n=t.content.getComponent(cc.Layout);if(n&&(n.enabled=!0),t._delRedundantItem(),t.firstListId=0,t.frameByFrameRenderNum>0){for(var o=t.frameByFrameRenderNum>t._numItems?t._numItems:t.frameByFrameRenderNum,i=0;i<o;i++)t._createOrUpdateItem2(i);t.frameByFrameRenderNum<t._numItems&&(t._updateCounter=t.frameByFrameRenderNum,t._updateDone=!1)}else{for(i=0;i<e;i++)t._createOrUpdateItem2(i);t.displayItemNum=e}}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!0,configurable:!0}),t.prototype.onLoad=function(){this._init()},t.prototype.onDestroy=function(){var e=this;for(e._itemTmp&&e._itemTmp.isValid&&e._itemTmp.destroy(),e.tmpNode&&e.tmpNode.isValid&&e.tmpNode.destroy();e._pool.size();){e._pool.get().destroy()}},t.prototype.onEnable=function(){this._registerEvent(),this._init()},t.prototype.onDisable=function(){this._unregisterEvent()},t.prototype._registerEvent=function(){var e=this;e.node.on(cc.Node.EventType.TOUCH_START,e._onTouchStart,e,!0),e.node.on("touch-up",e._onTouchUp,e),e.node.on(cc.Node.EventType.TOUCH_CANCEL,e._onTouchCancelled,e,!0),e.node.on("scroll-began",e._onScrollBegan,e,!0),e.node.on("scroll-ended",e._onScrollEnded,e,!0),e.node.on("scrolling",e._onScrolling,e,!0),e.node.on(cc.Node.EventType.SIZE_CHANGED,e._onSizeChanged,e)},t.prototype._unregisterEvent=function(){var e=this;e.node.off(cc.Node.EventType.TOUCH_START,e._onTouchStart,e,!0),e.node.off("touch-up",e._onTouchUp,e),e.node.off(cc.Node.EventType.TOUCH_CANCEL,e._onTouchCancelled,e,!0),e.node.off("scroll-began",e._onScrollBegan,e,!0),e.node.off("scroll-ended",e._onScrollEnded,e,!0),e.node.off("scrolling",e._onScrolling,e,!0),e.node.off(cc.Node.EventType.SIZE_CHANGED,e._onSizeChanged,e)},t.prototype._init=function(){var e=this;if(!e._inited)if(e._scrollView=e.node.getComponent(cc.ScrollView),e.content=e._scrollView.content,e.content){switch(e._layout=e.content.getComponent(cc.Layout),e._align=e._layout.type,e._resizeMode=e._layout.resizeMode,e._startAxis=e._layout.startAxis,e._topGap=e._layout.paddingTop,e._rightGap=e._layout.paddingRight,e._bottomGap=e._layout.paddingBottom,e._leftGap=e._layout.paddingLeft,e._columnGap=e._layout.spacingX,e._lineGap=e._layout.spacingY,e._colLineNum,e._verticalDir=e._layout.verticalDirection,e._horizontalDir=e._layout.horizontalDirection,e.setTemplateItem(cc.instantiate(e.templateType==a.PREFAB?e.tmpPrefab:e.tmpNode)),e._slideMode!=r.ADHERING&&e._slideMode!=r.PAGE||(e._scrollView.inertia=!1,e._scrollView._onMouseWheel=function(){}),e.virtual||(e.lackCenter=!1),e._lastDisplayData=[],e.displayData=[],e._pool=new cc.NodePool,e._forceUpdate=!1,e._updateCounter=0,e._updateDone=!0,e.curPageNum=0,e.cyclic&&(e._scrollView._processAutoScrolling=this._processAutoScrolling.bind(e),e._scrollView._startBounceBackIfNeeded=function(){return!1}),e._align){case cc.Layout.Type.HORIZONTAL:switch(e._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:e._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:e._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(e._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:e._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:e._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(e._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:e._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:e._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(e._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:e._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:e._alignCalcType=2}}}this.isInitItem&&e.content.children.forEach(function(t){e._pool.put(t)}),e.content.removeAllChildren(),e._inited=!0}else cc.error(e.node.name+"'s cc.ScrollView unset content!")},t.prototype._processAutoScrolling=function(e){this._scrollView._autoScrollAccumulatedTime+=1*e;var t=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var n=t-1;t=n*n*n*n*n+1}var o=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(t)),i=this._scrollView.getScrollEndedEventTiming(),a=Math.abs(t-1)<=i;Math.abs(t-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),a&&(this._scrollView._autoScrolling=!1);var r=o.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(r),a),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},t.prototype.setTemplateItem=function(e){if(e){var t=this;t._itemTmp=e,t._resizeMode==cc.Layout.ResizeMode.CHILDREN?t._itemSize=t._layout.cellSize:t._itemSize=cc.size(e.width,e.height);var n=e.getComponent(f.default),o=!1;switch(n||(o=!0),o&&(t.selectedMode=s.NONE),(n=e.getComponent(cc.Widget))&&n.enabled&&(t._needUpdateWidget=!0),t.selectedMode==s.MULT&&(t.multSelected=[]),t._align){case cc.Layout.Type.HORIZONTAL:t._colLineNum=1,t._sizeType=!1;break;case cc.Layout.Type.VERTICAL:t._colLineNum=1,t._sizeType=!0;break;case cc.Layout.Type.GRID:switch(t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var i=t.content.width-t._leftGap-t._rightGap;t._colLineNum=Math.floor((i+t._columnGap)/(t._itemSize.width+t._columnGap)),t._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var a=t.content.height-t._topGap-t._bottomGap;t._colLineNum=Math.floor((a+t._lineGap)/(t._itemSize.height+t._lineGap)),t._sizeType=!1}}}},t.prototype.checkInited=function(e){return void 0===e&&(e=!0),!!this._inited||(e&&cc.error("List initialization not completed!"),!1)},t.prototype._resizeContent=function(){var e,t=this;switch(t._align){case cc.Layout.Type.HORIZONTAL:if(t._customSize){var n=t._getFixedSize(null);e=t._leftGap+n.val+t._itemSize.width*(t._numItems-n.count)+t._columnGap*(t._numItems-1)+t._rightGap}else e=t._leftGap+t._itemSize.width*t._numItems+t._columnGap*(t._numItems-1)+t._rightGap;break;case cc.Layout.Type.VERTICAL:if(t._customSize){n=t._getFixedSize(null);e=t._topGap+n.val+t._itemSize.height*(t._numItems-n.count)+t._lineGap*(t._numItems-1)+t._bottomGap}else e=t._topGap+t._itemSize.height*t._numItems+t._lineGap*(t._numItems-1)+t._bottomGap;break;case cc.Layout.Type.GRID:switch(t.lackCenter&&(t.lackCenter=!1),t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var o=Math.ceil(t._numItems/t._colLineNum);e=t._topGap+t._itemSize.height*o+t._lineGap*(o-1)+t._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var i=Math.ceil(t._numItems/t._colLineNum);e=t._leftGap+t._itemSize.width*i+t._columnGap*(i-1)+t._rightGap}}var a=t.content.getComponent(cc.Layout);if(a&&(a.enabled=!1),t._allItemSize=e,t._allItemSizeNoEdge=t._allItemSize-(t._sizeType?t._topGap+t._bottomGap:t._leftGap+t._rightGap),t.cyclic){var r=t._sizeType?t.node.height:t.node.width;t._cyclicPos1=0,r-=t._cyclicPos1,t._cyclicNum=Math.ceil(r/t._allItemSizeNoEdge)+1;var s=t._sizeType?t._lineGap:t._columnGap;t._cyclicPos2=t._cyclicPos1+t._allItemSizeNoEdge+s,t._cyclicAllItemSize=t._allItemSize+t._allItemSizeNoEdge*(t._cyclicNum-1)+s*(t._cyclicNum-1),t._cycilcAllItemSizeNoEdge=t._allItemSizeNoEdge*t._cyclicNum,t._cycilcAllItemSizeNoEdge+=s*(t._cyclicNum-1)}t._lack=!t.cyclic&&t._allItemSize<(t._sizeType?t.node.height:t.node.width);var c=t._lack&&t.lackCenter||!t.lackSlide?.1:0,l=t._lack?(t._sizeType?t.node.height:t.node.width)-c:t.cyclic?t._cyclicAllItemSize:t._allItemSize;l<0&&(l=0),t._sizeType?t.content.height=l:t.content.width=l},t.prototype._onScrolling=function(e){if(void 0===e&&(e=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&e&&"scroll-ended"!=e.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var t=this.content.getPosition();t=this._sizeType?t.y:t.x;var n=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),o=this._sizeType?cc.v2(0,n):cc.v2(n,0);switch(this._alignCalcType){case 1:t>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o))):t<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o)));break;case 2:t<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o))):t>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o)));break;case 3:t<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o))):t>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o)));break;case 4:t>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o))):t<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o)))}}var i,a,r,s;if(this._calcViewPos(),this._sizeType?(i=this.viewTop,r=this.viewBottom):(a=this.viewRight,s=this.viewLeft),this._virtual){this.displayData=[];var c=void 0,l=0,p=this._numItems-1;if(this._customSize)for(var u=!1;l<=p&&!u;l++)switch(c=this._calcItemPos(l),this._align){case cc.Layout.Type.HORIZONTAL:c.right>=s&&c.left<=a?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0);break;case cc.Layout.Type.VERTICAL:c.bottom<=i&&c.top>=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:c.bottom<=i&&c.top>=r?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0);break;case cc.Layout.AxisDirection.VERTICAL:c.right>=s&&c.left<=a?this.displayData.push(c):0!=l&&this.displayData.length>0&&(u=!0)}}else{var h=this._itemSize.width+this._columnGap,d=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:l=(s+this._leftGap)/h,p=(a+this._rightGap)/h;break;case 2:l=(-a-this._rightGap)/h,p=(-s-this._leftGap)/h;break;case 3:l=(-i-this._topGap)/d,p=(-r-this._bottomGap)/d;break;case 4:l=(r+this._bottomGap)/d,p=(i+this._topGap)/d}for(l=Math.floor(l)*this._colLineNum,p=Math.ceil(p)*this._colLineNum,p--,l<0&&(l=0),p>=this._numItems&&(p=this._numItems-1);l<=p;l++)this.displayData.push(this._calcItemPos(l))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var g=this._lastDisplayData.length,f=this.displayItemNum!=g;if(f&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(e,t){return e-t}),f=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[g-1]),this._forceUpdate||f)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var m=0;m<this.displayItemNum;m++)this._createOrUpdateItem(this.displayData[m]);this._forceUpdate=!1}this._calcNearestItem()}}},t.prototype._calcViewPos=function(){var e=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=e.x>0?e.x:0,this.viewLeft=(e.x<0?-e.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=e.x<0?-e.x:0,this.viewRight=(e.x>0?-e.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=e.y<0?Math.abs(e.y):0,this.viewTop=(e.y>0?-e.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=e.y>0?Math.abs(e.y):0,this.viewBottom=(e.y<0?-e.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},t.prototype._calcItemPos=function(e){var t,n,o,i,a,r,s,c;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var l=this._getFixedSize(e);a=this._leftGap+(this._itemSize.width+this._columnGap)*(e-l.count)+(l.val+this._columnGap*l.count),t=(p=this._customSize[e])>0?p:this._itemSize.width}else a=this._leftGap+(this._itemSize.width+this._columnGap)*e,t=this._itemSize.width;if(r=a+t,this.lackCenter)a+=u=this.content.width/2-this._allItemSizeNoEdge/2,r+=u;return{id:e,left:a,right:r,x:a+this._itemTmp.anchorX*t,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:if(this._customSize){l=this._getFixedSize(e);r=-this._rightGap-(this._itemSize.width+this._columnGap)*(e-l.count)-(l.val+this._columnGap*l.count),t=(p=this._customSize[e])>0?p:this._itemSize.width}else r=-this._rightGap-(this._itemSize.width+this._columnGap)*e,t=this._itemSize.width;if(a=r-t,this.lackCenter)a-=u=this.content.width/2-this._allItemSizeNoEdge/2,r-=u;return{id:e,right:r,left:a,x:a+this._itemTmp.anchorX*t,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:if(this._customSize){l=this._getFixedSize(e);o=-this._topGap-(this._itemSize.height+this._lineGap)*(e-l.count)-(l.val+this._lineGap*l.count),n=(p=this._customSize[e])>0?p:this._itemSize.height}else o=-this._topGap-(this._itemSize.height+this._lineGap)*e,n=this._itemSize.height;if(i=o-n,this.lackCenter)o-=u=this.content.height/2-this._allItemSizeNoEdge/2,i-=u;return{id:e,top:o,bottom:i,x:this._itemTmp.x,y:i+this._itemTmp.anchorY*n};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:if(this._customSize){var p;l=this._getFixedSize(e);i=this._bottomGap+(this._itemSize.height+this._lineGap)*(e-l.count)+(l.val+this._lineGap*l.count),n=(p=this._customSize[e])>0?p:this._itemSize.height}else i=this._bottomGap+(this._itemSize.height+this._lineGap)*e,n=this._itemSize.height;var u;if(o=i+n,this.lackCenter)o+=u=this.content.height/2-this._allItemSizeNoEdge/2,i+=u;return{id:e,top:o,bottom:i,x:this._itemTmp.x,y:i+this._itemTmp.anchorY*n}}case cc.Layout.Type.GRID:var h=Math.floor(e/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c=(i=(o=-this._topGap-(this._itemSize.height+this._lineGap)*h)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:o=(i=this._bottomGap+(this._itemSize.height+this._lineGap)*h)+this._itemSize.height,c=i+this._itemTmp.anchorY*this._itemSize.height}switch(s=this._leftGap+e%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:s+=this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s+=(1-this._itemTmp.anchorX)*this._itemSize.width,s-=(1-this.content.anchorX)*this.content.width,s*=-1}return{id:e,top:o,bottom:i,x:s,y:c};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:r=(a=this._leftGap+(this._itemSize.width+this._columnGap)*h)+this._itemSize.width,s=a+this._itemTmp.anchorX*this._itemSize.width,s-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:s=(a=(r=-this._rightGap-(this._itemSize.width+this._columnGap)*h)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,s+=(1-this.content.anchorX)*this.content.width}switch(c=-this._topGap-e%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:c-=(1-this._itemTmp.anchorY)*this._itemSize.height,c+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:c-=this._itemTmp.anchorY*this._itemSize.height,c+=this.content.anchorY*this.content.height,c*=-1}return{id:e,left:a,right:r,x:s,y:c}}}},t.prototype._calcExistItemPos=function(e){var t=this.getItemByListId(e);if(!t)return null;var n={id:e,x:t.x,y:t.y};return this._sizeType?(n.top=t.y+t.height*(1-t.anchorY),n.bottom=t.y-t.height*t.anchorY):(n.left=t.x-t.width*t.anchorX,n.right=t.x+t.width*(1-t.anchorX)),n},t.prototype.getItemPos=function(e){return this._virtual?this._calcItemPos(e):this.frameByFrameRenderNum?this._calcItemPos(e):this._calcExistItemPos(e)},t.prototype._getFixedSize=function(e){if(!this._customSize)return null;null==e&&(e=this._numItems);var t=0,n=0;for(var o in this._customSize)parseInt(o)<e&&(t+=this._customSize[o],n++);return{val:t,count:n}},t.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},t.prototype._onScrollEnded=function(){var e=this;if(null!=e.scrollToListId){var t=e.getItemByListId(e.scrollToListId);e.scrollToListId=null,t&&t.runAction(cc.sequence(cc.scaleTo(.1,1.06),cc.scaleTo(.1,1)))}e._onScrolling(),e._slideMode!=r.ADHERING||e.adhering?e._slideMode==r.PAGE&&(null!=e._beganPos?this._pageAdhere():e.adhere()):e.adhere()},t.prototype._onTouchStart=function(e,t){if(!this._scrollView._hasNestedViewGroup(e,t)&&!(e.eventPhase===cc.Event.AT_TARGET&&e.target===this.node)){for(var n=e.target;null==n._listId&&n.parent;)n=n.parent;this._scrollItem=null!=n._listId?n:e.target}},t.prototype._onTouchUp=function(){var e=this;e._scrollPos=null,e._slideMode==r.ADHERING?(this.adhering&&(this._adheringBarrier=!0),e.adhere()):e._slideMode==r.PAGE&&(null!=e._beganPos?this._pageAdhere():e.adhere()),this._scrollItem=null},t.prototype._onTouchCancelled=function(e,t){var n=this;n._scrollView._hasNestedViewGroup(e,t)||e.simulate||(n._scrollPos=null,n._slideMode==r.ADHERING?(n.adhering&&(n._adheringBarrier=!0),n.adhere()):n._slideMode==r.PAGE&&(null!=n._beganPos?n._pageAdhere():n.adhere()),this._scrollItem=null)},t.prototype._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},t.prototype._onItemAdaptive=function(e){if(this.checkInited(!1)&&(!this._sizeType&&e.width!=this._itemSize.width||this._sizeType&&e.height!=this._itemSize.height)){this._customSize||(this._customSize={});var t=this._sizeType?e.height:e.width;this._customSize[e._listId]!=t&&(this._customSize[e._listId]=t,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},t.prototype._pageAdhere=function(){var e=this;if(e.cyclic||!(e.elasticTop>0||e.elasticRight>0||e.elasticBottom>0||e.elasticLeft>0)){var t=e._sizeType?e.viewTop:e.viewLeft,n=(e._sizeType?e.node.height:e.node.width)*e.pageDistance;if(Math.abs(e._beganPos-t)>n){switch(e._alignCalcType){case 1:case 4:e._beganPos>t?e.prePage(.5):e.nextPage(.5);break;case 2:case 3:e._beganPos<t?e.prePage(.5):e.nextPage(.5)}}else e.elasticTop<=0&&e.elasticRight<=0&&e.elasticBottom<=0&&e.elasticLeft<=0&&e.adhere();e._beganPos=null}},t.prototype.adhere=function(){var e=this;if(e.checkInited()&&!(e.elasticTop>0||e.elasticRight>0||e.elasticBottom>0||e.elasticLeft>0)){e.adhering=!0,e._calcNearestItem();var t=(e._sizeType?e._topGap:e._leftGap)/(e._sizeType?e.node.height:e.node.width);e.scrollTo(e.nearestListId,.7,t)}},t.prototype.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var e=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,t=this._updateCounter;t<e;t++){var n=this.displayData[t];n&&this._createOrUpdateItem(n)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==r.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(e=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,t=this._updateCounter;t<e;t++)this._createOrUpdateItem2(t);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==r.PAGE&&(this.curPageNum=this.nearestListId)},t.prototype._createOrUpdateItem=function(e){var t=this.getItemByListId(e.id);if(t)this._forceUpdate&&this.renderEvent&&(t.setPosition(cc.v2(e.x,e.y)),this._resetItemSize(t),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],t,e.id%this._actualNumItems));else{var n=this._pool.size()>0;if((t=n?this._pool.get():cc.instantiate(this._itemTmp))._listId!=e.id&&(t._listId=e.id,t.setContentSize(this._itemSize)),t.setPosition(cc.v2(e.x,e.y)),this._resetItemSize(t),this.content.addChild(t),n&&this._needUpdateWidget){var o=t.getComponent(cc.Widget);o&&o.updateAlignment()}t.setSiblingIndex(this.content.childrenCount-1);var i=t.getComponent(f.default);t.listItem=i,i&&(i.listId=e.id,i.list=this,i._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],t,e.id%this._actualNumItems)}this._resetItemSize(t),this._updateListItem(t.listItem),this._lastDisplayData.indexOf(e.id)<0&&this._lastDisplayData.push(e.id)},t.prototype._createOrUpdateItem2=function(e){var t,n=this.content.children[e];n?this._forceUpdate&&this.renderEvent&&(n._listId=e,t&&(t.listId=e),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,e)):((n=cc.instantiate(this._itemTmp))._listId=e,this.content.addChild(n),t=n.getComponent(f.default),n.listItem=t,t&&(t.listId=e,t.list=this,t._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,e)),this._updateListItem(t),this._lastDisplayData.indexOf(e)<0&&this._lastDisplayData.push(e)},t.prototype._updateListItem=function(e){if(e&&this.selectedMode>s.NONE){var t=e.node;switch(this.selectedMode){case s.SINGLE:e.selected=this.selectedId==t._listId;break;case s.MULT:e.selected=this.multSelected.indexOf(t._listId)>=0}}},t.prototype._resetItemSize=function(e){},t.prototype._updateItemPos=function(e){var t=isNaN(e)?e:this.getItemByListId(e),n=this.getItemPos(t._listId);t.setPosition(n.x,n.y)},t.prototype.setMultSelected=function(e,t){var n=this;if(n.checkInited()){if(Array.isArray(e)||(e=[e]),null==t)n.multSelected=e;else{var o=void 0,i=void 0;if(t)for(var a=e.length-1;a>=0;a--)o=e[a],(i=n.multSelected.indexOf(o))<0&&n.multSelected.push(o);else for(a=e.length-1;a>=0;a--)o=e[a],(i=n.multSelected.indexOf(o))>=0&&n.multSelected.splice(i,1)}n._forceUpdate=!0,n._onScrolling()}},t.prototype.updateItem=function(e){if(this.checkInited()){Array.isArray(e)||(e=[e]);for(var t=0,n=e.length;t<n;t++){var o=e[t],i=this.getItemByListId(o);i&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,o%this._actualNumItems)}}},t.prototype.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},t.prototype.getItemByListId=function(e){for(var t=this.content.childrenCount-1;t>=0;t--){var n=this.content.children[t];if(n._listId==e)return n}},t.prototype._getOutsideItem=function(){for(var e,t=[],n=this.content.childrenCount-1;n>=0;n--)e=this.content.children[n],this.displayData.find(function(t){return t.id==e._listId})||t.push(e);return t},t.prototype._delRedundantItem=function(){if(this._virtual)for(var e=this._getOutsideItem(),t=e.length-1;t>=0;t--){var n=e[t];if(!this._scrollItem||n._listId!=this._scrollItem._listId){n.height=this._itemSize.height,this._pool.put(n);for(var o=this._lastDisplayData.length-1;o>=0;o--)if(this._lastDisplayData[o]==n._listId){this._lastDisplayData.splice(o,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},t.prototype._delSingleItem=function(e){e.removeFromParent(),e.destroy&&e.destroy(),e=null},t.prototype.aniDelItem=function(e,t,n){var o=this;if(!o.checkInited()||o.cyclic||!o._virtual)return cc.error("This function is not allowed to be called!");if(o._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var i,a=o.getItemByListId(e);if(a){i=a.getComponent(f.default),o._aniDelRuning=!0;var r=o.displayData[o.displayData.length-1].id,c=i.selected;i.showAni(n,function(){var n;if(r<o._numItems-2&&(n=r+1),null!=n){var i=o._calcItemPos(n);o.displayData.push(i),o._virtual?o._createOrUpdateItem(i):o._createOrUpdateItem2(n)}else o._numItems--;if(o.selectedMode==s.SINGLE)c?o._selectedId=-1:o._selectedId-1>=0&&o._selectedId--;else if(o.selectedMode==s.MULT&&o.multSelected.length){var l=o.multSelected.indexOf(e);l>=0&&o.multSelected.splice(l,1);for(var p=o.multSelected.length-1;p>=0;p--){(d=o.multSelected[p])>=e&&o.multSelected[p]--}}if(o._customSize){o._customSize[e]&&delete o._customSize[e];var u={},h=void 0;for(var d in o._customSize){h=o._customSize[d];var g=parseInt(d);u[g-(g>=e?1:0)]=h}o._customSize=u}var f,m;for(p=null!=n?n:r;p>=e+1;p--)if(a=o.getItemByListId(p)){var _=o._calcItemPos(p-1);f=[cc.moveTo(.2333,cc.v2(_.x,_.y))],p<=e+1&&(m=!0,f.push(cc.callFunc(function(){o._aniDelRuning=!1,t(e)}))),f.length>1?a.runAction(cc.sequence(f)):a.runAction(f[0])}m||(o._aniDelRuning=!1,t(e))},!0)}else t(e)},t.prototype.scrollTo=function(e,t,n,o){void 0===t&&(t=.5),void 0===n&&(n=null),void 0===o&&(o=!1);var i=this;if(i.checkInited(!1)){null==t?t=.5:t<0&&(t=0),e<0?e=0:e>=i._numItems&&(e=i._numItems-1),!i._virtual&&i._layout&&i._layout.enabled&&i._layout.updateLayout();var a,r,s=i.getItemPos(e);switch(i._alignCalcType){case 1:a=s.left,a-=null!=n?i.node.width*n:i._leftGap,s=cc.v2(a,0);break;case 2:a=s.right-i.node.width,a+=null!=n?i.node.width*n:i._rightGap,s=cc.v2(a+i.content.width,0);break;case 3:r=s.top,r+=null!=n?i.node.height*n:i._topGap,s=cc.v2(0,-r);break;case 4:r=s.bottom+i.node.height,r-=null!=n?i.node.height*n:i._bottomGap,s=cc.v2(0,-r+i.content.height)}var c=i.content.getPosition();c=Math.abs(i._sizeType?c.y:c.x);var l=i._sizeType?s.y:s.x;Math.abs((null!=i._scrollPos?i._scrollPos:c)-l)>.5&&(i._scrollView.scrollToOffset(s,t),i._scrollToListId=e,i._scrollToEndTime=(new Date).getTime()/1e3+t,i._scrollToSo=i.scheduleOnce(function(){if(i._adheringBarrier||(i.adhering=i._adheringBarrier=!1),i._scrollPos=i._scrollToListId=i._scrollToEndTime=i._scrollToSo=null,o){var t=i.getItemByListId(e);t&&t.runAction(cc.sequence(cc.scaleTo(.1,1.05),cc.scaleTo(.1,1)))}},t+.1),t<=0&&i._onScrolling())}},t.prototype._calcNearestItem=function(){var e,t,n,o,i,a,r=this;r.nearestListId=null,r._virtual&&r._calcViewPos(),n=r.viewTop,o=r.viewRight,i=r.viewBottom,a=r.viewLeft;for(var s=!1,c=0;c<r.content.childrenCount&&!s;c+=r._colLineNum)if(e=r._virtual?r.displayData[c]:r._calcExistItemPos(c))switch(t=r._sizeType?(e.top+e.bottom)/2:t=(e.left+e.right)/2,r._alignCalcType){case 1:e.right>=a&&(r.nearestListId=e.id,a>t&&(r.nearestListId+=r._colLineNum),s=!0);break;case 2:e.left<=o&&(r.nearestListId=e.id,o<t&&(r.nearestListId+=r._colLineNum),s=!0);break;case 3:e.bottom<=n&&(r.nearestListId=e.id,n<t&&(r.nearestListId+=r._colLineNum),s=!0);break;case 4:e.top>=i&&(r.nearestListId=e.id,i>t&&(r.nearestListId+=r._colLineNum),s=!0)}if((e=r._virtual?r.displayData[r.displayItemNum-1]:r._calcExistItemPos(r._numItems-1))&&e.id==r._numItems-1)switch(t=r._sizeType?(e.top+e.bottom)/2:t=(e.left+e.right)/2,r._alignCalcType){case 1:o>t&&(r.nearestListId=e.id);break;case 2:a<t&&(r.nearestListId=e.id);break;case 3:i<t&&(r.nearestListId=e.id);break;case 4:n>t&&(r.nearestListId=e.id)}},t.prototype.prePage=function(e){void 0===e&&(e=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,e)},t.prototype.nextPage=function(e){void 0===e&&(e=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,e)},t.prototype.skipPage=function(e,t){var n=this;if(n.checkInited())return n._slideMode!=r.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(e<0||e>=n._numItems||n.curPageNum!=e&&(n.curPageNum=e,n.pageChangeEvent&&cc.Component.EventHandler.emitEvents([n.pageChangeEvent],e),n.scrollTo(e,t)))},t.prototype.calcCustomSize=function(e){var t=this;if(t.checkInited()){if(!t._itemTmp)return cc.error("Unset template item!");if(!t.renderEvent)return cc.error("Unset Render-Event!");t._customSize={};var n=cc.instantiate(t._itemTmp);t.content.addChild(n);for(var o=0;o<e;o++)cc.Component.EventHandler.emitEvents([t.renderEvent],n,o),n.height==t._itemSize.height&&n.width==t._itemSize.width||(t._customSize[o]=t._sizeType?n.height:n.width);return Object.keys(t._customSize).length||(t._customSize=null),n.removeFromParent(),n.destroy&&n.destroy(),t._customSize}},i([p({type:cc.Enum(a),tooltip:!1})],t.prototype,"templateType",void 0),i([p({type:cc.Node,tooltip:!1,visible:function(){return this.templateType==a.NODE}})],t.prototype,"tmpNode",void 0),i([p({type:cc.Prefab,tooltip:!1,visible:function(){return this.templateType==a.PREFAB}})],t.prototype,"tmpPrefab",void 0),i([p()],t.prototype,"_slideMode",void 0),i([p({type:cc.Enum(r),tooltip:!1})],t.prototype,"slideMode",null),i([p({type:cc.Float,range:[0,1,.1],tooltip:!1,slide:!0,visible:function(){return this._slideMode==r.PAGE}})],t.prototype,"pageDistance",void 0),i([p({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this._slideMode==r.PAGE}})],t.prototype,"pageChangeEvent",void 0),i([p()],t.prototype,"_virtual",void 0),i([p({type:cc.Boolean,tooltip:!1})],t.prototype,"virtual",null),i([p({tooltip:!1,visible:function(){var e=this.virtual&&this.slideMode==r.NORMAL;return e||(this.cyclic=!1),e}})],t.prototype,"cyclic",void 0),i([p({tooltip:!1,visible:function(){return this.virtual}})],t.prototype,"lackCenter",void 0),i([p({tooltip:!1,visible:function(){var e=this.virtual&&!this.lackCenter;return e||(this.lackSlide=!1),e}})],t.prototype,"lackSlide",void 0),i([p({type:cc.Integer})],t.prototype,"_updateRate",void 0),i([p({type:cc.Integer,range:[0,6,1],tooltip:!1,slide:!0})],t.prototype,"updateRate",null),i([p(cc.Boolean)],t.prototype,"isInitItem",void 0),i([p({type:cc.Integer,range:[0,12,1],tooltip:!1,slide:!0})],t.prototype,"frameByFrameRenderNum",void 0),i([p({type:cc.Component.EventHandler,tooltip:!1})],t.prototype,"renderEvent",void 0),i([p({type:cc.Enum(s),tooltip:!1})],t.prototype,"selectedMode",void 0),i([p({tooltip:!1,visible:function(){return this.selectedMode==s.SINGLE}})],t.prototype,"repeatEventSingle",void 0),i([p({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this.selectedMode>s.NONE}})],t.prototype,"selectedEvent",void 0),i([p({serializable:!1})],t.prototype,"_numItems",void 0),t=i([l,u(),h("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List"),g(cc.ScrollView),d(-5e3)],t)}(cc.Component);n.default=m,cc._RF.pop()},{"./ListItem":"ListItem"}],LocalStorage:[function(e,t,n){"use strict";cc._RF.push(t,"d2218wwIapPC7Nn8KWMxqRB","LocalStorage");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../log/LogWrap"),a=cc._decorator,r=a.ccclass,s=(a.property,function(){function e(){this.storage=cc.sys.isNative?cc.sys.localStorage:window&&window.sessionStorage||cc.sys.localStorage}return e.prototype.set=function(e,t){this.storage.setItem(e,JSON.stringify(t))},e.prototype.get=function(e){var t=this.storage.getItem(e);if(i.LogWrap.log("LocalStorage get "+e+" ->",t),t)try{return JSON.parse(t)}catch(t){return i.LogWrap.log("LocalStorage get "+e+" ->",t),null}return null},e.prototype.remove=function(e){this.storage.removeItem(e)},e.prototype.setItem=function(e,t){this.storage.setItem(e,t)},e.prototype.getItem=function(e){return this.storage.getItem(e)},e=o([r],e)}());n.default=s,cc._RF.pop()},{"../log/LogWrap":"LogWrap"}],LogWrap:[function(e,t,n){"use strict";cc._RF.push(t,"09e5ebC+yBHE4ZyNvmiNMCD","LogWrap");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("../../manager/FileManager"),a=e("../../Define"),r=cc._decorator,s=r.ccclass,c=(r.property,function(){function e(){this.logContent="",this.uid=0}var t;return t=e,e.prototype.getDateString=function(){var e=new Date,t=e.getHours().toString(),n="";return n+=(1==t.length?"0"+t:t)+":",n+=(1==(t=e.getMinutes().toString()).length?"0"+t:t)+":",n+=(1==(t=e.getSeconds().toString()).length?"0"+t:t)+":",1==(t=e.getMilliseconds().toString()).length&&(t="00"+t),2==t.length&&(t="0"+t),n="["+(n+=t)+"]"},e.prototype.stack=function(e){var t=(new Error).stack.split("\n");t.shift();var n=[];t.forEach(function(e){var t,o=(e=e.substring(7)).split(" ");o.length<2?n.push(o[0]):n.push(((t={})[o[0]]=o[1],t))});var o=[];if(e<n.length-1)for(var i in n[e])o.push(i);var a=o[0].split(".");return a[0]+".js->"+a[1]+": "},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];cc.log.apply(cc,[e].concat(t));var o=cc.js.formatStr.apply(cc,arguments);this.writeLog(o)},e.prototype.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];cc.warn.apply(cc,[e].concat(t));var o=cc.js.formatStr.apply(cc,arguments);this.writeLog(o)},e.prototype.err=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];cc.error.apply(cc,[e].concat(t));var o=cc.js.formatStr.apply(cc,arguments);this.writeLog(o)},e.prototype.writeLog=function(e,t){if(void 0===t&&(t=!1),cc.sys.isNative){var n=new Date(cc.sys.now());if(this.logContent+=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate()+" "+n.getHours()+":"+n.getMinutes()+":"+n.getSeconds()+" "+e+" \n",this.logContent.length>=1e5||t){var o="log/"+cc.sys.now()+".log";cc.log("writeLog:",o),i.FileManager.createFolder("log"),i.FileManager.writeStringFile(o,this.logContent),this.checkLog(),this.logContent=""}}},e.prototype.checkLog=function(){var e=jsb.fileUtils.getWritablePath()+"log",t=jsb.fileUtils.listFiles(e);if(!(t.length<=10)){t.sort(function(e,t){var n=i.FileManager.baseName(e),o=i.FileManager.baseName(t),a=n.lastIndexOf(".log"),r=o.lastIndexOf(".log");return a>=0&&r>=0?parseInt(n.substr(0,a))-parseInt(o.substr(0,r)):a>=0&&r<0?1:-1});for(var n=t.length>10?t.length-10:t.length,o=0;o<n;o++){var a=t[o];a.lastIndexOf(".log")>0&&jsb.fileUtils.removeFile(a)}}},e.prototype.submitLog=function(){if(!cc.sys.isNative)return!1;this.writeLog("submitLog",!0);var e=function(e){var t=new(void 0!==window.Uint8Array?Uint8Array:Array)(e.length),n=0,o=e.length;for(n=0,o=e.length;n<o;++n)t[n]=255&e.charCodeAt(n);return t},t=jsb.fileUtils.getWritablePath(),n=t+"log",o=new Zlib.Zip,r=jsb.fileUtils.listFiles(n);if(0==r.length)return!1;r.forEach(function(t){if(t.lastIndexOf(".log")>0){var n=jsb.fileUtils.getDataFromFile(t);o.addFile(n,{filename:e(i.FileManager.baseName(t))})}});var s=o.compress();if(jsb.fileUtils.writeDataToFile(s,t+"log.zip")){cc.log("==================ftp upload================",a.FtpUrl);var c=new ftplib;if(c.Connect(a.FtpUrl))if(c.Login(a.FtpAccount,a.FtpPassword)){if(c.Put(t+"log.zip","log/"+cc.sys.os+"_"+this.uid+"_"+cc.sys.now()+"_log.zip",73))return cc.log("==================ftp upload success================"),!0;cc.log("==================ftp upload fail================")}else cc.log("==================ftp Login fail================");else cc.log("==================ftp Connect fail================");cc.log("==================ftp Quit ================"),c.Quit()}return!1},e.instance=new t,e=t=o([s],e)}());n.LogWrap=c.instance;var l="";window.__errorHandler=function(e,t,o,i){var a=e+" "+t+" errMsg: "+(o||"")+"\nerror: "+i||"";l!=a&&(l=a,n.LogWrap.err(a),n.LogWrap.submitLog())},cc._RF.pop()},{"../../Define":"Define","../../manager/FileManager":"FileManager","../../manager/UIManager":"UIManager"}],LoginPopup:[function(e,t,n){"use strict";cc._RF.push(t,"cbca1jc8BpCb6ornpyIXKSq","LoginPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../common/componet/ButtonEx"),s=e("../../manager/DataManager"),c=e("../../Define"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btnTags=[],t}return o(t,e),t.prototype.initComponent=function(){this.btnTags=this.getItem("node_tag").getComponentsInChildren(r.default),this.getItem("btn_close").registerClick(this.close.bind(this)),this.getItem("btn_login").registerClick(this.updateTag.bind(this,0)),this.getItem("btn_code").registerClick(this.updateTag.bind(this,1)),this.getItem("btn_register").registerClick(this.updateTag.bind(this,2)),s.DataManager.loginType&c.LoginType.Password&&(this.getItem("btn_login").node.active=!0),s.DataManager.loginType&c.LoginType.Code&&(this.getItem("btn_code").node.active=!0),s.DataManager.loginType&c.LoginType.Account&&(this.getItem("btn_register").node.active=!0)},t.prototype.initEvent=function(){},t.prototype.start=function(){for(var e=0;e<this.btnTags.length;e++)if(this.btnTags[e].node.active){this.updateTag(e);break}},t.prototype.updateTag=function(e){var t=this;void 0===e&&(e=0),this.btnTags.forEach(function(n,o){n.node.getChildByName("img_text_nor").active=o!=e,n.node.getChildByName("img_text_pre").active=o==e,o==e?(n.interactable=!1,t.getItem("img_paper").children[o].active=!0):(n.interactable=!0,t.getItem("img_paper").children[o].active=!1)})},t=i([p],t)}(a.default));n.default=u,cc._RF.pop()},{"../../Define":"Define","../../manager/DataManager":"DataManager","../base/PopupView":"PopupView","../common/componet/ButtonEx":"ButtonEx"}],LoginView:[function(e,t,n){"use strict";cc._RF.push(t,"46698xHeqRLnLa2t3/TD4VZ","LoginView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./base/BaseView"),r=e("../manager/EventManager"),s=e("../net/NetCmd"),c=e("../manager/UIManager"),l=e("../manager/DataManager"),p=e("../manager/NetManager"),u=e("../common/log/LogWrap"),h=e("../Define"),d=e("../common/Text"),g=e("../common/Device"),f=cc._decorator,m=f.ccclass,_=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){c.UIManager.hideMarquee(),p.NetManager.requestPostUrl(s.HttpCmd.GetSocketUrl,{},function(e,t){if("success"==e){var n=t.data.url;u.LogWrap.log("webSocket\u5730\u5740\u4e3a->>>>>>>>>>>>>>>>>>>",t.data.url),p.NetManager.connect(n,h.SocketType.Hall)}else c.UIManager.showTipsPopup("\u8fde\u63a5\u670d\u52a1\u5668\u5931\u8d25,\u8bf7\u91cd\u8bd5!",function(e){e?cc.game.restart():cc.game.end()})}),this.initInfo()},t.prototype.initInfo=function(){this.getItem("label_version").string=l.DataManager.version},t.prototype.initComponent=function(){this.getItem("btn_youke").registerClick(this.onClickTouristLogin.bind(this)),this.getItem("btn_login").registerClick(this.onClickLogin.bind(this)),this.getItem("btn_custom").registerClick(this.onClickCustom.bind(this)),l.DataManager.loginType&h.LoginType.Tourist&&(this.getItem("btn_youke").node.active=!0),(l.DataManager.loginType&h.LoginType.Password||l.DataManager.loginType&h.LoginType.Account||l.DataManager.loginType&h.LoginType.Code)&&(this.getItem("btn_login").node.active=!0)},t.prototype.initEvent=function(){r.EventManager.on(this,h.EventDef.SocketInitSuccess,this.onSocketInitSuccess.bind(this))},t.prototype.onClickTouristLogin=function(){p.NetManager.protocolAccount.sendLogin({account:l.DataManager.account,password:"",login_type:2,ver_code:"",model:cc.sys.os,channel:l.DataManager.channel})},t.prototype.onClickLogin=function(){c.UIManager.popup("prefabs/login/LoginPopup")},t.prototype.onClickCustom=function(){p.NetManager.requestPostUrl(s.HttpCmd.GetVersion,{channel:l.DataManager.channel},function(e,t){if(1==t.ok){var n=t.info;if(""==n.serviceLink)return void c.UIManager.showTips(d.Tips.NotKeFu);g.default.openUrl(n.serviceLink)}else c.UIManager.showTips(d.Tips.NotKeFu)})},t.prototype.onSocketInitSuccess=function(){l.DataManager.loginInfo&&p.NetManager.protocolAccount.sendLogin(l.DataManager.loginInfo)},t=i([m],t)}(a.default));n.default=_,cc._RF.pop()},{"../Define":"Define","../common/Device":"Device","../common/Text":"Text","../common/log/LogWrap":"LogWrap","../manager/DataManager":"DataManager","../manager/EventManager":"EventManager","../manager/NetManager":"NetManager","../manager/UIManager":"UIManager","../net/NetCmd":"NetCmd","./base/BaseView":"BaseView"}],MD5:[function(e,t,n){"use strict";cc._RF.push(t,"5f24eNjgzZF/6A3e4qOrPOa","MD5");cc.Class({extends:cc.Component,hex_md5:function(e){return this.binl2hex(this.core_md5(this.str2binl(e),8*e.length))},b64_md5:function(e){return this.binl2b64(this.core_md5(this.str2binl(e),8*e.length))},str_md5:function(e){return this.binl2str(this.core_md5(this.str2binl(e),8*e.length))},hex_hmac_md5:function(e,t){return this.binl2hex(this.core_hmac_md5(e,t))},b64_hmac_md5:function(e,t){return this.binl2b64(this.core_hmac_md5(e,t))},str_hmac_md5:function(e,t){return this.binl2str(this.core_hmac_md5(e,t))},md5_vm_test:function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc")},core_md5:function(e,t){e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;for(var n=1732584193,o=-271733879,i=-1732584194,a=271733878,r=0;r<e.length;r+=16){var s=n,c=o,l=i,p=a;n=this.md5_ff(n,o,i,a,e[r+0],7,-680876936),a=this.md5_ff(a,n,o,i,e[r+1],12,-389564586),i=this.md5_ff(i,a,n,o,e[r+2],17,606105819),o=this.md5_ff(o,i,a,n,e[r+3],22,-1044525330),n=this.md5_ff(n,o,i,a,e[r+4],7,-176418897),a=this.md5_ff(a,n,o,i,e[r+5],12,1200080426),i=this.md5_ff(i,a,n,o,e[r+6],17,-1473231341),o=this.md5_ff(o,i,a,n,e[r+7],22,-45705983),n=this.md5_ff(n,o,i,a,e[r+8],7,1770035416),a=this.md5_ff(a,n,o,i,e[r+9],12,-1958414417),i=this.md5_ff(i,a,n,o,e[r+10],17,-42063),o=this.md5_ff(o,i,a,n,e[r+11],22,-1990404162),n=this.md5_ff(n,o,i,a,e[r+12],7,1804603682),a=this.md5_ff(a,n,o,i,e[r+13],12,-40341101),i=this.md5_ff(i,a,n,o,e[r+14],17,-1502002290),o=this.md5_ff(o,i,a,n,e[r+15],22,1236535329),n=this.md5_gg(n,o,i,a,e[r+1],5,-165796510),a=this.md5_gg(a,n,o,i,e[r+6],9,-1069501632),i=this.md5_gg(i,a,n,o,e[r+11],14,643717713),o=this.md5_gg(o,i,a,n,e[r+0],20,-373897302),n=this.md5_gg(n,o,i,a,e[r+5],5,-701558691),a=this.md5_gg(a,n,o,i,e[r+10],9,38016083),i=this.md5_gg(i,a,n,o,e[r+15],14,-660478335),o=this.md5_gg(o,i,a,n,e[r+4],20,-405537848),n=this.md5_gg(n,o,i,a,e[r+9],5,568446438),a=this.md5_gg(a,n,o,i,e[r+14],9,-1019803690),i=this.md5_gg(i,a,n,o,e[r+3],14,-187363961),o=this.md5_gg(o,i,a,n,e[r+8],20,1163531501),n=this.md5_gg(n,o,i,a,e[r+13],5,-1444681467),a=this.md5_gg(a,n,o,i,e[r+2],9,-51403784),i=this.md5_gg(i,a,n,o,e[r+7],14,1735328473),o=this.md5_gg(o,i,a,n,e[r+12],20,-1926607734),n=this.md5_hh(n,o,i,a,e[r+5],4,-378558),a=this.md5_hh(a,n,o,i,e[r+8],11,-2022574463),i=this.md5_hh(i,a,n,o,e[r+11],16,1839030562),o=this.md5_hh(o,i,a,n,e[r+14],23,-35309556),n=this.md5_hh(n,o,i,a,e[r+1],4,-1530992060),a=this.md5_hh(a,n,o,i,e[r+4],11,1272893353),i=this.md5_hh(i,a,n,o,e[r+7],16,-155497632),o=this.md5_hh(o,i,a,n,e[r+10],23,-1094730640),n=this.md5_hh(n,o,i,a,e[r+13],4,681279174),a=this.md5_hh(a,n,o,i,e[r+0],11,-358537222),i=this.md5_hh(i,a,n,o,e[r+3],16,-722521979),o=this.md5_hh(o,i,a,n,e[r+6],23,76029189),n=this.md5_hh(n,o,i,a,e[r+9],4,-640364487),a=this.md5_hh(a,n,o,i,e[r+12],11,-421815835),i=this.md5_hh(i,a,n,o,e[r+15],16,530742520),o=this.md5_hh(o,i,a,n,e[r+2],23,-995338651),n=this.md5_ii(n,o,i,a,e[r+0],6,-198630844),a=this.md5_ii(a,n,o,i,e[r+7],10,1126891415),i=this.md5_ii(i,a,n,o,e[r+14],15,-1416354905),o=this.md5_ii(o,i,a,n,e[r+5],21,-57434055),n=this.md5_ii(n,o,i,a,e[r+12],6,1700485571),a=this.md5_ii(a,n,o,i,e[r+3],10,-1894986606),i=this.md5_ii(i,a,n,o,e[r+10],15,-1051523),o=this.md5_ii(o,i,a,n,e[r+1],21,-2054922799),n=this.md5_ii(n,o,i,a,e[r+8],6,1873313359),a=this.md5_ii(a,n,o,i,e[r+15],10,-30611744),i=this.md5_ii(i,a,n,o,e[r+6],15,-1560198380),o=this.md5_ii(o,i,a,n,e[r+13],21,1309151649),n=this.md5_ii(n,o,i,a,e[r+4],6,-145523070),a=this.md5_ii(a,n,o,i,e[r+11],10,-1120210379),i=this.md5_ii(i,a,n,o,e[r+2],15,718787259),o=this.md5_ii(o,i,a,n,e[r+9],21,-343485551),n=this.safe_add(n,s),o=this.safe_add(o,c),i=this.safe_add(i,l),a=this.safe_add(a,p)}return Array(n,o,i,a)},md5_cmn:function(e,t,n,o,i,a){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(o,a)),i),n)},md5_ff:function(e,t,n,o,i,a,r){return this.md5_cmn(t&n|~t&o,e,t,i,a,r)},md5_gg:function(e,t,n,o,i,a,r){return this.md5_cmn(t&o|n&~o,e,t,i,a,r)},md5_hh:function(e,t,n,o,i,a,r){return this.md5_cmn(t^n^o,e,t,i,a,r)},md5_ii:function(e,t,n,o,i,a,r){return this.md5_cmn(n^(t|~o),e,t,i,a,r)},core_hmac_md5:function(e,t){var n=this.str2binl(e);n.length>16&&(n=this.core_md5(n,8*e.length));for(var o=Array(16),i=Array(16),a=0;a<16;a++)o[a]=909522486^n[a],i[a]=1549556828^n[a];var r=this.core_md5(o.concat(str2binl(t)),512+8*t.length);return this.core_md5(i.concat(r),640)},safe_add:function(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n},bit_rol:function(e,t){return e<<t|e>>>32-t},str2binl:function(e){for(var t=Array(),n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t},binl2str:function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t},binl2hex:function(e){for(var t="0123456789abcdef",n="",o=0;o<4*e.length;o++)n+=t.charAt(e[o>>2]>>o%4*8+4&15)+t.charAt(e[o>>2]>>o%4*8&15);return n},binl2b64:function(e){for(var t="",n=0;n<4*e.length;n+=3)for(var o=(e[n>>2]>>n%4*8&255)<<16|(e[n+1>>2]>>(n+1)%4*8&255)<<8|e[n+2>>2]>>(n+2)%4*8&255,i=0;i<4;i++)8*n+6*i>32*e.length?t+="":t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(o>>6*(3-i)&63);return t}}),cc._RF.pop()},{}],MJCPBase:[function(e,t,n){"use strict";cc._RF.push(t,"929a9/2R8RHmI8mpSUWU+hb","MJCPBase");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./MJCardBase"),c=e("./MJDefine"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_cp=null,t.cp_child=[],t.backFrame=null,t}return o(t,e),t.prototype.setChiPengValue=function(e,t,n){return a(this,void 0,void 0,function(){var o;return r(this,function(i){switch(i.label){case 0:o=0,i.label=1;case 1:return o<this.cp_child.length?[4,this.cp_child[o].getComponent(s.default).setSpirteValue(t[o])]:[3,4];case 2:i.sent(),i.label=3;case 3:return o++,[3,1];case 4:return e==c.MJOperType.Peng&&(void 0,this.cp_child[3-n].getComponent(s.default).setSpirteCardBack(this.backFrame)),[2]}})})},i([u(cc.Node)],t.prototype,"node_cp",void 0),i([u(cc.Node)],t.prototype,"cp_child",void 0),i([u(cc.SpriteFrame)],t.prototype,"backFrame",void 0),t=i([p],t)}(cc.Component);n.default=h,cc._RF.pop()},{"./MJCardBase":"MJCardBase","./MJDefine":"MJDefine"}],MJCPGAreaBase:[function(e,t,n){"use strict";cc._RF.push(t,"94d0cU/z+JLVoLKfFKCN+X/","MJCPGAreaBase");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./MJDefine"),r=e("./MJCPGBase"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_area=null,t.mj_combo=null,t.viewIdx=0,t.lastNum=0,t.lastPos=cc.v2(0,0),t}return o(t,e),t.prototype.createCPGMJ=function(e,t,n){var o=null;o=cc.instantiate(this.mj_combo),e==a.MJOperType.Chi||e==a.MJOperType.Peng?o.getComponent(r.default).createChiPengCard(e,t,n):e==a.MJOperType.MingGang?o.getComponent(r.default).createMingGangCard(t,n):e==a.MJOperType.AnGang?o.getComponent(r.default).createAnGangCard(t):e==a.MJOperType.BuGang&&o.getComponent(r.default).createBuGangCard(t,n),o.setPosition(cc.v2(0,0)),1!=this.viewIdx&&3!=this.viewIdx||(o.x=this.lastPos.x+10*this.lastNum,this.lastNum=e==a.MJOperType.AnGang?4:3,this.lastPos=o.position),this.node_area.addChild(o)},t.prototype.pengToBuGangCard=function(e,t){for(var n=e[0],o=0;o<this.node_area.childrenCount;o++){var i=this.node_area.children[o];if(i.getComponent(r.default).getCardValue()==n){i.getComponent(r.default).transferPengToGang(e,t);break}}},t.prototype.clearCPGMJ=function(){this.node_area.removeAllChildren()},i([l(cc.Node)],t.prototype,"node_area",void 0),i([l(cc.Prefab)],t.prototype,"mj_combo",void 0),i([l({tooltip:"\u89c6\u89d2\u4e0b\u6807 0\u4e3a\u81ea\u5df1\u89c6\u89d2"})],t.prototype,"viewIdx",void 0),t=i([c],t)}(cc.Component);n.default=p,cc._RF.pop()},{"./MJCPGBase":"MJCPGBase","./MJDefine":"MJDefine"}],MJCPGBase:[function(e,t,n){"use strict";cc._RF.push(t,"ffbeeAARqtKqKuETp5g8M3d","MJCPGBase");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../common/log/LogWrap"),c=e("./MJCardBase"),l=e("./MJDefine"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MJCard=null,t.backFrame=null,t.CardSize=cc.size(0,0),t.disPos=cc.v2(),t.exOffset=cc.v2(),t.increase=!0,t.cpgIdx=0,t.cardValue=null,t}return o(t,e),t.prototype.createChiPengCard=function(e,t,n){return a(this,void 0,void 0,function(){var o,i,a,s,p,u;return r(this,function(r){switch(r.label){case 0:o=3,i=0,r.label=1;case 1:return i<t.length?[4,(a=cc.instantiate(this.MJCard)).getComponent(c.default).setSpirteValue(t[i])]:[3,4];case 2:r.sent(),s=this.getCardPos(o,i),a.setPosition(s.x,s.y),p=1==this.cpgIdx?n-1:3-n,e==l.MJOperType.Peng&&i==p&&a.getComponent(c.default).setSpirteCardBack(this.backFrame),this.node.addChild(a),a.zIndex=this.increase?i:t.length-i,r.label=3;case 3:return i++,[3,1];case 4:return u=this.getContentSize(o),this.node.setContentSize(u),this.cardValue=t[0],[2]}})})},t.prototype.createMingGangCard=function(e,t){return a(this,void 0,void 0,function(){var n,o,i,a,s,l,p;return r(this,function(r){switch(r.label){case 0:n=3,o=this.exOffset,i=0,r.label=1;case 1:return i<e.length?[4,(a=cc.instantiate(this.MJCard)).getComponent(c.default).setSpirteValue(e[i])]:[3,4];case 2:r.sent(),this.node.addChild(a),s=cc.v2(),i<3?(s=this.getCardPos(n,i),a.setPosition(s.x,s.y),a.zIndex=this.increase?i+1:e.length-i):(l=1==this.cpgIdx?t-1:3-t,s=this.getCardPos(n,l),a.setPosition(s.x+o.x,s.y+o.y),a.zIndex=this.increase?i+1:0,a.getComponent(c.default).setSpirteCardBack(this.backFrame)),r.label=3;case 3:return i++,[3,1];case 4:return p=this.getContentSize(n),this.node.setContentSize(p),this.cardValue=e[0],[2]}})})},t.prototype.createBuGangCard=function(e,t){return a(this,void 0,void 0,function(){var n,o,i,a,s,l;return r(this,function(r){switch(r.label){case 0:n=3,o=0,r.label=1;case 1:return o<e.length?[4,(i=cc.instantiate(this.MJCard)).getComponent(c.default).setSpirteValue(e[o])]:[3,4];case 2:r.sent(),this.node.addChild(i),a=cc.v2(),o<3?(a=this.getCardPos(n,o),i.setPosition(a.x,a.y),i.zIndex=this.increase?o+1:e.length-o):(a=this.getCardPos(n,1),i.setPosition(a.x+this.exOffset.x,a.y+this.exOffset.y),i.zIndex=this.increase?o+1:0),r.label=3;case 3:return o++,[3,1];case 4:return s=this.getContentSize(n),this.node.setContentSize(s),l=1==this.cpgIdx?t-1:3-t,this.node.children[l].getComponent(c.default).setSpirteCardBack(this.backFrame),this.cardValue=e[0],[2]}})})},t.prototype.createAnGangCard=function(e){return a(this,void 0,void 0,function(){var t,n,o,i,a;return r(this,function(r){switch(r.label){case 0:t=4,n=0,r.label=1;case 1:return n<e.length?(o=cc.instantiate(this.MJCard),0!=n?[3,3]:[4,o.getComponent(c.default).setSpirteValue(e[n])]):[3,6];case 2:return r.sent(),[3,4];case 3:o.getComponent(c.default).setSpirteCardBack(this.backFrame),r.label=4;case 4:i=this.getCardPos(t,n),o.setPosition(i.x,i.y),this.node.addChild(o),o.zIndex=this.increase?n:e.length-n,r.label=5;case 5:return n++,[3,1];case 6:return a=this.getContentSize(t),this.node.setContentSize(a),this.cardValue=e[0],[2]}})})},t.prototype.transferPengToGang=function(e,t){this.node.removeAllChildren(),this.createBuGangCard(e,t)},t.prototype.getCardPos=function(e,t){var n=this.disPos;return cc.v2(-(e-1)/2*n.x+t*n.x,-(e-1)/2*n.y+t*n.y)},t.prototype.getContentSize=function(e){var t=this.CardSize,n=this.disPos,o=cc.size(t.width+(e-1)*Math.abs(n.x),t.height+(e-1)*Math.abs(n.y));return s.LogWrap.log("%c \u5403\u78b0\u6760\u8282\u70b9\u5927\u5c0f","color:blue;font-size:28px",o),o},t.prototype.getCardValue=function(){return this.cardValue},i([h(cc.Prefab)],t.prototype,"MJCard",void 0),i([h(cc.SpriteFrame)],t.prototype,"backFrame",void 0),i([h({tooltip:"\u9ebb\u5c06\u5bbd\u9ad8"})],t.prototype,"CardSize",void 0),i([h({tooltip:"\u95f4\u9694\u8ddd\u79bb"})],t.prototype,"disPos",void 0),i([h({tooltip:"\u7279\u6b8a\u9ebb\u5c06\u504f\u79fb\u91cf"})],t.prototype,"exOffset",void 0),i([h({tooltip:"\u5c42\u7ea7\u9012\u589e\u6216\u8005\u9012\u51cf"})],t.prototype,"increase",void 0),i([h({tooltip:"\u5403\u78b0\u6760\u724c\u7ec4\u4e0b\u6807"})],t.prototype,"cpgIdx",void 0),t=i([u],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../common/log/LogWrap":"LogWrap","./MJCardBase":"MJCardBase","./MJDefine":"MJDefine"}],MJCardBase:[function(e,t,n){"use strict";cc._RF.push(t,"c9d32J5DiJJO7AiAwTfEnLl","MJCardBase");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../manager/ResManager"),c=e("../../manager/DataManager"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cardBack=null,t.cardValue=null,t.greyBack=null,t.extraPath="",t.MahJongValue=null,t.GreyState=!1,t}return o(t,e),t.prototype.setSpirteValue=function(e){return a(this,void 0,void 0,function(){var t,n;return r(this,function(o){switch(o.label){case 0:return this.MahJongValue=e,t=c.DataManager.getGameName(c.DataManager.gameType),[4,s.ResManager.loadResAsync("game/"+t+"/res/mahjong/value/"+(this.extraPath+e),cc.SpriteFrame)];case 1:return n=o.sent(),this.MahJongValue==parseInt(n.name)&&(this.cardValue.spriteFrame=n),[2]}})})},t.prototype.setSpirteCardBack=function(e){this.cardValue.spriteFrame=null,this.cardBack.spriteFrame=e},t.prototype.getCardBackNode=function(){return this.cardBack.node},t.prototype.getCardValue=function(){return this.MahJongValue},t.prototype.setGreyBack=function(e){this.greyBack.active=e,this.GreyState=e},t.prototype.getGreyState=function(){return this.GreyState},i([u(cc.Sprite)],t.prototype,"cardBack",void 0),i([u(cc.Sprite)],t.prototype,"cardValue",void 0),i([u(cc.Node)],t.prototype,"greyBack",void 0),i([u(cc.String)],t.prototype,"extraPath",void 0),t=i([p],t)}(cc.Component);n.default=h,cc._RF.pop()},{"../../manager/DataManager":"DataManager","../../manager/ResManager":"ResManager"}],MJData:[function(e,t,n){"use strict";cc._RF.push(t,"1784dRh29RP2Z0iYJJ/6Keu","MJData"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){this.handCardNum=[14,14,14,14],this.bankerPos=-1,this.turnMeOperate=!1,this.hasOperAction=!1,this.userCardArr=[],this.pengCards=null,this.huCombo=null,this.chiCombo=[],this.gangCombo=[],this.tingCombo=null,this.HuCardList=[],this.MultipleHandClick=!1}return e.prototype.ResetData=function(){this.handCardNum=[14,14,14,14],this.bankerPos=-1,this.turnMeOperate=!1,this.hasOperAction=!1,this.userCardArr=[],this.pengCards=null,this.huCombo=null,this.chiCombo=[],this.gangCombo=[],this.tingCombo=null,this.HuCardList=[],this.MultipleHandClick=!1},e.instance=new e,e}();n.MJData=o.instance,cc._RF.pop()},{}],MJDefine:[function(e,t,n){"use strict";var o,i;cc._RF.push(t,"5e2f1r8oplEko9Sop+N9Ovp","MJDefine"),Object.defineProperty(n,"__esModule",{value:!0});var a,r=e("../../common/utils/Utils");n.MJEventDef={MjShootEvent:"mj_shoot_event",MjChiEvent:"mj_chi_event",MjPengEvent:"mj_peng_event",MjGangEvent:"mj_gang_event",MjHuEvent:"mj_hu_event",MjTingEvent:"mj_ting_event",MjCheckEvent:"mj_check_event",OpenMulOperView:"open_mul_oper_view",MjBrightEvent:"mj_bright_event",TingTipsEvent:"ting_tips_event"},n.XLCHEventDef={PushChangeCard:"push_change_card"},function(e){e[e.NoStatus=0]="NoStatus",e[e.Check=1]="Check",e[e.Shoot=2]="Shoot",e[e.Chi=3]="Chi",e[e.Peng=4]="Peng",e[e.MingGang=5]="MingGang",e[e.AnGang=6]="AnGang",e[e.BuGang=7]="BuGang",e[e.Zimo=8]="Zimo",e[e.DianPao=9]="DianPao",e[e.Ting=10]="Ting",e[e.BuHua=99]="BuHua"}(a=n.MJOperType||(n.MJOperType={})),n.MJEffectUrl="game/mahjong/effect/",n.MJEffect=((o={})[a.Chi]=n.MJEffectUrl+"chi/chi",o[a.Peng]=n.MJEffectUrl+"peng/peng",o[a.MingGang]=n.MJEffectUrl+"gang/gang",o[a.AnGang]=n.MJEffectUrl+"gang/gang",o[a.BuGang]=n.MJEffectUrl+"gang/gang",o[a.Zimo]=n.MJEffectUrl+"zimo/zm",o[a.DianPao]=n.MJEffectUrl+"dianpao/dianpao",o[a.Ting]=n.MJEffectUrl+"ting/ting",o[a.BuHua]=n.MJEffectUrl+"buhua/buhua",o),n.MJSound=((i={})[a.Chi]="chi",i[a.Peng]="peng",i[a.MingGang]="gang",i[a.AnGang]="gang",i[a.BuGang]="gang",i[a.Zimo]="hu"+r.default.getRandomInt(1,3),i[a.DianPao]="hu"+r.default.getRandomInt(1,3),i[a.Ting]="ting",i[a.BuHua]="flower",i),cc._RF.pop()},{"../../common/utils/Utils":"Utils"}],MJGangBase:[function(e,t,n){"use strict";cc._RF.push(t,"5fcacWSMGpLzYLecodsNrEk","MJGangBase");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./MJDefine"),c=e("./MJCardBase"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MJCard=null,t.backFrame=null,t.startPos=cc.v2(-50,0),t}return o(t,e),t.prototype.setGangValue=function(e,t,n){e==s.MJOperType.MingGang?this.createMingGangCard(t,n):e==s.MJOperType.BuGang?this.createBuGangCard(t,n):e==s.MJOperType.AnGang&&this.createAnGangCard(t,n)},t.prototype.createMingGangCard=function(e,t){return a(this,void 0,void 0,function(){var n,o,i,a;return r(this,function(r){switch(r.label){case 0:n=cc.v2(-50,0),o=0,r.label=1;case 1:return o<e.length?[4,(i=cc.instantiate(this.MJCard)).getComponent(c.default).setSpirteValue(e[o])]:[3,4];case 2:r.sent(),o<3?i.setPosition(n.x+50*o,n.y):(a=50*(3-t)+n.x,i.setPosition(a,n.y+13),i.getComponent(c.default).setSpirteCardBack(this.backFrame)),this.node.addChild(i),r.label=3;case 3:return o++,[3,1];case 4:return this.node.setContentSize(cc.size(154,72)),[2]}})})},t.prototype.createBuGangCard=function(e,t){return a(this,void 0,void 0,function(){var n,o,i,a;return r(this,function(r){switch(r.label){case 0:n=cc.v2(-50,0),o=0,r.label=1;case 1:return o<e.length?[4,(i=cc.instantiate(this.MJCard)).getComponent(c.default).setSpirteValue(e[o])]:[3,4];case 2:r.sent(),o<3?i.setPosition(n.x+50*o,n.y):i.setPosition(n.x+50,n.y+13),this.node.addChild(i),r.label=3;case 3:return o++,[3,1];case 4:return this.node.setContentSize(cc.size(154,72)),a=3-t,this.node.children[a].getComponent(c.default).setSpirteCardBack(this.backFrame),[2]}})})},t.prototype.createAnGangCard=function(e,t){return a(this,void 0,void 0,function(){var t,n,o;return r(this,function(i){switch(i.label){case 0:t=cc.v2(-75,0),n=0,i.label=1;case 1:return n<e.length?(o=cc.instantiate(this.MJCard),0!=n?[3,3]:[4,o.getComponent(c.default).setSpirteValue(e[n])]):[3,6];case 2:return i.sent(),[3,4];case 3:o.getComponent(c.default).setSpirteCardBack(this.backFrame),i.label=4;case 4:o.setPosition(t.x+50*n,t.y),this.node.addChild(o),i.label=5;case 5:return n++,[3,1];case 6:return this.node.setContentSize(cc.size(204,72)),[2]}})})},i([u(cc.Prefab)],t.prototype,"MJCard",void 0),i([u(cc.SpriteFrame)],t.prototype,"backFrame",void 0),t=i([p],t)}(cc.Component);n.default=h,cc._RF.pop()},{"./MJCardBase":"MJCardBase","./MJDefine":"MJDefine"}],MJHandAreaBase:[function(e,t,n){"use strict";cc._RF.push(t,"41e6561SaNIAKSWVuItA36/","MJHandAreaBase");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./MJCardBase"),r=e("./MJData"),s=e("../../manager/EventManager"),c=e("./MJDefine"),l=e("../../common/log/LogWrap"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mj_hand=null,t.mj_prefab=null,t.handCardIdx=0,t.cancel_select=null,t._enableDrag=!1,t.DragCard=null,t.StartPos=cc.v2(),t.DisX=0,t.DisY=0,t.LastDisX=0,t.LastDisY=0,t.increase=!0,t._selectedMJ=null,t}return o(t,e),t.prototype.onLoad=function(){null!=this.cancel_select&&this.cancel_select.on(cc.Node.EventType.TOUCH_END,this.onMJCancelClick.bind(this))},t.prototype.createHandMJ=function(e){this._selectedMJ=null,this.removeAllHand();var t=this.StartPos,n=0,o=0;e%3==2&&(n=this.LastDisX,o=this.LastDisY);for(var i=0;i<e;i++){var r=null;this.mj_hand.children[i]?r=this.mj_hand.children[i]:(r=cc.instantiate(this.mj_prefab),this.mj_hand.addChild(r)),r.active=!0,r.zIndex=this.increase?i:e-i,r.position=cc.v2(t.x+i*this.DisX,t.y+i*this.DisY),0===this.handCardIdx&&(r.getComponent(a.default).setGreyBack(!1),this.initClick(r),!0===this._enableDrag&&this.initDragStuffs(r)),i==e-1&&(r.x+=n,r.y+=o)}},t.prototype.removeAllHand=function(){for(var e=this.mj_hand.childrenCount,t=0;t<e;t++){this.mj_hand.children[t].active=!1}},t.prototype.setHandValue=function(){for(var e=0,t=0;t<this.mj_hand.childrenCount;t++){var n=this.mj_hand.children[t];!0===n.active&&(n.getComponent(a.default).setSpirteValue(r.MJData.userCardArr[e]),e++)}},t.prototype.initDragStuffs=function(e){var t=this;e.on(cc.Node.EventType.TOUCH_START,function(n){if(r.MJData.turnMeOperate){e.active=!0;var o=t.node.convertToNodeSpaceAR(n.touch.getLocation());t.DragCard.active=!1,t.DragCard.x=o.x,t.DragCard.y=o.y}}),e.on(cc.Node.EventType.TOUCH_MOVE,function(n){if(r.MJData.turnMeOperate&&!(Math.abs(n.getDeltaX())+Math.abs(n.getDeltaY())<.5)){e.opacity=0;var o=t.node.convertToNodeSpaceAR(n.touch.getLocation());t.DragCard.active=!0,t.DragCard.x=o.x,t.DragCard.y=o.y}}),e.on(cc.Node.EventType.TOUCH_END,function(n){r.MJData.turnMeOperate&&(e.active=!0,e.opacity=255,n.getLocationY()>=cc.view.getVisibleSize().height/4&&t.shootEvent(e))}),e.on(cc.Node.EventType.TOUCH_CANCEL,function(n){r.MJData.turnMeOperate&&(e.active=!0,e.opacity=255,n.getLocationY()>=cc.view.getVisibleSize().height/5&&t.shootEvent(e))})},t.prototype.initClick=function(e){var t=this;e.off(cc.Node.EventType.TOUCH_END),e.on(cc.Node.EventType.TOUCH_END,function(e){t.MJClickEvent(e.target)})},t.prototype.MJClickEvent=function(e){if(r.MJData.MultipleHandClick){var t=e.getComponent(a.default).getCardValue();0==e.y?(s.EventManager.emit(c.XLCHEventDef.PushChangeCard,{card:e,cardValue:t,is_increase:!0}),e.y+=10):(s.EventManager.emit(c.XLCHEventDef.PushChangeCard,{card:e,cardValue:t,is_increase:!1}),e.y=0)}else{if(e==this._selectedMJ)return s.EventManager.emit(c.MJEventDef.MjBrightEvent),this.shootEvent(this._selectedMJ),this._selectedMJ.y-=10,void(this._selectedMJ=null);null!=this._selectedMJ&&(this._selectedMJ.y-=10);var n=e.getComponent(a.default).getCardValue();s.EventManager.emit(c.MJEventDef.MjBrightEvent,{cardValue:n}),null!=r.MJData.tingCombo&&s.EventManager.emit(c.MJEventDef.TingTipsEvent,{cardValue:n}),e.y+=10,this._selectedMJ=e}},t.prototype.onMJCancelClick=function(){this._selectedMJ&&(console.log("\u53d6\u6d88\u9009\u4e2d\u9ebb\u5c06"),this._selectedMJ.y-=10,s.EventManager.emit(c.MJEventDef.MjBrightEvent),this._selectedMJ=null),s.EventManager.emit(c.MJEventDef.TingTipsEvent)},t.prototype.shootEvent=function(e){if(r.MJData.turnMeOperate)if(r.MJData.hasOperAction)l.LogWrap.log("\u6709\u64cd\u4f5c\u672a\u54cd\u5e94");else{var t=e.getComponent(a.default).getCardValue();s.EventManager.emit(c.MJEventDef.MjShootEvent,t)}else l.LogWrap.log("\u4e0d\u662f\u8f6e\u5230\u6211\u64cd\u4f5c")},i([h({type:cc.Node,tooltip:"\u624b\u724c\u8282\u70b9"})],t.prototype,"mj_hand",void 0),i([h({type:cc.Prefab,tooltip:"\u624b\u724c\u9884\u5236\u4f53"})],t.prototype,"mj_prefab",void 0),i([h({tooltip:"\u624b\u724c\u89c6\u89d2\u4e0b\u6807 0\u4e3a\u81ea\u5df1\u89c6\u89d2"})],t.prototype,"handCardIdx",void 0),i([h({type:cc.Node,tooltip:"\u53d6\u6d88\u9009\u4e2d\u9ebb\u5c06\u8282\u70b9",visible:function(){return 0==this.handCardIdx}})],t.prototype,"cancel_select",void 0),i([h({tooltip:"\u662f\u5426\u5f00\u542f\u62d6\u62fd\u6a21\u5f0f",visible:function(){return 0==this.handCardIdx}})],t.prototype,"_enableDrag",void 0),i([h({type:cc.Node,tooltip:"\u62d6\u62fd\u7684\u6251\u514b\u724c\u8282\u70b9",visible:function(){return this._enableDrag&&0==this.handCardIdx}})],t.prototype,"DragCard",void 0),i([h({tooltip:"\u8d77\u59cb\u4f4d\u7f6e"})],t.prototype,"StartPos",void 0),i([h({tooltip:"\u9ebb\u5c06\u95f4\u9694"})],t.prototype,"DisX",void 0),i([h({tooltip:"\u9ebb\u5c06\u95f4\u9694"})],t.prototype,"DisY",void 0),i([h({tooltip:"\u6700\u540e\u4e00\u5f20\u9ebb\u5c06\u95f4\u9694"})],t.prototype,"LastDisX",void 0),i([h({tooltip:"\u6700\u540e\u4e00\u5f20\u9ebb\u5c06\u95f4\u9694"})],t.prototype,"LastDisY",void 0),i([h({tooltip:"\u5c42\u7ea7\u9012\u589e\u6216\u8005\u9012\u51cf"})],t.prototype,"increase",void 0),t=i([u],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../common/log/LogWrap":"LogWrap","../../manager/EventManager":"EventManager","./MJCardBase":"MJCardBase","./MJData":"MJData","./MJDefine":"MJDefine"}],MJOperBase:[function(e,t,n){"use strict";cc._RF.push(t,"f9399+tTxdMb4vmn/ljMwYo","MJOperBase");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../common/utils/Utils"),r=e("../../manager/EventManager"),s=e("./MJDefine"),c=e("./MJData"),l=e("../../common/log/LogWrap"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_oper=null,t.oper_list=null,t.btn_chi=null,t.btn_peng=null,t.btn_gang=null,t.btn_ting=null,t.btn_hu=null,t.btn_guo=null,t}return o(t,e),t.prototype.onLoad=function(){a.default.addClickEventEND(this.btn_chi,this.onClickOperEvent.bind(this)),a.default.addClickEventEND(this.btn_peng,this.onClickOperEvent.bind(this)),a.default.addClickEventEND(this.btn_gang,this.onClickOperEvent.bind(this)),a.default.addClickEventEND(this.btn_ting,this.onClickOperEvent.bind(this)),a.default.addClickEventEND(this.btn_hu,this.onClickOperEvent.bind(this)),a.default.addClickEventEND(this.btn_guo,this.onClickOperEvent.bind(this)),this.hideOption()},t.prototype.hideOption=function(){this.btn_chi.active=!1,this.btn_peng.active=!1,this.btn_gang.active=!1,this.btn_ting.active=!1,this.btn_hu.active=!1,this.btn_guo.active=!0,this.oper_list.active=!1,this.node_oper.active=!1},t.prototype.onClickOperEvent=function(e){var t=e.name;if("btn_chi"==t){if(c.MJData.chiCombo.length>1)return l.LogWrap.log("\u6253\u5f00\u9009\u62e9\u591a\u5403\u7684\u724c\u7c7b\u7ec4\u5408\u754c\u9762"),r.EventManager.emit(s.MJEventDef.OpenMulOperView,c.MJData.chiCombo),void(this.oper_list.active=!1);r.EventManager.emit(s.MJEventDef.MjChiEvent,c.MJData.chiCombo[0])}else if("btn_peng"==t)r.EventManager.emit(s.MJEventDef.MjPengEvent,c.MJData.pengCards);else if("btn_gang"==t){if(c.MJData.gangCombo.length>1)return l.LogWrap.log("\u6253\u5f00\u9009\u62e9\u591a\u6760\u7684\u724c\u7c7b\u7ec4\u5408\u754c\u9762"),r.EventManager.emit(s.MJEventDef.OpenMulOperView,c.MJData.gangCombo),void(this.oper_list.active=!1);r.EventManager.emit(s.MJEventDef.MjGangEvent,c.MJData.gangCombo[0])}else"btn_ting"==t?r.EventManager.emit(s.MJEventDef.MjTingEvent):"btn_hu"==t?r.EventManager.emit(s.MJEventDef.MjHuEvent,c.MJData.huCombo):"btn_guo"==t&&r.EventManager.emit(s.MJEventDef.MjCheckEvent);this.node_oper.active=!1},t.prototype.showOption=function(e){"guo"==e?this.btn_guo.active=!0:(this.oper_list.getChildByName("btn_"+e).active=!0,this.oper_list.active=!0);this.node_oper.active=!0},i([h(cc.Node)],t.prototype,"node_oper",void 0),i([h(cc.Node)],t.prototype,"oper_list",void 0),i([h(cc.Node)],t.prototype,"btn_chi",void 0),i([h(cc.Node)],t.prototype,"btn_peng",void 0),i([h(cc.Node)],t.prototype,"btn_gang",void 0),i([h(cc.Node)],t.prototype,"btn_ting",void 0),i([h(cc.Node)],t.prototype,"btn_hu",void 0),i([h(cc.Node)],t.prototype,"btn_guo",void 0),t=i([u],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../common/log/LogWrap":"LogWrap","../../common/utils/Utils":"Utils","../../manager/EventManager":"EventManager","./MJData":"MJData","./MJDefine":"MJDefine"}],MJOutAreaBase:[function(e,t,n){"use strict";cc._RF.push(t,"adb0fzC+a9B3aw7nxCIcT8U","MJOutAreaBase");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./MJCardBase"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_outArea=null,t.mj_prefab=null,t.startPos=cc.v2(),t.offset=cc.v2(),t.lineOffset=cc.v2(),t.increase=!0,t.lineNumArr=[],t.maxIndex=100,t.nodePool=null,t.sumNum=0,t.line=0,t.lineIdx=0,t.lastAddCard=null,t}return o(t,e),t.prototype.onLoad=function(){this.nodePool=new cc.NodePool},t.prototype.onDestroy=function(){this.nodePool.clear()},t.prototype.createOutMJ=function(e,t){void 0===t&&(t=!0);var n=null;n=this.nodePool.size()>0?this.nodePool.get():cc.instantiate(this.mj_prefab);var o=this.startPos.x+this.offset.x*this.lineIdx+this.line*this.lineOffset.x,i=this.startPos.y+this.offset.y*this.lineIdx+this.line*this.lineOffset.y;n.setPosition(cc.v2(o,i)),n.active=t,this.lastAddCard=n,this.node_outArea.addChild(n,this.increase?this.sumNum:this.maxIndex-this.sumNum),this.sumNum++,this.lineIdx++,this.lineIdx>this.lineNumArr[this.line]&&(this.line++,this.lineIdx=0),n.getComponent(a.default).setSpirteValue(e)},t.prototype.delEndOutMJ=function(){this.clearOutMJ(this.lastAddCard)},t.prototype.clearOutMJ=function(e){var t=e||this.node_outArea.children[0];t.stopAllActions(),this.nodePool.put(t),t.removeFromParent(),this.lineIdx--,this.lineIdx<0&&(this.line--,this.lineIdx=this.lineNumArr[this.line])},t.prototype.removeAllOut=function(){for(var e=this.node_outArea.childrenCount,t=0;t<e;t++)this.clearOutMJ()},t.prototype.getLastAddCard=function(){return this.lastAddCard},i([c(cc.Node)],t.prototype,"node_outArea",void 0),i([c(cc.Prefab)],t.prototype,"mj_prefab",void 0),i([c({tooltip:"\u8d77\u59cb\u4f4d\u7f6e"})],t.prototype,"startPos",void 0),i([c({tooltip:"\u9ebb\u5c06\u504f\u79fb\u91cf"})],t.prototype,"offset",void 0),i([c({tooltip:"\u6362\u884c\u504f\u79fb\u91cf"})],t.prototype,"lineOffset",void 0),i([c({tooltip:"\u5c42\u6b21\u9012\u589e\u6216\u8005\u9012\u51cf"})],t.prototype,"increase",void 0),i([c(Number)],t.prototype,"lineNumArr",void 0),t=i([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./MJCardBase":"MJCardBase"}],MJOutEffect:[function(e,t,n){"use strict";cc._RF.push(t,"b6895yDmOZIAbLAAyQ/9fSV","MJOutEffect");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./MJCardBase"),r=[0,90,180,-90],s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.mj_prefab=null,t.out_pos=[],t}return o(t,e),t.prototype.showOutEffect=function(e,t,n){var o=cc.instantiate(this.mj_prefab),i=this.out_pos[t].x,s=this.out_pos[t].y;o.setScale(1.2,1.2),o.setPosition(cc.v2(i,s)),o.getComponent(a.default).setSpirteValue(e),this.node.addChild(o);var c=n.parent.convertToWorldSpaceAR(n.position),l=cc.v2(this.node.convertToNodeSpaceAR(c)),p=r[t],u=cc.sequence(cc.delayTime(.1),cc.spawn(cc.moveTo(.3,l),cc.scaleTo(.3,.7),cc.rotateTo(.3,p)),cc.callFunc(function(){o.removeFromParent(),n.active=!0}));o.runAction(u)},i([l(cc.Prefab)],t.prototype,"mj_prefab",void 0),i([l(cc.Vec2)],t.prototype,"out_pos",void 0),t=i([c],t)}(cc.Component);n.default=p,cc._RF.pop()},{"./MJCardBase":"MJCardBase"}],MJShowAreaBase:[function(e,t,n){"use strict";cc._RF.push(t,"e63aavYvXFIUrNGLR58Luu7","MJShowAreaBase");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./MJCardBase"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.show_area=null,t.ming_card=null,t.StartPos=cc.v2(),t.DisX=0,t.DisY=0,t.lastDirX=0,t.LastDisY=0,t.increase=!0,t}return o(t,e),t.prototype.showMingCard=function(e){var t=e.length,n=null,o=null;t%3==2&&(n=this.lastDirX,o=this.LastDisY);for(var i=this.StartPos,r=0;r<t;r++){var s=cc.instantiate(this.ming_card);s.getComponent(a.default).setSpirteValue(e[r]),s.position=cc.v2(i.x+r*this.DisX,i.y+r*this.DisY),r==t-1&&n&&o&&(s.x+=n,s.y+=o),this.show_area.addChild(s),s.zIndex=this.increase?r:t-r}},t.prototype.removeMingCard=function(){this.show_area.removeAllChildren()},i([c(cc.Node)],t.prototype,"show_area",void 0),i([c(cc.Prefab)],t.prototype,"ming_card",void 0),i([c({tooltip:"\u8d77\u59cb\u4f4d\u7f6e"})],t.prototype,"StartPos",void 0),i([c({tooltip:"\u9ebb\u5c06\u95f4\u9694"})],t.prototype,"DisX",void 0),i([c({tooltip:"\u9ebb\u5c06\u95f4\u9694"})],t.prototype,"DisY",void 0),i([c({tooltip:"\u9ebb\u5c06\u95f4\u9694"})],t.prototype,"lastDirX",void 0),i([c({tooltip:"\u6700\u540e\u4e00\u5f20\u9ebb\u5c06\u95f4\u9694"})],t.prototype,"LastDisY",void 0),i([c({tooltip:"\u5c42\u7ea7\u9012\u589e\u6216\u8005\u9012\u51cf"})],t.prototype,"increase",void 0),t=i([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"./MJCardBase":"MJCardBase"}],MailDetail:[function(e,t,n){"use strict";cc._RF.push(t,"93200KpqoxGW6brrFqjMQrv","MailDetail");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../common/utils/Utils"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){this.updateInfo()},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this))},t.prototype.onClickClose=function(){this.node.destroy()},t.prototype.updateInfo=function(){this.getItem("label_title").string=this.data.title,this.getItem("label_info").string=this.data.content,this.getItem("label_time").string=this.data.send_time?r.default.timestampToTimeString(this.data.send_time):""},t=i([c],t)}(a.default));n.default=l,cc._RF.pop()},{"../../common/utils/Utils":"Utils","../base/PopupView":"PopupView"}],Mail:[function(e,t,n){"use strict";cc._RF.push(t,"66d0ftZJphFGr0N14zeUtXW","Mail");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../base/PopupView"),c=e("../common/List"),l=e("../../manager/NetManager"),p=e("../../manager/EventManager"),u=e("../../net/NetCmd"),h=e("../common/componet/ButtonEx"),d=e("../../common/utils/Utils"),g=e("../../manager/UIManager"),f=e("../../manager/ResManager"),m=cc._decorator,_=m.ccclass,y=m.property,v=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_mail=null,t.mailType=0,t}return o(t,e),t.prototype.initComponent=function(){var e=this;this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_delete").registerClick(this.onClickDelete.bind(this)),this.getItem("btn_read").registerClick(this.onClickRead.bind(this)),this.getItem("node_buttons").getComponentsInChildren(h.default).forEach(function(t){t.registerClick(function(){var n=l.NetManager.protocolHall.is_have_mail?"y-btn":"btn",o=parseInt(t.node.name.replace("btn_","")),i=0==o?n+"2":n+"1";e.getItem("sp_button").setAnimation(0,i,!0),e.getComponent(cc.Animation).play(),l.NetManager.protocolHall.sendGetUserMail(o)})})},t.prototype.initEvent=function(){p.EventManager.on(this,u.ProtocolHallCmd.GetUserMailResp,this.onGetUserMailResp.bind(this)),p.EventManager.on(this,u.ProtocolHallCmd.GetUserMailDetailResp,this.onGetUserMailDetailResp.bind(this)),p.EventManager.on(this,u.ProtocolHallCmd.NotReadNoticeNotify,this.onNotReadNoticeNotify.bind(this))},t.prototype.onGetUserMailResp=function(e){this.mailType=e.mail_type,e.mail_lists.sort(function(e,t){return t.send_time-e.send_time}),this.data=e.mail_lists,this.scroll_mail.numItems=this.data.length,0==this.scroll_mail.numItems?(this.getItem("label_tips").node.active=!0,this.getItem("label_tips").string=0==this.mailType?"\u6682\u65e0\u90ae\u4ef6":"\u6682\u65e0\u516c\u544a"):this.getItem("label_tips").node.active=!1,this.getItem("label_mail_count").string="\u90ae\u4ef6\u6700\u591a\u4fdd\u5b58"+this.data.length+"/50\u5c01\uff0c\u8bf7\u53ca\u65f6\u9605\u8bfb",this.getItem("btn_read").node.active=0==e.mail_type,this.getItem("btn_delete").node.active=0==e.mail_type},t.prototype.onNotReadNoticeNotify=function(){var e=l.NetManager.protocolHall.is_have_mail?"y-btn":"btn",t=0==this.mailType?e+"2":e+"1";this.getItem("sp_button").setAnimation(0,t,!0)},t.prototype.onGetUserMailDetailResp=function(e){g.UIManager.popup("prefabs/hall/MailDetail",e);for(var t=0;t<this.data.length;t++)this.data[t].mail_id==e.mail_id&&(this.data[t].is_read=!0,this.scroll_mail.updateItem(t))},t.prototype.openAnimation=function(){var e=this.getItem("btn_close").node;e.scale=.1,e.runAction(cc.scaleTo(.3,1)),this.getComponent(cc.Animation).play(),this.getItem("sp_title").addAnimation(0,"loop",!0)},t.prototype.onClickClose=function(){this.close(!1)},t.prototype.onClickDelete=function(){l.NetManager.protocolHall.sendDeleteReadMailReq()},t.prototype.onClickRead=function(){l.NetManager.protocolHall.sendReadMailAllReq()},t.prototype.start=function(){l.NetManager.protocolHall.sendGetUserMail(1);var e=l.NetManager.protocolHall.is_have_mail?"y-btn1":"btn1";this.getItem("sp_button").setAnimation(0,e,!0)},t.prototype.onListRender=function(e,t){return a(this,void 0,void 0,function(){var n,o,i,a,s,c,p,u=this;return r(this,function(r){switch(r.label){case 0:return n=e.getChildByName("label_title").getComponent(cc.Label),o=e.getChildByName("label_time").getComponent(cc.Label),i=e.getChildByName("icon_red"),a=e.getChildByName("icon_mail").getChildByName("icon_sys"),s=e.getChildByName("icon_mail").getChildByName("icon_notice"),n.string=this.data[t].title,o.string=d.default.timestampToTimeString(this.data[t].send_time),i.active=!this.data[t].is_read,a.active=0==this.mailType,s.active=!a.active,e.getComponent(h.default).registerClick(function(){l.NetManager.protocolHall.sendGetUserMailDetail(u.data[t].mail_id,u.mailType)}),c=this.data[t].is_read?"view/common/tg_bk_paihang":"view/common/tg_bk_paihang_ziji",p=e.getComponent(cc.Sprite),[4,f.ResManager.loadResAsync(c,cc.SpriteFrame)];case 1:return p.spriteFrame=r.sent(),[2]}})})},i([y(c.default)],t.prototype,"scroll_mail",void 0),t=i([_],t)}(s.default);n.default=v,cc._RF.pop()},{"../../common/utils/Utils":"Utils","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/ResManager":"ResManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView","../common/List":"List","../common/componet/ButtonEx":"ButtonEx"}],Marquee:[function(e,t,n){"use strict";cc._RF.push(t,"5b4b1nb5iBMp6ZxdJoa4vhn","Marquee");var o,i=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../base/BaseView"),s=e("../../manager/DataManager"),c=e("../../manager/UIManager"),l=cc._decorator,p=l.ccclass,u=l.property,h=((o={})[1]="HallView",o[2]="RoomView",o[3]="GameView",o),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_info=null,t.isNext=!0,t}return i(t,e),t.prototype.initComponent=function(){},t.prototype.onMarqueeInfoNotify=function(){},t.prototype.update=function(){if(this.isNext){var e=s.DataManager.marquee.pop();if(null!=e){for(var t=!1,n=0;n<e.play_where.length;n++){var o=e.play_where[n];switch(o){case 3:-1!==c.UIManager.viewName.indexOf(h[o])&&(t=!0);break;default:h[o]==c.UIManager.viewName&&(t=!0)}}t&&(this.isNext=!1,this.play(e))}}},t.prototype.play=function(e){var t=this;this.node.opacity=255,this.label_info.string=e.content_msg;var n=this.label_info.node.getContentSize(),o=(this.node.width+n.width)/2,i=-o;this.label_info.node.x=o;var a=(this.node.width+n.width+100)/100,r=cc.moveTo(a,cc.v2(i,0)),s=cc.sequence(r,cc.callFunc(function(){t.node.opacity=0,t.isNext=!0}));this.label_info.node.runAction(s)},a([u(cc.Label)],t.prototype,"label_info",void 0),t=a([p],t)}(r.default);n.default=d,cc._RF.pop()},{"../../manager/DataManager":"DataManager","../../manager/UIManager":"UIManager","../base/BaseView":"BaseView"}],MulMenuPanel:[function(e,t,n){"use strict";cc._RF.push(t,"37662wcs7dNvapRiW1w4aRt","MulMenuPanel");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../view/base/BaseView"),r=e("../../view/common/componet/ButtonEx"),s=e("../../manager/NetManager"),c=e("../../manager/UIManager"),l=e("../../manager/DataManager"),p=e("../../common/log/LogWrap"),u=cc._decorator,h=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_cancel=null,t}return o(t,e),t.prototype.initComponent=function(){if(this.getItem("btn_menu").registerClick(this.onClickMenu.bind(this)),this.getItem("btn_set").registerClick(this.onClickSet.bind(this)),this.getItem("btn_rule").registerClick(this.onClickRule.bind(this)),this.getItem("btn_back").registerClick(this.onClickBack.bind(this)),this.btn_cancel)this.btn_cancel.getComponent(r.default).registerClick(this.onClickCancel.bind(this));else{var e=new cc.Node;e.name="btn_cancel",e.addComponent(r.default).registerClick(this.onClickCancel.bind(this));var t=e.addComponent(cc.Widget),n=cc.find("Canvas/node_parent/node_view");t.target=n,t.isAlignTop=!0,t.isAlignBottom=!0,t.isAlignLeft=!0,t.isAlignRight=!0,this.btn_cancel=e,this.node.addChild(e,0),e.setSiblingIndex(0),e.active=!1}this.getItem("panel").addComponent(cc.BlockInputEvents)},t.prototype.start=function(){this.getItem("panel").active=!1},t.prototype.onClickMenu=function(){this.getItem("panel").active=!this.getItem("panel").active,this.btn_cancel.active=this.getItem("panel").active},t.prototype.onClickSet=function(){c.UIManager.popup("prefabs/hall/HallSetting")},t.prototype.onClickRule=function(){c.UIManager.popup("prefabs/game/GameRuleList",l.DataManager.gameType)},t.prototype.onClickBack=function(){if(l.DataManager.isFriendGame&&s.NetManager.protocolGameCommon.isCreaterUser)s.NetManager.protocolGameCommon.sendDismissFriendInquiry(parseFloat(l.DataManager.friendRoomId)||null);else{var e=parseInt(l.DataManager.friendRoomId)||0;s.NetManager.protocolGameCommon.sendLeaveGame(e)}},t.prototype.onClickCancel=function(){p.LogWrap.log("\u53d6\u6d88\u83dc\u5355\u680f"),this.getItem("panel").active=!1,this.btn_cancel.active=!1},t=i([h],t)}(a.default));n.default=d,cc._RF.pop()},{"../../common/log/LogWrap":"LogWrap","../../manager/DataManager":"DataManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../view/base/BaseView":"BaseView","../../view/common/componet/ButtonEx":"ButtonEx"}],NativeUtil:[function(e,t,n){"use strict";cc._RF.push(t,"4907fG7nV5IMr0US5qj/yx7","NativeUtil");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a={WECHATLOGIN:"WXLogin",WECHATLOGINCODE:"wechatLoginCode",PASTEBOARD:"pasteBoard",SCREENCAPTURE:"screenCapture",WXSHARE:"WXShare"},r="org/cocos2dx/javascript/AppActivity",s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){var t=e.call(this)||this;return t.shareTypeTitel={R:"\u623f\u95f4\u9080\u8bf7\uff1a",C:"\u53d1\u9001\u623f\u5361\uff1a",S:"\u9080\u8bf7\u51fd\uff1a",T:"\u6e38\u620f\u9080\u8bf7\uff1a"},t.shareTypeNumTitel={R:"\u623f\u95f4\u53f7",C:"\u623f\u5361\u7f16\u53f7",S:"\u9080\u8bf7\u51fd\u7f16\u53f7",T:"\u6e38\u620f\u9080\u8bf7ID"},t.shareDesc_=null,t._isCapturing=!1,t.btnDate=new Date,t}var n;return o(t,e),n=t,t.getInstance=function(){return null==this.instance&&(this.instance=new n),this.instance},t.prototype.callNative=function(e,t){var n=JSON.stringify(t);if(cc&&cc.sys.isNative){if(cc.sys.OS_ANDROID==cc.sys.os)return jsb.reflection.callStaticMethod(r,"onJsCallNative","(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;",e,n);if(cc.sys.OS_IOS==cc.sys.os)return jsb.reflection.callStaticMethod("AppController","onJsCallNative:parameters:",e,n)}else console.log("device.platform"+cc.sys.os)},t.prototype.callJS=function(e,t){JSON.parse(t);a.WECHATLOGINCODE},t.prototype.WXLogin=function(){var e=this.callNative(a.WECHATLOGIN);e&&JSON.parse(e).isInstallWX},t.prototype.WXShare=function(e){var t={content:e},n=this.callNative(a.WXSHARE,t);n&&JSON.parse(n).isInstallWX},t.prototype.getPasteBorad=function(){var e=this.callNative(a.PASTEBOARD);if(console.log("device.platform"+e),e)return JSON.parse(e)},t.prototype.screenCapture=function(){var e=new Date;e.getTime()-this.btnDate.getTime()<3e3?console.log("\u9650\u5236\u300b\u300b\u300b\u300b\u300b\u300b\u300b\u300b\u300b\u300b"):(this.btnDate=e,cc.sys.OS_ANDROID==cc.sys.os?this.screenshotNative():this.callNative(a.SCREENCAPTURE))},t.prototype.jsLog=function(e,t){var n=JSON.stringify(t);if(cc&&cc.sys.isNative&&cc.sys.OS_ANDROID==cc.sys.os)return jsb.reflection.callStaticMethod(r,"jsLog","(Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;",e,n)},t.prototype.WXShareWithApp=function(e){},t.prototype.setWXShareDesc=function(e){cc&&cc.sys.isNative&&(this.shareDesc_=e)},t.prototype.setBtnCopyToImage=function(e){cc&&cc.sys.isNative&&(e.setContentSize(80,80),cc.loader.loadRes("common/yaoqinghaoyou",cc.SpriteFrame,function(t,n){t||(e.getComponent(cc.Sprite).spriteFrame=n)}),cc.loader.loadRes("prefabs/prefabsPublic/RoomNumTextNode",function(e,t){if(!e){var n=cc.instantiate(t);n.x=0,n.y=0,cc.director.getScene().addChild(n)}}.bind(this)))},t.prototype.showRoomContinueInfo=function(e,t,n){if(cc.sys.isNative)e.bg,e.btn_save,e.btn_record,e.btn_again;return-1},t.prototype.screenshotNative=function(e,t){var n=cc.director.getWinSize(),o=this.getPath();if(o&&""!=o){console.log("fullPath=",o),jsb.fileUtils.isFileExist(o)&&(console.log("remove"),jsb.fileUtils.removeFile(o));n.width;this.loadImg(o,t)}else console.log("\u6ca1\u6709\u8def\u5f84\u300b\u300b\u300b\u300b\u300b\u300b\u300b\u300b\u300b\u300b\u300b\u300b\u300b\u300b")},t.prototype.loadImg=function(e,t){var n=this;this.scheduleOnce(function(){cc.loader.load(e,function(t,o){n.callNative(a.SCREENCAPTURE,e)})},.01)},t.prototype.getPath=function(){if(cc&&cc.sys.isNative&&cc.sys.OS_ANDROID==cc.sys.os)return jsb.reflection.callStaticMethod(r,"andrionCameraPath","()Ljava/lang/String;")},t.prototype.showJsByAndrionShotTips=function(e){void 0===e&&(e="\u4fdd\u5b58\u6210\u529f")},t=n=i([c],t)}(cc.Component));n.default=l,cc._RF.pop()},{}],NetCmd:[function(e,t,n){"use strict";cc._RF.push(t,"140afXHumdNF6X1gF9Zz4aY","NetCmd"),Object.defineProperty(n,"__esModule",{value:!0}),n.NetCmd={Hall:"11_0",Account:"10_0",Bank:"12_0",Chat:"13_0",Club:"14_0",Game:"20_0"},n.ProtocolAccountCmd={AuthenResp:n.NetCmd.Account+"_authen_res",AccountErrorResp:n.NetCmd.Account+"_err_res",LoginResp:n.NetCmd.Account+"_login_res",GetUserInfoResp:n.NetCmd.Account+"_get_userinfo_res",AccoutSafetyResp:n.NetCmd.Account+"_accout_safety_res",EditDataResp:n.NetCmd.Account+"_edit_data_res",SetLoginPasswordResp:n.NetCmd.Account+"_set_login_password_res",ModifyLoginPasswordResp:n.NetCmd.Account+"_modify_login_password_res",SetSecurePasswordResp:n.NetCmd.Account+"_set_secure_password_res",ModifySecureResp:n.NetCmd.Account+"_modify_secure_res",BindMobilePhoneResp:n.NetCmd.Account+"_bind_mobile_phone_res",CheckBoundPhoneVercodeResp:n.NetCmd.Account+"_check_bound_phone_vercode_res",ModifyBindMobilePhoneResp:n.NetCmd.Account+"_modify_bind_mobile_phone_res",RetrievePasswordResp:n.NetCmd.Account+"_retrieve_password_res",RetrieveSafeCodeResp:n.NetCmd.Account+"_retrieve_safecode_res",KickoutNotify:n.NetCmd.Account+"_kickout_notify",UserDataChangeNotify:n.NetCmd.Account+"_userdata_change_notify",UserGoldChangeNotify:n.NetCmd.Account+"_usergold_change_notify",AccountRegResp:n.NetCmd.Account+"_account_reg_res",UserVipChangeNotify:n.NetCmd.Account+"_uservip_change_notify"},n.ProtocolHallCmd={HallErrorResp:n.NetCmd.Hall+"_err_res",HeartBeatResp:n.NetCmd.Hall+"_heart_beat_res",GetUserMailResp:n.NetCmd.Hall+"_get_usermail_res",GetUserMailDetailResp:n.NetCmd.Hall+"_get_usermaildetail_res",GetGoldRankListResp:n.NetCmd.Hall+"_get_goldranklist_res",GetGameAllListResp:n.NetCmd.Hall+"_get_gamealllist_res",EnterRoomResp:n.NetCmd.Hall+"_enter_room_res",AskJoinedGameInfoResp:n.NetCmd.Hall+"_ask_joined_gameinfo_res",GetGameRoomListResp:n.NetCmd.Hall+"_get_gameroom_list_res",ActivityListResp:n.NetCmd.Hall+"_action_res",ActivityResp:n.NetCmd.Hall+"_the_action_res",GetRewardNotify:n.NetCmd.Hall+"_get_reward_notify",GetVipLevelInfoResp:n.NetCmd.Hall+"_get_viplevelinfo_res",GetVipRewardResp:n.NetCmd.Hall+"_get_vip_reward_res",GetAchieveRewardResp:n.NetCmd.Hall+"_get_achieve_reward_res",GetActionRewardRes:n.NetCmd.Hall+"_get_action_reward_res",GetGameRecordListResp:n.NetCmd.Hall+"_get_gamerecord_list_res",GetGameRecordDetailResp:n.NetCmd.Hall+"_get_gamerecord_detail_res",GetFriendGameInfoResp:n.NetCmd.Hall+"_get_friendgame_info_res",PromoteMsgResp:n.NetCmd.Hall+"_promote_msg_res",PromoteCourseResp:n.NetCmd.Hall+"_promote_course_res",PromoteDetailResp:n.NetCmd.Hall+"_promote_detail_res",GoldDetialRes:n.NetCmd.Hall+"_gold_detial_res",FriendGameGreateResp:n.NetCmd.Hall+"_friendgame_create_res",FriendGameJoinResp:n.NetCmd.Hall+"_friendgame_join_res",FriendGamePrepareJoinResp:n.NetCmd.Hall+"_friendgame_prepare_join_res",MarqueeInfoNotify:n.NetCmd.Hall+"_marquee_info_notify",GetAllAttainmentResp:n.NetCmd.Hall+"_get_all_attainment_res",UseAttainmentResp:n.NetCmd.Hall+"_use_attainment_res",UnuseAttainmentResp:n.NetCmd.Hall+"_unuse_attainment_res",AdvertisementResp:n.NetCmd.Hall+"_advertisement_res",BindParentIdResp:n.NetCmd.Hall+"_bind_parentid_res",GetBindRewardResp:n.NetCmd.Hall+"_get_bind_reward_res",BindWindowResp:n.NetCmd.Hall+"_bind_window_res",NotReadNoticeNotify:n.NetCmd.Hall+"_not_read_notice_notify",GetPromoteRewardResp:n.NetCmd.Hall+"_get_promote_reward_res",KyGameUrlResp:n.NetCmd.Hall+"_ky_game_url_res",GetRedbagRainActRes:n.NetCmd.Hall+"_get_redbag_rain_act_res",GetMoneyTreeActRes:n.NetCmd.Hall+"_get_money_tree_act_res",HitRedbagRainRes:n.NetCmd.Hall+"_hit_redbag_rain_res",HitMoneyTreeRes:n.NetCmd.Hall+"_hit_money_tree_res",GetLobbyRankListShowRes:n.NetCmd.Hall+"_get_lobby_rank_list_show_res",ExchangeCodeRes:n.NetCmd.Hall+"_exchange_code_res",GetRuleConfigRes:n.NetCmd.Hall+"_get_rule_config_res",GetVipLevelRewardResp:n.NetCmd.Hall+"_get_vip_level_reward_res",GetGetVipListInfoRes:n.NetCmd.Hall+"_get_vip_list_info_res"},n.ProtocolGameCmd={GameErrorResp:n.NetCmd.Game+"_err_res",GameHeartBeatResp:n.NetCmd.Game+"_heart_beat_res",GameLoginResp:n.NetCmd.Game+"_login_res",LoginFriendRoomResp:n.NetCmd.Game+"_login_friend_room_res",LoginFriendRoomNotify:n.NetCmd.Game+"_login_friend_room_ntf",MatchResp:n.NetCmd.Game+"_match_res",LeaveRoomResp:n.NetCmd.Game+"_leave_room_res",CancelMatchResp:n.NetCmd.Game+"_cancel_match_res",GameKickoutNotify:n.NetCmd.Game+"_kickout_notify",InterError:n.NetCmd.Game+"_inter_error",StartFriendGameResp:n.NetCmd.Game+"_start_friend_game_res",DismissFriendGameResp:n.NetCmd.Game+"_dismiss_friend_game_res",DismissFriendGameNotify:n.NetCmd.Game+"_dismiss_friend_game_ntf",DismissFriendGameInquiryResp:n.NetCmd.Game+"_dismiss_friend_game_inquiry_res",DisconnectRoomNotify:n.NetCmd.Game+"_disconnect_room_ntf",KickoutSomeoneResp:n.NetCmd.Game+"_kickout_someone_res",AdJustReadyResp:n.NetCmd.Game+"_adjust_ready_res",ChangeCreaterRes:n.NetCmd.Game+"_change_creater_res",LookPlayerInfoRes:n.NetCmd.Game+"_look_player_info_res",TakeGameGoldResp:n.NetCmd.Game+"_take_game_gold_res",QueryTakeInResp:n.NetCmd.Game+"_query_take_in_res",QueryFriendRoomResp:n.NetCmd.Game+"_query_friend_room_res",GameEndNotify:n.NetCmd.Game+"_game_end_notify",LocationRes:n.NetCmd.Game+"_location_res",FlushGoldNotify:n.NetCmd.Game+"_flush_gold_notify",AskForGrabBankerRes:n.NetCmd.Game+"_askfor_grabbanker_res",AskForDropBankerRes:n.NetCmd.Game+"_askfor_dropbanker_res",LookForBankerListRes:n.NetCmd.Game+"_lookfor_bankerlist_res",InviteOthersRes:n.NetCmd.Game+"_inviter_others_res",BankerChangeNotify:n.NetCmd.Game+"_banker_change_notify",UpBankerStateRes:n.NetCmd.Game+"_upbanker_state_res",UpBankerInfoNotify:n.NetCmd.Game+"_upbanker_info_notify",AdJustUpBankerNotify:n.NetCmd.Game+"_adjust_upbanker_notify",SendBankInfo:n.NetCmd.Game+"_send_bank_info"},n.GameCommonEvent={UpdateAllBet:"update_all_bet",UpdateUserScore:"update_user_score"},n.ProtocolBankCmd={ErrorResp:n.NetCmd.Bank+"_err_res",ResearchBankInfoResp:n.NetCmd.Bank+"_research_bank_info_res",AccountToSafeboxResp:n.NetCmd.Bank+"_account_to_safebox_res",SafeboxToAccountResp:n.NetCmd.Bank+"_safebox_to_account_res",WithDrawToBankcardResp:n.NetCmd.Bank+"_withdraw_to_bankcard_res",TransferToOtherResp:n.NetCmd.Bank+"_transfer_to_other_res",BindBankcardResp:n.NetCmd.Bank+"_bind_bankcard_res",GetBoundBankCardResp:n.NetCmd.Bank+"_get_bound_bankcard_res",ChangeBoundBankCardResp:n.NetCmd.Bank+"_change_bound_bankcard_res",GetAccountDetailsResp:n.NetCmd.Bank+"_get_account_details_res",GetWithdrawalsRecordResp:n.NetCmd.Bank+"_get_withdrawals_recordRes",GetRechargeRecordResp:n.NetCmd.Bank+"_get_recharge_record_res",RechargePlatformResp:n.NetCmd.Bank+"_recharge_platform_res",RechargeUrlResp:n.NetCmd.Bank+"_recharge_url_res",CheckRechargeResp:n.NetCmd.Bank+"_check_recharge_res"},n.ProtocolChatCmd={SendChatMsgResp:n.NetCmd.Chat+"_send_chatmsg_res",GetChatMsgRecordResp:n.NetCmd.Chat+"_get_chatmsg_record_res",ChatMsgNotify:n.NetCmd.Chat+"_chat_msg_notify"},n.ProtocolClubCmd={SendCreateClubResp:n.NetCmd.Club+"_club_create_res",GetClubListResp:n.NetCmd.Club+"_club_list_res",GetClubRoomsResp:n.NetCmd.Club+"_club_room_list_res",GetSearchClubListResp:n.NetCmd.Club+"_club_search_res",SendJoinClubResp:n.NetCmd.Club+"_club_join_res",GetPlayerListResp:n.NetCmd.Club+"_club_members_list_res",ClubReNameResp:n.NetCmd.Club+"_club_re_name_res",ClubCancelResp:n.NetCmd.Club+"_club_cancel_res",ClubQuitResp:n.NetCmd.Club+"_club_quit_res",ClubReConfigResp:n.NetCmd.Club+"_club_re_config_res",ClubAddLeagueResp:n.NetCmd.Club+"_club_add_league_res",ClubQuitLeagueResp:n.NetCmd.Club+"_club_quit_league_res",ClubDeleteMemberResp:n.NetCmd.Club+"_club_delete_member_res",ClubReSetManagerResp:n.NetCmd.Club+"_club_re_set_manager_res",ClubPassRefuseResp:n.NetCmd.Club+"_club_pass_refuse_res",ClubNeedCheckerListResp:n.NetCmd.Club+"_club_need_checker_list_res",ClubListAutoPushResp:n.NetCmd.Club+"_club_list_auto_push_res",MembersListAutoPushResp:n.NetCmd.Club+"_members_list_auto_push_res",ClubGameListResp:n.NetCmd.Club+"_club_game_list_res",ClubInviteResp:n.NetCmd.Club+"_club_invite_res",ClubProfitResp:n.NetCmd.Club+"_club_profit_res",ClubGetProfitResp:n.NetCmd.Club+"_club_get_profit_res",GetCreateRoomInfoResp:n.NetCmd.Club+"_get_create_roominfo_res",CreateClubRoomResp:n.NetCmd.Club+"_create_clubroom_res",JointClubRoomResp:n.NetCmd.Club+"_join_clubroom_res",RoomListAutoPushResp:n.NetCmd.Club+"_club_room_auto_push_res"},n.HttpCmd={GetVersion:"get_service_version",GetGameVersion:"get_game_version_msg",GetSocketUrl:"list",GetVerificationCode:"get_verification",RetrievePassword:"retrieve_password"},cc._RF.pop()},{}],NetManager:[function(e,t,n){"use strict";cc._RF.push(t,"abbd5ZqESlBEa/qJPSQ+nUZ","NetManager");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../common/utils/XXTea"),s=e("../Define"),c=e("../common/log/LogWrap"),l=e("../net/Socket"),p=e("../net/ProtocolAccount"),u=e("../net/NetCmd"),h=e("./EventManager"),d=e("../net/ProtocolHall"),g=e("../net/ProtocolBank"),f=e("../net/ProtocolGameCommon"),m=e("./DataManager"),_=e("../net/ProtocolChat"),y=e("../net/ProtocolClub"),v=cc._decorator,b=v.ccclass,C=(v.property,function(){function e(){this.sockets=[],this.protocolAccount=new p.default,this.protocolHall=new d.default,this.protocolBank=new g.default,this.protocolGameCommon=new f.default,this.protocolChat=new _.default,this.protocolClub=new y.default,this.protocolCache={},this.filters={},this.protocolGame=null,this.url=null,h.EventManager.on(this,s.EventDef.GameHide,this.onGameHide.bind(this)),h.EventManager.on(this,s.EventDef.GameShow,this.onGameShow.bind(this))}var t;return t=e,e.prototype.onGameHide=function(){this.closeAll()},e.prototype.onGameShow=function(){this.closeAll(),this.url&&this.connect(this.url,s.SocketType.Hall)},e.prototype.getSocket=function(e){for(var t=0,n=this.sockets;t<n.length;t++){var o=n[t];if(o.getType()==e)return o}return null},e.prototype.connect=function(e,t){this.close(t),t==s.SocketType.Game?this.protocolGame&&(this.protocolGame.release(),this.protocolGame=null):this.url=e;var n=new l.default(e,t);this.sockets.push(n),c.LogWrap.log("connect count",this.sockets.length)},e.prototype.close=function(e){for(var t=this.sockets.length-1;t>=0;t--){var n=this.sockets[t];if(n.getType()==e){n.close(),n=null,this.sockets.splice(t,1);break}}},e.prototype.closeAll=function(){for(var e=this.sockets.length-1;e>=0;e--){var t=this.sockets[e];t.close(),t=null}this.sockets=[]},e.prototype.send=function(e,t,n){var o=this.getSocket(n);o&&o.send(e,t)},e.prototype.sendHall=function(e,t){var n=this.getSocket(s.SocketType.Hall);n&&n.send(e,t)},e.prototype.sendGame=function(e,t){var n=this.getSocket(s.SocketType.Game);n&&n.send(e,t)},e.prototype.handlerMessage=function(e,t){var n=null;switch(e){case u.NetCmd.Account:n=this.protocolAccount.decode(t);break;case u.NetCmd.Bank:n=this.protocolBank.decode(t);break;case u.NetCmd.Hall:n=this.protocolHall.decode(t);break;case u.NetCmd.Game:n=this.protocolGameCommon.decode(t);break;case u.NetCmd.Chat:n=this.protocolChat.decode(t);break;case u.NetCmd.Club:n=this.protocolClub.decode(t);break;default:n=this.protocolGame.decode(t)}if(n)for(var o in n)if(n[o]){e=e+"_"+o,cc.sys.isNative?c.LogWrap.log("rev->",e,JSON.stringify(n[o])):c.LogWrap.log("rev->",e,n[o]),h.EventManager.emit(e,n[o]);break}},e.prototype.changeGameProtocol=function(){return i(this,void 0,void 0,function(){var e,t,n;return a(this,function(o){return this.protocolGame&&(this.protocolGame.release(),this.protocolGame=null),(e=m.DataManager.getGameName(m.DataManager.gameType))&&(t="Protocol"+e.toUpperCase(),(n=this.protocolCache[t])?this.protocolGame=new n:c.LogWrap.err("changeGameProtocol err!",t)),[2]})})},e.prototype.getGameProtocol=function(){return this.protocolGame},e.prototype.requestPostUrl=function(e,t,n,o){void 0===o&&(o=!0);var i=3,a=cc.loader.getXMLHttpRequest();a.timeout=5e3;var l=function(){if(i--,c.LogWrap.log("repeat---",i),0==i)if(m.DataManager.httpUrlIndex==s.HttpUrls.length-1)m.DataManager.httpUrlIndex=0,m.DataManager.httpUrl=s.HttpUrls[m.DataManager.httpUrlIndex],n&&n("fail",a.statusText);else{i=3,m.DataManager.httpUrlIndex++,m.DataManager.httpUrlIndex>s.HttpUrls.length-1&&(m.DataManager.httpUrlIndex=s.HttpUrls.length-1);var o=s.HttpUrls[m.DataManager.httpUrlIndex];e=e.replace(m.DataManager.httpUrl,o),m.DataManager.httpUrl=o,c.LogWrap.log("newUrl",e),l()}else c.LogWrap.log("post_url=",e),c.LogWrap.log("post_data=",JSON.stringify(t)),a.open("POST",e,!0),a.send(t)};return a.onreadystatechange=function(){if(4==a.readyState)if(c.LogWrap.log("post rev->",a.readyState,a.status,a.responseText),a.status>=200&&a.status<400)if(o)try{var e=r.default.xxtea_decrypt(a.responseText,s.XXTeaSerectKey),t="string"==typeof e?JSON.parse(e):e;c.LogWrap.log("post xxtea ret->",JSON.stringify(t)),n&&n("success",t)}catch(e){l(),c.LogWrap.log("err:",e)}else n&&n("success",a.responseText);else l()},-1==e.indexOf("http://")&&(e=m.DataManager.httpUrl+e),a.open("POST",e,!0),c.LogWrap.log("post_url=",e),c.LogWrap.log("post_data=",JSON.stringify(t)),null!=t&&"object"==typeof t&&(t=JSON.stringify(t)),o&&(t=r.default.xxtea_encrypt(t,s.XXTeaSerectKey)),a.send(t),a},e.prototype.requestGetUrl=function(e,t){var n=!0,o=cc.loader.getXMLHttpRequest();return o.timeout=3e3,o.onreadystatechange=function(){4==o.readyState&&(n=!1,c.LogWrap.log("get rev->",o.readyState,o.status,o.responseText),o.status>=200&&o.status<400?t&&t("success",o.responseText):t&&t("fail",o.statusText))},o.open("GET",e,!0),o.setRequestHeader("Access-Control-Allow-Origin","*"),c.LogWrap.log("get_url=",e),o.send(),setTimeout(function(){n&&(c.LogWrap.log("\u8d85\u65f6\u68c0\u6d4b"),o.abort())},o.timeout),o},e.instance=new t,e=t=o([b],e)}());n.NetManager=C.instance,cc._RF.pop()},{"../Define":"Define","../common/log/LogWrap":"LogWrap","../common/utils/XXTea":"XXTea","../net/NetCmd":"NetCmd","../net/ProtocolAccount":"ProtocolAccount","../net/ProtocolBank":"ProtocolBank","../net/ProtocolChat":"ProtocolChat","../net/ProtocolClub":"ProtocolClub","../net/ProtocolGameCommon":"ProtocolGameCommon","../net/ProtocolHall":"ProtocolHall","../net/Socket":"Socket","./DataManager":"DataManager","./EventManager":"EventManager"}],NodeAdapter:[function(e,t,n){"use strict";cc._RF.push(t,"c8aa9PqGlxKFoBVFDmLpesM","NodeAdapter");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../manager/EventManager"),r=e("../../../Define"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onLoad=function(){this.adapter(),a.EventManager.on(this,r.EventDef.SizeChanged,this.onSizeChanged.bind(this))},t.prototype.start=function(){},t.prototype.onDestroy=function(){a.EventManager.off(this)},t.prototype.onSizeChanged=function(){this.adapter()},t.prototype.adapter=function(){var e=cc.winSize.width/this.node.width;this.node.scale=e},t=i([c],t)}(cc.Component));n.default=l,cc._RF.pop()},{"../../../Define":"Define","../../../manager/EventManager":"EventManager"}],NotchAdapter:[function(e,t,n){"use strict";cc._RF.push(t,"e0ad0U6o75LxZw0ng+VunjO","NotchAdapter");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../manager/EventManager"),r=e("../../../Define"),s=e("../../../common/log/LogWrap"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.widght=null,t.canvas=null,t.rotation=0,t}return o(t,e),t.prototype.onLoad=function(){this.widght=this.node.getComponent(cc.Widget),this.adapter(),a.EventManager.on(this,r.EventDef.SizeChanged,this.onSizeChanged.bind(this))},t.prototype.onDestroy=function(){a.EventManager.off(this)},t.prototype.onSizeChanged=function(){this.adapter()},t.prototype.adapter=function(){this.widght.updateAlignment();var e=this.canvas.designResolution.height/this.canvas.designResolution.width,t=this.node.height/this.node.width;s.LogWrap.log("NotchAdapter \u6bd4\u4f8b",e,t),s.LogWrap.log("NotchAdapter node size",this.node.width,this.node.height,cc.view.getDevicePixelRatio()),t>e?(this.canvas.fitHeight=!1,this.canvas.fitWidth=!0):(this.canvas.fitHeight=!0,this.canvas.fitWidth=!1),this.canvas.applySettings()},i([p(cc.Canvas)],t.prototype,"canvas",void 0),t=i([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../Define":"Define","../../../common/log/LogWrap":"LogWrap","../../../manager/EventManager":"EventManager"}],PasswordLoginPopup:[function(e,t,n){"use strict";cc._RF.push(t,"3ca30kcIQ9E3omn+IrY6vdY","PasswordLoginPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/UIManager"),s=e("../../common/Text"),c=e("../../manager/NetManager"),l=e("../../manager/DataManager"),p=cc._decorator,u=p.ccclass,h=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this)),this.getItem("btn_code_login").registerClick(this.onClickCodeLogin.bind(this)),this.getItem("btn_show_password").registerClick(this.onClickShowPassword.bind(this)),this.getItem("btn_hide_password").registerClick(this.onClickHidePassword.bind(this)),this.getItem("btn_retrieve").registerClick(this.onClickRetrieve.bind(this))},t.prototype.onClickClose=function(){this.node.destroy()},t.prototype.onClickSure=function(){var e=this.getItem("input_phone").string,t=this.getItem("input_password").string;e&&11==e.length?t?c.NetManager.protocolAccount.sendLogin({account:e,password:t,login_type:1,ver_code:"",model:cc.sys.os,channel:l.DataManager.channel}):r.UIManager.showTips(s.Tips.InputPassword):r.UIManager.showTips(s.Tips.InputPhone)},t.prototype.onClickShowPassword=function(){this.getItem("input_password").inputFlag=cc.EditBox.InputFlag.PASSWORD,this.getItem("btn_show_password").node.active=!1,this.getItem("btn_hide_password").node.active=!0},t.prototype.onClickHidePassword=function(){this.getItem("input_password").inputFlag=cc.EditBox.InputFlag.DEFAULT,this.getItem("btn_show_password").node.active=!0,this.getItem("btn_hide_password").node.active=!1},t.prototype.onClickCodeLogin=function(){this.onClickClose(),r.UIManager.popup("prefabs/login/CodeLoginPopup")},t.prototype.onClickRetrieve=function(){this.onClickClose(),r.UIManager.popup("prefabs/login/ForgotPasswordPopup")},t=i([u],t)}(a.default));n.default=h,cc._RF.pop()},{"../../common/Text":"Text","../../manager/DataManager":"DataManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../base/PopupView":"PopupView"}],PasswordLogin:[function(e,t,n){"use strict";cc._RF.push(t,"8aec1YqQQdAoYWf33A7tCO8","PasswordLogin");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/UIManager"),s=e("../../common/Text"),c=e("../../manager/NetManager"),l=e("../../manager/DataManager"),p=cc._decorator,u=p.ccclass,h=(p.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isAnimation=!1,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_sure").registerClick(this.onClickSure.bind(this)),this.getItem("btn_show_password").registerClick(this.onClickShowPassword.bind(this)),this.getItem("btn_hide_password").registerClick(this.onClickHidePassword.bind(this)),this.getItem("btn_retrieve").registerClick(this.onClickRetrieve.bind(this))},t.prototype.onClickSure=function(){var e=this.getItem("input_phone").string,t=this.getItem("input_password").string;!e||e.length<4||e.length>16?r.UIManager.showTips(s.Tips.InputAccount):t?c.NetManager.protocolAccount.sendLogin({account:e,password:t,login_type:1,ver_code:"",model:cc.sys.os,channel:l.DataManager.channel}):r.UIManager.showTips(s.Tips.InputPassword)},t.prototype.onClickShowPassword=function(){this.getItem("input_password").inputFlag=cc.EditBox.InputFlag.PASSWORD,this.getItem("btn_show_password").node.active=!1,this.getItem("btn_hide_password").node.active=!0},t.prototype.onClickHidePassword=function(){this.getItem("input_password").inputFlag=cc.EditBox.InputFlag.DEFAULT,this.getItem("btn_show_password").node.active=!0,this.getItem("btn_hide_password").node.active=!1},t.prototype.onClickCodeLogin=function(){},t.prototype.onClickRetrieve=function(){r.UIManager.popup("prefabs/login/ForgotPasswordPopup")},t=i([u],t)}(a.default));n.default=h,cc._RF.pop()},{"../../common/Text":"Text","../../manager/DataManager":"DataManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../base/PopupView":"PopupView"}],PersonalInfo:[function(e,t,n){"use strict";cc._RF.push(t,"ba5c8nnp6JH9YbO0e6Hg/Vl","PersonalInfo");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../view/base/PopupView"),c=e("../../common/utils/Utils"),l=e("../../manager/UIManager"),p=e("../../manager/DataManager"),u=e("../../manager/NetManager"),h=e("../../common/UIHelper"),d=e("../../manager/ResManager"),g=e("../../view/common/List"),f=cc._decorator,m=f.ccclass,_=f.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_achieve=null,t.achieveData=null,t}return o(t,e),t.prototype.initComponent=function(){var e=this;this.getItem("btn_kick").registerClick(this.onClickKick.bind(this)),this.getItem("btn_transfer").registerClick(this.onClickTransfer.bind(this)),this.getItem("btn_close").registerClick(function(){e.close()})},t.prototype.initEvent=function(){},t.prototype.start=function(){this.showUserInfo();var e=this.sortAchieve(this.data.attainment_info);this.achieveData=e,this.scroll_achieve.numItems=this.achieveData.length},t.prototype.showUserInfo=function(){var e=this.data.player_info;this.getItem("btn_kick").node.active=p.DataManager.isCreaterUser&&e.player_id!=p.DataManager.userInfo.userid,this.getItem("btn_transfer").node.active=p.DataManager.isCreaterUser&&e.player_id!=p.DataManager.userInfo.userid;var t=c.default.getSubStringLengTxt(e.username)||c.default.getReplaceStrToStar(e.player_id);this.getItem("label_name").string=t,this.getItem("label_id").string=c.default.getReplaceStrToStar(e.player_id),this.getItem("label_money").string=c.default.getFormatGold(e.gold),this.getItem("label_location").string=e.login_addr||"\u672a\u77e5\u4f4d\u7f6e",h.default.setHeadIcon(e.headimg_id,this.getItem("head")),h.default.setHeadFrame(e.vip_level,this.getItem("vip_frame")),h.default.setVipLevel(e.vip_level,this.getItem("vip_level"));var n="game/public/image/personalinfo/",o=1==e.sex?n+"img_xx_nan":n+"img_xx_nv";this.loadSexFrame(o)},t.prototype.onListRender=function(e,t){return a(this,void 0,void 0,function(){var n,o;return r(this,function(i){switch(i.label){case 0:return e.active=!0,n=e.getChildByName("spr_achieve").getComponent(cc.Sprite),o=n,[4,d.ResManager.loadResAsync("view/home_page/icon_"+this.achieveData[t].id,cc.SpriteFrame)];case 1:return o.spriteFrame=i.sent(),e.getChildByName("spr_lock").active=1==this.achieveData[t].state,[2]}})})},t.prototype.loadSexFrame=function(e){return a(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return[4,d.ResManager.loadResAsync(e,cc.SpriteFrame)];case 1:return t=n.sent(),this.getItem("spr_sex").getComponent(cc.Sprite).spriteFrame=t,[2]}})})},t.prototype.onClickKick=function(){var e=this,t=this.data.player_info,n=c.default.getSubStringLengTxt(t.username)||c.default.getReplaceStrToStar(t.player_id);l.UIManager.showTipsPopup("\u60a8\u662f\u5426\u8981\u8bf7\u73a9\u5bb6"+n+"\u79bb\u5f00\u623f\u95f4",function(n){if(n){var o=p.DataManager.friendRoomId;o&&u.NetManager.protocolGameCommon.sendKickoutSomeone(parseFloat(o)||null,t.player_id),e.close()}},3)},t.prototype.onClickTransfer=function(){var e=this,t=this.data.player_info.player_id;l.UIManager.showTipsPopup("\u60a8\u786e\u5b9a\u8981\u628a\u623f\u4e3b\u8eab\u4efd\u8f6c\u8ba9\u7ed9\u8be5\u73a9\u5bb6\u5417?",function(n){n&&(u.NetManager.protocolGameCommon.sendChangeCreaterReq(t),e.close())},3)},t.prototype.sortAchieve=function(e){for(var t=[],n=[],o=0;o<e.length;o++)1==e[o].state?n=n.concat(e[o]):2!=e[o].state&&3!=e[o].state||(t=t.concat(e[o]));var i=t.concat(n);return console.log("\u6392\u5e8f\u540e\u7684\u6210\u5c31\u6570\u7ec4",i),i},i([_(g.default)],t.prototype,"scroll_achieve",void 0),t=i([m],t)}(s.default);n.default=y,cc._RF.pop()},{"../../common/UIHelper":"UIHelper","../../common/utils/Utils":"Utils","../../manager/DataManager":"DataManager","../../manager/NetManager":"NetManager","../../manager/ResManager":"ResManager","../../manager/UIManager":"UIManager","../../view/base/PopupView":"PopupView","../../view/common/List":"List"}],PopupView:[function(e,t,n){"use strict";cc._RF.push(t,"079cdLy8VpKgJhX3gYhOctE","PopupView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./BaseView"),c=e("../../common/log/LogWrap"),l=cc._decorator,p=l.ccclass,u=(l.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isAnimation=!0,t}return o(t,e),t.prototype.init=function(){return a(this,void 0,void 0,function(){return r(this,function(t){return e.prototype.init.call(this),this.initBlockInput(),this.openAnimation(),[2]})})},t.prototype.initBlockInput=function(){this.node.getComponent(cc.BlockInputEvents)||(this.node.addComponent(cc.BlockInputEvents),c.LogWrap.warn(this.node.name,"not cc.BlockInputEvents"))},t.prototype.openAnimation=function(){this.isAnimation&&(this.node.scale=.1,cc.tween(this.node).sequence(cc.scaleTo(.2,1.1,1.1),cc.scaleTo(.1,1,1),cc.callFunc(this.openAnimationCallBack.bind(this))).start())},t.prototype.closeAnimation=function(){cc.tween(this.node).sequence(cc.scaleTo(.15,.1),cc.callFunc(this.closeAnimationCallBack.bind(this))).start()},t.prototype.close=function(e){void 0===e&&(e=!0),this.isAnimation&&e?this.closeAnimation():this.node.destroy()},t.prototype.openAnimationCallBack=function(){},t.prototype.closeAnimationCallBack=function(){this.node.destroy()},t=i([p],t)}(s.default));n.default=u,cc._RF.pop()},{"../../common/log/LogWrap":"LogWrap","./BaseView":"BaseView"}],PromotionDetail:[function(e,t,n){"use strict";cc._RF.push(t,"c1b05ROEHVFGp8Rol2+HmcC","PromotionDetail");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../common/List"),r=e("../../common/componet/ButtonEx"),s=e("../../../manager/NetManager"),c=e("../../../manager/EventManager"),l=e("../../../net/NetCmd"),p=e("../../../manager/UIManager"),u=e("../../../common/utils/Utils"),h=e("../../../Define"),d=cc._decorator,g=d.ccclass,f=d.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_data_F=null,t.scroll_data_S=null,t.btn_recive=null,t.btn_last=null,t.btn_next=null,t.label_page_num=null,t.node_question=null,t.btn_day=null,t.btn_question=null,t.btn_flmx=null,t.btn_sjhz=null,t.label_day_start=null,t.label_day_end=null,t.label_type=null,t.label_tips=null,t.label_tips1=null,t.img_btns=[],t.node_sjhz=null,t.node_flmx=null,t._start_time="",t._end_time="",t.cur_type=1,t.page=0,t.page_count=0,t.time_days=30,t.data=[],t}return o(t,e),t.prototype.onLoad=function(){this.btn_day.registerClick(this.onClickDay.bind(this)),this.btn_question.registerClick(this.onClickQuestion.bind(this)),this.btn_last.registerClick(this.onClickLast.bind(this)),this.btn_next.registerClick(this.onClickNext.bind(this)),this.btn_recive.registerClick(this.onClickRecive.bind(this)),this.btn_flmx.registerClick(this.onClickFLMX.bind(this)),this.btn_sjhz.registerClick(this.onClickHZSJ.bind(this)),c.EventManager.on(this,l.ProtocolHallCmd.GetPromoteRewardResp,this.onGetPromoteRewardResp.bind(this)),c.EventManager.on(this,l.ProtocolHallCmd.PromoteDetailResp,this.onPromoteDetailResp.bind(this)),c.EventManager.on(this,h.EventDef.UserSelectTimeMsg,this.sendSelect.bind(this))},t.prototype.onDestroy=function(){c.EventManager.off(this)},t.prototype.start=function(){},t.prototype.onEnable=function(){var e=(new Date).getTime(),t=e-24*(this.time_days-1)*60*60*1e3,n=u.default.getFormatDate(e,"yyyy-MM-dd"),o=u.default.getFormatDate(t,"yyyy-MM-dd");this._start_time=o,this._end_time=n,this.send(),this.initTopLabel()},t.prototype.init=function(e){this.page=e.cur_page,this.page_count=e.total_page,this.label_tips.string="\u5f53\u524d\u53ef\u9886\uff1a"+e.reward_num,this.label_tips1.string="\u7d2f\u8ba1\u9886\u53d6\uff1a"+e.got_reward_num,this.setReciveEnable(1==e.status),this.label_page_num.string=this.page+"/"+this.page_count,this.data=e.promote_detail,1==e.data_type?this.scroll_data_S.numItems=e.promote_detail.length:this.scroll_data_F.numItems=e.promote_detail.length},t.prototype.initTopLabel=function(){this.label_day_start.string="\u5f00\u59cb"+this._start_time,this.label_day_end.string="\u7ed3\u675f"+this._end_time,this.label_type.string=1==this.cur_type?"\u6570\u636e\u6c47\u603b":"\u8fd4\u5229\u660e\u7ec6",this.node_sjhz.active=1==this.cur_type,this.node_flmx.active=2==this.cur_type},t.prototype.setReciveEnable=function(e){this.btn_recive.interactable=e,this.btn_recive.node.getChildByName("img_recive").active=e,this.btn_recive.node.getChildByName("img_no_recive").active=!e},t.prototype.send=function(){var e={cur_page:this.page,data_type:this.cur_type,time_start:this._start_time,time_end:this._end_time,count:7};s.NetManager.protocolHall.sendGetPromotionDetail(e)},t.prototype.onClickHZSJ=function(){this.btn_flmx.node.getComponent(cc.Sprite).spriteFrame=this.img_btns[1],this.btn_sjhz.node.getComponent(cc.Sprite).spriteFrame=this.img_btns[0],this.btn_sjhz.node.getChildByName("text1").active=!0,this.btn_sjhz.node.getChildByName("text2").active=!1,this.btn_flmx.node.getChildByName("text1").active=!1,this.btn_flmx.node.getChildByName("text2").active=!0,this.cur_type=1,this.page=1,this.send(),this.initTopLabel()},t.prototype.onClickFLMX=function(){this.btn_flmx.node.getComponent(cc.Sprite).spriteFrame=this.img_btns[0],this.btn_sjhz.node.getComponent(cc.Sprite).spriteFrame=this.img_btns[1],this.btn_flmx.node.getChildByName("text1").active=!0,this.btn_flmx.node.getChildByName("text2").active=!1,this.btn_sjhz.node.getChildByName("text1").active=!1,this.btn_sjhz.node.getChildByName("text2").active=!0,this.cur_type=2,this.page=1,this.send(),this.initTopLabel()},t.prototype.onClickLast=function(){this.page-=1,this.page<1&&(this.page=1),this.send()},t.prototype.onClickNext=function(){this.page+=1,this.page>this.page_count&&(this.page=this.page_count),this.send()},t.prototype.onClickRecive=function(){s.NetManager.protocolHall.sendGetPromoteRewardReq()},t.prototype.onClickQuestion=function(){this.node_question.active=!this.node_question.active},t.prototype.onClickDay=function(){var e={type:0,tag:this.cur_type,num:1,game:"",daynum:this.time_days};p.UIManager.popup("prefabs/hall/PromotionSelect",e)},t.prototype.onToggleDay=function(e){this.onClickDay(),this.page=1,this.send()},t.prototype.onListRender=function(e,t){var n=e.getComponentsInChildren(cc.Label);n[0].string=this.data[t].provide_id,n[1].string=this.data[t].rebate_type,n[2].string=this.data[t].superior_id,n[3].string=this.data[t].vip_level,n[4].string=this.data[t].tax,n[5].string=this.data[t].brokerage},t.prototype.onGetPromoteRewardResp=function(e){this.label_tips.string="\u5f53\u524d\u53ef\u9886\uff1a"+e.reward_num,1==e.status&&(p.UIManager.showTips("\u9886\u53d6\u6210\u529f, \u8bf7\u67e5\u6536"),this.setReciveEnable(!1))},t.prototype.onPromoteDetailResp=function(e){this.init(e)},t.prototype.sendSelect=function(e){this._start_time=e.startstr,this._end_time=e.endstr,this.page=1,this.send(),this.initTopLabel()},i([f(a.default)],t.prototype,"scroll_data_F",void 0),i([f(a.default)],t.prototype,"scroll_data_S",void 0),i([f(r.default)],t.prototype,"btn_recive",void 0),i([f(r.default)],t.prototype,"btn_last",void 0),i([f(r.default)],t.prototype,"btn_next",void 0),i([f(cc.Label)],t.prototype,"label_page_num",void 0),i([f(cc.Node)],t.prototype,"node_question",void 0),i([f(r.default)],t.prototype,"btn_day",void 0),i([f(r.default)],t.prototype,"btn_question",void 0),i([f(r.default)],t.prototype,"btn_flmx",void 0),i([f(r.default)],t.prototype,"btn_sjhz",void 0),i([f(cc.Label)],t.prototype,"label_day_start",void 0),i([f(cc.Label)],t.prototype,"label_day_end",void 0),i([f(cc.Label)],t.prototype,"label_type",void 0),i([f(cc.Label)],t.prototype,"label_tips",void 0),i([f(cc.Label)],t.prototype,"label_tips1",void 0),i([f(cc.SpriteFrame)],t.prototype,"img_btns",void 0),i([f(cc.Node)],t.prototype,"node_sjhz",void 0),i([f(cc.Node)],t.prototype,"node_flmx",void 0),t=i([g],t)}(cc.Component);n.default=m,cc._RF.pop()},{"../../../Define":"Define","../../../common/utils/Utils":"Utils","../../../manager/EventManager":"EventManager","../../../manager/NetManager":"NetManager","../../../manager/UIManager":"UIManager","../../../net/NetCmd":"NetCmd","../../common/List":"List","../../common/componet/ButtonEx":"ButtonEx"}],PromotionGuide:[function(e,t,n){"use strict";cc._RF.push(t,"e7b99dRpw9PZqhlvXOMHu3W","PromotionGuide");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../manager/EventManager"),r=e("../../../manager/NetManager"),s=e("../../../net/NetCmd"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_percent1=null,t.label_percent2=null,t.label_percent3=null,t}return o(t,e),t.prototype.onLoad=function(){a.EventManager.on(this,s.ProtocolHallCmd.PromoteCourseResp,this.onPromoteCourseResp.bind(this))},t.prototype.start=function(){},t.prototype.onEnable=function(){r.NetManager.protocolHall.sendGetPromotionCourse()},t.prototype.onDestroy=function(){a.EventManager.off(this)},t.prototype.onPromoteCourseResp=function(e){this.init(e)},t.prototype.init=function(e){this.label_percent1.string=e.one_earnings+"%",this.label_percent2.string=e.two_earnings+"%",this.label_percent3.string=e.three_earnings+"%"},i([p(cc.Label)],t.prototype,"label_percent1",void 0),i([p(cc.Label)],t.prototype,"label_percent2",void 0),i([p(cc.Label)],t.prototype,"label_percent3",void 0),t=i([l],t)}(cc.Component);n.default=u,cc._RF.pop()},{"../../../manager/EventManager":"EventManager","../../../manager/NetManager":"NetManager","../../../net/NetCmd":"NetCmd"}],PromotionInfo:[function(e,t,n){"use strict";cc._RF.push(t,"db57cUp7ENO/Y/TMy58MM5n","PromotionInfo");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../common/componet/ButtonEx"),r=e("../../../common/UIHelper"),s=e("../../../manager/UIManager"),c=e("../../../common/Device"),l=e("../../../manager/NetManager"),p=e("../../../manager/DataManager"),u=e("../../../manager/EventManager"),h=e("../../../net/NetCmd"),d=cc._decorator,g=d.ccclass,f=d.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label_teams_datas=[],t.label_income_datas=[],t.label_tax_datas=[],t.label_recharge_datas=[],t.label_online_datas=[],t.label_last_id=null,t.label_my_id=null,t.input_url=null,t.btn_copy=null,t.btn_save=null,t.btn_bind=null,t.node_code=null,t.qrcode=null,t.node_code_none=null,t.url_link="",t}return o(t,e),t.prototype.onLoad=function(){this.btn_save.registerClick(this.onClickSave.bind(this)),this.btn_copy.registerClick(this.onClickCopy.bind(this)),this.btn_bind.registerClick(this.onClickBind.bind(this)),u.EventManager.on(this,h.ProtocolHallCmd.PromoteMsgResp,this.onPromoteMsgResp.bind(this))},t.prototype.start=function(){},t.prototype.onEnable=function(){l.NetManager.protocolHall.sendGetPromotionInfo()},t.prototype.onDestroy=function(){u.EventManager.off(this)},t.prototype.onPromoteMsgResp=function(e){this.init(e)},t.prototype.onClickSave=function(){r.default.checkTourist(function(e){e&&l.NetManager.protocolHall.sendGetPromotionInfo()})&&r.default.screenShotToLocal(this.node_code,"screen_shot.png",!1,function(e,t){s.UIManager.showTips("\u4fdd\u5b58\u6210\u529f")})},t.prototype.onClickCopy=function(){r.default.checkTourist(function(e){e&&l.NetManager.protocolHall.sendGetPromotionInfo()})&&(c.default.setClipBoard(this.url_link)?s.UIManager.showTips("\u590d\u5236\u6210\u529f"):s.UIManager.showTips("\u590d\u5236\u5931\u8d25"))},t.prototype.onClickBind=function(){r.default.checkTourist(function(e){e&&l.NetManager.protocolHall.sendGetPromotionInfo()})},t.prototype.init=function(e){if(this.label_last_id.string=0==e.superior_id?"\u65e0":e.superior_id,this.label_my_id.string=p.DataManager.userInfo.userid.toString(),0==e.promote_msg_info.length)return this.qrcode.active=!1,this.node_code_none.active=!0,this.btn_save.node.active=!1,this.btn_copy.node.active=!1,this.btn_bind.node.active=!0,void(this.input_url.string="\u6e38\u5ba2\u6682\u672a\u5f00\u653e\u6b64\u529f\u80fd");this.btn_save.node.active=!0,this.btn_copy.node.active=!0,this.node_code_none.active=!1,this.btn_bind.node.active=!1;var t=e.promote_msg_info[0].promote_msg,n=e.promote_msg_info[1].promote_msg,o=e.promote_msg_info[2].promote_msg,i=e.promote_msg_info[3].promote_msg;this.label_teams_datas.forEach(function(e,n){e.string=t[n]}),this.label_income_datas.forEach(function(e,t){e.string=n[t]}),this.label_recharge_datas.forEach(function(e,t){e.string=o[t]}),this.label_online_datas.forEach(function(e,t){e.string=i[t]}),this.showHttpLink(e.http_link)},t.prototype.showHttpLink=function(e){this.url_link=e,this.input_url.string=e,this.qrcode.getComponent("QRCode").url=e,this.qrcode.active=!0},i([f(cc.Label)],t.prototype,"label_teams_datas",void 0),i([f(cc.Label)],t.prototype,"label_income_datas",void 0),i([f(cc.Label)],t.prototype,"label_tax_datas",void 0),i([f(cc.Label)],t.prototype,"label_recharge_datas",void 0),i([f(cc.Label)],t.prototype,"label_online_datas",void 0),i([f(cc.Label)],t.prototype,"label_last_id",void 0),i([f(cc.Label)],t.prototype,"label_my_id",void 0),i([f(cc.EditBox)],t.prototype,"input_url",void 0),i([f(a.default)],t.prototype,"btn_copy",void 0),i([f(a.default)],t.prototype,"btn_save",void 0),i([f(a.default)],t.prototype,"btn_bind",void 0),i([f(cc.Node)],t.prototype,"node_code",void 0),i([f(cc.Node)],t.prototype,"qrcode",void 0),i([f(cc.Node)],t.prototype,"node_code_none",void 0),t=i([g],t)}(cc.Component);n.default=m,cc._RF.pop()},{"../../../common/Device":"Device","../../../common/UIHelper":"UIHelper","../../../manager/DataManager":"DataManager","../../../manager/EventManager":"EventManager","../../../manager/NetManager":"NetManager","../../../manager/UIManager":"UIManager","../../../net/NetCmd":"NetCmd","../../common/componet/ButtonEx":"ButtonEx"}],PromotionRank:[function(e,t,n){"use strict";cc._RF.push(t,"a0661mXYU5K64NgfOLcMKUT","PromotionRank");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../common/List"),r=e("../../../common/UIHelper"),s=e("../../../manager/EventManager"),c=e("../../../net/NetCmd"),l=e("../../../manager/NetManager"),p=cc._decorator,u=p.ccclass,h=p.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_rank=null,t.label_my_rank=null,t.label_tips=null,t.img_ranks=[],t.data=null,t}return o(t,e),t.prototype.onLoad=function(){s.EventManager.on(this,c.ProtocolHallCmd.GetGoldRankListResp,this.onGetGoldRankListResp.bind(this))},t.prototype.onEnable=function(){l.NetManager.protocolHall.sendGetGoldRankList(5)},t.prototype.onDestroy=function(){s.EventManager.off(this)},t.prototype.start=function(){},t.prototype.init=function(e){this.data=e.gold_rank_list,this.scroll_rank.numItems=e.gold_rank_list.length,this.label_my_rank.string="\u6211\u7684\u6392\u884c\u699c:"+(0==e.my_rank?"\u672a\u4e0a\u699c":e.my_rank),this.label_tips.string="\u699c\u5355\u6bcf\u5929"+e.update_time+"\u66f4\u65b0"},t.prototype.onGetGoldRankListResp=function(e){this.init(e)},t.prototype.onListRender=function(e,t){var n=e.getChildByName("icon_rank").getComponent(cc.Sprite),o=n.node.getChildByName("label_rank").getComponent(cc.Label),i=e.getChildByName("label_name").getComponent(cc.Label),a=e.getChildByName("label_money").getComponent(cc.Label),s=cc.find("node_head/node_head_mask/img_head",e);r.default.setHeadIcon(this.data[t].headimg_id,s),i.string=this.data[t].username,a.string=this.data[t].num,this.data[t].rank_index<=3?(n.spriteFrame=this.img_ranks[this.data[t].rank_index-1],o.node.active=!1):(n.spriteFrame=this.img_ranks[3],o.string=this.data[t].rank_index,o.node.active=!0)},i([h(a.default)],t.prototype,"scroll_rank",void 0),i([h(cc.Label)],t.prototype,"label_my_rank",void 0),i([h(cc.Label)],t.prototype,"label_tips",void 0),i([h(cc.SpriteFrame)],t.prototype,"img_ranks",void 0),t=i([u],t)}(cc.Component);n.default=d,cc._RF.pop()},{"../../../common/UIHelper":"UIHelper","../../../manager/EventManager":"EventManager","../../../manager/NetManager":"NetManager","../../../net/NetCmd":"NetCmd","../../common/List":"List"}],PromotionSelect:[function(e,t,n){"use strict";cc._RF.push(t,"20a15x2k1xNGpa1TpgO7CIJ","PromotionSelect");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../base/PopupView"),r=e("../../common/componet/ButtonEx"),s=e("../../../manager/UIManager"),c=e("../../common/List"),l=e("../../../manager/EventManager"),p=e("../../../common/utils/Utils"),u=e("../../../Define"),h=cc._decorator,d=h.ccclass,g=h.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_data_start=null,t.scroll_data_end=null,t.scroll_data_type=null,t.itme=null,t.top_sp=null,t.img_topsp=[],t._startTime="",t._endTime="",t.touch_state=!1,t.scorll_state=!0,t.first_srollS=0,t.first_srollE=0,t.first_srollT=0,t.touch_index="0",t.touch_typeindex="0",t.type_msg=[["\u6570\u636e\u6c47\u603b","\u8fd4\u5229\u660e\u7ec6"],[],[]],t.game_name=["\u5168\u90e8\u6e38\u620f","\u62a2\u5e84\u725b\u725b","\u5927\u8bdd\u9ab0","\u70b8\u91d1\u82b1","\u738b\u8005\u8363\u8000","\u770b\u4e09\u5f20\u724c","\u4e8c\u516b\u6760","\u4e09\u516c","\u767e\u4eba\u725b\u725b","\u62a2\u5e84\u724c\u4e5d","\u901a\u6bd4\u725b\u725b","\u6781\u901f\u70b8\u91d1\u82b1","\u5fb7\u5dde\u6251\u514b","\u6597\u5730\u4e3b","\u6c34\u679c\u673a","\u5954\u9a70\u5b9d\u9a6c","\u91d1\u6c99\u94f6\u9ca8","\u9f99\u864e\u6597","\u4e07\u4eba\u70b8\u91d1\u82b1","\u62a2\u7ea2\u5305","\u5341\u4e09\u6c34","\u4e8c\u5341\u4e00\u70b9","\u72fc\u4eba\u6740","\u9ab0\u5b9d","\u9ab0\u5b50\u738b","\u4e8c\u4eba\u9ebb\u5c06","\u8840\u6d41\u6210\u6cb3","\u9b54\u6cd5\u738b\u8005","\u6355\u9c7c","","","","","","\u68ee\u6797\u821e\u4f1a","","","","",""],t.kygame_name={630:"\u5f00\u5143\u5341\u4e09\u6c34",600:"\u5f00\u5143\u4e8c\u5341\u4e00\u70b9",920:"\u5f00\u5143\u68ee\u6797\u821e\u4f1a",1950:"\u5f00\u5143\u4e07\u4eba\u70b8\u91d1\u82b1",650:"\u5f00\u5143\u8840\u6d41\u6210\u6cb3",740:"\u5f00\u5143\u4e8c\u4eba\u9ebb\u5c06",1940:"\u5f00\u5143\u91d1\u6c99\u94f6\u9ca8",1960:"\u5f00\u5143\u5954\u9a70\u5b9d\u9a6c",510:"\u5f00\u5143\u6355\u9c7c",610:"\u5f00\u5143\u6597\u5730\u4e3b"},t.cur_msg=[],t.data_game=null,t.type_numItems=1,t.day_numItems=30,t}return o(t,e),t.prototype.initData=function(e){var t=this;if(this.type_numItems=e.num,this.day_numItems=e.daynum,""!=e.game)if(void 0!=e.game[0].name)this.data_game=e.game,e.game.sort(function(e,t){return e.id-t.id}),e.game.forEach(function(n,o){t.type_msg[e.type].push(n.name)});else{this.top_sp.spriteFrame=this.img_topsp[0],this.type_msg[e.type].push(this.game_name[0]),this.data_game=[];this.data_game.push({game_type:0}),e.game.forEach(function(n,o){if(n.is_open){var i="";n.game_type>100?(i=t.kygame_name[n.game_type],t.type_msg[e.type].push(i)):(i=t.game_name[n.game_type],t.type_msg[e.type].push(i)),t.data_game.push(n)}})}(this.cur_msg=this.type_msg[e.type],1==e.num)&&(this.itme.getChildByName("select_type").getComponent(cc.Label).string=1==e.tag?this.cur_msg[0]:this.cur_msg[1],this.scroll_data_type.node.active=!1)},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_confirm").registerClick(this.onClickConfirm.bind(this))},t.prototype.initEvent=function(){this.scroll_data_start.node.on("scroll-ended",this.onScrollEndedS.bind(this)),this.scroll_data_end.node.on("scroll-ended",this.onScrollEndedE.bind(this)),this.scroll_data_type.node.on("scroll-ended",this.onScrollEndedT.bind(this)),this.scroll_data_start.node.on("scrolling",this.onScrolling.bind(this)),this.scroll_data_end.node.on("scrolling",this.onScrolling.bind(this)),this.scroll_data_type.node.on("scrolling",this.onScrolling.bind(this))},t.prototype.onScrolling=function(){this.scorll_state=!1},t.prototype.onClickClose=function(){this.close(!1)},t.prototype.onClickConfirm=function(){var e=this;if(this.scorll_state){var t="",n="";if(this.scroll_data_start.content.children.forEach(function(n,o){var i=n.getChildByName("time").getComponent(cc.Label);i.fontSize>20&&(e._startTime=i.string,t=i.name)}),this.scroll_data_end.content.children.forEach(function(t,o){var i=t.getChildByName("time").getComponent(cc.Label);i.fontSize>20&&(e._endTime=i.string,n=i.name)}),console.log("\u5f53\u524d\u8bb0\u5f55\u7684\u4fe1\u606f",t,n,this.touch_typeindex,this.cur_msg[this.touch_typeindex]),""!=t&&""!=n)if(Number(t)>Number(n))s.UIManager.showTips("\u5f00\u59cb\u65e5\u671f\u5fc5\u987b\u5c0f\u4e8e\u7ed3\u675f\u65e5\u671f");else{var o=0;null!=this.data_game&&(o=void 0!=this.data_game[0].name?this.data_game[this.touch_typeindex].id:this.data_game[this.touch_typeindex].game_type);var i={start:t,end:n,startstr:this._startTime,endstr:this._endTime,sub_type:o,typestr:this.cur_msg[this.touch_typeindex]};l.EventManager.emit(u.EventDef.UserSelectTimeMsg,i),this.onClickClose()}else s.UIManager.showTips("\u8bf7\u9009\u62e9\u5f00\u59cb\u6216\u7ed3\u675f\u65f6\u95f4")}else s.UIManager.showTips("\u6ed1\u52a8\u672a\u5b8c\u6210,\u8bf7\u7a0d\u540e")},t.prototype.onScrollEndedT=function(e,t){this.first_srollT=this.first_srollT+1,this.scorll_state=!0,this.setColorLable(e,this.scroll_data_type,this.type_numItems)},t.prototype.onScrollEndedS=function(e,t){this.first_srollS=this.first_srollS+1,this.scorll_state=!0,this.setColorLable(e,this.scroll_data_start,this.day_numItems)},t.prototype.onScrollEndedE=function(e,t){this.first_srollE=this.first_srollE+1,this.scorll_state=!0,this.setColorLable(e,this.scroll_data_end,this.day_numItems)},t.prototype.setColorLable=function(e,t,n){var o=this;this.node.runAction(cc.sequence(cc.delayTime(.1),cc.callFunc(function(){if(o.touch_state)return o.touch_state=!1,void e.content.children.forEach(function(e,t){var n=e.getComponentsInChildren(cc.Label);e.name==o.touch_index?(n[0].node.color=cc.color(255,255,255),n[0].fontSize=24):(n[0].node.color=cc.color(181,105,43),n[0].fontSize=20)});e.content.children.forEach(function(i,a){var r=i.getComponentsInChildren(cc.Label);if(3==a){var s=i._listId;o.touch_index=i.name,"scroll_datat"==e.node.name&&(o.touch_typeindex=i.name);var c=s-3;c<0&&(c=n+c),t.scrollTo(c,.5),r[0].node.color=cc.color(255,255,255),r[0].fontSize=24}else r[0].node.color=cc.color(181,105,43),r[0].fontSize=20})})))},t.prototype.onListRender=function(e,t){var n=this;e.name=t+"";var o=e.getComponentsInChildren(cc.Label),i=o[0];if(i.node.color=cc.color(181,105,43),i.fontSize=20,"scroll_datat"==e.parent.parent.parent.name)return 0==e._listId%this.type_numItems&&0==this.first_srollT?(i.node.color=cc.color(255,255,255),i.fontSize=24):(i.node.color=cc.color(181,105,43),i.fontSize=20),o[0].string=this.cur_msg[t],void e.getComponent(r.default).registerClick(function(){n.touch_state=!0,n.touch_index=t+"",n.touch_typeindex=t+"";var e=t-3;e<0&&(e=n.type_numItems+e),n.scroll_data_type.scrollTo(e,.5)});"scroll_datas"==e.parent.parent.parent.name?0==e._listId%this.day_numItems&&0==this.first_srollS?(i.node.color=cc.color(255,255,255),i.fontSize=24):(i.node.color=cc.color(181,105,43),i.fontSize=20):0==e._listId%this.day_numItems&&0==this.first_srollE?(i.node.color=cc.color(255,255,255),i.fontSize=24):(i.node.color=cc.color(181,105,43),i.fontSize=20);var a=(new Date).getTime();a-=24*t*60*60*1e3;var s=p.default.getFormatDate(a,"yyyy-MM-dd");o[0].string=s,o[0].name=a+"",e.getComponent(r.default).registerClick(function(){n.touch_state=!0,n.touch_index=t+"";var o=t-3;o<0&&(o=n.day_numItems+o),"scroll_datas"==e.parent.parent.parent.name?n.scroll_data_start.scrollTo(o,.5):"scroll_datae"==e.parent.parent.parent.name&&n.scroll_data_end.scrollTo(o,.5)})},t.prototype.setLabelState=function(e){e.children.forEach(function(e,t){var n=e.getChildByName("time");n.color=cc.color(181,105,43),n.getComponent(cc.Label).fontSize=20})},t.prototype.start=function(){if(this.scroll_data_start.numItems=this.day_numItems,this.scroll_data_end.numItems=this.day_numItems,this.type_numItems>1&&(this.scroll_data_type.numItems=this.type_numItems),this.scroll_data_start.checkInited()){var e=this.day_numItems-3;this.scroll_data_start.scrollTo(e,-1)}if(this.scroll_data_end.checkInited()){e=this.day_numItems-3;this.scroll_data_end.scrollTo(e,-1)}if(this.type_numItems>1&&this.scroll_data_type.checkInited()){e=this.type_numItems-3;this.scroll_data_type.scrollTo(e,-1)}},i([g(c.default)],t.prototype,"scroll_data_start",void 0),i([g(c.default)],t.prototype,"scroll_data_end",void 0),i([g(c.default)],t.prototype,"scroll_data_type",void 0),i([g(cc.Node)],t.prototype,"itme",void 0),i([g(cc.Sprite)],t.prototype,"top_sp",void 0),i([g(cc.SpriteFrame)],t.prototype,"img_topsp",void 0),t=i([d],t)}(a.default);n.default=f,cc._RF.pop()},{"../../../Define":"Define","../../../common/utils/Utils":"Utils","../../../manager/EventManager":"EventManager","../../../manager/UIManager":"UIManager","../../base/PopupView":"PopupView","../../common/List":"List","../../common/componet/ButtonEx":"ButtonEx"}],Promotion:[function(e,t,n){"use strict";cc._RF.push(t,"286b8M0H7ZKhoQjBug9uYFv","Promotion");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./PromotionGuide"),r=e("../../base/PopupView"),s=e("../../common/componet/ButtonEx"),c=e("../../../manager/EventManager"),l=e("../../../net/NetCmd"),p=e("../../../manager/NetManager"),u=e("./PromotionRank"),h=e("./PromotionInfo"),d=e("./PromotionDetail"),g=cc._decorator,f=g.ccclass,m=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.index=0,t.node_info=null,t.node_guide=null,t.node_detail=null,t.node_rank=null,t}return o(t,e),t.prototype.openAnimation=function(){var e=this.getItem("btn_close").node;e.scale=.1,e.runAction(cc.scaleTo(.3,1)),this.getComponent(cc.Animation).play(),this.getItem("sp_title").addAnimation(0,"loop",!0)},t.prototype.initComponent=function(){var e=this;this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),p.NetManager.protocolHall.is_have_promotion?this.getItem("sp_button").setAnimation(0,"y-btn1",!0):this.getItem("sp_button").setAnimation(0,"btn1",!0),this.getItem("node_buttons").getComponentsInChildren(s.default).forEach(function(t,n){t.registerClick(function(){e.index!=n&&(p.NetManager.protocolHall.is_have_promotion?e.getItem("sp_button").setAnimation(0,"y-btn"+(n+1),!0):e.getItem("sp_button").setAnimation(0,"btn"+(n+1),!0),e.getComponent(cc.Animation).play(),e.index=n,e.updatePromotion())})})},t.prototype.initEvent=function(){c.EventManager.on(this,l.ProtocolHallCmd.GetPromoteRewardResp,this.onGetPromoteRewardResp.bind(this))},t.prototype.onGetGoldRankListResp=function(e){this.index=3,this.updatePromotion(e)},t.prototype.onPromoteMsgResp=function(e){this.index=0,this.updatePromotion(e)},t.prototype.onPromoteCourseResp=function(e){this.index=1,this.updatePromotion(e)},t.prototype.onPromoteDetailResp=function(e){this.index=2,this.updatePromotion(e)},t.prototype.onGetPromoteRewardResp=function(e){1==e.status&&this.getItem("sp_button").setAnimation(0,"btn3",!0)},t.prototype.onClickClose=function(){this.close(!1)},t.prototype.updatePromotion=function(e){var t=this;this.getItem("img_paper").children.forEach(function(e,n){t.index==n?e.active=!0:e.active=!1})},t.prototype.start=function(){},i([m(h.default)],t.prototype,"node_info",void 0),i([m(a.default)],t.prototype,"node_guide",void 0),i([m(d.default)],t.prototype,"node_detail",void 0),i([m(u.default)],t.prototype,"node_rank",void 0),t=i([f],t)}(r.default);n.default=_,cc._RF.pop()},{"../../../manager/EventManager":"EventManager","../../../manager/NetManager":"NetManager","../../../net/NetCmd":"NetCmd","../../base/PopupView":"PopupView","../../common/componet/ButtonEx":"ButtonEx","./PromotionDetail":"PromotionDetail","./PromotionGuide":"PromotionGuide","./PromotionInfo":"PromotionInfo","./PromotionRank":"PromotionRank"}],ProtocolAccount:[function(e,t,n){"use strict";cc._RF.push(t,"0c5e3soAGRJNrH0ij4ehbDv","ProtocolAccount");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./ProtocolBase"),c=e("../manager/EventManager"),l=e("../Define"),p=e("../common/log/LogWrap"),u=e("../manager/NetManager"),h=e("./NetCmd"),d=e("../common/Text"),g=e("../manager/DataManager"),f=e("../manager/UIManager"),m=e("../manager/UpdateManager"),_=e("../common/Device"),y=e("../manager/ResManager"),v=cc._decorator,b=v.ccclass,C=(v.property,function(e){function t(){var t=e.call(this)||this;return t.vip_lock_level=1,c.EventManager.on(t,l.EventDef.SocketOpen,t.onSocketOpenEvent.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.AuthenResp,t.onAuthenResp.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.AccountErrorResp,t.onAccountErrorResp.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.LoginResp,t.onLoginResp.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.GetUserInfoResp,t.onGetUserInfoResp.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.AccoutSafetyResp,t.onAccoutSafetyResp.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.EditDataResp,t.onEditDataResp.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.SetLoginPasswordResp,t.onSetLoginPasswordResp.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.ModifyLoginPasswordResp,t.onModifyLoginPasswordResp.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.SetSecurePasswordResp,t.onSetSecurePasswordResp.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.ModifySecureResp,t.onModifySecureResp.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.BindMobilePhoneResp,t.onBindMobilePhoneResp.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.CheckBoundPhoneVercodeResp,t.onCheckBoundPhoneVercodeResp.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.ModifyBindMobilePhoneResp,t.onModifyBindMobilePhoneResp.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.RetrievePasswordResp,t.onRetrievePasswordResp.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.RetrieveSafeCodeResp,t.onRetrieveSafeCodeResp.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.KickoutNotify,t.onKickoutNotify.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.UserDataChangeNotify,t.onUserDataChangeNotify.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.UserGoldChangeNotify,t.onUserGoldChangeNotify.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.AccountRegResp,t.onLoginResp.bind(t)),c.EventManager.on(t,h.ProtocolAccountCmd.UserVipChangeNotify,t.onUserVipChangeNotify.bind(t)),t}return o(t,e),t.prototype.onSocketOpenEvent=function(e){e==l.SocketType.Hall&&this.sendInit()},t.prototype.sendInit=function(){this.send({secret:"xfgame"},"authen_req")},t.prototype.sendRister=function(e,t,n){var o={account:e,password:t,login_type:5,ver_code:n,model:cc.sys.os,channel:g.DataManager.channel};g.DataManager.loginInfo=o,this.send(o,"account_reg_req")},t.prototype.sendLogin=function(e){if(!g.DataManager.account||"0"==g.DataManager.account){var t=_.default.getDeviceId(),n=""!=t&&"0"!=t&&void 0!=t;g.DataManager.account=n?t:(1e3*((new Date).getTime()+Math.random())).toFixed(0),g.DataManager.saveAccount()}e.account&&"0"!=e.account||(e.account=g.DataManager.account),g.DataManager.loginInfo=e;var o=e,i=_.default.getLocation();i.cityName&&(o.login_addr=i.cityName),i.longitude&&i.latitude&&(o.longitude_latitude=i.longitude+","+i.latitude),o.deviceID=g.DataManager.account,delete o.userid,o.login_ip=g.DataManager.ip||"",this.send(o,"login_req")},t.prototype.sendGetUserInfo=function(){var e={userid:g.DataManager.userInfo.userid};this.send(e,"get_userinfo_req")},t.prototype.sendAccoutSafety=function(){var e={userid:g.DataManager.userInfo.userid};this.send(e,"accout_safety_req")},t.prototype.sendEditData=function(e,t,n){var o={userid:g.DataManager.userInfo.userid,imgid:e,nickname:t,type:n};this.send(o,"edit_data_req")},t.prototype.sendSetLoginPassword=function(e){var t={userid:g.DataManager.userInfo.userid,password:e};this.send(t,"set_login_password_req")},t.prototype.sendModifyLoginPassword=function(e,t){var n={userid:g.DataManager.userInfo.userid,oldpassword:e,newpassword:t};this.send(n,"modify_login_password_req")},t.prototype.sendSetSecurePassword=function(e){var t={userid:g.DataManager.userInfo.userid,password:e};this.send(t,"set_secure_password_req")},t.prototype.sendModifySecure=function(e,t){var n={userid:g.DataManager.userInfo.userid,oldsecure:e,newsecure:t};this.send(n,"modify_secure_req")},t.prototype.sendBindMobilePhone=function(e,t){var n={userid:g.DataManager.userInfo.userid,phonenumber:e,identifycode:t,channel:g.DataManager.channel,deviceID:g.DataManager.account,model:cc.sys.os};this.send(n,"bind_mobile_phone_req")},t.prototype.sendModifyBindMobilePhone=function(e){var t={userid:g.DataManager.userInfo.userid,phonenumber:g.DataManager.userInfo.phone_number,identifycode:e,channel:g.DataManager.channel};this.send(t,"check_bound_phone_vercode_req")},t.prototype.sendModifyBindMobilePhoneSecond=function(e,t){var n={userid:g.DataManager.userInfo.userid,newphonenumber:e,identifycode:t,channel:g.DataManager.channel};this.send(n,"modify_bind_mobile_phone_req")},t.prototype.sendRetrievePassword=function(e,t,n){var o={userid:g.DataManager.userInfo.userid,account:e,identifycode:t,channel:g.DataManager.channel,password:n};this.send(o,"retrieve_password_req")},t.prototype.sendRetrieveSafeCode=function(e,t,n){var o={userid:g.DataManager.userInfo.userid,account:e,identifycode:t,channel:g.DataManager.channel,password:n};this.send(o,"retrieve_safecode_req")},t.prototype.sendAddUserGold=function(e){var t={userid:g.DataManager.userInfo.userid,gold:e};this.send(t,"add_user_gold_req")},t.prototype.sendGetVerificationCode=function(e,t){console.log("postUrl->>","get_verification")},t.prototype.onAuthenResp=function(e){"ok"==e.res&&(u.NetManager.getSocket(l.SocketType.Hall).startHeart(),g.DataManager.loginInfo&&u.NetManager.protocolAccount.sendLogin(g.DataManager.loginInfo))},t.prototype.onAccountErrorResp=function(e){var t=d.ErrorCode[e.err_subno]||d.ErrorCode[e.err_no]||e.err_msg;10202==e.err_subno||10203==e.err_subno||f.UIManager.showTips(t),102==e.err_no&&(g.DataManager.loginInfo=null,f.UIManager.open("prefabs/LoginView"))},t.prototype.onLoginResp=function(e){var t=this;if(e.userid){if(g.DataManager.userInfo=e.user_info,g.DataManager.userSafeInfo=e.safety_info,p.LogWrap.uid=g.DataManager.userInfo.userid,g.DataManager.loginInfo.userid=g.DataManager.userInfo.userid,g.DataManager.loginInfo.token=e.token,g.DataManager.loginInfo.login_type=e.user_info.login_type,g.DataManager.isFirstLogin=!1,g.DataManager.saveLoginInfo(),g.DataManager.saveFirstLogin(),g.DataManager.userInfo.limit_info){var n=JSON.parse(g.DataManager.userInfo.limit_info);this.vip_lock_level=n.vipLevel}if(0==g.DataManager.userInfo.parent_id&&0!=g.DataManager.parentId&&u.NetManager.protocolHall.sendBindParentIdReq(g.DataManager.parentId,0),0!=g.DataManager.inviteClubId&&0!=g.DataManager.inviteClubCreateId&&u.NetManager.protocolClub.sendInvitePlayer(g.DataManager.userInfo.userid,g.DataManager.inviteClubId,g.DataManager.inviteClubCreateId,1),e.joined_game_info){g.DataManager.isFirst=!1;var o=g.DataManager.getGameName(e.joined_game_info.game_type);if(!m.UpdateManager.isInstall(o)||m.UpdateManager.isNeedUpdate(o))return void f.UIManager.popup("prefabs/common/GameDownload",{gameName:o,callback:function(){u.NetManager.protocolHall.onAskJoinedGameInfoResp(e.joined_game_info)}});u.NetManager.protocolHall.onAskJoinedGameInfoResp(e.joined_game_info)}else{if(f.UIManager.isInGameView()){if(!e.joined_game_info){if(g.DataManager.roomType==l.RoomType.Club)f.UIManager.open("prefabs/club/ClubView");else if(g.DataManager.gameType&&!l.NotSeletRoomGame[g.DataManager.gameType])if(g.DataManager.isFriendGame)f.UIManager.open("prefabs/hall/CreateRoom");else{var i="game/"+(o=g.DataManager.getGameName(g.DataManager.gameType))+"/"+o.toUpperCase()+"RoomView";cc.loader._getResUuid(i)?y.ResManager.loadSubPackage(o,function(e){return a(t,void 0,void 0,function(){return r(this,function(t){return e||!cc.sys.isMobile?f.UIManager.open(i,g.DataManager.gameType):f.UIManager.open("prefabs/RoomView",g.DataManager.gameType),[2]})})}):f.UIManager.open("prefabs/RoomView",g.DataManager.gameType)}else f.UIManager.open("prefabs/HallView");g.DataManager.isFriendGame=!1,g.DataManager.friendRoomId=null,g.DataManager.roomId=null,g.DataManager.gameType=null,g.DataManager.roomType=l.RoomType.None}}else-1==f.UIManager.viewName.indexOf("RoomView")&&"CreateRoom"!=f.UIManager.viewName&&"ClubView"!=f.UIManager.viewName&&f.UIManager.open("prefabs/HallView");c.EventManager.emit(l.EventDef.UpdateUserInfo)}}else g.DataManager.clearLoginInfo(),u.NetManager.closeAll(),f.UIManager.open("prefabs/LoginView")},t.prototype.onGetUserInfoResp=function(e){var t=g.DataManager.userInfo.login_type,n=g.DataManager.userInfo.platform_userid;if(g.DataManager.userInfo=e.user_info,g.DataManager.userInfo.login_type=t,g.DataManager.userInfo.platform_userid=n,g.DataManager.userInfo.limit_info){var o=JSON.parse(g.DataManager.userInfo.limit_info);this.vip_lock_level=o.vipLevel}c.EventManager.emit(l.EventDef.UpdateUserInfo)},t.prototype.onAccoutSafetyResp=function(e){g.DataManager.userSafeInfo=e,c.EventManager.emit(l.EventDef.UpdateUserSafeInfo)},t.prototype.onEditDataResp=function(e){g.DataManager.userInfo.headimgurl=e.headimgurl,g.DataManager.userInfo.sex=parseInt(e.headimgurl)<200?1:2,g.DataManager.userInfo.nickname=e.nickname,c.EventManager.emit(l.EventDef.UpdateUserInfo)},t.prototype.onSetLoginPasswordResp=function(e){e.ok&&(g.DataManager.userSafeInfo.has_password=!0,c.EventManager.emit(l.EventDef.UpdateUserSafeInfo))},t.prototype.onModifyLoginPasswordResp=function(e){e.ok&&c.EventManager.emit(l.EventDef.UpdateUserSafeInfo)},t.prototype.onSetSecurePasswordResp=function(e){e.ok&&(g.DataManager.userSafeInfo.has_safe_password=!0,c.EventManager.emit(l.EventDef.UpdateUserSafeInfo))},t.prototype.onModifySecureResp=function(e){e.ok&&c.EventManager.emit(l.EventDef.UpdateUserSafeInfo)},t.prototype.onBindMobilePhoneResp=function(e){if(e.ok){if(g.DataManager.loginInfo.login_type=3,g.DataManager.loginInfo.token=e.login_res.token,g.DataManager.saveLoginInfo(),g.DataManager.userInfo=e.login_res.user_info,g.DataManager.userSafeInfo=e.login_res.safety_info,c.EventManager.emit(l.EventDef.UpdateUserSafeInfo),c.EventManager.emit(l.EventDef.UpdateUserInfo),g.DataManager.userInfo.limit_info){var t=JSON.parse(g.DataManager.userInfo.limit_info);this.vip_lock_level=t.vipLevel}0==g.DataManager.userInfo.parent_id&&0!=g.DataManager.parentId&&u.NetManager.protocolHall.sendBindParentIdReq(g.DataManager.parentId,0)}},t.prototype.onCheckBoundPhoneVercodeResp=function(e){e.ok},t.prototype.onModifyBindMobilePhoneResp=function(e){e.ok&&(g.DataManager.userInfo.account=e.phonenumber)},t.prototype.onRetrievePasswordResp=function(e){e.ok},t.prototype.onRetrieveSafeCodeResp=function(e){e.ok},t.prototype.onKickoutNotify=function(e){g.DataManager.clearLoginInfo(),"LoginView"!=f.UIManager.viewName?u.NetManager.closeAll():u.NetManager.close(l.SocketType.Game),f.UIManager.hideLoading(),f.UIManager.showTipsPopup(e.des,function(){f.UIManager.open("prefabs/LoginView")})},t.prototype.onUserDataChangeNotify=function(e){this.sendGetUserInfo()},t.prototype.onUserGoldChangeNotify=function(e){g.DataManager.userInfo.gold=e.gold,c.EventManager.emit(l.EventDef.UpdateUserGold),f.UIManager.showTips(e.msg)},t.prototype.onUserVipChangeNotify=function(e){-1==f.UIManager.viewName.indexOf("RoomView")&&"HallView"!=f.UIManager.viewName||f.UIManager.popup("prefabs/account/VipTips",e.new_vip_level)},t=i([b],t)}(s.default));n.default=C,cc._RF.pop()},{"../Define":"Define","../common/Device":"Device","../common/Text":"Text","../common/log/LogWrap":"LogWrap","../manager/DataManager":"DataManager","../manager/EventManager":"EventManager","../manager/NetManager":"NetManager","../manager/ResManager":"ResManager","../manager/UIManager":"UIManager","../manager/UpdateManager":"UpdateManager","./NetCmd":"NetCmd","./ProtocolBase":"ProtocolBase"}],ProtocolBank:[function(e,t,n){"use strict";cc._RF.push(t,"64d92CqZrlJoJxvBInyMwkL","ProtocolBank");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./ProtocolBase"),r=e("../manager/DataManager"),s=e("./NetCmd"),c=e("../manager/EventManager"),l=e("../Define"),p=e("../manager/UIManager"),u=e("../common/Text"),h=cc._decorator,d=h.ccclass,g=(h.property,function(e){function t(){var t=e.call(this)||this;return t.cmd=s.NetCmd.Bank,t.pbName="Bank",t.reqEventDone={},c.EventManager.on(t,l.EventDef.SocketOpen,t.onSocketOpenp.bind(t)),c.EventManager.on(t,s.ProtocolBankCmd.ErrorResp,t.onErrorResp.bind(t)),c.EventManager.on(t,s.ProtocolBankCmd.ResearchBankInfoResp,t.onResearchBankInfoResp.bind(t)),c.EventManager.on(t,s.ProtocolBankCmd.AccountToSafeboxResp,t.onAccountToSafeboxResp.bind(t)),c.EventManager.on(t,s.ProtocolBankCmd.SafeboxToAccountResp,t.onSafeboxToAccountResp.bind(t)),c.EventManager.on(t,s.ProtocolBankCmd.WithDrawToBankcardResp,t.onWithDrawToBankcardResp.bind(t)),c.EventManager.on(t,s.ProtocolBankCmd.TransferToOtherResp,t.onTransferToOtherResp.bind(t)),c.EventManager.on(t,s.ProtocolBankCmd.BindBankcardResp,t.onBindBankcardResp.bind(t)),c.EventManager.on(t,s.ProtocolBankCmd.GetBoundBankCardResp,t.onGetBoundBankCardResp.bind(t)),c.EventManager.on(t,s.ProtocolBankCmd.ChangeBoundBankCardResp,t.onChangeBoundBankCardResp.bind(t)),c.EventManager.on(t,s.ProtocolBankCmd.GetAccountDetailsResp,t.onGetAccountDetailsResp.bind(t)),c.EventManager.on(t,s.ProtocolBankCmd.GetWithdrawalsRecordResp,t.onGetWithdrawalsRecordResp.bind(t)),c.EventManager.on(t,s.ProtocolBankCmd.GetRechargeRecordResp,t.onGetRechargeRecordResp.bind(t)),c.EventManager.on(t,s.ProtocolBankCmd.RechargePlatformResp,t.onRechargePlatformResp.bind(t)),c.EventManager.on(t,s.ProtocolBankCmd.RechargeUrlResp,t.onRechargeUrlResp.bind(t)),c.EventManager.on(t,s.ProtocolBankCmd.CheckRechargeResp,t.onCheckRechargeResp.bind(t)),t}return o(t,e),t.prototype.onSocketOpenp=function(){this.reqEventDone={}},t.prototype.sendResearchBankInfo=function(){var e={userid:r.DataManager.userInfo.userid,channel:r.DataManager.channel};this.send(e,"research_bank_info_req")},t.prototype.sendAccountToSafeBox=function(e){var t={userid:r.DataManager.userInfo.userid,money:e};this.send(t,"account_to_safebox_req")},t.prototype.sendSafeBoxToAccount=function(e){var t={userid:r.DataManager.userInfo.userid,money:e};this.send(t,"safebox_to_account_req")},t.prototype.sendTransferToOther=function(e,t,n){var o=this.reqEventDone.transfer_to_other_req;if(null==o||0!=o){var i={userid:r.DataManager.userInfo.userid,recv_userid:e,money:t,safe_code:n};this.send(i,"transfer_to_other_req"),this.reqEventDone.transfer_to_other_req=!1}else p.UIManager.showTips("\u8f6c\u8d26\u8bf7\u6c42\u672a\u5b8c\u6210, \u8bf7\u7a0d\u540e\u91cd\u8bd5")},t.prototype.sendWithdrawToBankCard=function(e,t,n){var o=this.reqEventDone.withdraw_to_bankcard_req;if(null==o||0!=o){var i={userid:r.DataManager.userInfo.userid,index:e,money:t,safe_code:n,channel:r.DataManager.channel};this.send(i,"withdraw_to_bankcard_req"),this.reqEventDone.withdraw_to_bankcard_req=!1}else p.UIManager.showTips("\u63d0\u73b0\u8bf7\u6c42\u672a\u5b8c\u6210, \u8bf7\u7a0d\u540e\u91cd\u8bd5")},t.prototype.sendBindBankcard=function(e,t,n,o){var i={userid:r.DataManager.userInfo.userid,name:e,card_name:t,cardid:n,safe_code:o};this.send(i,"bind_bankcard_req")},t.prototype.sendGetBoundBankCard=function(){var e={userid:r.DataManager.userInfo.userid,channel:r.DataManager.channel};this.send(e,"get_bound_bankcard_req")},t.prototype.sendChangeBoundBankCard=function(e,t,n,o,i){var a={userid:r.DataManager.userInfo.userid,index:i,name:e,card_name:t,cardid:n,safe_code:o};this.send(a,"change_bound_bankcard_req")},t.prototype.sendGetAccountDetails=function(e,t,n,o){var i={userid:r.DataManager.userInfo.userid,typeIndex:e,timeIndex:t,page_idx:n,page_num:o};this.send(i,"get_account_details_req")},t.prototype.sendGetWithdrawalsRecord=function(e,t,n){var o={userid:r.DataManager.userInfo.userid,timeIndex:e,page_idx:t,page_num:n};this.send(o,"get_withdrawals_recordReq")},t.prototype.sendGetRechargeRecord=function(e,t,n){var o={userid:r.DataManager.userInfo.userid,timeIndex:e,page_idx:t,page_num:n};this.send(o,"get_recharge_record_req")},t.prototype.sendRechargePlatformReq=function(){var e={userid:r.DataManager.userInfo.userid,channel:r.DataManager.channel};this.send(e,"recharge_platform_req")},t.prototype.sendRechargeUrlReq=function(e,t,n,o,i){p.UIManager.showLoading(u.Tips.RechargeWaiting);var a={userid:r.DataManager.userInfo.userid,pay_id:e,recharge_amount:t,pay_platform_type:n,data_index:o,pay_label_id:i};this.send(a,"recharge_url_req")},t.prototype.sendCheckRechargeReq=function(e,t,n,o,i){var a={userid:r.DataManager.userInfo.userid,name:e,time:t,gold:n,data_index:o,pay_label_id:i};this.send(a,"check_recharge_req")},t.prototype.onErrorResp=function(e){p.UIManager.showTips(e.err_msg||"\u8bf7\u7a0d\u540e\u91cd\u8bd5")},t.prototype.onResearchBankInfoResp=function(e){r.DataManager.userInfo.gold=parseFloat(e.account_balance),c.EventManager.emit(l.EventDef.UpdateUserInfo)},t.prototype.onAccountToSafeboxResp=function(e){e.ok&&(p.UIManager.showTips("\u5b58\u6b3e\u6210\u529f\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536"),this.sendResearchBankInfo())},t.prototype.onSafeboxToAccountResp=function(e){e.ok&&(p.UIManager.showTips("\u53d6\u6b3e\u6210\u529f\uff0c\u8bf7\u6ce8\u610f\u67e5\u6536"),this.sendResearchBankInfo())},t.prototype.onWithDrawToBankcardResp=function(e){this.reqEventDone.withdraw_to_bankcard_req=!0,1==e.status?(p.UIManager.showTips("\u7533\u8bf7\u6210\u529f"),this.sendResearchBankInfo()):2==e.status?p.UIManager.showTips("\u8f93\u5165\u91d1\u989d\u6709\u8bef"):p.UIManager.showTips(e.withdraw_msg)},t.prototype.onTransferToOtherResp=function(e){this.reqEventDone.transfer_to_other_req=!0,e.ok?(p.UIManager.showTips("\u8f6c\u8d26\u6210\u529f"),this.sendResearchBankInfo()):p.UIManager.showTips(e.msg)},t.prototype.onBindBankcardResp=function(e){e.ok&&(p.UIManager.showTips("\u65b0\u589e\u94f6\u884c\u5361\u6210\u529f"),this.sendGetBoundBankCard())},t.prototype.onGetBoundBankCardResp=function(e){},t.prototype.onChangeBoundBankCardResp=function(e){e.ok&&(p.UIManager.showTips("\u4fee\u6539\u94f6\u884c\u5361\u6210\u529f"),this.sendGetBoundBankCard())},t.prototype.onGetAccountDetailsResp=function(e){},t.prototype.onGetWithdrawalsRecordResp=function(e){},t.prototype.onGetRechargeRecordResp=function(e){},t.prototype.onRechargePlatformResp=function(e){},t.prototype.onRechargeUrlResp=function(e){p.UIManager.hideLoading(u.Tips.RechargeWaiting)},t.prototype.onCheckRechargeResp=function(e){},t=i([d],t)}(a.default));n.default=g,cc._RF.pop()},{"../Define":"Define","../common/Text":"Text","../manager/DataManager":"DataManager","../manager/EventManager":"EventManager","../manager/UIManager":"UIManager","./NetCmd":"NetCmd","./ProtocolBase":"ProtocolBase"}],ProtocolBase:[function(e,t,n){"use strict";cc._RF.push(t,"d8e54YWQGVKuKOeDPPkHsZK","ProtocolBase");var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../manager/EventManager"),r=e("../manager/ResManager"),s=e("./NetCmd"),c=e("../Define"),l=e("../common/log/LogWrap"),p=function(){function t(e){void 0===e&&(e="pb"),this.cmd=s.NetCmd.Account,this.type=c.SocketType.Hall,this.pb=null,this.pbName="Account",this.loadProto(e)}return t.prototype.release=function(){a.EventManager.off(this)},t.prototype.loadProto=function(e){return o(this,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return t=this,[4,r.ResManager.loadProto(e)];case 1:return t.pb=n.sent(),[2]}})})},t.prototype.send=function(t,n){return o(this,void 0,void 0,function(){var o;return i(this,function(i){switch(i.label){case 0:return cc.sys.isNative?l.LogWrap.log("send->"+n,JSON.stringify(t)):l.LogWrap.log("send->"+n,t),(o=new this.pb[this.pbName].MsgBody)[n]=t,[4,Promise.resolve().then(function(){return e("../manager/NetManager")})];case 1:return i.sent().NetManager.send(this.cmd,o.toArrayBuffer(),this.type),[2]}})})},t.prototype.decode=function(e){return this.pb[this.pbName].MsgBody.decode(e)},t}();n.default=p,cc._RF.pop()},{"../Define":"Define","../common/log/LogWrap":"LogWrap","../manager/EventManager":"EventManager","../manager/NetManager":"NetManager","../manager/ResManager":"ResManager","./NetCmd":"NetCmd"}],ProtocolChat:[function(e,t,n){"use strict";cc._RF.push(t,"57f88VY9LNPz7Zs/ZIvyRYj","ProtocolChat");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./ProtocolBase"),r=e("../manager/DataManager"),s=e("./NetCmd"),c=e("../manager/EventManager"),l=e("../manager/UIManager"),p=cc._decorator,u=p.ccclass,h=(p.property,function(e){function t(){var t=e.call(this)||this;return t.cmd=s.NetCmd.Chat,t.pbName="Chat",t.chatRecords=[],c.EventManager.on(t,s.ProtocolChatCmd.SendChatMsgResp,t.onSendChatMsgResp.bind(t)),c.EventManager.on(t,s.ProtocolChatCmd.ChatMsgNotify,t.onChatMsgNotify.bind(t)),c.EventManager.on(t,s.ProtocolChatCmd.GetChatMsgRecordResp,t.onGetChatMsgRecordResp.bind(t)),t}return o(t,e),t.prototype.sendChatMsgReq=function(e,t,n){var o={user_id:r.DataManager.userInfo.userid,place_id:e,content_type:1,raw_content:t,game_id:r.DataManager.gameType,room_level:r.DataManager.gameLevel,friend_room_id:r.DataManager.friendRoomId&&r.DataManager.friendRoomId.toString()};n?o.club_id=n:r.DataManager.clubId&&(o.club_id=r.DataManager.clubId),r.DataManager.isFriendGame||delete o.friend_room_id,r.DataManager.gameType||(delete o.game_id,delete o.room_level),1!=e&&3!=e||(delete o.game_id,delete o.room_level,delete o.friend_room_id),this.send(o,"send_chatmsg_req")},t.prototype.sendChatRoomReq=function(e){void 0===e&&(e=1);var t={user_id:r.DataManager.userInfo.userid,place_id:2,content_type:3,content_sub_type:e,game_id:r.DataManager.gameType,room_level:r.DataManager.gameLevel,friend_room_id:r.DataManager.friendRoomId&&r.DataManager.friendRoomId.toString()};r.DataManager.isFriendGame||delete t.friend_room_id,this.send(t,"send_chatmsg_req")},t.prototype.sendClubRoomReq=function(){var e={user_id:r.DataManager.userInfo.userid,place_id:3,content_type:3,content_sub_type:3,game_id:r.DataManager.gameType,room_level:r.DataManager.gameLevel,friend_room_id:r.DataManager.friendRoomId&&r.DataManager.friendRoomId.toString(),club_id:r.DataManager.clubId};this.send(e,"send_chatmsg_req")},t.prototype.sendChatShareRoomReq=function(e){var t={user_id:r.DataManager.userInfo.userid,place_id:2,content_type:3,content_sub_type:2,raw_content:e,game_id:r.DataManager.gameType,room_level:r.DataManager.gameLevel,friend_room_id:r.DataManager.friendRoomId&&r.DataManager.friendRoomId.toString()};r.DataManager.isFriendGame||delete t.friend_room_id,this.send(t,"send_chatmsg_req")},t.prototype.sendGetChatMsgRecordReq=function(e,t){var n={user_id:r.DataManager.userInfo.userid,place_id:e,game_id:r.DataManager.gameType,room_level:r.DataManager.gameLevel,friend_room_id:r.DataManager.friendRoomId&&r.DataManager.friendRoomId.toString()};t?n.club_id=t:r.DataManager.clubId&&(n.club_id=r.DataManager.clubId),r.DataManager.isFriendGame||delete n.friend_room_id,r.DataManager.gameType||(delete n.game_id,delete n.room_level),this.send(n,"get_chatmsg_record_req")},t.prototype.onChatMsgNotify=function(e){e.chat_content&&(this.chatRecords.length>=100&&this.chatRecords.shift(),this.chatRecords.push(e.chat_content))},t.prototype.onGetChatMsgRecordResp=function(e){this.chatRecords=e.chat_content_list||[],this.chatRecords.sort(function(e,t){return e.content_time-t.content_time})},t.prototype.onSendChatMsgResp=function(e){e.show_tips&&l.UIManager.showTips(e.show_tips)},t.prototype.getChatRecords=function(e){void 0===e&&(e=2);var t=[];return this.chatRecords.forEach(function(n){n.place_id==e&&1==n.content_type&&t.push(n)}),t},t.prototype.getAllChatRecords=function(){var e=[];return this.chatRecords.forEach(function(t){3!=t.place_id&&e.push(t)}),e},t.prototype.getAllChatRecordsInPlace=function(e,t){var n=[];return this.chatRecords.forEach(function(o){o.place_id==e&&o.club_id==t&&n.push(o)}),n},t=i([u],t)}(a.default));n.default=h,cc._RF.pop()},{"../manager/DataManager":"DataManager","../manager/EventManager":"EventManager","../manager/UIManager":"UIManager","./NetCmd":"NetCmd","./ProtocolBase":"ProtocolBase"}],ProtocolClub:[function(e,t,n){"use strict";cc._RF.push(t,"f6d83DzYntJFYPKEHgAAI4f","ProtocolClub");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./ProtocolBase"),r=e("./NetCmd"),s=e("../manager/EventManager"),c=e("../manager/DataManager"),l=e("../manager/UIManager"),p=e("../manager/NetManager"),u=e("../Define"),h=e("../manager/UpdateManager"),d=cc._decorator,g=d.ccclass,f=(d.property,function(e){function t(){var t=e.call(this)||this;return t.cmd=r.NetCmd.Club,t.pbName="Club",t.clubList=[],t.clubGameList=[],t.clubConfig={},t.inviteType=0,s.EventManager.on(t,r.ProtocolClubCmd.SendCreateClubResp,t.onCreateClubResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.GetClubListResp,t.onGetClubListResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.GetClubRoomsResp,t.onGetClubRoomsResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.SendJoinClubResp,t.onJoinClubResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.ClubCancelResp,t.onClubCancelResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.ClubQuitResp,t.onClubQuitResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.ClubReNameResp,t.onClubReNameResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.ClubReConfigResp,t.onClubReConfigResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.ClubListAutoPushResp,t.onClubPushResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.MembersListAutoPushResp,t.onClubPlayersPushResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.RoomListAutoPushResp,t.onRoomListAutoPushResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.ClubGameListResp,t.onClubGameListResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.ClubAddLeagueResp,t.onClubAddLeagueResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.ClubQuitLeagueResp,t.onClubQuitLeagueResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.JointClubRoomResp,t.onJointClubRoomResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.CreateClubRoomResp,t.onCreateClubRoomResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.ClubInviteResp,t.onClubInvitePlayerResp.bind(t)),s.EventManager.on(t,r.ProtocolClubCmd.ClubGetProfitResp,t.onClubGetProfitResp.bind(t)),t}return o(t,e),t.prototype.sendCreateClub=function(e){var t={user_id:c.DataManager.userInfo.userid,club_name:e};this.send(t,"club_create_req")},t.prototype.sendGetClubList=function(){var e={user_id:c.DataManager.userInfo.userid,cur_page:1,page_size:100};this.send(e,"club_list_req")},t.prototype.sendGetClubRooms=function(e,t,n,o){void 0===o&&(o=1);var i={club_id:e,room_type:n,game_type:t,cur_page:o,page_size:6};this.send(i,"club_room_list_req")},t.prototype.sendGetSearchClubList=function(e,t,n){void 0===e&&(e=1);var o={user_id:c.DataManager.userInfo.userid,cur_page:e,page_size:9,club_id:t,club_name:n};this.send(o,"club_search_req")},t.prototype.sendJoinClub=function(e){var t={user_id:c.DataManager.userInfo.userid,club_id:e};this.send(t,"club_join_req")},t.prototype.sendGetPlayerList=function(e,t,n){void 0===t&&(t=1);var o={user_id:n,club_id:e,cur_page:t,page_size:16};this.send(o,"club_members_list_req")},t.prototype.sendSearchPlayer=function(e,t){},t.prototype.sendClubReNameReq=function(e,t){var n={user_id:c.DataManager.userInfo.userid,club_id:e,club_name:t};this.send(n,"club_re_name_req")},t.prototype.sendClubCancelReq=function(e){var t={user_id:c.DataManager.userInfo.userid,club_id:e};this.send(t,"club_cancel_req")},t.prototype.sendClubQuitReq=function(e,t){void 0===t&&(t=0);var n={user_id:c.DataManager.userInfo.userid,club_id:e,stop_quit:t};this.send(n,"club_quit_req")},t.prototype.sendClubReConfigReq=function(e,t,n){var o={user_id:c.DataManager.userInfo.userid,club_id:e,join_type:t,announcement:n};this.send(o,"club_re_config_req")},t.prototype.sendClubAddLeagueReq=function(e){var t={user_id:c.DataManager.userInfo.userid,club_id:e};this.send(t,"club_add_league_req")},t.prototype.sendClubQuitLeagueReq=function(e){var t={user_id:c.DataManager.userInfo.userid,club_id:e};this.send(t,"club_quit_league_req")},t.prototype.sendClubDeleteMemberReq=function(e,t){var n={user_id:c.DataManager.userInfo.userid,club_id:e,user_ids:t};this.send(n,"club_delete_member_req")},t.prototype.sendClubReSetManagerReq=function(e,t,n){var o={user_id:c.DataManager.userInfo.userid,club_id:e,user_ids:t,identity_type:n};this.send(o,"club_re_set_manager_req")},t.prototype.sendClubPassRefuseReq=function(e,t,n){var o={user_id:c.DataManager.userInfo.userid,club_id:e,user_ids:t,type:n};this.send(o,"club_pass_refuse_req")},t.prototype.sendClubNeedCheckerListReq=function(e,t){void 0===t&&(t=1);var n={user_id:c.DataManager.userInfo.userid,club_id:e,cur_page:t,page_size:16};this.send(n,"club_need_checker_list_req")},t.prototype.sendClubGameListReq=function(e){var t={user_id:c.DataManager.userInfo.userid,club_id:e};this.send(t,"club_game_list_req")},t.prototype.sendInvitePlayer=function(e,t,n,o){void 0===o&&(o=0);var i={user_id:c.DataManager.userInfo.userid,create_user_id:n,club_id:t,invited_user_id:e,invite_type:o};this.send(i,"club_invite_req")},t.prototype.sendClubProfitReq=function(e,t){void 0===t&&(t=1);var n={user_id:c.DataManager.userInfo.userid,club_id:e,cur_page:t,page_size:7};this.send(n,"club_profit_req")},t.prototype.sendClubProfitReciveReq=function(e){var t={user_id:c.DataManager.userInfo.userid,club_id:e};this.send(t,"club_get_profit_req")},t.prototype.sendGetCreateRoomInfoReq=function(e,t){var n={club_id:e,game_id:t};this.send(n,"get_create_roominfo_req")},t.prototype.sendCreateClubRoomReq=function(e,t,n,o,i,a,r){var s={user_id:c.DataManager.userInfo.userid,club_id:e,game_id:t,level_index:n,room_base_note:o,room_min_entrance:i,player_num:a,show_area:r};c.DataManager.clubId=e,this.send(s,"create_clubroom_req")},t.prototype.sendJointClubRoomReq=function(e,t){var n={user_id:c.DataManager.userInfo.userid,club_id:e,room_id:t};c.DataManager.clubId=e,this.send(n,"join_clubroom_req")},t.prototype.onCreateClubResp=function(e){1==e.state&&this.clubList.push(e.club_info),e.other_msg&&l.UIManager.showTips(e.other_msg)},t.prototype.onGetClubListResp=function(e){this.clubList=e.club_info||[],this.clubConfig=e.club_config||{},this.inviteType=e.invite_type||0},t.prototype.onGetClubRoomsResp=function(e){},t.prototype.onJoinClubResp=function(e){2==e.state&&this.updateClub(e.club_info),e.other_msg&&l.UIManager.showTips(e.other_msg)},t.prototype.onClubPushResp=function(e){switch(e.modify_type){case 1:case 2:this.updateClub(e.club_info);break;case 3:this.deleteClub(e.club_info.club_id)}e.other_msg&&l.UIManager.showTips(e.other_msg)},t.prototype.onClubPlayersPushResp=function(e){e.modify_type,e.other_msg&&l.UIManager.showTips(e.other_msg)},t.prototype.onRoomListAutoPushResp=function(e){e.modify_type},t.prototype.onClubGameListResp=function(e){this.clubGameList=e.club_game_list||[]},t.prototype.onClubAddLeagueResp=function(e){if(1==e.state){var t=this.getClubById(e.club_id);t&&(t.add_league=1)}e.other_msg&&l.UIManager.showTips(e.other_msg)},t.prototype.onClubQuitLeagueResp=function(e){if(1==e.state){var t=this.getClubById(e.club_id);t&&(t.add_league=0)}e.other_msg&&l.UIManager.showTips(e.other_msg)},t.prototype.onClubCancelResp=function(e){1==e.state&&this.deleteClub(e.club_id),e.other_msg&&setTimeout(function(){l.UIManager.showTipsPopup(e.other_msg)},250)},t.prototype.onClubQuitResp=function(e){if(1==e.state)this.deleteClub(e.club_id);else if(2==e.state){this.getClubById(e.club_id).quit_time=e.quit_time||0}e.other_msg&&setTimeout(function(){l.UIManager.showTipsPopup(e.other_msg)},250)},t.prototype.onClubReNameResp=function(e){1==e.state&&(this.getClubById(e.club_id).club_name=e.club_name);e.other_msg&&l.UIManager.showTips(e.other_msg)},t.prototype.onClubReConfigResp=function(e){if(1==e.state){var t=this.getClubById(e.club_id);t.join_type=e.join_type,t.announcement=e.announcement}e.other_msg&&l.UIManager.showTips(e.other_msg)},t.prototype.onJointClubRoomResp=function(e){c.DataManager.gameType=e.game_id,c.DataManager.gameToken=e.token,c.DataManager.gameLevel=e.room_level;var t=c.DataManager.getGameName(e.game_id);c.DataManager.isFriendGame=!0,c.DataManager.roomId=null,c.DataManager.roomType=u.RoomType.Club;var n=e.room_link;h.UpdateManager.isInstall(t)&&!h.UpdateManager.isNeedUpdate(t)?p.NetManager.connect(n,u.SocketType.Game):l.UIManager.popup("prefabs/common/GameDownload",{gameName:t,callback:function(){p.NetManager.connect(n,u.SocketType.Game)}})},t.prototype.onCreateClubRoomResp=function(e){c.DataManager.gameType=e.game_id,c.DataManager.gameToken=e.token,c.DataManager.gameLevel=e.room_level;var t=e.room_link;p.NetManager.connect(t,u.SocketType.Game),c.DataManager.isFriendGame=!0,c.DataManager.roomId=null,c.DataManager.roomType=u.RoomType.Club},t.prototype.onClubInvitePlayerResp=function(e){e.club_id==c.DataManager.inviteClubId&&c.DataManager.clearInvite()},t.prototype.onClubGetProfitResp=function(e){if(1==e.state){var t=this.getClubById(e.club_id);t&&(t.red_bot=0)}},t.prototype.getClubById=function(e){for(var t=0,n=this.clubList;t<n.length;t++){var o=n[t];if(o.club_id==e)return o}return null},t.prototype.updateClub=function(e){for(var t=!1,n=0;n<this.clubList.length;n++){var o=this.clubList[n];if(o.club_id==e.club_id){o.add_league!=e.add_league&&s.EventManager.emit(u.EventDef.ClubUpateLeague,e),this.clubList[n]=e,t=!0;break}}t||this.clubList.push(e)},t.prototype.deleteClub=function(e){for(var t=0;t<this.clubList.length;t++)if(e==this.clubList[t].club_id){this.clubList.splice(t,1);break}},t.prototype.getGameList=function(){for(var e=[],t={},n=0,o=this.clubGameList;n<o.length;n++){var i=o[n];if(i.game_tag)for(var a=0,r=JSON.parse(i.game_tag);a<r.length;a++){t[s=r[a]]||(t[s]=[]),t[s].push(i)}}for(var s in t)e.push({tag:s,items:t[s]});return e},t=i([g],t)}(a.default));n.default=f,cc._RF.pop()},{"../Define":"Define","../manager/DataManager":"DataManager","../manager/EventManager":"EventManager","../manager/NetManager":"NetManager","../manager/UIManager":"UIManager","../manager/UpdateManager":"UpdateManager","./NetCmd":"NetCmd","./ProtocolBase":"ProtocolBase"}],ProtocolGameCommon:[function(e,t,n){"use strict";cc._RF.push(t,"61e6fEoy7VH/qYSB+o2OgC2","ProtocolGameCommon");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./ProtocolBase"),c=e("../manager/DataManager"),l=e("../manager/EventManager"),p=e("./NetCmd"),u=e("../Define"),h=e("../manager/NetManager"),d=e("../manager/UIManager"),g=e("../common/log/LogWrap"),f=e("../manager/ResManager"),m=e("../common/utils/Utils"),_=cc._decorator,y=_.ccclass,v=(_.property,function(e){function t(){var t=e.call(this)||this;return t.cmd=p.NetCmd.Game,t.type=u.SocketType.Game,t.pbName="GAMEBASE",t.needFlushGold=!1,t.flushGold="0",t.flushPlayerInfo=null,t.isCreaterUser=!1,t.isStartGame=!1,t.heartIndex=0,t.heartTime=cc.sys.now(),l.EventManager.on(t,u.EventDef.SocketOpen,t.onSocketOpenEvent.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.GameErrorResp,t.onGameErrorResp.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.GameHeartBeatResp,t.onGameHeartBeatResp.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.GameLoginResp,t.onGameLoginResp.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.LoginFriendRoomResp,t.onLoginFriendRoomResp.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.LoginFriendRoomNotify,t.onLoginFriendRoomNotify.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.MatchResp,t.onMatchResp.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.LeaveRoomResp,t.onLeaveRoomResp.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.CancelMatchResp,t.onCancelMatchResp.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.GameKickoutNotify,t.onGameKickoutNotify.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.InterError,t.onInterError.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.StartFriendGameResp,t.onStartFriendGameResp.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.DismissFriendGameResp,t.onDismissFriendGameResp.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.DismissFriendGameNotify,t.onDismissFriendGameNotify.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.DismissFriendGameInquiryResp,t.onDismissFriendGameInquiryResp.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.DisconnectRoomNotify,t.onDisconnectRoomNotify.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.KickoutSomeoneResp,t.onKickoutSomeoneResp.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.TakeGameGoldResp,t.onTakeGameGoldResp.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.QueryTakeInResp,t.onQueryTakeInResp.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.QueryFriendRoomResp,t.onQueryFriendRoomResp.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.GameEndNotify,t.onGameEndNotify.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.FlushGoldNotify,t.onGameFlushGoldNotify.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.ChangeCreaterRes,t.onChangeCreaterRes.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.LookPlayerInfoRes,t.onLookPlayerInfoRes.bind(t)),l.EventManager.on(t,p.ProtocolGameCmd.LocationRes,t.onLoactionRes.bind(t)),t}return o(t,e),t.prototype.sendHeart=function(){var e={userid:c.DataManager.userInfo.userid,index:this.heartIndex,now:parseInt(this.heartTime/1e3+"")};this.send(e,"heart_beat_req")},t.prototype.sendLoginReq=function(){var e={player_id:c.DataManager.userInfo.userid,token:c.DataManager.gameToken};c.DataManager.gameToken2&&(e.token2=c.DataManager.gameToken2),this.send(e,"login_req")},t.prototype.sendLoginFriendRoomReq=function(){var e={player_id:c.DataManager.userInfo.userid,token:c.DataManager.gameToken};this.send(e,"login_friend_room_req")},t.prototype.sendLeaveGame=function(e){void 0===e&&(e=0);var t={player_id:c.DataManager.userInfo.userid,room_id:e};this.send(t,"leave_room_req")},t.prototype.sendMatchReq=function(){var e={player_id:c.DataManager.userInfo.userid};this.send(e,"match_req")},t.prototype.sendCancelMatch=function(){var e={player_id:c.DataManager.userInfo.userid};this.send(e,"cancel_match_req")},t.prototype.sendStartFriendGame=function(e){var t={player_id:c.DataManager.userInfo.userid,room_id:e};this.send(t,"start_friend_game_req")},t.prototype.sendDismissFriendInquiry=function(e,t){void 0===t&&(t=!1);var n={player_id:c.DataManager.userInfo.userid,room_id:e};this.send(n,"dismiss_friend_game_inquiry_req")},t.prototype.sendDismissFriendGame=function(e,t,n){var o=this;if(void 0===t&&(t=!1),void 0===n&&(n="\u60a8\u662f\u5426\u8981\u89e3\u6563\u8be5\u623f\u95f4\uff1f"),t){var i={player_id:c.DataManager.userInfo.userid,room_id:e};this.send(i,"dismiss_friend_game_req")}else d.UIManager.showTipsPopup(n,function(t){t&&o.sendDismissFriendGame(e,!0)},3)},t.prototype.sendKickoutSomeone=function(e,t){var n={kicked_id:t,room_id:e};this.send(n,"kickout_someone_req")},t.prototype.sendFriendReadyReq=function(e){var t={code:e,player_id:c.DataManager.userInfo.userid,room_id:parseInt(c.DataManager.friendRoomId)};this.send(t,"adjust_ready_req")},t.prototype.sendChangeCreaterReq=function(e){var t={oper_player_id:c.DataManager.userInfo.userid,change_player_id:e,room_id:parseInt(c.DataManager.friendRoomId)};this.send(t,"change_creater_req")},t.prototype.sendLookPlayerInfoReq=function(e){if(c.DataManager.isFriendGame){var t={oper_player_id:c.DataManager.userInfo.userid,look_player_id:e,room_id:parseInt(c.DataManager.friendRoomId)};this.send(t,"look_player_info_req")}else g.LogWrap.log("\u975e\u597d\u53cb\u623f\u6682\u65f6\u4e0d\u80fd\u67e5\u770b")},t.prototype.sendTakeGameGold=function(e,t){void 0===e&&(e=""),void 0===t&&(t=!1);var n={carryGold:e,autoAddCarry:t};this.send(n,"take_game_gold_req")},t.prototype.sendQueryTakeIn=function(){var e={player_id:c.DataManager.userInfo.userid};this.send(e,"query_take_in_req")},t.prototype.sendQueryFriendRoom=function(e){var t={room_id:e};this.send(t,"query_friend_room_req")},t.prototype.sendLocationReq=function(e){var t={room_id:e};this.send(t,"location_req")},t.prototype.sendUpBankerStateReq=function(){var e={player_id:c.DataManager.userInfo.userid};this.send(e,"upbanker_state_req")},t.prototype.sendAskForGrabBankerReq=function(e){var t={player_id:c.DataManager.userInfo.userid,bring_gold:e};this.send(t,"askfor_grabbanker_req")},t.prototype.sendAskForDropBankerReq=function(){var e={player_id:c.DataManager.userInfo.userid};this.send(e,"askfor_dropbanker_req")},t.prototype.sendLookForBankerListReq=function(){var e={player_id:c.DataManager.userInfo.userid};this.send(e,"lookfor_bankerlist_req")},t.prototype.sendInviteOthersReq=function(e,t){var n={player_id:c.DataManager.userInfo.userid,nick_name:e,content:t};this.send(n,"inviter_others_req")},t.prototype.onSocketOpenEvent=function(e){return a(this,void 0,void 0,function(){var t,n=this;return r(this,function(o){return g.LogWrap.log("ProtocolGameCommon onSocketOpenEvent ",e),e==u.SocketType.Game&&(t=c.DataManager.getGameName(c.DataManager.gameType),f.ResManager.loadSubPackage(t,function(e){return a(n,void 0,void 0,function(){return r(this,function(t){switch(t.label){case 0:return!e&&cc.sys.isMobile?[3,2]:(h.NetManager.changeGameProtocol(),[4,d.UIManager.openGame()]);case 1:return t.sent(),d.UIManager.hideLoading(),c.DataManager.roomType==u.RoomType.Match?this.sendLoginReq():this.sendLoginFriendRoomReq(),[3,3];case 2:d.UIManager.hideLoading(),g.LogWrap.warn("loadSubPackage fail!"),t.label=3;case 3:return[2]}})})})),[2]})})},t.prototype.onGameErrorResp=function(e){d.UIManager.showTipsPopup(e.err_msg)},t.prototype.onGameHeartBeatResp=function(e){this.heartIndex=e.index,this.heartTime=cc.sys.now()},t.prototype.onGameLoginResp=function(e){c.DataManager.friendRoomId=null,c.DataManager.isFriendGame=!1,c.DataManager.isCreaterUser=!1,this.needFlushGold=!1,h.NetManager.getSocket(u.SocketType.Game).startHeart(),e.enable_up_banker&&this.sendUpBankerStateReq()},t.prototype.onLoginFriendRoomResp=function(e){c.DataManager.friendRoomId=e.room_id,g.LogWrap.log("\u662f\u5426\u662f\u623f\u4e3b",e.is_creater_user),c.DataManager.isCreaterUser=e.is_creater_user,this.isCreaterUser=e.is_creater_user,c.DataManager.roomId=e.room_id,c.DataManager.clubId=e.club_id,e.club_id?c.DataManager.roomType=u.RoomType.Club:c.DataManager.roomType=u.RoomType.Friend,h.NetManager.getSocket(u.SocketType.Game).startHeart(),e.enable_up_banker&&this.sendUpBankerStateReq()},t.prototype.onLoginFriendRoomNotify=function(){},t.prototype.onMatchResp=function(){},t.prototype.onLeaveRoomResp=function(e){var t=this;if(1!=e.game_state){if(h.NetManager.close(u.SocketType.Game),c.DataManager.roomType==u.RoomType.Club)d.UIManager.open("prefabs/club/ClubView");else if(c.DataManager.isFriendGame)d.UIManager.open("prefabs/hall/CreateRoom");else if(u.NotSeletRoomGame[c.DataManager.gameType])d.UIManager.open("prefabs/HallView");else{var n=c.DataManager.getGameName(c.DataManager.gameType),o="game/"+n+"/"+n.toUpperCase()+"RoomView";cc.loader._getResUuid(o)?f.ResManager.loadSubPackage(n,function(e){return a(t,void 0,void 0,function(){return r(this,function(t){return e||!cc.sys.isMobile?d.UIManager.open(o,c.DataManager.gameType):d.UIManager.open("prefabs/RoomView",c.DataManager.gameType),[2]})})}):d.UIManager.open("prefabs/RoomView",c.DataManager.gameType)}c.DataManager.isFriendGame=!1,c.DataManager.friendRoomId=null,c.DataManager.roomId=null,c.DataManager.gameType=null,c.DataManager.roomType=u.RoomType.None}else d.UIManager.showTips("\u6b63\u5728\u6e38\u620f\u4e2d,\u4e0d\u80fd\u9000\u51fa\u623f\u95f4")},t.prototype.onCancelMatchResp=function(){},t.prototype.onGameKickoutNotify=function(e){var t=this;if(h.NetManager.close(u.SocketType.Game),c.DataManager.roomType==u.RoomType.Club)d.UIManager.open("prefabs/club/ClubView",null,function(){d.UIManager.showTipsPopup(e.des||"\u60a8\u5df2\u88ab\u8bf7\u79bb\u623f\u95f4")});else if(c.DataManager.isFriendGame)d.UIManager.open("prefabs/hall/CreateRoom",null,function(){d.UIManager.showTipsPopup(e.des||"\u60a8\u5df2\u88ab\u8bf7\u79bb\u623f\u95f4")});else if(u.NotSeletRoomGame[c.DataManager.gameType])d.UIManager.open("prefabs/HallView",null,function(){d.UIManager.showTipsPopup(e.des||"\u60a8\u5df2\u88ab\u8bf7\u79bb\u623f\u95f4")});else{var n=c.DataManager.getGameName(c.DataManager.gameType),o="game/"+n+"/"+n.toUpperCase()+"RoomView";cc.loader._getResUuid(o)?f.ResManager.loadSubPackage(n,function(n){return a(t,void 0,void 0,function(){return r(this,function(t){return n||!cc.sys.isMobile?d.UIManager.open(o,c.DataManager.gameType,function(){d.UIManager.showTipsPopup(e.des||"\u60a8\u5df2\u88ab\u8bf7\u79bb\u623f\u95f4")}):d.UIManager.open("prefabs/RoomView",c.DataManager.gameType,function(){d.UIManager.showTipsPopup(e.des||"\u60a8\u5df2\u88ab\u8bf7\u79bb\u623f\u95f4")}),[2]})})}):d.UIManager.open("prefabs/RoomView",c.DataManager.gameType,function(){d.UIManager.showTipsPopup(e.des||"\u60a8\u5df2\u88ab\u8bf7\u79bb\u623f\u95f4")})}c.DataManager.isFriendGame=!1,c.DataManager.friendRoomId=null,c.DataManager.roomId=null,c.DataManager.gameType=null,c.DataManager.roomType=u.RoomType.None},t.prototype.onInterError=function(){d.UIManager.showTipsPopup("\u7f51\u7edc\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u56de\u5230\u5927\u5385\u91cd\u65b0\u8fdb\u5165")},t.prototype.onStartFriendGameResp=function(e){var t=this;1==e.status||(2==e.status?d.UIManager.showTipsPopup("\u623f\u95f4\u4eba\u6570\u4e0d\u8db3\uff0c\u8bf7\u7b49\u5f85\u73a9\u5bb6\u5165\u573a"):3==e.status?d.UIManager.showTipsPopup("\u4e0a\u628a\u6e38\u620f\u8fd8\u672a\u7ed3\u675f\u4e0d\u80fd\u5f00\u59cb"):4==e.status?d.UIManager.showTipsPopup("\u73a9\u5bb6\u91d1\u5e01\u4e0d\u8db3"):5==e.status?d.UIManager.showTipsPopup("\u76ee\u524d\u6709\u73a9\u5bb6\u5df2\u79bb\u7ebf\uff0c\u662f\u5426\u786e\u8ba4\u5f00\u59cb\u6e38\u620f\uff1f\uff08\u82e5\u786e\u8ba4\u5c06\u76f4\u63a5\u628a\u79bb\u7ebf\u73a9\u5bb6\u8bf7\u79bb\u623f\u95f4\uff09",function(n){if(n)for(var o=0;o<e.offline_player_info.length;o++)t.sendKickoutSomeone(e.room_id,e.offline_player_info[o].player_id)},3):6==e.status&&d.UIManager.showTipsPopup("\u6709\u73a9\u5bb6\u672a\u51c6\u5907 (\u82e5\u957f\u65f6\u95f4\u4ecd\u672a\u51c6\u5907, \u53ef\u901a\u8fc7\u70b9\u8be5\u73a9\u5bb6\u5934\u50cf\u8bf7\u4ed6\u79bb\u5f00)"))},t.prototype.onDismissFriendGameResp=function(e){},t.prototype.onDismissFriendGameNotify=function(e){var t=this;if(h.NetManager.close(u.SocketType.Game),c.DataManager.roomType==u.RoomType.Club)d.UIManager.open("prefabs/club/ClubView");else if(c.DataManager.isFriendGame)d.UIManager.open("prefabs/hall/CreateRoom");else if(u.NotSeletRoomGame[c.DataManager.gameType])d.UIManager.open("prefabs/HallView");else{var n=c.DataManager.getGameName(c.DataManager.gameType),o="game/"+n+"/"+n.toUpperCase()+"RoomView";cc.loader._getResUuid(o)?f.ResManager.loadSubPackage(n,function(e){return a(t,void 0,void 0,function(){return r(this,function(t){return e||!cc.sys.isMobile?d.UIManager.open(o,c.DataManager.gameType):d.UIManager.open("prefabs/RoomView",c.DataManager.gameType),[2]})})}):d.UIManager.open("prefabs/RoomView",c.DataManager.gameType)}d.UIManager.showTipsPopup(e.des),c.DataManager.isFriendGame=!1,c.DataManager.friendRoomId=null,c.DataManager.roomId=null,c.DataManager.gameType=null,c.DataManager.roomType=u.RoomType.None},t.prototype.onDismissFriendGameInquiryResp=function(e){1==e.game_state?this.sendDismissFriendGame(e.room_id):2==e.game_state?d.UIManager.showTips("\u6b63\u5728\u6e38\u620f\u4e2d,\u4e0d\u80fd\u9000\u51fa\u623f\u95f4"):3==e.game_state?this.sendDismissFriendGame(e.room_id,!1,"\u60a8\u662f\u623f\u4e3b\uff0c\u82e5\u79bb\u5f00\u5c06\u628a\u623f\u4e3b\u8eab\u4efd\u8f6c\u79fb\u7ed9\u5176\u4ed6\u73a9\u5bb6"):this.sendLeaveGame(e.room_id)},t.prototype.onDisconnectRoomNotify=function(){},t.prototype.onKickoutSomeoneResp=function(e){1==e.status?d.UIManager.showTipsPopup(e.msg):2==e.status?d.UIManager.showTipsPopup("\u8e22\u51fa\u73a9\u5bb6\u5931\u8d25"):3==e.status&&d.UIManager.showTipsPopup("\u6b63\u5728\u6e38\u620f\u4e2d\u4e0d\u5141\u8bb8\u8e22\u4eba")},t.prototype.onTakeGameGoldResp=function(e){1==e.status&&d.UIManager.showTips("\u8bbe\u7f6e\u6210\u529f\uff0c\u4e0b\u5c40\u6e38\u620f\u751f\u6548")},t.prototype.onQueryTakeInResp=function(){},t.prototype.onQueryFriendRoomResp=function(){},t.prototype.onGameEndNotify=function(){},t.prototype.onGameFlushGoldNotify=function(e){g.LogWrap.log("%c\u670d\u52a1\u5668\u901a\u77e5\u9700\u8981\u5237\u65b0\u91d1\u5e01, \u5237\u65b0\u91d1\u5e01\u4e3a","color:red;font-size:26px",e.gold,Date.now()),this.needFlushGold=!0,this.flushPlayerInfo=e.flush_playerInfo,this.flushGold=e.gold},t.prototype.onChangeCreaterRes=function(e){if(0==e.ret){var t=e.creater_id==c.DataManager.userInfo.userid;c.DataManager.isCreaterUser=t,this.isCreaterUser=t;var n=m.default.getSubStringLengTxt(e.creater_name)||m.default.getReplaceStrToStar(e.creater_id);d.UIManager.showTips("\u623f\u4e3b\u5df2\u8f6c\u8ba9\u7ed9["+n+"]")}else 1==e.ret?d.UIManager.showTips("\u8f6c\u8ba9\u5931\u8d25"):2==e.ret&&d.UIManager.showTips("\u6b63\u5728\u6e38\u620f\u4e2d\u4e0d\u5141\u8bb8\u8f6c\u8ba9")},t.prototype.onLookPlayerInfoRes=function(e){d.UIManager.popup("prefabs/game/PersonalInfo",e)},t.prototype.onLoactionRes=function(e){d.UIManager.popup("prefabs/game/GPSView",e)},t=i([y],t)}(s.default));n.default=v,cc._RF.pop()},{"../Define":"Define","../common/log/LogWrap":"LogWrap","../common/utils/Utils":"Utils","../manager/DataManager":"DataManager","../manager/EventManager":"EventManager","../manager/NetManager":"NetManager","../manager/ResManager":"ResManager","../manager/UIManager":"UIManager","./NetCmd":"NetCmd","./ProtocolBase":"ProtocolBase"}],ProtocolHall:[function(e,t,n){"use strict";cc._RF.push(t,"d07422PSKtI/7Uftxh0UJo8","ProtocolHall");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./ProtocolBase"),r=e("../manager/EventManager"),s=e("./NetCmd"),c=e("../manager/DataManager"),l=e("../manager/NetManager"),p=e("../Define"),u=e("../common/log/LogWrap"),h=e("../manager/UIManager"),d=e("../manager/UpdateManager"),g=e("../common/Text"),f=cc._decorator,m=f.ccclass,_=(f.property,function(e){function t(){var t=e.call(this)||this;return t.cmd=s.NetCmd.Hall,t.pbName="PbLobby",t.heartIndex=0,t.heartTime=cc.sys.now(),t.preJoinRoomId="",t.game_deploy_info=null,t.game_math_info={},t.money_tree_data=null,t.is_have_activity=!1,t.is_have_mail=!1,t.is_have_promotion=!1,r.EventManager.on(t,s.ProtocolHallCmd.HallErrorResp,t.onHallErrorResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.HeartBeatResp,t.onHeartBeatResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.GetUserMailResp,t.onGetUserMailResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.GetUserMailDetailResp,t.onGetUserMailDetailResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.GetGoldRankListResp,t.onGetGoldRankListResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.GetGameAllListResp,t.onGetGameAllListResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.EnterRoomResp,t.onEnterRoomResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.AskJoinedGameInfoResp,t.onAskJoinedGameInfoResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.GetGameRoomListResp,t.onGetGameRoomListResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.ActivityListResp,t.onActivityListResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.ActivityResp,t.onActivityResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.GetVipLevelInfoResp,t.onGetVipLevelInfoResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.GetVipRewardResp,t.onGetVipRewardResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.GetAchieveRewardResp,t.onGetAchieveRewardResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.GetActionRewardRes,t.onGetActionRewardRes.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.GetGameRecordListResp,t.onGetGameRecordListResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.GetGameRecordDetailResp,t.onGetGameRecordDetailResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.GetFriendGameInfoResp,t.onGetFriendGameInfoResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.PromoteMsgResp,t.onPromoteMsgResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.PromoteCourseResp,t.onPromoteCourseResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.PromoteDetailResp,t.onPromoteDetailResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.FriendGameGreateResp,t.onFriendGameGreateResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.FriendGameJoinResp,t.onFriendGameJoinResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.FriendGamePrepareJoinResp,t.onFriendGamePrepareJoinResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.GetAllAttainmentResp,t.onGetAllAttainmentResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.UseAttainmentResp,t.onUseAttainmentResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.UnuseAttainmentResp,t.onUnuseAttainmentResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.AdvertisementResp,t.onAdvertisementResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.BindParentIdResp,t.onBindParentIdResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.BindWindowResp,t.onBindWindowResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.NotReadNoticeNotify,t.onNotReadNoticeNotify.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.GetPromoteRewardResp,t.onGetPromoteRewardResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.KyGameUrlResp,t.onKyGameUrlResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.MarqueeInfoNotify,t.onMarqueeInfoNotify.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.GetVipLevelRewardResp,t.onGetVipLevelRewardResp.bind(t)),r.EventManager.on(t,s.ProtocolHallCmd.GetGetVipListInfoRes,t.onGetGetVipListInfoResp.bind(t)),t}return o(t,e),t.prototype.sendHeart=function(){var e={userid:c.DataManager.userInfo&&c.DataManager.userInfo.userid||0,index:this.heartIndex,now:parseInt(this.heartTime/1e3+"")};this.send(e,"heart_beat_req")},t.prototype.sendGetUserMail=function(e){var t={userid:c.DataManager.userInfo.userid,mail_type:e,channel:c.DataManager.channel};this.send(t,"get_usermail_req")},t.prototype.sendGetUserMailDetail=function(e,t){var n={userid:c.DataManager.userInfo.userid,mail_id:e,mail_type:t};this.send(n,"get_usermaildetail_req")},t.prototype.sendReadMailAllReq=function(e){var t={userid:e||c.DataManager.userInfo.userid};this.send(t,"read_mail_all_req")},t.prototype.sendDeleteReadMailReq=function(e){var t={userid:e||c.DataManager.userInfo.userid};this.send(t,"delete_read_mail_req")},t.prototype.sendGetGoldRankList=function(e){void 0===e&&(e=1);var t={userid:c.DataManager.userInfo.userid,type:e};this.send(t,"get_goldranklist_req")},t.prototype.sendActionReq=function(e){var t={userid:e||c.DataManager.userInfo.userid,channel:c.DataManager.channel};this.send(t,"action_req")},t.prototype.sendTheActionReq=function(e,t,n){var o={userid:n||c.DataManager.userInfo.userid,type:e,id:t};this.send(o,"the_action_req")},t.prototype.sendGetVipLevelInfoReq=function(e){var t={userid:c.DataManager.userInfo.userid,recharge_nums:c.DataManager.userInfo.vip_score,user_vip_info:c.DataManager.userInfo.vip_level,cur_vip_level:e};this.send(t,"get_viplevelinfo_req")},t.prototype.sendVipRewardsReq=function(e,t,n){var o={userid:n||c.DataManager.userInfo.userid,cur_vip_id:e,id:t};this.send(o,"get_vip_reward_req")},t.prototype.sendAchieveRewardsReq=function(e,t,n){var o={userid:n||c.DataManager.userInfo.userid,achieve_id:e,id:t};this.send(o,"get_achieve_reward_req")},t.prototype.sendActionRewardReq=function(e,t,n,o){var i={userid:o||c.DataManager.userInfo.userid,item_id:n||0,type:e,id:t};this.send(i,"get_action_reward_req")},t.prototype.sendGetGameRecordList=function(e){var t={userid:e||c.DataManager.userInfo.userid};this.send(t,"get_gamerecord_list_req")},t.prototype.sendGetGameRecordDetail=function(e,t){var n={userid:t||c.DataManager.userInfo.userid,game_type:e};this.send(n,"get_gamerecord_detail_req")},t.prototype.sendGetPromotionInfo=function(e){var t={userid:e||c.DataManager.userInfo.userid};this.send(t,"promote_msg_req")},t.prototype.sendGetPromotionCourse=function(e){var t={userid:e||c.DataManager.userInfo.userid,channel:c.DataManager.channel};this.send(t,"promote_course_req")},t.prototype.sendGetPromotionDetail=function(e,t){var n={userid:t||c.DataManager.userInfo.userid,cur_page:e.cur_page,data_type:e.data_type,count:e.count||5,time_start:e.time_start,time_end:e.time_end};this.send(n,"promote_detail_req")},t.prototype.sendGetGameAllList=function(){var e={userid:c.DataManager.userInfo&&c.DataManager.userInfo.userid||0};this.send(e,"get_gamealllist_req")},t.prototype.sendEnterRoom=function(e){h.UIManager.showLoading(g.Tips.EnterRoomWaiting);var t={userid:c.DataManager.userInfo.userid,game_type:e.game_type,room_level:e.room_level,token2:e.token2};this.send(t,"enter_room_req")},t.prototype.sendAskJoinedGameInfo=function(){var e={userid:c.DataManager.userInfo.userid};this.send(e,"ask_joined_gameinfo_req")},t.prototype.sendGameRoomList=function(e){if(c.DataManager.userInfo){var t={userid:c.DataManager.userInfo.userid,game_type:e};this.send(t,"get_gameroom_list_req")}},t.prototype.sendGetFriendGameInfo=function(){var e={userid:c.DataManager.userInfo.userid};this.send(e,"get_friendgame_info_req")},t.prototype.sendFriendGameCreate=function(e){var t={friendgame_create:{userid:c.DataManager.userInfo.userid,game_type:e.game_type,room_level:e.room_level,token2:e.token2}};this.send(t,"friendgame_create_req")},t.prototype.sendFriendPrePareGameJoin=function(e){this.preJoinRoomId=e;var t={userid:c.DataManager.userInfo.userid,room_id:e};this.send(t,"friendgame_prepare_join_req")},t.prototype.sendFriendGameJoin=function(e){var t={userid:c.DataManager.userInfo.userid,room_id:e};this.send(t,"friendgame_join_req")},t.prototype.sendGetMFWZGameInof=function(e){void 0===e&&(e=27);var t={userid:c.DataManager.userInfo.userid,gameid:e};this.send(t,"get_mfwzgame_info_req")},t.prototype.sendGetAllAttainment=function(){var e={userid:c.DataManager.userInfo.userid};this.send(e,"get_all_attainment_req")},t.prototype.sendUseAttainment=function(e){var t={userid:c.DataManager.userInfo.userid,id:e};this.send(t,"use_attainment_req")},t.prototype.sendUnUseAttainment=function(e){var t={userid:c.DataManager.userInfo.userid,id:e};this.send(t,"unuse_attainment_req")},t.prototype.sendAdvertisement=function(){this.send({},"advertisement_req")},t.prototype.sendBindParentIdReq=function(e,t,n){var o={userid:n||c.DataManager.userInfo.userid,parentid:e,auto_bind:t};this.send(o,"bind_parentid_req")},t.prototype.sendGetBindRewardReq=function(e,t){var n={userid:t||c.DataManager.userInfo.userid,parentid:e||c.DataManager.userInfo.parent_id};this.send(n,"get_bind_reward_req")},t.prototype.sendBindWindow=function(e){var t={userid:e||c.DataManager.userInfo.userid,channel:c.DataManager.channel};this.send(t,"bind_window_req")},t.prototype.sendGetPromoteRewardReq=function(e){var t={userid:e||c.DataManager.userInfo.userid};this.send(t,"get_promote_reward_req")},t.prototype.sendGetGoldDetialReq=function(e,t){var n={userid:t||c.DataManager.userInfo.userid,cur_page:e.cur_page,main_type:e.main_type,sub_type:e.sub_type,count:e.count||5,time_start:e.time_start,time_end:e.time_end};this.send(n,"gold_detial_req")},t.prototype.sendKYGameUrlReq=function(e,t){var n={userid:c.DataManager.userInfo.userid,game_type:e};this.send(n,"ky_game_url_req")},t.prototype.sendLeaveKYGameHallPush=function(e,t){var n={userid:c.DataManager.userInfo.userid,game_type:e};this.send(n,"leave_kygamehall_push")},t.prototype.sendGetRedbagRainActReq=function(){var e={userid:c.DataManager.userInfo.userid};this.send(e,"get_redbag_rain_act_req")},t.prototype.sendGetMoneyTreeActReq=function(){var e={userid:c.DataManager.userInfo.userid};this.send(e,"get_money_tree_act_req")},t.prototype.sendHitRedbagRainReq=function(){var e={userid:c.DataManager.userInfo.userid};this.send(e,"hit_redbag_rain_req")},t.prototype.sendHitMoneyTreeReq=function(){var e={userid:c.DataManager.userInfo.userid};this.send(e,"hit_money_tree_req")},t.prototype.sendGetLobbyRankListShowReq=function(){var e={userid:c.DataManager.userInfo.userid};this.send(e,"get_lobby_rank_list_show_req")},t.prototype.sendExchangeCode=function(e){var t={userid:c.DataManager.userInfo.userid,code:e};this.send(t,"exchange_code_req")},t.prototype.sendGetRuleConfig=function(){var e={userid:c.DataManager.userInfo.userid};this.send(e,"rule_config_req")},t.prototype.sendGetVipLevelReward=function(e,t,n,o){var i={user_id:c.DataManager.userInfo.userid,type:e,vip_level:n,reward_type:t,user_vip_info:c.DataManager.userInfo.vip_level,need_score:o};this.send(i,"get_vip_level_reward_req")},t.prototype.sendGetVipListInfoReq=function(){var e={userid:c.DataManager.userInfo.userid};this.send(e,"get_vip_list_info_req")},t.prototype.onHallErrorResp=function(e){h.UIManager.hideLoading(),h.UIManager.showTipsPopup(e.err_msg)},t.prototype.onHeartBeatResp=function(e){this.heartIndex=e.index,this.heartTime=cc.sys.now()},t.prototype.onGetUserMailResp=function(e){},t.prototype.onGetUserMailDetailResp=function(e){},t.prototype.onGetGoldRankListResp=function(e){},t.prototype.onGetGameAllListResp=function(e){c.DataManager.games=e},t.prototype.onEnterRoomResp=function(e){c.DataManager.gameType=e.game_type,c.DataManager.gameToken=e.token,c.DataManager.gameToken2=e.token2,c.DataManager.isFriendGame=!1,c.DataManager.friendRoomId=null,c.DataManager.gameLevel=e.room_level;var t=e.room_link;l.NetManager.connect(t,p.SocketType.Game),c.DataManager.roomId=null,c.DataManager.roomType=p.RoomType.Match,c.DataManager.clubId=null},t.prototype.onAskJoinedGameInfoResp=function(e){if(e.has)if(e.room_id&&0!=e.room_id)e.club_id&&0!=e.club_id?l.NetManager.protocolClub.sendJointClubRoomReq(e.club_id,e.room_id):this.sendFriendGameJoin(e.room_id);else if(e.ky_game_url)h.UIManager.popup("prefabs/hall/WebView",{url:e.ky_game_url,game_type:e.game_type});else{u.LogWrap.log("\u5728\u6e38\u620f\u4e2d,\u53d1\u9001\u8fdb\u5165\u623f\u95f4\u6307\u4ee4\u91cd\u65b0\u8fdb\u5165\u623f\u95f4",e);var t={room_level:e.room_level,game_type:e.game_type};this.sendEnterRoom(t)}else u.LogWrap.log("\u4e0d\u5728\u6e38\u620f\u4e2d,\u505c\u7559\u5927\u5385"),h.UIManager.open("prefabs/HallView")},t.prototype.onGetGameRoomListResp=function(e){e.game_info&&(this.game_math_info[e.game_info.game_type]=e)},t.prototype.onActivityListResp=function(e){},t.prototype.onActivityResp=function(e){},t.prototype.onGetVipLevelInfoResp=function(e){if(c.DataManager.vipInfos)for(var t=0,n=c.DataManager.vipInfos;t<n.length;t++)for(var o=n[t],i=0,a=e.vip_info;i<a.length;i++){var r=a[i];o.vip_level==r.vip_level&&Object.assign(o,r)}},t.prototype.onGetVipRewardResp=function(e){c.DataManager.userInfo.gold=parseFloat(e.gold),r.EventManager.emit(p.EventDef.UpdateUserInfo)},t.prototype.onGetAchieveRewardResp=function(e){1==e.status&&(c.DataManager.userInfo.gold=parseFloat(e.gold),r.EventManager.emit(p.EventDef.UpdateUserInfo))},t.prototype.onGetActionRewardRes=function(e){1==e.status&&(c.DataManager.userInfo.gold=parseFloat(e.gold),r.EventManager.emit(p.EventDef.UpdateUserInfo))},t.prototype.onGetGameRecordListResp=function(e){},t.prototype.onGetGameRecordDetailResp=function(e){},t.prototype.onGetFriendGameInfoResp=function(e){this.game_deploy_info=e.game_deploy_info},t.prototype.onPromoteMsgResp=function(e){},t.prototype.onPromoteCourseResp=function(e){},t.prototype.onPromoteDetailResp=function(){},t.prototype.onGetPromoteRewardResp=function(e){},t.prototype.onFriendGameGreateResp=function(e){c.DataManager.gameType=e.friendgame_create_res.game_type,c.DataManager.gameToken=e.friendgame_create_res.token,c.DataManager.gameToken2=e.friendgame_create_res.token2,c.DataManager.isFriendGame=!0,c.DataManager.gameLevel=e.friendgame_create_res.room_level,c.DataManager.friendRoomId=e.friendgame_create_res.room_id;var t=e.friendgame_create_res.room_link;l.NetManager.connect(t,p.SocketType.Game),c.DataManager.roomId=e.friendgame_create_res.room_id,c.DataManager.roomType=p.RoomType.Friend,c.DataManager.clubId=null},t.prototype.onFriendGameJoinResp=function(e){c.DataManager.gameType=e.friendgame_join_res.game_type,c.DataManager.gameToken=e.friendgame_join_res.token,c.DataManager.gameToken2=e.friendgame_join_res.token2,c.DataManager.isFriendGame=!0,c.DataManager.gameLevel=e.friendgame_join_res.room_level,c.DataManager.friendRoomId=e.friendgame_join_res.room_id;var t=e.friendgame_join_res.room_link;l.NetManager.connect(t,p.SocketType.Game),c.DataManager.roomId=e.friendgame_join_res.room_id,c.DataManager.roomType=p.RoomType.Friend,c.DataManager.clubId=null},t.prototype.onFriendGamePrepareJoinResp=function(e){var t=e.game_type;if(u.LogWrap.log("\u9884\u51c6\u5907\u52a0\u5165\u623f\u95f4",t),0!=t){var n=c.DataManager.getGameName(t);d.UpdateManager.isInstall(n)?d.UpdateManager.isNeedUpdate(n)?h.UIManager.showTips("\u8bf7\u5148\u524d\u5f80\u5927\u5385\u66f4\u65b0\u6e38\u620f"):this.sendFriendGameJoin(this.preJoinRoomId):h.UIManager.showTips("\u8bf7\u5148\u524d\u5f80\u5927\u5385\u4e0b\u8f7d\u6e38\u620f")}else h.UIManager.showTips("\u8be5\u623f\u95f4\u53f7\u4e0d\u5b58\u5728")},t.prototype.onGetAllAttainmentResp=function(e){},t.prototype.onUseAttainmentResp=function(e){e.ok&&this.sendGetAllAttainment()},t.prototype.onUnuseAttainmentResp=function(e){e.ok&&this.sendGetAllAttainment()},t.prototype.onAdvertisementResp=function(e){},t.prototype.onBindParentIdResp=function(e){},t.prototype.onBindWindowResp=function(e){},t.prototype.onNotReadNoticeNotify=function(e){1==e.place&&(this.is_have_mail=e.exist_not_read),2==e.place&&(this.is_have_activity=e.exist_not_read),3==e.place&&(this.is_have_promotion=e.exist_not_read)},t.prototype.onKyGameUrlResp=function(e){},t.prototype.onMarqueeInfoNotify=function(e){c.DataManager.marquee=c.DataManager.marquee.concat(e.marqueeInfo)},t.prototype.onGetVipLevelRewardResp=function(e){if(0==e.code&&c.DataManager.vipInfos)for(var t=0,n=c.DataManager.vipInfos;t<n.length;t++){var o=n[t];if(o.vip_level==e.vip_level)for(var i=0,a=o.reward_info;i<a.length;i++){var r=a[i];r.type==e.type&&(r.status=2)}}e.msg&&h.UIManager.showTips(e.msg)},t.prototype.onGetGetVipListInfoResp=function(e){c.DataManager.vipInfos=e.vip_info},t=i([m],t)}(a.default));n.default=_,cc._RF.pop()},{"../Define":"Define","../common/Text":"Text","../common/log/LogWrap":"LogWrap","../manager/DataManager":"DataManager","../manager/EventManager":"EventManager","../manager/NetManager":"NetManager","../manager/UIManager":"UIManager","../manager/UpdateManager":"UpdateManager","./NetCmd":"NetCmd","./ProtocolBase":"ProtocolBase"}],QRCode:[function(e,t,n){"use strict";function o(e){this.mode=a.MODE_8BIT_BYTE,this.data=e}cc._RF.push(t,"cbe9f3+JepISYj2GrVsc1pJ","QRCode"),o.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}};var i=function(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=new Array};i.prototype={addData:function(e){var t=new o(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=I.getRSBlocks(e,this.errorCorrectLevel),n=new R,o=0,i=0;i<t.length;i++)o+=t[i].dataCount;for(var a=0;a<this.dataList.length;a++){var r=this.dataList[a];n.put(r.mode,4),n.put(r.getLength(),y.getLengthInBits(r.mode,e)),r.write(n)}if(n.getLengthInBits()<=8*o)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[n][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=i.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var o=-1;o<=7;o++)t+o<=-1||this.moduleCount<=t+o||(this.modules[e+n][t+o]=0<=n&&n<=6&&(0==o||6==o)||0<=o&&o<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=o&&o<=4)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var o=y.getLostPoint(this);(0==n||e>o)&&(e=o,t=n)}return t},createMovieClip:function(e,t,n){var o=e.createEmptyMovieClip(t,n);this.make();for(var i=0;i<this.modules.length;i++)for(var a=1*i,r=0;r<this.modules[i].length;r++){var s=1*r;this.modules[i][r]&&(o.beginFill(0,100),o.moveTo(s,a),o.lineTo(s+1,a),o.lineTo(s+1,a+1),o.lineTo(s,a+1),o.endFill())}return o},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=y.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var o=e[t],i=e[n];if(null==this.modules[o][i])for(var a=-2;a<=2;a++)for(var r=-2;r<=2;r++)this.modules[o+a][i+r]=-2==a||2==a||-2==r||2==r||0==a&&0==r}},setupTypeNumber:function(e){for(var t=y.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var o=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=o}for(var i=0;i<18;i++){var a=!e&&1==(t>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=a}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,o=y.getBCHTypeInfo(n),i=0;i<15;i++){var a=!e&&1==(o>>i&1);i<6?this.modules[i][8]=a:i<8?this.modules[i+1][8]=a:this.modules[this.moduleCount-15+i][8]=a}for(var r=0;r<15;r++){var s=!e&&1==(o>>r&1);r<8?this.modules[8][this.moduleCount-r-1]=s:r<9?this.modules[8][15-r-1+1]=s:this.modules[8][15-r-1]=s}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,o=this.moduleCount-1,i=7,a=0,r=this.moduleCount-1;r>0;r-=2)for(6==r&&r--;;){for(var s=0;s<2;s++)if(null==this.modules[o][r-s]){var c=!1;a<e.length&&(c=1==(e[a]>>>i&1)),y.getMask(t,o,r-s)&&(c=!c),this.modules[o][r-s]=c,-1==--i&&(a++,i=7)}if((o+=n)<0||this.moduleCount<=o){o-=n,n=-n;break}}}},i.PAD0=236,i.PAD1=17,i.createData=function(e,t,n){for(var o=I.getRSBlocks(e,t),a=new R,r=0;r<n.length;r++){var s=n[r];a.put(s.mode,4),a.put(s.getLength(),y.getLengthInBits(s.mode,e)),s.write(a)}for(var c=0,l=0;l<o.length;l++)c+=o[l].dataCount;if(a.getLengthInBits()>8*c)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+8*c+")");for(a.getLengthInBits()+4<=8*c&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=8*c||(a.put(i.PAD0,8),a.getLengthInBits()>=8*c));)a.put(i.PAD1,8);return i.createBytes(a,o)},i.createBytes=function(e,t){for(var n=0,o=0,i=0,a=new Array(t.length),r=new Array(t.length),s=0;s<t.length;s++){var c=t[s].dataCount,l=t[s].totalCount-c;o=Math.max(o,c),i=Math.max(i,l),a[s]=new Array(c);for(var p=0;p<a[s].length;p++)a[s][p]=255&e.buffer[p+n];n+=c;var u=y.getErrorCorrectPolynomial(l),h=new w(a[s],u.getLength()-1).mod(u);r[s]=new Array(u.getLength()-1);for(var d=0;d<r[s].length;d++){var g=d+h.getLength()-r[s].length;r[s][d]=g>=0?h.get(g):0}}for(var f=0,m=0;m<t.length;m++)f+=t[m].totalCount;for(var _=new Array(f),v=0,b=0;b<o;b++)for(var C=0;C<t.length;C++)b<a[C].length&&(_[v++]=a[C][b]);for(var M=0;M<i;M++)for(var I=0;I<t.length;I++)M<r[I].length&&(_[v++]=r[I][M]);return _};for(var a={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},r=1,s=0,c=3,l=2,p=0,u=1,h=2,d=3,g=4,f=5,m=6,_=7,y={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;y.getBCHDigit(t)-y.getBCHDigit(y.G15)>=0;)t^=y.G15<<y.getBCHDigit(t)-y.getBCHDigit(y.G15);return(e<<10|t)^y.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;y.getBCHDigit(t)-y.getBCHDigit(y.G18)>=0;)t^=y.G18<<y.getBCHDigit(t)-y.getBCHDigit(y.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return y.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case p:return(t+n)%2==0;case u:return t%2==0;case h:return n%3==0;case d:return(t+n)%3==0;case g:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case f:return t*n%2+t*n%3==0;case m:return(t*n%2+t*n%3)%2==0;case _:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new w([1],0),n=0;n<e;n++)t=t.multiply(new w([1,v.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case a.MODE_NUMBER:return 10;case a.MODE_ALPHA_NUM:return 9;case a.MODE_8BIT_BYTE:case a.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case a.MODE_NUMBER:return 12;case a.MODE_ALPHA_NUM:return 11;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case a.MODE_NUMBER:return 14;case a.MODE_ALPHA_NUM:return 13;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,o=0;o<t;o++)for(var i=0;i<t;i++){for(var a=0,r=e.isDark(o,i),s=-1;s<=1;s++)if(!(o+s<0||t<=o+s))for(var c=-1;c<=1;c++)i+c<0||t<=i+c||0==s&&0==c||r==e.isDark(o+s,i+c)&&a++;a>5&&(n+=3+a-5)}for(var l=0;l<t-1;l++)for(var p=0;p<t-1;p++){var u=0;e.isDark(l,p)&&u++,e.isDark(l+1,p)&&u++,e.isDark(l,p+1)&&u++,e.isDark(l+1,p+1)&&u++,0!=u&&4!=u||(n+=3)}for(var h=0;h<t;h++)for(var d=0;d<t-6;d++)e.isDark(h,d)&&!e.isDark(h,d+1)&&e.isDark(h,d+2)&&e.isDark(h,d+3)&&e.isDark(h,d+4)&&!e.isDark(h,d+5)&&e.isDark(h,d+6)&&(n+=40);for(var g=0;g<t;g++)for(var f=0;f<t-6;f++)e.isDark(f,g)&&!e.isDark(f+1,g)&&e.isDark(f+2,g)&&e.isDark(f+3,g)&&e.isDark(f+4,g)&&!e.isDark(f+5,g)&&e.isDark(f+6,g)&&(n+=40);for(var m=0,_=0;_<t;_++)for(var y=0;y<t;y++)e.isDark(y,_)&&m++;return n+=10*(Math.abs(100*m/t/t-50)/5)}},v={glog:function(e){if(e<1)throw new Error("glog("+e+")");return v.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return v.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},b=0;b<8;b++)v.EXP_TABLE[b]=1<<b;for(var C=8;C<256;C++)v.EXP_TABLE[C]=v.EXP_TABLE[C-4]^v.EXP_TABLE[C-5]^v.EXP_TABLE[C-6]^v.EXP_TABLE[C-8];for(var M=0;M<255;M++)v.LOG_TABLE[v.EXP_TABLE[M]]=M;function w(e,t){if(void 0==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var o=0;o<e.length-n;o++)this.num[o]=e[o+n]}function I(e,t){this.totalCount=e,this.dataCount=t}function R(){this.buffer=new Array,this.length=0}w.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var o=0;o<e.getLength();o++)t[n+o]^=v.gexp(v.glog(this.get(n))+v.glog(e.get(o)));return new w(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=v.glog(this.get(0))-v.glog(e.get(0)),n=new Array(this.getLength()),o=0;o<this.getLength();o++)n[o]=this.get(o);for(var i=0;i<e.getLength();i++)n[i]^=v.gexp(v.glog(e.get(i))+t);return new w(n,0).mod(e)}},I.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],I.getRSBlocks=function(e,t){var n=I.getRsBlockTable(e,t);if(void 0==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var o=n.length/3,i=new Array,a=0;a<o;a++)for(var r=n[3*a+0],s=n[3*a+1],c=n[3*a+2],l=0;l<r;l++)i.push(new I(s,c));return i},I.getRsBlockTable=function(e,t){switch(t){case r:return I.RS_BLOCK_TABLE[4*(e-1)+0];case s:return I.RS_BLOCK_TABLE[4*(e-1)+1];case c:return I.RS_BLOCK_TABLE[4*(e-1)+2];case l:return I.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},R.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},cc.Class({extends:cc.Component,editor:{requireComponent:cc.Graphics,executeInEditMode:!0},properties:{url:{default:"Hello World!",notify:function(e){this.url!==e&&this.setContent()}},backColor:{type:cc.Color,default:cc.Color.WHITE,notify:function(){this.setContent()}},foreColor:{type:cc.Color,default:cc.Color.BLACK,notify:function(e){this.node.color=this.graphics.fillColor,this.setContent()}},margin:{type:cc.Float,default:10,notify:function(e){e!==this.margin&&this.setContent()}},_size:200,size:{type:cc.Float,get:function(){return this._size},set:function(e){this._size!==e&&(this.node.setContentSize(e,e),this.setContent(),this._size=e)}}},onLoad:function(){this.graphics=this.node.getComponent(cc.Graphics),this.node.setContentSize(this.size,this.size),this.setContent()},setContent:function(){this.graphics=this.node.getComponent(cc.Graphics),this.graphics.clear(),this.graphics.fillColor=this.backColor;var e=this.node.width;this.graphics.rect(0-.5*e,0-.5*e,e,e),this.graphics.fill(),this.graphics.close();var t=new i(-1,2);t.addData(this.url),t.make(),this.graphics.fillColor=this.foreColor;for(var n=e-2*this.margin,o=t.getModuleCount(),a=n/o,r=n/o,s=Math.ceil(a),c=Math.ceil(r),l=0;l<o;l++)for(var p=0;p<o;p++)t.isDark(l,p)&&(this.graphics.rect(this.margin+p*a-.5*e,n-r-Math.round(l*r)+this.margin-.5*e,s,c),this.graphics.fill())}}),cc._RF.pop()},{}],QuickRechargeTips:[function(e,t,n){"use strict";cc._RF.push(t,"ae285np5rRLDruR2mU2hiNr","QuickRechargeTips");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/DataManager"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toggle=null,t}return o(t,e),t.prototype.onEnable=function(){var e=r.DataManager.isTipsQuickRecharge();this.toggle.isChecked=!!e},t.prototype.start=function(){},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_confirm").registerClick(this.onClickConfirm.bind(this))},t.prototype.onClickClose=function(){this.node.destroy()},t.prototype.onClickConfirm=function(){var e=this.toggle.isChecked;r.DataManager.saveTipsQuickRecharge(e),this.node.destroy()},i([l(cc.Toggle)],t.prototype,"toggle",void 0),t=i([c],t)}(a.default);n.default=p,cc._RF.pop()},{"../../manager/DataManager":"DataManager","../base/PopupView":"PopupView"}],QuickRechargeView:[function(e,t,n){"use strict";cc._RF.push(t,"021bbVbzepKCJsS4sidY0pD","QuickRechargeView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/DataManager"),s=e("../../manager/UIManager"),c=e("../../manager/NetManager"),l=e("../../common/Device"),p=e("../../common/Text"),u=e("../../manager/EventManager"),h=e("../../net/NetCmd"),d=e("../../common/utils/Utils"),g=cc._decorator,f=g.ccclass,m=g.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t.copy_bankName=null,t.copy_bankCardNum=null,t.copy_shopName=null,t.btn_recharge_tips=null,t.btn_submit=null,t.default_bankName=null,t.default_bankCardNum=null,t.default_shopName=null,t.default_time=null,t.default_gold=null,t.edit_box=null,t}return o(t,e),t.prototype.start=function(){r.DataManager.isTipsQuickRecharge()||s.UIManager.popup("prefabs/hall/QuickRechargeTips"),this.initView()},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_copy_bank").registerClick(this.onClickCopyBank.bind(this)),this.getItem("btn_copy_card").registerClick(this.onClickCopyCard.bind(this)),this.getItem("btn_copy_name").registerClick(this.onClickCopyName.bind(this)),this.getItem("btn_submit").registerClick(this.onClickSubmit.bind(this)),this.getItem("btn_recharge_tips").registerClick(this.onClickTips.bind(this))},t.prototype.initEvent=function(){u.EventManager.on(this,h.ProtocolBankCmd.CheckRechargeResp,this.onCheckRechargeResp.bind(this))},t.prototype.onCheckRechargeResp=function(e){1==e.status&&this.close()},t.prototype.onClickClose=function(){this.close()},t.prototype.onClickCopyBank=function(){l.default.setClipBoard(this.data.bank_name)&&s.UIManager.showTips(p.Tips.CopySuccess)},t.prototype.onClickCopyCard=function(){l.default.setClipBoard(this.data.card_num)&&s.UIManager.showTips(p.Tips.CopySuccess)},t.prototype.onClickCopyName=function(){l.default.setClipBoard(this.data.holder_name)&&s.UIManager.showTips(p.Tips.CopySuccess)},t.prototype.onClickSubmit=function(){var e=this.edit_box.string;if(e){var t=this.data.opr_time,n=this.data.gold;c.NetManager.protocolBank.sendCheckRechargeReq(e,t,n,this.data.data_index,this.data.pay_label_id)}else s.UIManager.showTips("\u8bf7\u8f93\u5165\u5145\u503c\u59d3\u540d")},t.prototype.onClickTips=function(){s.UIManager.popup("prefabs/hall/QuickRechargeTips")},t.prototype.initView=function(){this.default_bankName.string=this.data.bank_name,this.default_bankCardNum.string=this.data.card_num,this.default_shopName.string=this.data.holder_name,this.default_time.string=d.default.getFormatDate(1e3*this.data.opr_time,"yyyy-MM-dd hh-mm-ss"),this.default_gold.string=this.data.gold},i([m(cc.Node)],t.prototype,"btn_close",void 0),i([m(cc.Node)],t.prototype,"copy_bankName",void 0),i([m(cc.Node)],t.prototype,"copy_bankCardNum",void 0),i([m(cc.Node)],t.prototype,"copy_shopName",void 0),i([m(cc.Node)],t.prototype,"btn_recharge_tips",void 0),i([m(cc.Node)],t.prototype,"btn_submit",void 0),i([m(cc.Label)],t.prototype,"default_bankName",void 0),i([m(cc.Label)],t.prototype,"default_bankCardNum",void 0),i([m(cc.Label)],t.prototype,"default_shopName",void 0),i([m(cc.Label)],t.prototype,"default_time",void 0),i([m(cc.Label)],t.prototype,"default_gold",void 0),i([m(cc.EditBox)],t.prototype,"edit_box",void 0),t=i([f],t)}(a.default);n.default=_,cc._RF.pop()},{"../../common/Device":"Device","../../common/Text":"Text","../../common/utils/Utils":"Utils","../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],Rank:[function(e,t,n){"use strict";cc._RF.push(t,"41b6ejbu4lJhY8CcPl3fGgY","Rank");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../common/List"),r=e("../../common/UIHelper"),s=e("../base/PopupView"),c=e("../common/componet/ButtonEx"),l=e("../../manager/NetManager"),p=e("../../manager/EventManager"),u=e("../../net/NetCmd"),h=cc._decorator,d=h.ccclass,g=h.property,f={1:"\u5145\u503c\u989d\u5ea6",2:"\u8fde\u8d62\u5c40\u6570",3:"\u63d0\u73b0\u91d1\u989d",4:"\u8fd4\u5229\u91d1\u989d"},m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_rank=null,t.img_ranks=[],t.index=1,t}return o(t,e),t.prototype.initComponent=function(){var e=this;this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("node_buttons").getComponentsInChildren(c.default).forEach(function(t,n){t.registerClick(function(){n+1!=e.index&&(e.index=n+1,e.getItem("sp_button").setAnimation(0,"btn"+e.index,!0),e.getComponent(cc.Animation).play(),l.NetManager.protocolHall.sendGetGoldRankList(e.index))})})},t.prototype.initEvent=function(){p.EventManager.on(this,u.ProtocolHallCmd.GetGoldRankListResp,this.onGetGoldRankListResp.bind(this))},t.prototype.start=function(){l.NetManager.protocolHall.sendGetGoldRankList()},t.prototype.onClickClose=function(){this.close(!1)},t.prototype.openAnimation=function(){var e=this.getItem("btn_close").node;e.scale=.1,e.runAction(cc.scaleTo(.3,1)),this.getComponent(cc.Animation).play(),this.getItem("sp_title").addAnimation(0,"loop",!0)},t.prototype.onGetGoldRankListResp=function(e){this.data=e.gold_rank_list,this.scroll_rank.numItems=e.gold_rank_list.length,this.getItem("label_my_rank").string="\u6211\u7684\u6392\u884c\u699c:"+(0==e.my_rank?"\u672a\u4e0a\u699c":e.my_rank),this.getItem("label_tips").string="\u699c\u5355\u6bcf\u5929"+e.update_time+"\u66f4\u65b0",this.getItem("label_title3").string=f[e.type]},t.prototype.onListRender=function(e,t){var n=e.getChildByName("icon_rank").getComponent(cc.Sprite),o=n.node.getChildByName("label_rank").getComponent(cc.Label),i=e.getChildByName("label_name").getComponent(cc.Label),a=e.getChildByName("label_money").getComponent(cc.Label),s=e.getChildByName("icon_yuanbao"),c=cc.find("node_head/node_head_mask/img_head",e);r.default.setHeadIcon(this.data[t].headimg_id,c),i.string=this.data[t].username,a.string=this.data[t].num,this.data[t].rank_index<=3?(n.spriteFrame=this.img_ranks[this.data[t].rank_index-1],o.node.active=!1):(n.spriteFrame=this.img_ranks[3],o.string=this.data[t].rank_index,o.node.active=!0),2==this.index?s.active=!1:s.active=!0},i([g(a.default)],t.prototype,"scroll_rank",void 0),i([g(cc.SpriteFrame)],t.prototype,"img_ranks",void 0),t=i([d],t)}(s.default);n.default=m,cc._RF.pop()},{"../../common/UIHelper":"UIHelper","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView","../common/List":"List","../common/componet/ButtonEx":"ButtonEx"}],RechargeAction:[function(e,t,n){"use strict";cc._RF.push(t,"854eappGWZGWqheqbN4uQHB","RechargeAction");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/NetManager"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sp_back=null,t.sp_npc=null,t.sp_front=null,t.gift_money=null,t.btn_close=null,t.btn_enter=null,t}return o(t,e),t.prototype.start=function(){this.playEffect()},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_enter").registerClick(this.onClickEnter.bind(this))},t.prototype.onClickClose=function(){this.close()},t.prototype.onClickEnter=function(){r.NetManager.protocolHall.sendActionReq(),this.close()},t.prototype.playEffect=function(){this.setSpineBack(),this.setSpineNpc(),this.setSpineFront()},t.prototype.setSpineBack=function(){this.sp_back.setAnimation(0,"once",!1),this.sp_back.addAnimation(1,"loop",!0)},t.prototype.setSpineNpc=function(){this.sp_npc.setAnimation(0,"once",!1),this.sp_npc.addAnimation(1,"loop",!0)},t.prototype.setSpineFront=function(){this.sp_front.setAnimation(0,"once",!1),this.sp_front.addAnimation(1,"loop",!0)},t.prototype.setGiftMoney=function(e){var t=this;this.gift_money.string=e+"\u5143",this.gift_money.node.opacity=0;var n=cc.spawn(cc.fadeIn(.5),cc.callFunc(function(){t.gift_money.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1.34,1.2,1.2),cc.scaleTo(1.34,1,1))))}));this.gift_money.node.runAction(n)},i([l(sp.Skeleton)],t.prototype,"sp_back",void 0),i([l(sp.Skeleton)],t.prototype,"sp_npc",void 0),i([l(sp.Skeleton)],t.prototype,"sp_front",void 0),i([l(cc.Label)],t.prototype,"gift_money",void 0),i([l(cc.Node)],t.prototype,"btn_close",void 0),i([l(cc.Node)],t.prototype,"btn_enter",void 0),t=i([c],t)}(a.default);n.default=p,cc._RF.pop()},{"../../manager/NetManager":"NetManager","../base/PopupView":"PopupView"}],RechargeView:[function(e,t,n){"use strict";cc._RF.push(t,"ecd74Iv/udMjY/8uQickHKL","RechargeView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../base/PopupView"),c=e("../common/List"),l=e("../common/componet/ButtonEx"),p=e("../../manager/ResManager"),u=e("../../manager/EventManager"),h=e("../../net/NetCmd"),d=e("../../common/Device"),g=e("../../manager/UIManager"),f=e("../../common/log/LogWrap"),m=e("../../manager/NetManager"),_=e("../../common/UIHelper"),y=e("../../manager/FileManager"),v=e("../../manager/DataManager"),b=e("../../common/Text"),C=e("../common/DynamicList"),M=cc._decorator,w=M.ccclass,I=M.property,R={1:"img_zfbcz",2:"img_wxcz",3:"img_qqcz",5:"img_ysfcz",6:"img_ylcz"},P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_kefu=null,t.pay_item=null,t.item_tab=null,t.scroll_tab=null,t.selectIndex=0,t.payInfo=null,t.platformInfo=[],t}return o(t,e),t.prototype.start=function(){this.updateTab()},t.prototype.initComponent=function(){this.getItem("btn_recharge").registerClick(this.onClickRecharge.bind(this)),this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_clear").registerClick(this.onClickClear.bind(this)),this.getItem("btn_code_clear").registerClick(this.onClickClear.bind(this)),this.getItem("btn_commit").registerClick(this.onClickCommit.bind(this)),this.getItem("btn_save_code").registerClick(this.onClickSaveCode.bind(this))},t.prototype.initEvent=function(){u.EventManager.on(this,h.ProtocolBankCmd.RechargeUrlResp,this.showRechargeUrl.bind(this)),u.EventManager.on(this,h.ProtocolBankCmd.CheckRechargeResp,this.onCheckRechargeResp.bind(this)),u.EventManager.on(this,h.ProtocolAccountCmd.LoginResp,this.onLoginResp.bind(this))},t.prototype.onLoginResp=function(){g.UIManager.hideLoading(b.Tips.RechargeWaiting)},t.prototype.onCheckRechargeResp=function(e){1==e.status?(g.UIManager.showTips("\u63d0\u4ea4\u8ba2\u5355\u6210\u529f, \u8bf7\u7a0d\u7b49"),this.onClickClear()):g.UIManager.showTips("\u63d0\u4ea4\u8ba2\u5355\u5931\u8d25, \u8bf7\u91cd\u8bd5")},t.prototype.onClickClose=function(){this.close(!1)},t.prototype.onClickClear=function(){this.getItem("input_money").string="",this.getItem("input_code_money").string=""},t.prototype.onClickCommit=function(){var e=this.getItem("input_code_money").string;!/^[\d]+$/.test(e)||parseInt(e)<=0?g.UIManager.showTips("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5145\u503c\u91d1\u989d!"):m.NetManager.protocolBank.sendCheckRechargeReq(v.DataManager.userInfo.nickname,"",e,this.payInfo.data_index,this.data.platform_Info[this.selectIndex].pay_label_id)},t.prototype.onClickSaveCode=function(){_.default.screenShotToLocal(this.getItem("node_code"),"screen_recharge_shot.png",!1,function(e,t){g.UIManager.showTips("\u4fdd\u5b58\u6210\u529f")})},t.prototype.onClickRecharge=function(){var e=this.getItem("input_money").string;if(this.isCheckNum(e))this.payInfo.custom_check_info?g.UIManager.showTips("\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u5145\u503c\u91d1\u989d!"):g.UIManager.showTips("\u5145\u503c\u91d1\u989d\u8303\u56f4\u4e3a"+this.payInfo.min_amount+"-"+this.payInfo.max_amount+"\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165");else if(this.payInfo.custom_check_info){var t=this.payInfo.custom_check_info;t.gold=e,t.data_index=this.payInfo.data_index,t.pay_label_id=this.data.platform_Info[this.selectIndex].pay_label_id,g.UIManager.popup("prefabs/hall/QuickRechargeView",t)}else{var n=this.payInfo.pay_id;m.NetManager.protocolBank.sendRechargeUrlReq(n,e,this.payInfo.pay_platform_type,this.payInfo.data_index,this.data.platform_Info[this.selectIndex].pay_label_id)}},t.prototype.isCheckNum=function(e){var t=/^[\d]+$/;if(this.payInfo.custom_check_info){if(!t.test(e)||parseInt(e)<=0)return!0}else if(!t.test(e)||parseInt(e)<this.payInfo.min_amount||parseInt(e)>this.payInfo.max_amount)return!0;return!1},t.prototype.openAnimation=function(){var e=this.getItem("btn_close").node;e.scale=.1,e.runAction(cc.scaleTo(.3,1)),this.getComponent(cc.Animation).play(),this.getItem("sp_title").addAnimation(0,"loop",!0)},t.prototype.showRechargeUrl=function(e){e.is_ok?(f.LogWrap.log("\u6253\u5f00\u7684\u7f51\u9875\u4e3a",e.recharge_url),d.default.openUrl(e.recharge_url)):g.UIManager.showTips(e.err_msg)},t.prototype.updateTab=function(){this.platformInfo=[];for(var e=0;e<this.data.platform_Info.length;e++)this.platformInfo.push({info:this.data.platform_Info[e],items:this.data.platform_Info[e].pay_info});this.scroll_tab.datas=this.platformInfo},t.prototype.updatePay=function(e){var t=this;if(this.payInfo=e,5!=e.pay_platform_type){if(e.vip_custom_list_info.length>0)return this.getItem("node_pay_content").active=!1,this.getItem("node_pay_kefu_content").active=!0,this.getItem("node_pay_code_content").active=!1,void(this.scroll_kefu.numItems=e.vip_custom_list_info.length);this.getItem("node_pay_content").active=!0,this.getItem("node_pay_kefu_content").active=!1,this.getItem("node_pay_code_content").active=!1,this.getItem("input_money").string="";for(var n=0;n<8;n++){var o=this.getItem("toggle_money"+n),i=o.getComponentsInChildren(cc.Label);o.isChecked=!1,e.quick_num_list[n]?(o.node.active=!0,i[0].string=e.quick_num_list[n],i[1].string=e.quick_num_list[n]):o.node.active=!1}}else if(this.getItem("node_pay_content").active=!1,this.getItem("node_pay_kefu_content").active=!1,this.getItem("node_pay_code_content").active=!0,e.extral){var s=JSON.parse(e.extral);if(s&&s.qr_code){var c=this.getItem("img_code");if(cc.sys.isNative){var l=y.FileManager.baseName(s.qr_code);cc.log(l),y.FileManager.downloadFile(s.qr_code,l,function(e){return a(t,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return e?[4,p.ResManager.loadAsync(l)]:[3,2];case 1:t=n.sent(),cc.isValid(c)&&(c.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t)),n.label=2;case 2:return[2]}})})})}else cc.loader.load(s.qr_code,function(e,t){e||cc.isValid(c)&&(c.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(t))})}}},t.prototype.onClickToggle=function(e){var t=e.getComponentInChildren(cc.Label);e.isChecked?this.getItem("input_money").string=t.string:this.getItem("input_money").string=""},t.prototype.onListKefuRender=function(e,t){var n=this.payInfo.vip_custom_list_info[t],o=e.getChildByName("label_nickname").getComponent(cc.Label),i=e.getChildByName("label_info").getComponent(cc.Label),a=e.getChildByName("btn_kefu_recharge").getComponent(l.default);o.string=n.name,i.string=n.info,a.registerClick(function(){d.default.openUrl(n.link)})},t.prototype.onListRender=function(e,t){return a(this,void 0,void 0,function(){var n,o,i,a,s,c,u,h,d,g,f,m,_,y,v=this;return r(this,function(r){switch(r.label){case 0:return n=this.data.platform_Info[t],o=e.getChildByName("node_pay"),i=e.getChildByName("btn_pay_channel"),a=i.getChildByName("press"),s=i.getChildByName("normal"),c=i.getComponent(l.default),u=i.getChildByName("icon_pay").getComponent(cc.Sprite),h=i.getComponentsInChildren(cc.Label),d=i.getChildByName("img_discount"),g=d.getComponent(sp.Skeleton),f=d.getChildByName("label_discount").getComponent(cc.Label),n.des_info?(m=JSON.parse(n.des_info),d.active=""!=m.pay_discount,f.string=m.pay_discount,f.node.color=1==m.color?cc.Color.YELLOW:cc.Color.WHITE,[4,p.ResManager.loadResAsync(1==m.color?"animation/spine/recharge_view/hong":"animation/spine/recharge_view/lan",sp.SkeletonData)]):[3,2];case 1:return(_=r.sent())&&cc.isValid(d)&&(g.skeletonData=_,g.clearTracks(),g.setToSetupPose(),g.setAnimation(0,"animation",!0)),[3,3];case 2:d.active=!1,r.label=3;case 3:return h[0].string=n.pay_label_name,h[1].string=n.pay_label_name,R[n.pay_label_id]?(u.node.active=!0,y=u,[4,p.ResManager.loadResAsync("view/recharge/"+R[n.pay_label_id],cc.SpriteFrame)]):[3,5];case 4:return y.spriteFrame=r.sent(),[3,6];case 5:u.node.active=!1,r.label=6;case 6:return this.scroll_tab.getOpenIndex()==t?(a.active=!0,s.active=!1,o.active=!0):(a.active=!1,s.active=!0,o.active=!1),c.registerClick(function(){n.pay_info&&n.pay_info[0]&&v.selectIndex!=t&&v.updatePay(n.pay_info[0]),v.selectIndex=t,v.scroll_tab.setOpen(v.selectIndex)}),[2]}})})},t.prototype.onRanderChild=function(e,t,n){e.name=t.toString(),e.getComponentInChildren(cc.Label).string=n.pay_sub_name,this.payInfo==n?e.getComponent(cc.Toggle).isChecked=!0:this.payInfo||this.updatePay(n)},t.prototype.onClickTogglePay=function(e){var t=parseInt(e.node.name);if(this.platformInfo[this.selectIndex]){var n=this.platformInfo[this.selectIndex].items[t];n&&this.payInfo!=n&&this.updatePay(n)}},i([I(c.default)],t.prototype,"scroll_kefu",void 0),i([I(cc.Node)],t.prototype,"pay_item",void 0),i([I(cc.Node)],t.prototype,"item_tab",void 0),i([I(C.default)],t.prototype,"scroll_tab",void 0),t=i([w],t)}(s.default);n.default=P,cc._RF.pop()},{"../../common/Device":"Device","../../common/Text":"Text","../../common/UIHelper":"UIHelper","../../common/log/LogWrap":"LogWrap","../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/FileManager":"FileManager","../../manager/NetManager":"NetManager","../../manager/ResManager":"ResManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView","../common/DynamicList":"DynamicList","../common/List":"List","../common/componet/ButtonEx":"ButtonEx"}],RedPacketRain:[function(e,t,n){"use strict";cc._RF.push(t,"2aeceKNaOhGWoye3cLqj1UW","RedPacketRain");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../common/log/LogWrap"),r=e("../../common/Text"),s=e("../../manager/DataManager"),c=e("../../manager/EventManager"),l=e("../../manager/NetManager"),p=e("../../manager/UIManager"),u=e("../../net/NetCmd"),h=e("../base/PopupView"),d=cc._decorator,g=d.ccclass,f=(d.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rewardTrickSchedule=null,t.get_success=!1,t.has_oper=!1,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("sp_hongbaoyu").node.on(cc.Node.EventType.TOUCH_END,this.onClickDraw.bind(this)),this.getItem("view_gift").on(cc.Node.EventType.TOUCH_END,this.onClickGiftView.bind(this))},t.prototype.initEvent=function(){c.EventManager.on(this,u.ProtocolHallCmd.HitRedbagRainRes,this.onHitRedbagRainRes.bind(this))},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),this.unschedule(this.rewardTrickSchedule)},t.prototype.start=function(){var e=this.data.left_act_time;this.playRain(e)},t.prototype.onClickDraw=function(){var e=this;this.has_oper=!0,this.checkTourist(function(t){t?l.NetManager.protocolHall.sendHitRedbagRainReq():e.onClickClose()})&&(a.LogWrap.log("\u975e\u6e38\u5ba2\u53d1\u8d77\u62a2\u7ea2\u5305"),l.NetManager.protocolHall.sendHitRedbagRainReq())},t.prototype.onClickClose=function(){l.NetManager.protocolHall.sendGetRedbagRainActReq(),this.get_success&&l.NetManager.protocolAccount.sendGetUserInfo(),this.data&&this.data.callFunc&&this.get_success&&this.data.callFunc(),this.close()},t.prototype.onClickGiftView=function(){this.onClickClose(),this.unschedule(this.rewardTrickSchedule)},t.prototype.playRain=function(e){var t=this,n=this.getItem("sp_hongbaoyu");n.clearTracks(),n.setToSetupPose(),n.setAnimation(1,"1",!0),n.setCompleteListener(function(){console.log("\u8fdb\u5165\u5faa\u73af"),n.setCompleteListener(null),n.setAnimation(2,"2",!0)}),n.node.opacity=255,this.scheduleOnce(function(){t.has_oper||p.UIManager.showTips(r.Tips.RedPacketOver),n.clearTracks(),n.setToSetupPose(),n.node.active=!1,t.onClickClose()},e)},t.prototype.onHitRedbagRainRes=function(e){1==e.ret_status?(this.get_success=!0,a.LogWrap.log("\u9886\u91d1\u5e01\u6210\u529f!!!!"),this.showGoldGift(e.hit_gold)):this.showFail(),p.UIManager.showTips(e.msg)},t.prototype.showGoldGift=function(e){this.getItem("sp_hongbaoyu").node.active=!1,this.getItem("view_gift").active=!0,this.getItem("success").active=!0,this.getItem("label_money_num").string=e},t.prototype.showFail=function(){this.getItem("view_gift").active=!0,this.getItem("fail").active=!0},t.prototype.checkTourist=function(e,t,n){return void 0===t&&(t=r.Tips.BindAccount),void 0===n&&(n="prefabs/account/BindPhoneNum"),!s.DataManager.isTourist()||(p.UIManager.showTipsPopup(t,function(t){t?p.UIManager.popup(n,e):e(t)}),!1)},t=i([g],t)}(h.default));n.default=f,cc._RF.pop()},{"../../common/Text":"Text","../../common/log/LogWrap":"LogWrap","../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],RegisterAction:[function(e,t,n){"use strict";cc._RF.push(t,"54ef80Jg2lB1KKzgE+aAvvS","RegisterAction");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/UIManager"),s=e("../../manager/DataManager"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sp_back=null,t.sp_npc=null,t.sp_front=null,t.gift_money=null,t.btn_close=null,t.btn_bind=null,t}return o(t,e),t.prototype.start=function(){this.playEffect(s.DataManager.bindPhoneGiveCoin)},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_bind").registerClick(this.onClickBind.bind(this))},t.prototype.onClickClose=function(){r.UIManager.popup("prefabs/hall/RegisterBindAction"),this.close()},t.prototype.onClickBind=function(){this.close(),r.UIManager.popup("prefabs/account/BindPhoneNum",function(e){e||r.UIManager.popup("prefabs/hall/RegisterBindAction")})},t.prototype.playEffect=function(e){this.setSpineBack(),this.setSpineNpc(),this.setSpineFront(),this.setGiftMoney(e)},t.prototype.setSpineBack=function(){this.sp_back.setAnimation(0,"once",!1),this.sp_back.addAnimation(1,"loop",!0)},t.prototype.setSpineNpc=function(){this.sp_npc.setAnimation(0,"once",!1),this.sp_npc.addAnimation(1,"loop",!0)},t.prototype.setSpineFront=function(){this.sp_front.setAnimation(0,"once",!1),this.sp_front.addAnimation(1,"loop",!0)},t.prototype.setGiftMoney=function(e){var t=this;this.gift_money.string=e+"\u5143",this.gift_money.node.opacity=0;var n=cc.spawn(cc.fadeIn(.5),cc.callFunc(function(){t.gift_money.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1.34,1.2,1.2),cc.scaleTo(1.34,1,1))))}));this.gift_money.node.runAction(n)},i([p(sp.Skeleton)],t.prototype,"sp_back",void 0),i([p(sp.Skeleton)],t.prototype,"sp_npc",void 0),i([p(sp.Skeleton)],t.prototype,"sp_front",void 0),i([p(cc.Label)],t.prototype,"gift_money",void 0),i([p(cc.Node)],t.prototype,"btn_close",void 0),i([p(cc.Node)],t.prototype,"btn_bind",void 0),t=i([l],t)}(a.default);n.default=u,cc._RF.pop()},{"../../manager/DataManager":"DataManager","../../manager/UIManager":"UIManager","../base/PopupView":"PopupView"}],RegisterBindAction:[function(e,t,n){"use strict";cc._RF.push(t,"99538fBzsJIuanC0hWMJ8b0","RegisterBindAction");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/UIManager"),s=e("../../manager/DataManager"),c=e("../../manager/NetManager"),l=cc._decorator,p=l.ccclass,u=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sp_back=null,t.sp_npc=null,t.sp_front=null,t.gift_money=null,t.btn_close=null,t.btn_bind=null,t}return o(t,e),t.prototype.start=function(){this.playEffect(s.DataManager.bindPhoneGiveCoin)},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_bind").registerClick(this.onClickBind.bind(this)),this.getItem("btn_enter").registerClick(this.onClickEnter.bind(this)),s.DataManager.userSafeInfo.has_bind_phone&&(this.getItem("btn_bind").node.active=!1,this.getItem("btn_enter").node.active=!0)},t.prototype.onClickClose=function(){this.close()},t.prototype.onClickBind=function(){this.close(),r.UIManager.popup("prefabs/account/BindPhoneNum",function(e){})},t.prototype.onClickEnter=function(){this.close(),c.NetManager.protocolHall.sendActionReq()},t.prototype.playEffect=function(e){this.setSpineBack(),this.setSpineNpc(),this.setSpineFront()},t.prototype.setSpineBack=function(){this.sp_back.setAnimation(0,"once",!1),this.sp_back.addAnimation(1,"loop",!0)},t.prototype.setSpineNpc=function(){this.sp_npc.setAnimation(0,"once",!1),this.sp_npc.addAnimation(1,"loop",!0)},t.prototype.setSpineFront=function(){this.sp_front.setAnimation(0,"once",!1),this.sp_front.addAnimation(1,"loop",!0)},t.prototype.setGiftMoney=function(e){var t=this,n=cc.spawn(cc.fadeIn(.5),cc.callFunc(function(){t.gift_money.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1.34,1.2,1.2),cc.scaleTo(1.34,1,1))))}));this.gift_money.node.runAction(n)},i([u(sp.Skeleton)],t.prototype,"sp_back",void 0),i([u(sp.Skeleton)],t.prototype,"sp_npc",void 0),i([u(sp.Skeleton)],t.prototype,"sp_front",void 0),i([u(cc.Label)],t.prototype,"gift_money",void 0),i([u(cc.Node)],t.prototype,"btn_close",void 0),i([u(cc.Node)],t.prototype,"btn_bind",void 0),t=i([p],t)}(a.default);n.default=h,cc._RF.pop()},{"../../manager/DataManager":"DataManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../base/PopupView":"PopupView"}],Register:[function(e,t,n){"use strict";cc._RF.push(t,"e79d5EYwSNPA74NiVEsUoed","Register");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/UIManager"),s=e("../../common/Text"),c=e("../../manager/NetManager"),l=e("../../net/NetCmd"),p=e("../../manager/DataManager"),u=cc._decorator,h=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isAnimation=!1,t.canGetCode=!0,t.timeNumber=60,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_sure").registerClick(this.onClickSure.bind(this)),this.getItem("btn_show_password").registerClick(this.onClickShowPassword.bind(this)),this.getItem("btn_hide_password").registerClick(this.onClickHidePassword.bind(this)),this.getItem("btn_auth").registerClick(this.onClickAuth.bind(this))},t.prototype.initEvent=function(){},t.prototype.onClickAuth=function(){var e=this,t=this.getItem("input_phone").string;this.canGetCode&&(t&&11==t.length?/^1[3456789]\d{9}$/.test(t)?(this.canGetCode=!1,c.NetManager.requestPostUrl(l.HttpCmd.GetVerificationCode,{phonenumber:t,type:1,channel:p.DataManager.channel,user_id:p.DataManager.userInfo&&p.DataManager.userInfo.userid||0},function(t,n){"success"==t?1==n.ok?(r.UIManager.showTips(s.Tips.SendCodeSuccess),e.updateTimer()):(e.canGetCode=!0,r.UIManager.showTips(n.err_msg||s.Tips.SendCodeFail)):(e.canGetCode=!0,r.UIManager.showTips(s.Tips.SendCodeFail+n))})):r.UIManager.showTips(s.Tips.PhoneNumberError):r.UIManager.showTips(s.Tips.InputPhone))},t.prototype.updateTimer=function(){var e=this;this.node.stopAllActions(),this.timeNumber=60,this.getItem("label_auth").string=this.timeNumber+"s",cc.tween(this.node).repeatForever(cc.sequence(cc.delayTime(1),cc.callFunc(function(){e.timeNumber--,e.timeNumber>0?e.getItem("label_auth").string=e.timeNumber+"s":(e.canGetCode=!0,e.getItem("label_auth").string="\u83b7 \u53d6")}))).start()},t.prototype.onClickSure=function(){var e=this.getItem("input_phone").string,t=this.getItem("input_password").string,n=this.getItem("input_password2").string,o=this.getItem("input_auth").string;if(e&&11==e.length)if(/^1[3456789]\d{9}$/.test(e))if(o&&6==o.length)if(t)if(t.length<6||t.length>16)r.UIManager.showTips(s.Tips.InputPassword);else{/^[0-9a-zA-Z]*$/g.test(t)?t==n?c.NetManager.protocolAccount.sendRister(e,t,o):r.UIManager.showTips(s.Tips.PasswordNotSame):r.UIManager.showTips("\u5bc6\u7801\u683c\u5f0f\u9519\u8bef\uff0c\u8bf7\u8f93\u51656-16\u4f4d\u7684\u82f1\u6587\u6216\u6570\u5b57")}else r.UIManager.showTips(s.Tips.InputPassword);else r.UIManager.showTips(s.Tips.InputCode);else r.UIManager.showTips(s.Tips.PhoneNumberError);else r.UIManager.showTips(s.Tips.InputPhone)},t.prototype.onClickShowPassword=function(){this.getItem("input_password").inputFlag=cc.EditBox.InputFlag.PASSWORD,this.getItem("btn_show_password").node.active=!1,this.getItem("btn_hide_password").node.active=!0},t.prototype.onClickHidePassword=function(){this.getItem("input_password").inputFlag=cc.EditBox.InputFlag.DEFAULT,this.getItem("btn_show_password").node.active=!0,this.getItem("btn_hide_password").node.active=!1},t=i([h],t)}(a.default));n.default=d,cc._RF.pop()},{"../../common/Text":"Text","../../manager/DataManager":"DataManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],ResManager:[function(e,t,n){"use strict";cc._RF.push(t,"6bfe13TFS1Gyp3tKWi1aKqH","ResManager");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../libs/pbkiller/src/pbkiller"),s=e("../common/log/LogWrap"),c=e("./UIManager"),l=cc._decorator,p=l.ccclass,u=(l.property,["cc.AnimationClip","cc.SpriteFrame","cc.Asset","sp.SkeletonData","cc.Texture2D","cc.SpriteAtlas","cc.EffectAsset","cc.BitmapFont","cc.TTFFont","cc.Prefab","cc.AudioClip","cc.TextAsset","dragonBones.DragonBonesAsset","dragonBones.DragonBonesAtlasAsset","cc.Material"]),h=function(){function e(){this.atlas=[],this.caches=[],this.commonRes=[],this.pbs=[]}var t;return t=e,e.prototype.loadResAsync=function(e,t,n){return void 0===n&&(n=!0),i(this,void 0,void 0,function(){var o=this;return a(this,function(i){return[2,new Promise(function(i,a){var r=cc.loader.getRes(e,t);r?i(r):cc.loader.loadRes(e,t,function(r,s){if(r)a(r.message||r);else{switch(t){case cc.SpriteAtlas:-1==o.atlas.indexOf(s)&&o.atlas.push(s);default:if(n)t==cc.Prefab?o.caches.push({url:e,type:t}):o.caches.unshift({url:e,type:t});else for(var c=0,l=cc.loader.getDependsRecursively(e);c<l.length;c++){var p=l[c];-1===o.commonRes.indexOf(p)&&o.commonRes.push(p)}}i(s)}})})]})})},e.prototype.loadDirResAsync=function(e,t){return new Promise(function(n,o){cc.loader.loadResDir(e,t,function(e,t){e?o(e.message||e):n(t)})})},e.prototype.loadAsync=function(e){return i(this,void 0,void 0,function(){return a(this,function(t){return[2,new Promise(function(t,n){cc.loader.load(e,function(e,o){e?n(e.message||e):t(o)})})]})})},e.prototype.loadProto=function(e){return i(this,void 0,void 0,function(){var t;return a(this,function(n){switch(n.label){case 0:return this.pbs[e]?[2,this.pbs[e]]:[4,this.loadDirResAsync(e,cc.Asset)];case 1:return n.sent(),t=r.loadProtoDir(e),this.pbs[e]=t,[2,t]}})})},e.prototype.getRes=function(e,t){return cc.loader.getRes(e,t)},e.prototype.getSpriteFrame=function(e){for(var t=0,n=this.atlas;t<n.length;t++){return n[t].getSpriteFrame(e)}return null},e.prototype.clear=function(){this.atlas.forEach(function(e){e.destroy()})},e.prototype.loadSubSettings=function(e){if(cc.sys.isNative&&!cc.loader.downloader._subpackages[e]){var t=jsb.fileUtils.getStringFromFile("subpackages/"+e+"/"+e+".settings");if(t&&""!=t){var n=JSON.parse(t);cc.loader.downloader._subpackages[e]=n.subpackages[e];var o=new cc.Pipeline.SubPackPipe(n.subpackages);cc.loader.insertPipeAfter(cc.loader.assetLoader,o);var i=cc.loader._assetTables,a=n.rawAssets;if(a)for(var r in a){var c=a[r];for(var l in c){var p=c[l],h=p[0],d=p[1];"number"==typeof d&&(d=u[d]);var g=cc.js._getClassById(d);if(g){var f=cc.path.extname(h);f&&(h=h.slice(0,-f.length));var m=1===p[2];i[r]&&i[r].add(h,l,g,!m)}else cc.error("Cannot get",d)}}}else s.LogWrap.warn("subpackages/"+e+"/"+e+".settings is not exits!")}},e.prototype.loadSubPackage=function(e,t){this.loadSubSettings(e),cc.loader.downloader.loadSubpackage(e,function(e){e?(s.LogWrap.log(JSON.stringify(e)),t(!1)):t(!0)})},e.prototype.releasePrefab=function(){for(var e=cc.loader.getDependsRecursively(c.UIManager.viewPath),t=this.caches.length-1;t--;t>=0){var n=this.caches[t],o=n.url;if(o!=c.UIManager.viewPath){switch(n.type){case cc.SpriteFrame:case sp.SkeletonData:case dragonBones.DragonBonesAsset:case dragonBones.DragonBonesAtlasAsset:cc.loader.releaseRes(o,n.type);break;case cc.SpriteAtlas:for(var i=0,a=this.atlas;i<a.length;i++){var r=a[i];if(-1!=n.url.indexOf(r.name.replace(".plist",""))){var s=this.atlas.indexOf(r);if(-1!=s){this.atlas.splice(s,1);break}}}cc.loader.releaseRes(o,n.type);break;default:for(var l=cc.loader.getDependsRecursively(o),p=l.length-1;p--;p>=0){var u=e.indexOf(l[p]),h=this.commonRes.indexOf(l[p]);-1===u&&-1===h||l.splice(p,1)}cc.loader.release(l)}this.caches.splice(t,1)}}},e.instance=new t,e=t=o([p],e)}();n.ResManager=h.instance,cc._RF.pop()},{"../common/log/LogWrap":"LogWrap","../libs/pbkiller/src/pbkiller":"pbkiller","./UIManager":"UIManager"}],RoomView:[function(e,t,n){"use strict";cc._RF.push(t,"380b6W5OdFDibXG5XfEvC2S","RoomView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./base/BaseView"),r=e("./common/componet/ButtonEx"),s=e("../manager/EventManager"),c=e("../net/NetCmd"),l=e("../manager/UIManager"),p=e("../manager/NetManager"),u=e("../common/UIHelper"),h=e("../Define"),d=cc._decorator,g=d.ccclass,f=d.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.spine=null,t.PageView=null,t.page_item=null,t.node_top=null,t.game_math_info=null,t}return o(t,e),t.prototype.openAnimation=function(){var e=this.getItem("node_top").getComponent(cc.Widget);e.updateAlignment(),e.enabled=!1,this.getItem("node_top").runAction(cc.sequence(cc.moveTo(.4,0,this.getItem("node_top").y-this.getItem("node_top").height),cc.callFunc(function(){e.top=0,e.enabled=!0})))},t.prototype.initComponent=function(){this.getItem("btn_back").registerClick(this.onClickBack.bind(this)),this.getItem("btn_help").registerClick(this.onClickHelp.bind(this)),this.getItem("btn_record").registerClick(this.onClickRecord.bind(this)),this.getItem("btn_set").registerClick(this.onClickSet.bind(this))},t.prototype.initEvent=function(){s.EventManager.on(this,c.ProtocolHallCmd.GetGameRoomListResp,this.onGetGameRoomListResp),s.EventManager.on(this,c.ProtocolHallCmd.GetGameRecordDetailResp,this.onGetGameRecordDetailResp)},t.prototype.onClickBack=function(){l.UIManager.open("prefabs/HallView")},t.prototype.onClickHelp=function(){l.UIManager.popup("prefabs/game/GameRuleList",this.data)},t.prototype.onClickRecord=function(){var e=this;u.default.checkTourist(function(t){t&&p.NetManager.protocolHall.sendGetGameRecordDetail(e.data)})&&p.NetManager.protocolHall.sendGetGameRecordDetail(this.data)},t.prototype.onClickSet=function(){l.UIManager.popup("prefabs/hall/HallSetting")},t.prototype.onGetGameRoomListResp=function(e){this.data==e.game_info.game_type&&(this.game_math_info&&JSON.stringify(this.game_math_info)==JSON.stringify(e)||this.showRoomList(e))},t.prototype.onGetGameRecordDetailResp=function(e){l.UIManager.popup("prefabs/hall/GameRecord",e)},t.prototype.onLaunchShow=function(){var e=this;this.spine.clearTracks(),this.spine.setAnimation(0,"once",!1),this.spine.setCompleteListener(function(t,n){"once"===(t.animation?t.animation.name:"")&&(e.spine.clearTracks(),e.spine.setAnimation(1,"loop",!0))})},t.prototype.onEnable=function(){p.NetManager.protocolHall.sendGameRoomList(this.data)},t.prototype.start=function(){this.openAnimation(),l.UIManager.hideMarquee(),p.NetManager.protocolHall.game_math_info[this.data]&&this.showRoomList(p.NetManager.protocolHall.game_math_info[this.data])},t.prototype.showRoomList=function(e){this.game_math_info=e,this.getItem("label_title").string=e.game_info.game_name;for(var t=Math.ceil(1),n=1;n<t;n++){var o=cc.instantiate(this.page_item);o.active=!0,this.PageView.addPage(o)}var i=this.PageView.content;for(n=0;n<6;n++){var a=e.game_room_lists[n],s=Math.floor(n/6),c=i.children[s].children[n%6];if(!c)break;if(c.opacity=255,a){c.active=!0,c.getChildByName("room_name").getComponent(cc.Label).string=a.room_info;var l=c.getChildByName("pot_num").getComponent(cc.Label);a.bet_limit.length>0?l.string="\u9650\u7ea2: "+a.bet_limit[0]+"-"+a.bet_limit[1]:this.data==h.GameType.DZPK?l.string="\u5927\u76f2\u6ce8: "+a.room_base_note:l.string="\u5e95\u6ce8: "+a.room_base_note,c.getChildByName("permit_num").getComponent(cc.Label).string="\u51c6\u5165: "+a.room_min_entrance,c.getComponent(r.default).disabledScale(),c.getComponent(r.default).registerClick(this.onChooseGameRoom.bind(this,a))}else c.active=!1}this.PageView.enabled=t>1,this.PageView.indicator.node.active=t>1},t.prototype.onChooseGameRoom=function(e){var t=this,n=function(n,o){void 0===n&&(n=""),void 0===o&&(o=!1);var i=e.room_level;console.log("\u623f\u95f4\u7b49\u7ea7",e.room_level);var a={room_level:i,game_type:t.data};n&&(a.token2=JSON.stringify({carryGold:n,autoAddCarry:o})),p.NetManager.protocolHall.sendEnterRoom(a)};e.needChooseCarry?l.UIManager.popup("prefabs/game/set_bring_gold",{minBring:e.room_min_entrance,callback:n}):n()},i([f(sp.Skeleton)],t.prototype,"spine",void 0),i([f(cc.PageView)],t.prototype,"PageView",void 0),i([f(cc.Node)],t.prototype,"page_item",void 0),i([f(cc.Node)],t.prototype,"node_top",void 0),t=i([g],t)}(a.default);n.default=m,cc._RF.pop()},{"../Define":"Define","../common/UIHelper":"UIHelper","../manager/EventManager":"EventManager","../manager/NetManager":"NetManager","../manager/UIManager":"UIManager","../net/NetCmd":"NetCmd","./base/BaseView":"BaseView","./common/componet/ButtonEx":"ButtonEx"}],SelectList:[function(e,t,n){"use strict";cc._RF.push(t,"2a108LINZFOnLyjfTNkzg6u","SelectList");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../common/utils/Utils"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.select=null,t.select_label=null,t.arrow=null,t.select_item=null,t.menu_content=null,t.select_list=[],t.is_select=!1,t}return o(t,e),t.prototype.init=function(e,t,n){var o=this;this.select_list=e,this.menu_content.destroyAllChildren();for(var i=function(e){var i=cc.instantiate(r.select_item);i.getChildByName("Label").getComponent(cc.Label).string=r.select_list[e],a.default.removeClickEvent(i),a.default.addClickEventEND(i,function(){o.onSelectEvent(e,t,n)}),i.active=!0,r.menu_content.addChild(i)},r=this,s=0;s<this.select_list.length;s++)i(s);this.select_label.string=this.select_list[0],this.arrow.scaleY=1,this.menu_content.active=!1,a.default.removeClickEvent(this.select),a.default.addClickEventEND(this.select,function(){o.onShowMenuList()})},t.prototype.onShowMenuList=function(){this.menu_content.active=!this.is_select,this.arrow.scaleY=this.is_select?1:-1,this.is_select=!this.is_select},t.prototype.onSelectEvent=function(e,t,n){this.select_label.string=this.select_list[e],this.onShowMenuList(),t&&t(e,n)},t.prototype.onShowSelectLabel=function(e){this.select_label.string=this.select_list[e]},i([c(cc.Node)],t.prototype,"select",void 0),i([c(cc.Label)],t.prototype,"select_label",void 0),i([c(cc.Node)],t.prototype,"arrow",void 0),i([c(cc.Node)],t.prototype,"select_item",void 0),i([c(cc.Node)],t.prototype,"menu_content",void 0),t=i([s],t)}(cc.Component);n.default=l,cc._RF.pop()},{"../../common/utils/Utils":"Utils"}],SelectView:[function(e,t,n){"use strict";cc._RF.push(t,"2e26aa0QfNK6pqwQ0SmBekE","SelectView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./base/BaseView"),r=e("./common/componet/ButtonEx"),s=e("../manager/UIManager"),c=e("../manager/DataManager"),l={"http://47.115.142.130:9090/":"develop","http://10.10.10.211:9090/":"develop","http://10.10.10.137:8080/":"develop","http://10.10.10.136:8080/":"develop","http://10.10.10.210:9090/":"qipailexian1","http://120.24.204.198:9090/":"xsqplx1","http://cdn.socdn.cn:9090/":"xsqplx1","http://47.98.43.40:9090/":"xsqplx1","http://gameapi.jiasheshangmao.com:9090/":"xsqplx1"},p=cc._decorator,u=p.ccclass,h=p.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.layer_ip=null,t.layer_channel=null,t}return o(t,e),t.prototype.initComponent=function(){var e=this;this.getItem("btn_ip").registerClick(this.onClickIp.bind(this)),this.getItem("btn_channel").registerClick(this.onClickChannel.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this)),this.layer_ip.children.forEach(function(t){t.addComponent(r.default).registerClick(function(){var n=t.getChildByName("label_ip").getComponent(cc.Label).string;l[n]&&(e.getItem("input_channel").string=l[n]),e.getItem("input_ip").string=n,e.layer_ip.active=!1,e.getItem("btn_ip").node.angle=0})}),this.layer_channel.children.forEach(function(t){t.addComponent(r.default).registerClick(function(){var n=t.getChildByName("label_channel").getComponent(cc.Label).string;e.getItem("input_channel").string=n,e.layer_channel.active=!1,e.getItem("btn_channel").node.angle=0})}),this.getItem("input_ip").string=c.DataManager.httpUrl,this.getItem("input_channel").string=c.DataManager.channel},t.prototype.onClickIp=function(){this.layer_ip.active=!this.layer_ip.active,this.getItem("btn_ip").node.angle=this.layer_ip.active?180:0},t.prototype.onClickChannel=function(){this.layer_channel.active=!this.layer_channel.active,this.getItem("btn_channel").node.angle=this.layer_channel.active?180:0},t.prototype.onClickSure=function(){var e=this.getItem("input_ip").string,t=this.getItem("input_channel").string;""!=e&&""!=t?(c.DataManager.channel=t,c.DataManager.httpUrl=e,c.DataManager.saveIpChannel(),s.UIManager.open("prefabs/UpdateView")):s.UIManager.showTips("IP\u6216\u6e20\u9053\u53f7\u4e0d\u80fd\u4e3a\u7a7a!")},i([h(cc.Node)],t.prototype,"layer_ip",void 0),i([h(cc.Node)],t.prototype,"layer_channel",void 0),t=i([u],t)}(a.default);n.default=d,cc._RF.pop()},{"../manager/DataManager":"DataManager","../manager/UIManager":"UIManager","./base/BaseView":"BaseView","./common/componet/ButtonEx":"ButtonEx"}],SetBringGold:[function(e,t,n){"use strict";cc._RF.push(t,"c27dbLr/4FKvIMp5rnLTzjB","SetBringGold");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../manager/DataManager"),r=e("../../view/base/PopupView"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_close=null,t.btn_confirm=null,t.auto_add_node=null,t.auto_add_event_node=null,t.coin_label=null,t.min_label=null,t.max_label=null,t.num_progress=null,t.num_slider=null,t.num_label=null,t.confirmCall=null,t.coin=1e3,t.minBring=10,t.maxBring=500,t.viewType=0,t.initNum=null,t.initAuto=!1,t.gameGold=null,t}return o(t,e),t.prototype.start=function(){this.initView(this.data.minBring,this.data.callback)},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this)),this.getItem("btn_auto_add").registerClick(this.onClickAutoAdd.bind(this))},t.prototype.onClickSure=function(){this.confirmCall&&this.confirmCall(this.num_label.string,this.auto_add_node.active),this.close()},t.prototype.onClickAutoAdd=function(){this.auto_add_node.active=!this.auto_add_node.active},t.prototype.initView=function(e,t,n){void 0===n&&(n=!0),console.log(3244),this.confirmCall=t,this.minBring=parseFloat(e||0),this.auto_add_node.active=this.data.initAuto||this.initAuto,this.coin=this.gameGold||parseInt(100*(a.DataManager.userInfo.gold||0)+"")/100,this.maxBring=Math.floor(this.coin),this.coin_label.string=this.coin.toString(),this.min_label.string=this.minBring+"",this.max_label.string=this.maxBring+"",this.setview(this.data.initNum||this.minBring),this.maxBring<this.minBring&&(this.num_progress.progress=1,this.num_slider.progress=1,this.num_label.string=this.maxBring+"",this.num_label.node.x=this.num_progress.progress*this.num_progress.node.width-this.num_progress.node.width/2)},t.prototype.setview=function(e){e>this.maxBring&&(e=this.maxBring),e<this.minBring&&(e=this.minBring),this.num_label.string=e+"",this.num_progress.progress=(e-this.minBring)/(this.maxBring-this.minBring),this.num_slider.progress=(e-this.minBring)/(this.maxBring-this.minBring)},t.prototype.onChangeNumSlider=function(e){var t;this.num_progress.progress=e.progress;var n=this.maxBring;this.coin<this.maxBring&&(n=this.coin),t=Math.floor(this.minBring+e.progress*(n-this.minBring)),this.num_label.string=t+"",t>n&&(this.num_progress.progress=1,this.num_slider.progress=1,this.num_label.string=this.maxBring+"")},i([l(cc.Node)],t.prototype,"btn_close",void 0),i([l(cc.Node)],t.prototype,"btn_confirm",void 0),i([l(cc.Node)],t.prototype,"auto_add_node",void 0),i([l(cc.Node)],t.prototype,"auto_add_event_node",void 0),i([l(cc.Label)],t.prototype,"coin_label",void 0),i([l(cc.Label)],t.prototype,"min_label",void 0),i([l(cc.Label)],t.prototype,"max_label",void 0),i([l(cc.ProgressBar)],t.prototype,"num_progress",void 0),i([l(cc.Slider)],t.prototype,"num_slider",void 0),i([l(cc.Label)],t.prototype,"num_label",void 0),t=i([c],t)}(r.default);n.default=p,cc._RF.pop()},{"../../manager/DataManager":"DataManager","../../view/base/PopupView":"PopupView"}],SetPasswordPopup:[function(e,t,n){"use strict";cc._RF.push(t,"82c17tGELdCs4lZl6a2AfmA","SetPasswordPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/UIManager"),s=e("../../common/Text"),c=e("../../manager/NetManager"),l=e("../../manager/EventManager"),p=e("../../net/NetCmd"),u=cc._decorator,h=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this))},t.prototype.initEvent=function(){l.EventManager.on(this,p.ProtocolAccountCmd.SetLoginPasswordResp,this.onSetLoginPasswordResp.bind(this))},t.prototype.onSetLoginPasswordResp=function(e){e.ok?(r.UIManager.showTips(s.Tips.SetSuccess),this.close()):r.UIManager.showTips(s.Tips.SetFail)},t.prototype.onClickClose=function(){this.close()},t.prototype.onClickSure=function(){var e=this.getItem("input_password").string,t=this.getItem("input_confirm").string;!e||e.length<6||e.length>16?r.UIManager.showTips(s.Tips.InputPassword):e==t?c.NetManager.protocolAccount.sendSetLoginPassword(e):r.UIManager.showTips(s.Tips.PasswordNotSame)},t=i([h],t)}(a.default));n.default=d,cc._RF.pop()},{"../../common/Text":"Text","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],SetSafeCodePopup:[function(e,t,n){"use strict";cc._RF.push(t,"6abd0e8XRZIMZpko6sk0LYR","SetSafeCodePopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=e("../../manager/UIManager"),s=e("../../common/Text"),c=e("../../manager/NetManager"),l=e("../../manager/EventManager"),p=e("../../net/NetCmd"),u=cc._decorator,h=u.ccclass,d=(u.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_sure").registerClick(this.onClickSure.bind(this))},t.prototype.initEvent=function(){l.EventManager.on(this,p.ProtocolAccountCmd.SetSecurePasswordResp,this.onSetSecurePasswordResp.bind(this))},t.prototype.onClickClose=function(){this.close()},t.prototype.onClickSure=function(){var e=this.getItem("input_code").string,t=this.getItem("input_confirm").string;if(!e||e.length<6||e.length>16)r.UIManager.showTips(s.Tips.InputSafeCode);else{/^[\d]+$/.test(t)?e==t?c.NetManager.protocolAccount.sendSetSecurePassword(e):r.UIManager.showTips(s.Tips.SafeCodeNotSame):r.UIManager.showTips(s.Tips.InputFormat)}},t.prototype.onSetSecurePasswordResp=function(e){e.ok?(r.UIManager.showTips(s.Tips.SetSuccess),this.close(),this.data&&this.data(!0)):r.UIManager.showTips(s.Tips.SetFail)},t=i([h],t)}(a.default));n.default=d,cc._RF.pop()},{"../../common/Text":"Text","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],ShareBalance:[function(e,t,n){"use strict";cc._RF.push(t,"9f54bXucD1J06mfFI6qdNZ4","ShareBalance");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../manager/NetManager"),r=e("../../view/base/BaseView"),s=e("../../common/log/LogWrap"),c=e("../../manager/EventManager"),l=e("../../net/NetCmd"),p=cc._decorator,u=p.ccclass,h=(p.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_share").registerClick(this.onClickShare.bind(this)),this.getItem("btn_ready").registerClick(this.onClickReady.bind(this)),this.getItem("toggle_ready").isChecked=this.data&&this.data.isChecked||!1},t.prototype.initEvent=function(){var e=this;c.EventManager.on(this,l.ProtocolGameCmd.GameLoginResp,function(){e.close()})},t.prototype.start=function(){this.getItem("toggle_ready").node.active=null!=this.data.isChecked,this.showView()},t.prototype.showView=function(){var e=this;this.getItem("sp_result").setAnimation(0,"once",!1),this.getItem("sp_result").setCompleteListener(function(t){s.LogWrap.log("\u8fdb\u5165setCompleteListener\u5224\u65ad"),"once"===(t.animation?t.animation.name:"")&&(e.getItem("sp_result").setCompleteListener(null),s.LogWrap.log("\u64ad\u653e\u5b8c\u6bd5, \u5f00\u59cb\u5faa\u73af\u64ad\u653e\u53ca\u903b\u8f91\u5904\u7406"),e.getItem("sp_result").setAnimation(0,"loop",!0),e.getItem("bg").active=!0,e.data&&e.data.spCallBack&&e.data.spCallBack(),e.data&&e.data.isChecked&&e.onClickReady())})},t.prototype.onClickShare=function(){var e=parseFloat(this.data.winGold);a.NetManager.protocolChat.sendChatShareRoomReq(e.toFixed(2)+"")},t.prototype.onClickReady=function(){this.data&&this.data.btnCallback&&this.data.btnCallback(this.getItem("toggle_ready").isChecked),this.close()},t=i([u],t)}(r.default));n.default=h,cc._RF.pop()},{"../../common/log/LogWrap":"LogWrap","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../net/NetCmd":"NetCmd","../../view/base/BaseView":"BaseView"}],Socket:[function(e,t,n){"use strict";cc._RF.push(t,"d63fcdSF9xJ148qY16MXgDg","Socket"),Object.defineProperty(n,"__esModule",{value:!0});var o=e("../Define"),i=e("../common/log/LogWrap"),a=e("../manager/EventManager"),r=e("../manager/NetManager"),s=e("../manager/UIManager"),c=e("../common/Text"),l=function(){function e(e,t){this.webSocket=null,this.type=o.SocketType.Hall,this.isConnect=!1,this.url=null,this.intervalId=null,this.isNeedReconnect=!0,this.type=t,this.url=e,this.connect()}return e.prototype.connect=function(){this.url?(i.LogWrap.log("connect",this.url,this.type),this.webSocket=new WebSocket(this.url),this.webSocket.binaryType="arraybuffer",this.webSocket.onopen=this.onOpen.bind(this),this.webSocket.onmessage=this.onMessage.bind(this),this.webSocket.onerror=this.onError.bind(this),this.webSocket.onclose=this.onClose.bind(this)):i.LogWrap.warn("Socket","url is null!")},e.prototype.send=function(e,t){if(this.isConnect){i.LogWrap.log("readyState->",this.webSocket.readyState);var n=this.encode(e,t);this.webSocket.send(n)}else i.LogWrap.log("Socket","no connect!",this.type)},e.prototype.onOpen=function(e){i.LogWrap.log("Socket","connect onOpen!",this.type),this.isConnect=!0,s.UIManager.hideLoading(c.Tips.NetCloseWaiting),a.EventManager.emit(o.EventDef.SocketOpen,this.type)},e.prototype.onMessage=function(e){if(this.isConnect)if(cc.sys.WECHAT_GAME||cc.sys.isNative)this.decode(e.data);else{var t=new FileReader;t.readAsArrayBuffer(e.data),t.onload=function(e){this.decode(t.result)}.bind(this)}},e.prototype.onError=function(e){i.LogWrap.log("Socket","connect onError!",this.type),this.isConnect=!1},e.prototype.onClose=function(e){i.LogWrap.log("Socket","connect onClose!",this.isNeedReconnect,this.type),this.isConnect=!1,this.isNeedReconnect&&(s.UIManager.showLoading(c.Tips.NetCloseWaiting),this.close(),i.LogWrap.log("0.5\u79d2\u540e\u91cd\u8fde"),setTimeout(this.connect.bind(this),500)),this.isNeedReconnect=!0},e.prototype.decode=function(e){for(var t=new ArrayBuffer(e.byteLength-2),n=new DataView(e),o=new DataView(t),i=0;i<t.byteLength;i++)o.setUint8(i,n.getUint8(i+2));var a=n.getUint8(0)+"_"+n.getUint8(1);r.NetManager.handlerMessage(a,t)},e.prototype.encode=function(e,t){var n=new ArrayBuffer(t.byteLength+2),o=new DataView(t),i=new DataView(n),a=e.split("_");i.setUint8(0,parseInt(a[0])),i.setUint8(1,parseInt(a[1]));for(var r=0;r<t.byteLength;r++)i.setUint8(r+2,o.getUint8(r));return n},e.prototype.heart=function(){var e=0;this.type==o.SocketType.Hall?(e=cc.sys.now()-r.NetManager.protocolHall.heartTime,r.NetManager.protocolHall.sendHeart()):(e=cc.sys.now()-r.NetManager.protocolGameCommon.heartTime,r.NetManager.protocolGameCommon.sendHeart()),e>12e3&&(i.LogWrap.log("\u5fc3\u8df3\u8d85\u65f6",e,this.type),this.close(!0))},e.prototype.startHeart=function(){o.HeartEnabled&&(this.stopHeart(),this.type==o.SocketType.Hall?(r.NetManager.protocolHall.heartIndex=0,r.NetManager.protocolHall.heartTime=cc.sys.now()):(r.NetManager.protocolGameCommon.heartIndex=0,r.NetManager.protocolGameCommon.heartTime=cc.sys.now()),this.heart(),this.intervalId=setInterval(this.heart.bind(this),5e3))},e.prototype.stopHeart=function(){null!=this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null)},e.prototype.close=function(e){void 0===e&&(e=!1),i.LogWrap.log("Socket","close connect!"),this.isConnect=!1,this.isNeedReconnect=e,this.stopHeart(),this.webSocket&&(this.webSocket.close(),this.webSocket=null)},e.prototype.getType=function(){return this.type},e}();n.default=l,cc._RF.pop()},{"../Define":"Define","../common/Text":"Text","../common/log/LogWrap":"LogWrap","../manager/EventManager":"EventManager","../manager/NetManager":"NetManager","../manager/UIManager":"UIManager"}],SpineAdapter:[function(e,t,n){"use strict";cc._RF.push(t,"8d2b1mB3kROOaOyNfz55XwZ","SpineAdapter");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../../common/log/LogWrap"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.onLoad=function(){this.adapter()},t.prototype.start=function(){},t.prototype.onDestroy=function(){},t.prototype.onSizeChanged=function(){this.adapter()},t.prototype.adapter=function(){var e=cc.winSize.width/1280,t=cc.winSize.height/720;a.LogWrap.log("SpineAdapter",e,t),t>e&&(this.node.scale=t)},t=i([s],t)}(cc.Component));n.default=c,cc._RF.pop()},{"../../../common/log/LogWrap":"LogWrap"}],Test:[function(e,t,n){"use strict";cc._RF.push(t,"7f19bYk/7lIYoo10p2PoKnA","Test");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("./view/base/BaseView"),c=e("./common/Device"),l=e("./common/log/LogWrap"),p=e("./common/UIHelper"),u=cc._decorator,h=u.ccclass,d=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.webSocket=null,t.seq=0,t}return o(t,e),t.prototype.initComponent=function(){return a(this,void 0,void 0,function(){return r(this,function(e){return[2]})})},t.prototype.onOpen=function(e){l.LogWrap.log("Socket","connect onOpen!"),this.webSocket.send("game1")},t.prototype.onMessage=function(e){l.LogWrap.log("onMessage",e.data),parseInt(e.data)!=this.seq&&l.LogWrap.err("onMessage",e.data),this.seq++},t.prototype.onError=function(e){l.LogWrap.log("Socket","connect onError!")},t.prototype.onClose=function(e){l.LogWrap.log("Socket","connect onClose!")},t.prototype.onClickDivece=function(){var e=c.default.setClipBoard("\u963f\u8428\u5927\u5927\u963f\u65af\u987f");l.LogWrap.log("Test setClipBoard",e),l.LogWrap.log("Test getClipBoard",c.default.getClipBoard()),l.LogWrap.log("Test getDeviceId",c.default.getDeviceId()),l.LogWrap.log("Test getSystemVersion",c.default.getSystemVersion()),l.LogWrap.log("Test getAppVersion",c.default.getAppVersion()),l.LogWrap.log("Test getAppCode",c.default.getAppCode()),l.LogWrap.log("Test getModel",c.default.getModel())},t.prototype.onClickMap=function(){l.LogWrap.log("Test getLocation",c.default.getLocation())},t.prototype.onClickShot=function(){p.default.screenShotToLocal(this.node,"test.png")},t=i([h],t)}(s.default));n.default=d,cc._RF.pop()},{"./common/Device":"Device","./common/UIHelper":"UIHelper","./common/log/LogWrap":"LogWrap","./view/base/BaseView":"BaseView"}],Text:[function(e,t,n){"use strict";cc._RF.push(t,"5f316VO76RPDbILwJtgFH6V","Text"),Object.defineProperty(n,"__esModule",{value:!0}),n.ErrorCode={10101:"\u670d\u52a1\u5668\u65e0\u6cd5\u89e3\u6790",10102:"\u9a8c\u8bc1\u7801\u9519\u8bef",10104:"\u624b\u673a\u53f7\u672a\u88ab\u6ce8\u518c",10202:"\u7f51\u7edc\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55",10203:"\u7f51\u7edc\u8fde\u63a5\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55",10301:"\u539f\u5bc6\u7801\u9519\u8bef",10302:"\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4",10501:"\u6635\u79f0\u5df2\u88ab\u4f7f\u7528",10601:"\u539f\u5b89\u5168\u7801\u9519\u8bef",10602:"\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4",106:"\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25",11002:"\u91d1\u5e01\u4e0d\u8db3",11003:"token\u9519\u8bef"},n.Tips={InputPhone:"\u8bf7\u8f93\u516511\u4f4d\u624b\u673a\u53f7",InputAccount:"\u8bf7\u8f93\u51654-16\u4f4d\u8d26\u53f7",PhoneNumberError:"\u624b\u673a\u53f7\u7801\u6709\u8bef",SendCodeSuccess:"\u9a8c\u8bc1\u7801\u5df2\u53d1\u9001\u81f3\u60a8\u7684\u624b\u673a, \u8bf7\u6ce8\u610f\u67e5\u6536",SendCodeFail:"\u9a8c\u8bc1\u7801\u53d1\u9001\u5931\u8d25",InputCode:"\u8bf7\u8f93\u51656\u4f4d\u9a8c\u8bc1\u7801",InputSafeCode:"\u8bf7\u8f93\u51656-16\u4f4d\u5b89\u5168\u7801",InputPassword:"\u8bf7\u8f93\u51656-16\u4f4d\u5bc6\u7801",InputOldPassword:"\u8bf7\u8f93\u5165\u539f\u5bc6\u7801",InputNewOldNotSame:"\u65b0\u65e7\u5bc6\u7801\u4e0d\u80fd\u76f8\u540c",PasswordNotSame:"\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u4e0d\u4e00\u81f4,\u8bf7\u91cd\u65b0\u8f93\u5165",RetrievePasswordSuccess:"\u5bc6\u7801\u627e\u56de\u6210\u529f",RetrievePasswordFail:"\u5bc6\u7801\u627e\u56de\u5931\u8d25",SafeCodeNotSame:"\u4e24\u6b21\u8f93\u5165\u7684\u5b89\u5168\u7801\u4e0d\u4e00\u81f4",RetrieveSafeCodeSuccess:"\u5b89\u5168\u7801\u627e\u56de\u6210\u529f",RetrieveSafeCodeFail:"\u5b89\u5168\u7801\u627e\u56de\u5931\u8d25",InputFormat:"\u8bf7\u8f93\u5165\u7b26\u5408\u7684\u683c\u5f0f",ChangePhoneSuccess:"\u66f4\u6362\u624b\u673a\u6210\u529f",BindPhone:"\u7ed1\u5b9a\u624b\u673a\u540e\u624d\u53ef\u4f7f\u7528\u6b64\u529f\u80fd",BindAccount:"\u6e38\u5ba2\u4e0d\u5f00\u653e\u6b64\u529f\u80fd\uff0c\u8bf7\u5148\u7ed1\u5b9a\u624b\u673a\u5347\u7ea7\u6210\u6b63\u5f0f\u8d26\u6237",BindPhoneSuccess:"\u7ed1\u5b9a\u624b\u673a\u6210\u529f",BindPhoneFail:"\u7ed1\u5b9a\u624b\u673a\u5931\u8d25",BindPhoneShort:"\u8bf7\u5148\u7ed1\u5b9a\u624b\u673a\u54e6",BindPhoneAndSafeCode:"\u4e3a\u4e86\u60a8\u7684\u8d26\u6237\u5b89\u5168\uff0c\u8bf7\u5148\u7ed1\u5b9a\u624b\u673a\u5e76\u8bbe\u7f6e\u5b89\u5168\u7801",BindSafeCode:"\u8bf7\u8bbe\u7f6e\u5b89\u5168\u7801",UpdateFail:"\u66f4\u65b0\u5931\u8d25\u662f\u5426\u91cd\u542f\u540e\u518d\u8bd5\uff01",ReciveSuccess:"\u9886\u53d6\u6210\u529f",ReciveFail:"\u9886\u53d6\u5931\u8d25",NotActivity:"\u6682\u65e0\u6d3b\u52a8",NotPlayerId:"\u73a9\u5bb6ID\u4e0d\u5b58\u5728\uff0c\u8bf7\u91cd\u65b0\u8f93\u5165",SetSuccess:"\u8bbe\u7f6e\u6210\u529f",SetFail:"\u8bbe\u7f6e\u5931\u8d25",ModifySuccess:"\u4fee\u6539\u6210\u529f",ModifyFail:"\u4fee\u6539\u5931\u8d25",NotKeFu:"\u6682\u65e0\u5ba2\u670d",CopySuccess:"\u590d\u5236\u6210\u529f",RedPacketRainCD:"\u65f6\u95f4\u672a\u5230\u6216\u5df2\u62a2\u8fc7\uff0c\u8bf7\u7b49\u5f85\u4e0b\u6b21\u673a\u4f1a",RedPacketOver:"\u672c\u6b21\u62a2\u5305\u5df2\u7ed3\u675f, \u8bf7\u7b49\u5f85\u4e0b\u4e00\u6b21",ShakeGoldenGoose:"\u79ef\u5206\u4e0d\u8db3\uff0cVIP\u7b49\u7ea7\u8d8a\u9ad8\u6bcf\u65e5\u79ef\u5206\u8d8a\u591a\uff0c\u90e8\u5206\u6d3b\u52a8\u5145\u503c\u8d60\u9001",NetError:"\u7f51\u7edc\u5f02\u5e38\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",DownloadFail:"\u4e0b\u8f7d\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5",EnterRoomWaiting:"\u8fdb\u5165\u623f\u95f4\u4e2d...",NetCloseWaiting:"\u7f51\u7edc\u5df2\u7ecf\u65ad\u5f00...",RechargeWaiting:"\u8bf7\u6c42\u8ba2\u5355\u4e2d..."},cc._RF.pop()},{}],TimeClock:[function(e,t,n){"use strict";cc._RF.push(t,"b4d96hVlY9B5pO1ATgGerv1","TimeClock");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../manager/AudioManager"),r=e("../../common/Device"),s=cc._decorator,c=s.ccclass,l=s.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time_num=null,t._CountDown=0,t.playAudio=!1,t.vibrate=!1,t.exclusiveAudio=null,t.triggerTime=3,t}return o(t,e),t.prototype.setGameTimer=function(e){var t=null;if("object"==typeof e?(t=e.limit_time,null!=e.vibrate&&1==e.vibrate?this.vibrate=!0:this.vibrate=!1,null!=e.playAudio&&1==e.playAudio?this.playAudio=!0:this.playAudio=!1,null!=e.exclusiveAudio?this.exclusiveAudio=e.exclusiveAudio:this.exclusiveAudio=null,null!=e.triggerTime?this.triggerTime=e.triggerTime:this.triggerTime=3):t=e,this.node.active=!0,!t||t<=0)return console.log("error time***************!"),void(this.node.active=!1);this._CountDown=t,this.time_num.string=t,this.schedule(this.onUpdateTimer,1)},t.prototype.onUpdateTimer=function(){if(this._CountDown--,this._CountDown<=0)return this.onUpdateTimer&&this.unschedule(this.onUpdateTimer),void(this.node.active=!1);this._CountDown<=this.triggerTime&&(1==this.playAudio&&(null!=this.exclusiveAudio?a.AudioManager.playGameSFX(this.exclusiveAudio):a.AudioManager.playSFX("game_dingdong")),1==this.vibrate&&r.default.vibrate()),this.time_num.string=this._CountDown.toString()},t.prototype.pauseAudio=function(){this.playAudio=!1},t.prototype.pauseVibrate=function(){this.vibrate=!1},t.prototype.onKillTimer=function(){this._CountDown=0,this.node.active=!1,this.time_num.string="0",this.onUpdateTimer&&this.unschedule(this.onUpdateTimer)},i([l(cc.Label)],t.prototype,"time_num",void 0),t=i([c],t)}(cc.Component);n.default=p,cc._RF.pop()},{"../../common/Device":"Device","../../manager/AudioManager":"AudioManager"}],TipsPopup:[function(e,t,n){"use strict";cc._RF.push(t,"ef727QSgfJNiqx1vycg3j7O","TipsPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.initComponent=function(){if(this.getItem("btn_sure").registerClick(this.onClickSure.bind(this)),this.getItem("btn_cancel").registerClick(this.onClickCancel.bind(this)),this.getItem("btn_close").registerClick(this.onClickCancel.bind(this)),this.data&&this.data.status)switch(this.data.status){case 1:this.getItem("btn_cancel").node.parent.active=!1,this.getItem("btn_close").node.active=!1;break;case 2:this.getItem("btn_cancel").node.parent.active=!1}this.getItem("label_info").string=this.data.text,this.getItem("label_sure").string=this.data.btnText.sure,this.getItem("label_cancel").string=this.data.btnText.cancel},t.prototype.onClickSure=function(){this.node.destroy(),this.data&&this.data.callback&&this.data.callback(!0)},t.prototype.onClickCancel=function(){this.node.destroy(),this.data&&this.data.callback&&this.data.callback(!1)},t=i([s],t)}(a.default));n.default=c,cc._RF.pop()},{"../base/PopupView":"PopupView"}],TipsServerPopup:[function(e,t,n){"use strict";cc._RF.push(t,"f4704cayeJAUL6FGsYXYnzx","TipsServerPopup");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../common/Device"),r=e("../../common/utils/Utils"),s=e("../base/PopupView"),c=cc._decorator,l=c.ccclass,p=(c.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=300,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_sure").registerClick(this.onClickSure.bind(this)),this.getItem("btn_cancel").registerClick(this.onClickCancel.bind(this)),this.getItem("btn_close").registerClick(this.onClickClose.bind(this))},t.prototype.start=function(){this.data.left_open_time&&(this.time=this.data.left_open_time),this.updateTime(),this.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1),cc.callFunc(this.updateTime.bind(this)))))},t.prototype.updateTime=function(){var e=r.default.timeStrFormat(this.time);this.getItem("label_info").string="\u6e38\u620f\u6b63\u5728\u5347\u7ea7\u66f4\u65b0\u4e2d\uff0c\u5982\u6709\u7591\u95ee\u8bf7\u8054\u7cfb\u5ba2\u670d\n\u9884\u8ba1\u66f4\u65b0\u65f6\u95f4\uff1a"+e,this.time-=1,this.time<-1&&cc.game.restart()},t.prototype.onClickSure=function(){cc.game.restart()},t.prototype.onClickCancel=function(){a.default.openUrl(this.data.serviceLink)},t.prototype.onClickClose=function(){cc.game.end()},t=i([l],t)}(s.default));n.default=p,cc._RF.pop()},{"../../common/Device":"Device","../../common/utils/Utils":"Utils","../base/PopupView":"PopupView"}],UIHelper:[function(e,t,n){"use strict";cc._RF.push(t,"e4dacMeOmNLK6+VRSAwgO7m","UIHelper");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("../view/common/componet/ButtonEx"),s=e("../manager/ResManager"),c=e("./log/LogWrap"),l=e("./Device"),p=e("../Define"),u=e("../manager/DataManager"),h=e("../manager/UIManager"),d=e("./Text"),g=cc._decorator,f=g.ccclass,m=(g.property,{btn_:r.default,label_:cc.Label,input_:cc.EditBox,toggle_:cc.Toggle,bar_:cc.ProgressBar,sp_:sp.Skeleton,page_:cc.PageView,slider_:cc.Slider,scroll_:cc.ScrollView}),_=function(){function e(){}var t;return t=e,e.parseItem=function(e){var t=e.name;for(var n in m){if(0==t.indexOf(n)){var o=e.getComponent(m[n]);if(o)return o;switch(n){case"btn_":(o=e.getComponent(cc.Button))||(o=e.addComponent(m[n]));break;default:o=e.addComponent(m[n])}return o}}return e},e.loadItem=function(e){var n={},o=function(e){e.children.forEach(function(e){n[e.name]=t.parseItem(e),o(e)})};return o(e),n},e.loadHead=function(e,t,n){return i(this,void 0,void 0,function(){var o,i;return a(this,function(a){switch(a.label){case 0:return cc.sys.isNative?(o=jsb.fileUtils.getWritablePath()+n+".png",jsb.fileUtils.isFileExist(o)?[4,s.ResManager.loadAsync(o)]:[3,2]):[3,3];case 1:return i=a.sent(),t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(i),[3,2];case 2:return[3,4];case 3:cc.loader.load({url:e,type:"png"},function(e,n){e?cc.log(e):cc.isValid(t)&&(t.getComponent(cc.Sprite).spriteFrame=new cc.SpriteFrame(n))}),a.label=4;case 4:return[2]}})})},e.setHeadIcon=function(e,t){return i(this,void 0,void 0,function(){var n,o,i,r;return a(this,function(a){switch(a.label){case 0:return n=parseInt(e)||1,o="",9999==n?i="system_head":(o=n>200?"girl/":"boy/",(i=n>200?n-200:n)>14&&(i=1)),[4,s.ResManager.loadResAsync("view/icon_head/"+o+i,cc.SpriteFrame,!1)];case 1:return r=a.sent(),cc.isValid(t)&&(t.getComponent(cc.Sprite).spriteFrame=r),[2]}})})},e.setCircleHeadIcon=function(e,t){return i(this,void 0,void 0,function(){var n,o,i,r;return a(this,function(a){switch(a.label){case 0:return n=parseInt(e)||1,o="",9999==n?i="img_xitongzhuang":(o=n>200?"nv_":"nan_",(i=n>200?n-200:n)>14&&(i=1)),[4,s.ResManager.loadResAsync("view/icon_head_circle/"+o+i,cc.SpriteFrame,!1)];case 1:return r=a.sent(),cc.isValid(t)&&(t.getComponent(cc.Sprite).spriteFrame=r),[2]}})})},e.setHeadFrame=function(e,t){return i(this,void 0,void 0,function(){var n;return a(this,function(o){switch(o.label){case 0:return[4,s.ResManager.loadResAsync("view/common/img_touxiangkuang_v"+e,cc.SpriteFrame,!1)];case 1:return n=o.sent(),cc.isValid(t)&&(t.getComponent(cc.Sprite).spriteFrame=n),[2]}})})},e.setVipLevel=function(e,t){return i(this,void 0,void 0,function(){var n;return a(this,function(o){switch(o.label){case 0:return n=null,u.DataManager.isTourist()?[4,s.ResManager.loadResAsync("view/common/img_youke",cc.SpriteFrame,!1)]:[3,2];case 1:return n=o.sent(),[3,4];case 2:return[4,s.ResManager.loadResAsync("view/common/img_vip_v"+e,cc.SpriteFrame,!1)];case 3:n=o.sent(),o.label=4;case 4:return cc.isValid(t)&&(t.getComponent(cc.Sprite).spriteFrame=n),[2]}})})},e.screenShot=function(e,t,n,o){if(void 0===n&&(n=!0),cc.sys.isNative){var i=cc.winSize,a=jsb.fileUtils.getWritablePath()+t;c.LogWrap.log("screenShot",a),jsb.fileUtils.isFileExist(a)&&jsb.fileUtils.removeFile(a);var r=e.getComponent(cc.Camera);r||(r=e.addComponent(cc.Camera)),n||(i=cc.size(e.width,e.height),r.alignWithScreen=!1,r.orthoSize=100);var s=new cc.RenderTexture;s.initWithSize(Math.floor(i.width),Math.floor(i.height),gfx.RB_FMT_S8),r.targetTexture=s,r.render(null);var l=s.readPixels();l=function(e,t,n){for(var o=new Uint8Array(t*n*4),i=4*t,a=0;a<n;a++)for(var r=(n-1-a)*t*4,s=a*t*4,c=0;c<i;c++)o[s+c]=e[r+c];return o}(l,i.width,i.height);var p=jsb.saveImageData(l,i.width,i.height,a);p?c.LogWrap.log("save success"):c.LogWrap.log("save fail"),o&&o(p,a),e.removeComponent(cc.Camera)}},e.screenShotToLocal=function(e,n,o,i){void 0===o&&(o=!0),l.default.checkSelfPermission(p.PhonePermission.WriteExternalStotage)?t.screenShot(e,n,o,function(e,t){e&&l.default.saveTextureToLocal(t),i&&i(e,t)}):l.default.requestPermission(p.PhonePermission.WriteExternalStotage)},e.checkBindPhone=function(e,t,n){return void 0===t&&(t=d.Tips.BindPhone),void 0===n&&(n="prefabs/account/BindPhoneNum"),!!u.DataManager.userSafeInfo.has_bind_phone||(h.UIManager.showTipsPopup(t,function(t){t&&h.UIManager.popup(n,e)}),!1)},e.checkTourist=function(e,t,n){return void 0===t&&(t=d.Tips.BindAccount),void 0===n&&(n="prefabs/account/BindPhoneNum"),!u.DataManager.isTourist()||(h.UIManager.showTipsPopup(t,function(t){t&&h.UIManager.popup(n,e)}),!1)},e.checkBindSafeCode=function(e,t){return void 0===t&&(t=d.Tips.BindSafeCode),!!u.DataManager.userSafeInfo.has_safe_password||(h.UIManager.showTipsPopup(t,function(t){t&&h.UIManager.popup("prefabs/account/SetSafeCodePopup",e)}),!1)},e=t=o([f],e)}();n.default=_,cc._RF.pop()},{"../Define":"Define","../manager/DataManager":"DataManager","../manager/ResManager":"ResManager","../manager/UIManager":"UIManager","../view/common/componet/ButtonEx":"ButtonEx","./Device":"Device","./Text":"Text","./log/LogWrap":"LogWrap"}],UIManager:[function(e,t,n){"use strict";cc._RF.push(t,"05e07jMiS5Ku6MndyZkmyuG","UIManager");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var r=e("./ResManager"),s=e("../view/base/BaseView"),c=e("../common/log/LogWrap"),l=e("../view/common/TipsPopup"),p=e("../view/common/componet/ButtonEx"),u=e("./DataManager"),h=cc._decorator,d=h.ccclass,g=(h.property,function(){function e(){this.root=null,this.node_loading=null,this.node_marquee=null,this.viewName="",this.viewPath="",this.loadings={},this.popupOpenEnabled=!0}var t;return t=e,e.prototype.init=function(e){this.root=e,r.ResManager.loadResAsync("prefabs/common/Tips",cc.Prefab,!1),r.ResManager.loadResAsync("prefabs/common/TipsPopup",cc.Prefab,!1),r.ResManager.loadResAsync("prefabs/common/Marquee",cc.Prefab,!1),r.ResManager.loadResAsync("prefabs/common/LoadingView",cc.Prefab,!1)},e.prototype.isInGameView=function(){return-1!=this.viewName.indexOf("GameView")},e.prototype.open=function(e,t,n){return i(this,void 0,void 0,function(){var o,i,l;return a(this,function(a){switch(a.label){case 0:return c.LogWrap.log("open",e),this.viewPath==e?(c.LogWrap.log("already open",e),[2]):(this.popupOpenEnabled=!1,[4,r.ResManager.loadResAsync(e,cc.Prefab)]);case 1:return o=a.sent(),(i=cc.instantiate(o))&&(this.viewName=i.name,this.viewPath=e,null!=t&&i.getComponent(s.default).initData(t),this.root.node_view.addChild(i),(l=i.getComponent(cc.Widget))&&l.updateAlignment()),this.root.node_view.children.forEach(function(e){e!=i&&cc.isValid(e)&&e.destroy()}),this.root.node_popup.destroyAllChildren(),r.ResManager.releasePrefab(),c.LogWrap.log("open finished",e),this.popupOpenEnabled=!0,n&&n(),[2,i]}})})},e.prototype.popup=function(e,t){return i(this,void 0,void 0,function(){var n,o,i,l,p,u;return a(this,function(a){switch(a.label){case 0:return this.popupOpenEnabled?[4,r.ResManager.loadResAsync(e,cc.Prefab)]:(c.LogWrap.log("can't popup",e),[2,null]);case 1:for(n=a.sent(),o=e.replace(/\//g,"."),i=0,l=this.root.node_popup.children;i<l.length;i++)if(p=l[i],o==p.name)return c.LogWrap.log("already popup",e),[2];return c.LogWrap.log("popup",e),(u=cc.instantiate(n))&&(u.name=o,null!=t&&u.getComponent(s.default).initData(t),this.root.node_popup.addChild(u)),[2,u]}})})},e.prototype.openGame=function(e){return i(this,void 0,void 0,function(){var t,n;return a(this,function(o){switch(o.label){case 0:return t=u.DataManager.getGameName(u.DataManager.gameType),n="game/"+t+"/"+t.toUpperCase()+"GameView",this.viewPath==n?(c.LogWrap.log("already open game",n),[2]):(this.showMarquee(),[4,this.open(n,e)]);case 1:return o.sent(),[2]}})})},e.prototype.showLoading=function(e,t,n,o){return void 0===t&&(t=!1),void 0===n&&(n=null),void 0===o&&(o="\u53d6  \u6d88"),i(this,void 0,void 0,function(){var i,s,l,u,h,d=this;return a(this,function(a){switch(a.label){case 0:return c.LogWrap.log("UIManager","showLoading",e),this.loadings[e]=!0,this.node_loading?[3,2]:[4,r.ResManager.loadResAsync("prefabs/common/LoadingView",cc.Prefab,!1)];case 1:i=a.sent(),this.node_loading=cc.instantiate(i),this.root.node_tips.addChild(this.node_loading),a.label=2;case 2:return 0==Object.keys(this.loadings).length?(this.hideLoading(),[2]):(this.node_loading&&(this.node_loading.active=!0,s=this.node_loading.getComponentsInChildren(cc.Label),(l=s[0])&&(l.string=e),(u=s[1])&&(u.string=o),h=this.node_loading.getComponentInChildren(p.default),t?(h.node.active=!0,h.registerClick(function(){n&&n(),d.hideLoading(e)})):h.node.active=!1),[2])}})})},e.prototype.hideLoading=function(e){if(c.LogWrap.log("UIManager","hideLoading",e),e){if(this.loadings[e]&&delete this.loadings[e],Object.keys(this.loadings).length>0)return void c.LogWrap.log(Object.keys(this.loadings).length)}else this.loadings={};cc.isValid(this.node_loading)?(c.LogWrap.log("UIManager","hideLoading ok"),this.node_loading.active=!1):c.LogWrap.log("UIManager","hideLoading vaild",e)},e.prototype.showTips=function(e){return i(this,void 0,void 0,function(){var t,n;return a(this,function(o){switch(o.label){case 0:return c.LogWrap.log("showTips->",e),[4,r.ResManager.loadResAsync("prefabs/common/Tips",cc.Prefab,!1)];case 1:return t=o.sent(),(n=cc.instantiate(t))&&(n.getComponentInChildren(cc.Label).string=e,this.root.node_tips.addChild(n)),[2]}})})},e.prototype.showTipsPopup=function(e,t,n,o){return void 0===n&&(n=2),void 0===o&&(o={sure:"\u786e   \u8ba4",cancel:"\u53d6   \u6d88"}),i(this,void 0,void 0,function(){var i,s;return a(this,function(a){switch(a.label){case 0:return c.LogWrap.log("showTipsPopup->",e),[4,r.ResManager.loadResAsync("prefabs/common/TipsPopup",cc.Prefab,!1)];case 1:return i=a.sent(),(s=cc.instantiate(i))&&(c.LogWrap.log("showTipsPopup finished->",e),s.getComponent(l.default).initData({text:e,callback:t,status:n,btnText:o}),this.root.node_tips.addChild(s)),[2]}})})},e.prototype.showMarquee=function(){return i(this,void 0,void 0,function(){var e;return a(this,function(t){switch(t.label){case 0:return this.node_marquee?[3,2]:[4,r.ResManager.loadResAsync("prefabs/common/Marquee",cc.Prefab,!1)];case 1:e=t.sent(),this.node_marquee=cc.instantiate(e),this.root.node_tips.addChild(this.node_marquee),t.label=2;case 2:return this.node_marquee.active=!0,[2]}})})},e.prototype.hideMarquee=function(){cc.isValid(this.node_marquee)&&(c.LogWrap.log("UIManager","hideMarquee"),this.node_marquee.active=!1)},e.instance=new t,e=t=o([d],e)}());n.UIManager=g.instance,cc._RF.pop()},{"../common/log/LogWrap":"LogWrap","../view/base/BaseView":"BaseView","../view/common/TipsPopup":"TipsPopup","../view/common/componet/ButtonEx":"ButtonEx","./DataManager":"DataManager","./ResManager":"ResManager"}],UpBankerList:[function(e,t,n){"use strict";cc._RF.push(t,"c87cf1a4NdDMJwV+z08kPuw","UpBankerList");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../view/base/PopupView"),r=e("../../manager/EventManager"),s=e("../../net/NetCmd"),c=e("../../view/common/List"),l=e("../../manager/NetManager"),p=e("../../common/log/LogWrap"),u=e("../../manager/UIManager"),h=e("../../common/utils/Utils"),d=cc._decorator,g=d.ccclass,f=d.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scrollview=null,t.Mask=null,t.progress_num=null,t.MinNum=1e3,t.MaxNum=9999,t.progress=0,t.maxProgressWidth=554,t.upBankerListInfo=[],t.bankerState=null,t.bringGold=0,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_upBanker").registerClick(this.onClickUpBanker.bind(this)),this.getItem("btn_downBanker").registerClick(this.onClickDownBanker.bind(this)),this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("slider_bring").node.on("slide",this.onSliderEvent,this)},t.prototype.initEvent=function(){r.EventManager.on(this,s.ProtocolGameCmd.LookForBankerListRes,this.onLookForBankerList.bind(this)),r.EventManager.on(this,s.ProtocolGameCmd.BankerChangeNotify,this.onSubBankerChange.bind(this)),r.EventManager.on(this,s.ProtocolGameCmd.AskForGrabBankerRes,this.onSubAskForGrabBanker.bind(this)),r.EventManager.on(this,s.ProtocolGameCmd.AdJustUpBankerNotify,this.onAdJustUpBankerNotify.bind(this))},t.prototype.start=function(){this.saveData(),this.showUpBankerList(),this.showSlider(),this.showBtn()},t.prototype.saveData=function(){p.LogWrap.log("\u6253\u5f00\u6216\u66f4\u65b0\u4e0a\u5e84\u5217\u8868"),this.upBankerListInfo=this.data.bank_list_item,this.MinNum=this.data.minBringGold,this.MaxNum=this.data.maxBringGold,this.bankerState=this.data.up_banker_state},t.prototype.onLookForBankerList=function(e){this.data=e,this.saveData(),this.showUpBankerList(),this.showBtn()},t.prototype.onSubBankerChange=function(){l.NetManager.protocolGameCommon.sendLookForBankerListReq()},t.prototype.onSubAskForGrabBanker=function(e){1==e.code&&(this.getItem("btn_downBanker").node.active=!0,this.getItem("btn_upBanker").node.active=!1,u.UIManager.showTips("\u7533\u8bf7\u4e0a\u5e84\u6210\u529f"),l.NetManager.protocolGameCommon.sendLookForBankerListReq())},t.prototype.onAdJustUpBankerNotify=function(e){0==e.code&&this.close(!1)},t.prototype.showBtn=function(){this.getItem("btn_downBanker").node.active=!1,this.getItem("btn_upBanker").node.active=!1,p.LogWrap.log("\u6211\u7684\u4e0a\u5e84\u72b6\u6001\u4e3a",this.bankerState),1==this.bankerState?this.getItem("btn_upBanker").node.active=!0:this.getItem("btn_downBanker").node.active=!0},t.prototype.showSlider=function(){this.getItem("slider_bring").progress=0,this.progress=0,this.Mask.width=this.maxProgressWidth*this.progress,this.bringGold=this.MinNum,this.progress_num.string=h.default.getFormatStrGold(this.MinNum)},t.prototype.showUpBankerList=function(){this.scrollview.numItems=this.upBankerListInfo.length,this.getItem("label_info").string="\u8bf4\u660e: \u7ed3\u7b97\u540e\u91d1\u5e01 <"+this.data.downBankGold+" \u81ea\u52a8\u4e0b\u5e84,\u5019\u9009\u5e84\u5bb6\u643a\u5e26\u91d1\u5e01 < \u6700\u5c0f\u643a\u5e26\u65f6\u81ea\u52a8\u4e0b\u5e84\u3002",this.getItem("label_min_bring").string="\u6700\u5c0f\u643a\u5e26 : "+h.default.getFormatStrGold(this.data.minBringGold),this.getItem("label_max_bring").string="\u6700\u5927\u643a\u5e26 : "+h.default.getFormatStrGold(this.data.maxBringGold)},t.prototype.onListVRender=function(e,t){var n=e.getChildByName("icon_banker"),o=e.getChildByName("label_name").getComponent(cc.Label),i=e.getChildByName("label_money").getComponent(cc.Label),a=e.getChildByName("list_num").getComponent(cc.Label);n.active=0==t,a.node.active=0!=t,a.string=t+"";var r=h.default.getSubStringLengTxt(this.upBankerListInfo[t].nick_name)||h.default.getReplaceStrToStar(this.upBankerListInfo[t].player_id);o.string=r,i.string=this.upBankerListInfo[t].gold},t.prototype.onClickClose=function(){this.close(!0)},t.prototype.onClickUpBanker=function(){var e=this.bringGold;l.NetManager.protocolGameCommon.sendAskForGrabBankerReq(e)},t.prototype.onClickDownBanker=function(){this.close(!0),l.NetManager.protocolGameCommon.sendAskForDropBankerReq()},t.prototype.onSliderEvent=function(e){var t=this.MinNum+(this.MaxNum-this.MinNum)*e.progress,n=Math.round(t);e.progress=(n-this.MinNum)/(this.MaxNum-this.MinNum),this.progress=e.progress,this.bringGold=n,this.progress_num.string=h.default.getFormatStrGold(n),this.Mask.width=this.maxProgressWidth*this.progress},i([f(c.default)],t.prototype,"scrollview",void 0),i([f(cc.Node)],t.prototype,"Mask",void 0),i([f(cc.Label)],t.prototype,"progress_num",void 0),t=i([g],t)}(a.default);n.default=m,cc._RF.pop()},{"../../common/log/LogWrap":"LogWrap","../../common/utils/Utils":"Utils","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../../view/base/PopupView":"PopupView","../../view/common/List":"List"}],UpBankerView:[function(e,t,n){"use strict";cc._RF.push(t,"704916fW9pPKa36ua9DvM2B","UpBankerView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../../view/base/BaseView"),c=e("../../manager/NetManager"),l=e("../../common/UIHelper"),p=e("../../common/utils/Utils"),u=e("../../manager/ResManager"),h=e("../../manager/EventManager"),d=e("../../net/NetCmd"),g=e("../../manager/DataManager"),f=e("../../manager/UIManager"),m=e("../../common/log/LogWrap"),_=e("../../Define"),y=cc._decorator,v=y.ccclass,b=(y.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.UpBankerList=null,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_seekList").registerClick(this.onClickSeek.bind(this)),this.getItem("btn_upBanker").registerClick(this.onClickUpBanker.bind(this)),this.getItem("btn_downBanker").registerClick(this.onClickDownBanker.bind(this)),this.getItem("btn_invite").registerClick(this.onClickInvite.bind(this)),this.getItem("btn_club_invite").registerClick(this.onClickClubInvite.bind(this))},t.prototype.initEvent=function(){h.EventManager.on(this,d.ProtocolGameCmd.AskForGrabBankerRes,this.onSubAskForGrabBanker.bind(this)),h.EventManager.on(this,d.ProtocolGameCmd.AskForDropBankerRes,this.onSubAskForDropBanker.bind(this)),h.EventManager.on(this,d.ProtocolGameCmd.LookForBankerListRes,this.onSubLookForBankerList.bind(this)),h.EventManager.on(this,d.ProtocolGameCmd.BankerChangeNotify,this.onBankerChangeNotify.bind(this)),h.EventManager.on(this,d.ProtocolGameCmd.UpBankerStateRes,this.onSubUpBankerState.bind(this)),h.EventManager.on(this,d.ProtocolGameCmd.UpBankerInfoNotify,this.onUpBankerInfoNotify.bind(this)),h.EventManager.on(this,d.ProtocolGameCmd.AdJustUpBankerNotify,this.onAdJustUpBankerNotify.bind(this)),h.EventManager.on(this,d.GameCommonEvent.UpdateAllBet,this.onUpdateAllBet.bind(this))},t.prototype.start=function(){this.resetBtn()},t.prototype.resetBtn=function(){this.getItem("btn_upBanker").node.active=!1,this.getItem("btn_seekList").node.active=!1,this.getItem("btn_downBanker").node.active=!1,this.getItem("btn_invite").node.active=!1,this.getItem("btn_club_invite").node.active=!1,this.getItem("node_wait").active=!1},t.prototype.UpdateBankerInfo=function(e){var t=e.banker_info;this.setBankerInfo(t)},t.prototype.setBankerInfo=function(e){var t=p.default.getSubStringLengTxt(e.username)||p.default.getReplaceStrToStar(e.player_id);this.getItem("label_bankerName").string=t,this.setBankerGold(e.gold);var n=this.getItem("banker_head");l.default.setHeadIcon(e.headimg_id,n),this.setVipFrame(e.player_id,e.vip_level),this.getItem("banker_node").active=!0,g.DataManager.isFriendGame&&0==e.player_id&&(this.getItem("banker_node").active=!1)},t.prototype.setBankerGold=function(e){var t=p.default.getFormatGold(e);this.getItem("label_bankerGold").string=t},t.prototype.setVipFrame=function(e,t){return a(this,void 0,void 0,function(){var n,o;return r(this,function(i){switch(i.label){case 0:return n=t&&t||0,l.default.setHeadFrame(n,this.getItem("vip_frame")),0!=e?[3,2]:[4,u.ResManager.loadResAsync("view/common/img_vip_v"+n,cc.SpriteFrame)];case 1:return(o=i.sent())&&this.getItem("vip_icon")&&(this.getItem("vip_icon").getComponent(cc.Sprite).spriteFrame=o),[3,3];case 2:l.default.setVipLevel(n,this.getItem("vip_icon")),i.label=3;case 3:return[2]}})})},t.prototype.onUpdateAllBet=function(e){var t="";t=e>=1e3&&e<1e4?(e/1e3).toFixed(2)+"K":e>=1e4?(e/1e4).toFixed(2)+"W":e,this.getItem("label_all_bet").string="\u603b\u4e0b\u6ce8 :"+t},t.prototype.onUpBankerInfoNotify=function(e){m.LogWrap.log("%c\u66f4\u65b0\u5e84\u5bb6\u4fe1\u606f","color:red;font-size:26px",e),this.UpdateBankerInfo(e)},t.prototype.onSubAskForGrabBanker=function(e){1==e.code?(this.resetBtn(),this.getItem("btn_seekList").node.active=!0):f.UIManager.showTips(e.err_msg)},t.prototype.onSubAskForDropBanker=function(e){1==e.code?(this.resetBtn(),this.getItem("node_wait").active=!0,g.DataManager.roomType==_.RoomType.Match&&(this.getItem("btn_invite").node.active=!0),g.DataManager.roomType==_.RoomType.Club&&(this.getItem("btn_club_invite").node.active=!0)):2==e.code&&(this.resetBtn(),this.getItem("btn_upBanker").node.active=!0),f.UIManager.showTips(e.msg)},t.prototype.onSubLookForBankerList=function(e){return a(this,void 0,void 0,function(){var t;return r(this,function(n){switch(n.label){case 0:return g.DataManager.userInfo.gold<e.minBringGold?(f.UIManager.showTips("\u91d1\u5e01\u2265"+e.minBringGold+"\u624d\u80fd\u7533\u8bf7\u4e0a\u5e84"),[2]):g.DataManager.userInfo.vip_level<e.minVipLevel?(f.UIManager.showTips("VIP\u7b49\u7ea7\u2265"+e.minVipLevel+"\u624d\u80fd\u7533\u8bf7\u4e0a\u5e84"),[2]):!1!==cc.isValid(this.UpBankerList)?[3,2]:(t=this,[4,f.UIManager.popup("prefabs/game/UpBankerList",e)]);case 1:t.UpBankerList=n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.onBankerChangeNotify=function(e){var t=e.change_type;if(e.player_id==g.DataManager.userInfo.userid){this.resetBtn(),1==t?(g.DataManager.roomType==_.RoomType.Match&&(this.getItem("btn_invite").node.active=!0),g.DataManager.roomType==_.RoomType.Club&&(this.getItem("btn_club_invite").node.active=!0),this.getItem("btn_downBanker").node.active=!0):2==t&&(this.getItem("btn_upBanker").node.active=!0);var n=e.gold;g.DataManager.userInfo.gold=n,h.EventManager.emit(d.GameCommonEvent.UpdateUserScore,e)}},t.prototype.onAdJustUpBankerNotify=function(e){m.LogWrap.log("%c\u4e0a\u5e84\u529f\u80fd\u8c03\u6574\u63a8\u9001!!!!!!!!!!!!!!!!","color:red;font-size:26px",e),0==e.code?this.resetBtn():1==e.code&&(this.resetBtn(),this.getItem("btn_upBanker").node.active=!0),f.UIManager.showTips(e.msg)},t.prototype.onSubUpBankerState=function(e){this.resetBtn();var t=e.up_banker_state;m.LogWrap.log("\u4e0a\u5e84\u72b6\u6001 1\u672a\u7533\u8bf7\u4e0a\u5e84 2\u5019\u9009\u72b6\u6001 3\u5e84\u5bb6\u72b6\u6001  4\u7b49\u5f85\u4e0b\u5e84"),m.LogWrap.log("\u6211\u7684\u4e0a\u5e84\u72b6\u6001\u4e3a",t),1==t?this.getItem("btn_upBanker").node.active=!0:2==t?this.getItem("btn_seekList").node.active=!0:3==t?(g.DataManager.roomType==_.RoomType.Match&&(this.getItem("btn_invite").node.active=!0),g.DataManager.roomType==_.RoomType.Club&&(this.getItem("btn_club_invite").node.active=!0),this.getItem("btn_downBanker").node.active=!0):(g.DataManager.roomType==_.RoomType.Match&&(this.getItem("btn_invite").node.active=!0),g.DataManager.roomType==_.RoomType.Club&&(this.getItem("btn_club_invite").node.active=!0),this.getItem("node_wait").active=!0)},t.prototype.onClickSeek=function(){c.NetManager.protocolGameCommon.sendLookForBankerListReq()},t.prototype.onClickUpBanker=function(){c.NetManager.protocolGameCommon.sendLookForBankerListReq()},t.prototype.onClickDownBanker=function(){c.NetManager.protocolGameCommon.sendAskForDropBankerReq()},t.prototype.onClickInvite=function(){c.NetManager.protocolChat.sendChatRoomReq()},t.prototype.onClickClubInvite=function(){c.NetManager.protocolChat.sendClubRoomReq()},t=i([v],t)}(s.default));n.default=b,cc._RF.pop()},{"../../Define":"Define","../../common/UIHelper":"UIHelper","../../common/log/LogWrap":"LogWrap","../../common/utils/Utils":"Utils","../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/ResManager":"ResManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../../view/base/BaseView":"BaseView"}],UpdateManager:[function(e,t,n){"use strict";cc._RF.push(t,"57443gtnb9CpZBkDgWTLALg","UpdateManager");var o=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var i=e("./NetManager"),a=e("../Define"),r=e("./DataManager"),s=e("./EventManager"),c=e("./FileManager"),l=e("../common/log/LogWrap"),p=e("../common/Device"),u=e("./UIManager"),h=e("../net/NetCmd"),d=cc._decorator,g=d.ccclass,f=(d.property,function(){function e(){this.data=null,this.downloadingGames={}}var t;return t=e,e.prototype.checkUpdate=function(){a.UpdateEnabled?(this.data=r.DataManager.gameConfig,cc.sys.isMobile?this.updateApk():this.update("lobby"),"undefined"==typeof Tools||c.FileManager.tools||(c.FileManager.tools=new Tools,c.FileManager.tools.setCallBack(this.decompressFinish.bind(this),this.decompressError.bind(this)))):s.EventManager.emit(a.EventDef.HotUpdateFinish)},e.prototype.updateApk=function(){var e=this,t=cc.sys.os==cc.sys.OS_ANDROID?"android":"ios",n=this.data[t]&&this.data[t].version;if(n){var o=parseInt(n.replace(/\./g,"")),c=p.default.getAppVersion();o>parseInt(c.replace(/\./g,""))?i.NetManager.requestPostUrl(h.HttpCmd.GetGameVersion,{channel:r.DataManager.channel,user_id:r.DataManager.loginInfo&&r.DataManager.loginInfo.userid||0,type:cc.sys.os==cc.sys.OS_ANDROID?1e4:11e3,version:p.default.getAppVersion()},function(o,i){if("success"==o){var r=cc.sys.os==cc.sys.OS_ANDROID?"\u6709\u65b0\u7248\u672c\u9700\u8981\u66f4\u65b0\uff01":"\u6709\u65b0\u7248\u672c\u9700\u8981\u66f4\u65b0\uff0c\u70b9\u51fb\u786e\u5b9a\u8df3\u8f6c\u6d4f\u89c8\u5668\u91cd\u65b0\u4e0b\u8f7d\uff01";1==e.data[t].is_hot_update?u.UIManager.showTipsPopup(r,function(t){t?cc.sys.os==cc.sys.OS_IOS?p.default.openUrl(i.link):e.download("android",n,i.link):e.update("lobby")}):cc.sys.os==cc.sys.OS_IOS?u.UIManager.showTipsPopup(r,function(e){e?p.default.openUrl(i.link):s.EventManager.emit(a.EventDef.HotUpdateFail)}):e.download("android",n,i.link)}else s.EventManager.emit(a.EventDef.HotUpdateFail)}):this.update("lobby")}else this.update("lobby")},e.prototype.update=function(e){var t=this;if(a.UpdateEnabled){var n=this.data[e]&&this.data[e].version;if(n){var o=parseInt(n.replace(/\./g,"")),c="lobby"==e?parseInt(r.DataManager.version.replace(/\./g,"")):r.DataManager.getGameNumVersion(e);l.LogWrap.log("localVersion",c),o>c?i.NetManager.requestPostUrl(h.HttpCmd.GetGameVersion,{channel:r.DataManager.channel,user_id:r.DataManager.loginInfo&&r.DataManager.loginInfo.userid||0,type:"lobby"==e?12e3:this.data[e].gameType,version:"lobby"==e?r.DataManager.version:r.DataManager.getGameVersion(e)||"0",max_version:n},function(o,i){if("success"==o){var r=i.link;l.LogWrap.log("update url",r),r?t.download(e,n,r):s.EventManager.emit(a.EventDef.HotUpdateFail,e)}else s.EventManager.emit(a.EventDef.HotUpdateFail,e)}):s.EventManager.emit(a.EventDef.HotUpdateFinish)}else s.EventManager.emit(a.EventDef.HotUpdateFail,e)}else s.EventManager.emit(a.EventDef.HotUpdateFinish)},e.prototype.decompressFinish=function(e,t,n){"lobby"==t?s.EventManager.emit(a.EventDef.HotUpdateFinish,!0):(r.DataManager.saveGameVersion(t,n),jsb.fileUtils.isFileExist(e)&&jsb.fileUtils.removeFile(e),s.EventManager.emit(a.EventDef.HotUpdateFinish,t),this.downloadingGames[t]=!1,u.UIManager.showTips("\u6e38\u620f\u66f4\u65b0\u5b8c\u6210"))},e.prototype.decompressError=function(e){"lobby"==e?s.EventManager.emit(a.EventDef.HotUpdateFail,!0):s.EventManager.emit(a.EventDef.HotUpdateFail,e)},e.prototype.download=function(e,t,n){var o=jsb.fileUtils.getWritablePath(),i=e+".zip",l=-1!=n.indexOf(".apk");l&&(i=e+".apk");var h=0;(function(){"lobby"==e?s.EventManager.emit(a.EventDef.HotUpdateFinish,!0):(r.DataManager.saveGameVersion(e,t),jsb.fileUtils.isFileExist(o+i)&&jsb.fileUtils.removeFile(o+i),s.EventManager.emit(a.EventDef.HotUpdateFinish,e),this.downloadingGames[e]=!1,u.UIManager.showTips("\u6e38\u620f\u66f4\u65b0\u5b8c\u6210"))}).bind(this),function(){"lobby"==e?s.EventManager.emit(a.EventDef.HotUpdateFail,!0):s.EventManager.emit(a.EventDef.HotUpdateFail,e)}.bind(this);this.downloadingGames[e]=!0,c.FileManager.downloadFileEx(n,i,function(t,n,o,i){var r=n>1048576?(n/1024/1024).toFixed(2)+"MB/S":(n/1024).toFixed(2)+"KB/S",c=(h+=n)/i;s.EventManager.emit(a.EventDef.HotUpdateProgress,r,c,e)}.bind(this),function(t,n,o,i){s.EventManager.emit(a.EventDef.HotUpdateFail,e),this.downloadingGames[e]=!1}.bind(this),function(n){var h=this;s.EventManager.emit(a.EventDef.HotUpdateUnzip,e),setTimeout(function(){switch(e){case"android":if(l)return void p.default.installApk(o+i);var n=o+t+".apk";0==p.default.patchApk(n,o+i)?p.default.installApk(n):s.EventManager.emit(a.EventDef.HotUpdateFail,e);break;case"lobby":"undefined"!=typeof Tools?c.FileManager.syncUnzipGame(o+i,e,t):(c.FileManager.unzip(o+i,o),s.EventManager.emit(a.EventDef.HotUpdateFinish,!0));break;default:"undefined"!=typeof Tools?c.FileManager.syncUnzipGame(o+i,e,t):(c.FileManager.unzip(o+i,o),r.DataManager.saveGameVersion(e,t),jsb.fileUtils.isFileExist(o+i)&&jsb.fileUtils.removeFile(o+i),s.EventManager.emit(a.EventDef.HotUpdateFinish,e),h.downloadingGames[e]=!1,u.UIManager.showTips("\u6e38\u620f\u66f4\u65b0\u5b8c\u6210"))}},100)}.bind(this))},e.prototype.isNeedUpdate=function(e){if(!a.UpdateEnabled)return!1;var t=this.data[e]&&this.data[e].version;return!!t&&parseInt(t.replace(/\./g,""))>r.DataManager.getGameNumVersion(e)},e.prototype.isInstall=function(e){return!a.UpdateEnabled||null!=r.DataManager.getGameVersion(e)},e.prototype.isDowlaoding=function(e){return this.downloadingGames[e]},e.instance=new t,e=t=o([g],e)}());n.UpdateManager=f.instance,cc._RF.pop()},{"../Define":"Define","../common/Device":"Device","../common/log/LogWrap":"LogWrap","../net/NetCmd":"NetCmd","./DataManager":"DataManager","./EventManager":"EventManager","./FileManager":"FileManager","./NetManager":"NetManager","./UIManager":"UIManager"}],UpdateView:[function(e,t,n){"use strict";cc._RF.push(t,"768f2JPzh9KnYjZpAUJRoep","UpdateView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("./base/BaseView"),r=e("../manager/NetManager"),s=e("../net/NetCmd"),c=e("../Define"),l=e("../manager/UIManager"),p=e("../common/log/LogWrap"),u=e("../manager/DataManager"),h=e("../manager/EventManager"),d=e("../manager/UpdateManager"),g=e("../common/Text"),f=(e("../manager/FileManager"),cc._decorator),m=f.ccclass,_=(f.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.start=function(){l.UIManager.hideMarquee(),this.onVideoCompletedEvent()},t.prototype.initEvent=function(){p.LogWrap.log("UpdateView initEvent2"),h.EventManager.on(this,c.EventDef.HotUpdateProgress,this.onHotUpdateProgress.bind(this)),h.EventManager.on(this,c.EventDef.HotUpdateFail,this.onHotUpdateFail.bind(this)),h.EventManager.on(this,c.EventDef.HotUpdateFinish,this.onHotUpdateFinish.bind(this)),h.EventManager.on(this,c.EventDef.HotUpdateUnzip,this.onHotUpdateUnzip.bind(this))},t.prototype.onVideoPlayEvent=function(e,t,n){switch(p.LogWrap.log("onVideoPlayEvent",e,t,n),t){case cc.VideoPlayer.EventType.META_LOADED:case cc.VideoPlayer.EventType.PLAYING:case cc.VideoPlayer.EventType.PAUSED:case cc.VideoPlayer.EventType.STOPPED:break;case cc.VideoPlayer.EventType.COMPLETED:this.onVideoCompletedEvent();break;case cc.VideoPlayer.EventType.CLICKED:this.onClickVideoEvent();break;case cc.VideoPlayer.EventType.READY_TO_PLAY:}},t.prototype.onClickVideoEvent=function(){this.getItem("img_bg").active=!0,this.checkUpdate()},t.prototype.onVideoCompletedEvent=function(){this.getItem("img_bg").active=!0,this.checkUpdate()},t.prototype.checkUpdate=function(){var e=this;r.NetManager.requestPostUrl(s.HttpCmd.GetVersion,{channel:u.DataManager.channel,user_id:u.DataManager.loginInfo&&u.DataManager.loginInfo.userid||0},function(t,n){if("success"==t)if(p.LogWrap.log(n),1==n.ok){var o=n.info;for(var i in u.DataManager.gameConfig=o.version_list,u.DataManager.gameConfig)u.DataManager.gameConfig[i].special=JSON.parse(u.DataManager.gameConfig[i].special);cc.log(u.DataManager.gameConfig),u.DataManager.loginType=o.login_type_switch,u.DataManager.bindPhoneCheck=o.acc_login_for_phone_switch,u.DataManager.isTouristLogin=1==(o.login_type_switch&c.LoginType.Tourist),u.DataManager.bindPhoneGiveCoin=o.bindPhoneGiveCoin,1==o.status?d.UpdateManager.checkUpdate():l.UIManager.popup("prefabs/common/TipsServerPopup",o)}else l.UIManager.showTipsPopup("\u6e38\u620f\u6b63\u5728\u7ef4\u62a4\u4e2d\uff0c\u5177\u4f53\u5f00\u670d\u65f6\u95f4\u8bf7\u8054\u7cfb\u5ba2\u670d",function(e){cc.game.end()});else p.LogWrap.submitLog(),l.UIManager.showTipsPopup("\u8fde\u63a5\u670d\u52a1\u5668\u5931\u8d25,\u8bf7\u91cd\u8bd5!",function(t){t?e.checkUpdate():cc.game.end()})})},t.prototype.onHotUpdateProgress=function(e,t){this.getItem("label_tips").string="\u4e0b\u8f7d\u4e2d..."+(100*t).toFixed(2)+"%",this.getItem("bar_loading").progress=t,this.getItem("slider_loading").progress=t},t.prototype.onHotUpdateFail=function(){var e=this;l.UIManager.showTipsPopup(g.Tips.UpdateFail,function(t){t?e.restart():cc.game.end()})},t.prototype.onHotUpdateFinish=function(e){e?this.restart():this.finish()},t.prototype.onHotUpdateUnzip=function(){this.getItem("label_tips").string="\u89e3\u538b\u4e2d...\u8bf7\u7a0d\u540e...",this.getItem("bar_loading").progress=1},t.prototype.restart=function(){cc.sys.isNative&&jsb.fileUtils.purgeCachedEntries(),cc.game.restart()},t.prototype.finish=function(){l.UIManager.open("prefabs/LoginView")},t=i([m],t)}(a.default));n.default=_,cc._RF.pop()},{"../Define":"Define","../common/Text":"Text","../common/log/LogWrap":"LogWrap","../manager/DataManager":"DataManager","../manager/EventManager":"EventManager","../manager/FileManager":"FileManager","../manager/NetManager":"NetManager","../manager/UIManager":"UIManager","../manager/UpdateManager":"UpdateManager","../net/NetCmd":"NetCmd","./base/BaseView":"BaseView"}],Utils:[function(e,t,n){"use strict";cc._RF.push(t,"62549c7DfhNUbeH6G//VgLA","Utils");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../manager/AudioManager"),r=e("../../manager/DataManager"),s=cc._decorator,c=s.ccclass,l=(s.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}var n;return o(t,e),n=t,t.removeClickEvent=function(e){e.off(cc.Node.EventType.TOUCH_END);var t=e.getComponent(cc.Button);if(t){var n=t.clickEvents;n.splice(0,n.length)}},t.addClickEvent=function(e,t,n,o,i){var a=new cc.Component.EventHandler;a.target=t,a.component=n,a.handler=o,a.customEventData=i,e.getComponent(cc.Button).clickEvents.push(a)},t.addClickEventEND=function(e,t,n){e.on(cc.Node.EventType.TOUCH_END,function(o){if(o.stopPropagation(),t&&t(e,n),n){if(n.customAudio)return;a.AudioManager.playSFX("button_click")}else a.AudioManager.playSFX("button_click")})},t.addSlideEvent=function(e,t,n,o){var i=new cc.Component.EventHandler;i.target=t,i.component=n,i.handler=o,e.getComponent(cc.Slider).slideEvents.push(i)},t.isEmpty=function(e){return 0!=e.replace(/(^s*)|(s*$)/g,"").length},t.isName=function(e){return!!/^[\u4e00-\u9fa5]{2,4}$/.test(e)},t.isIdCardNum=function(e){var t=!0;if(e&&/^\d{6}(18|19|20)?\d{2}(0[1-9]|1[012])(0[1-9]|[12]\d|3[01])\d{3}(\d|X)$/i.test(e))if({11:"\u5317\u4eac",12:"\u5929\u6d25",13:"\u6cb3\u5317",14:"\u5c71\u897f",15:"\u5185\u8499\u53e4",21:"\u8fbd\u5b81",22:"\u5409\u6797",23:"\u9ed1\u9f99\u6c5f",31:"\u4e0a\u6d77",32:"\u6c5f\u82cf",33:"\u6d59\u6c5f",34:"\u5b89\u5fbd",35:"\u798f\u5efa",36:"\u6c5f\u897f",37:"\u5c71\u4e1c",41:"\u6cb3\u5357",42:"\u6e56\u5317",43:"\u6e56\u5357",44:"\u5e7f\u4e1c",45:"\u5e7f\u897f",46:"\u6d77\u5357",50:"\u91cd\u5e86",51:"\u56db\u5ddd",52:"\u8d35\u5dde",53:"\u4e91\u5357",54:"\u897f\u85cf",61:"\u9655\u897f",62:"\u7518\u8083",63:"\u9752\u6d77",64:"\u5b81\u590f",65:"xinjiang",71:"\u53f0\u6e7e",81:"\u9999\u6e2f",82:"\u6fb3\u95e8",91:"\u56fd\u5916"}[e.substr(0,2)]){if(18==e.length){e=e.split("");for(var n=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],o=[1,0,"X",9,8,7,6,5,4,3,2],i=0,a=0;a<17;a++)i+=e[a]*n[a];o[i%11]!=e[17]&&("\u6821\u9a8c\u4f4d\u9519\u8bef",t=!1)}}else"\u5730\u5740\u7f16\u7801\u9519\u8bef",t=!1;else"\u8eab\u4efd\u8bc1\u53f7\u683c\u5f0f\u9519\u8bef",t=!1;return t},t.addSpriteFrameByAltas=function(e,t,n){cc.loader.loadRes(t,cc.SpriteAtlas,function(t,o){var i=o.getSpriteFrame(n);e.getComponent(cc.Sprite).spriteFrame=i})},t.addEditBoxEvent=function(e,t,n,o){var i=new cc.Component.EventHandler;i.target=t,i.component=t.__classname__,i.handler=n,i.customEventData=o,e.getComponent(cc.EditBox).textChanged.push(i)},t.timestampToTime=function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},t.timestampToTimeString=function(e){return new Date(parseInt(e)+288e5).toJSON().substr(0,19).replace("T"," ")},t.timeStrFormat=function(e,t){if(void 0===t&&(t=":"),e<=0)return"00"+t+"00"+t+"00";var n=Math.floor(e/3600),o=n<10?"0"+n:n,i=Math.floor(e/60%60),a=i<10?"0"+i:i,r=Math.floor(e%60);return o+t+a+t+(r<10?"0"+r:r)},t.getFormatDate=function(e,t){var n=new Date(e);return function(e){var t={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),"S+":n.getMilliseconds()};for(var o in/(y+)/i.test(e)&&(e=e.replace(RegExp.$1,(n.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[o]:("00"+t[o]).substr((""+t[o]).length)));return e}(t)},t.b64EncodeUnicode=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){var n="0x"+t;return String.fromCharCode(n)}))},t.b64Encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},t.b64decode=function(e){for(var t="",n=0,o=0,i=0,a=0;n<e.length;)(o=e.charCodeAt(n))<128?(t+=String.fromCharCode(o),n++):o>191&&o<224?(i=e.charCodeAt(n+1),t+=String.fromCharCode((31&o)<<6|63&i),n+=2):(i=e.charCodeAt(n+1),a=e.charCodeAt(n+2),t+=String.fromCharCode((15&o)<<12|(63&i)<<6|63&a),n+=3);return t},t.b64DecodeUnicode=function(e){return decodeURIComponent(atob(e).split("").map(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}).join(""))},t.myDesrypt=function(e,t){return this.b64EncodeUnicode(t+7895^e)},t.myDecode=function(e,t){var n=this.b64DecodeUnicode(t);return(n^=e)-7895},t.myDesryptEx=function(e){for(var t=JSON.stringify(e),n="",o=0;o<t.length;o++)n+=String.fromCharCode(12^t[o].charCodeAt(0));return JSON.stringify(n)},t.myDecodeEx=function(e){for(var t=e,n="",o=0;o<t.length;o++)n+=String.fromCharCode(12^t[o].charCodeAt());return n},t.encrypt=function(e,t){},t.decrypt=function(e,t){},t.getSubStringLengTxt=function(e,t){return void 0===t&&(t=12),e&&e.length>6?e.substring(0,4)+"...":n.getNameStr(e,t)},t.getReplaceStrToStar=function(e){return r.DataManager.userInfo.userid==e?e:(e+="").substr(0,2)+"**"+e.substr(e.length-2,e.length)},t.getRandomInt=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},t.getFormatGold=function(e){return e?("string"==typeof e&&(e=parseFloat(e)),e>=1e4?parseInt(e/100+"")/100+"\u4e07":e.toFixed(2)):"0"},t.getFormatStrGold=function(e){return e>=1e3&&e<1e4?(e/1e3).toString().substring(0,4)+"K":e>=1e4?(e/1e4).toString().substring(0,4)+"W":e},t.getNameStr=function(e,t){if(void 0===t&&(t=12),!e)return e;if((e=(e+="").replace(/[^a-zA-Z*0-9\u4e00-\u9fa5]+/g,"")).replace(/[\u0391-\uFFE5]/g,"aa").length>t){for(var n=e.split(""),o=0,i=-1,a=0;a<n.length;a++)(o+=n[a].replace(/[\u0391-\uFFE5]/g,"aa").length)>t&&-1==i&&(i=a);return i>=0&&n.splice(i),n.join("")}return e},t.resetiPhoneXPos=function(e){},t.isEmojiCharacter=function(e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(55296<=n&&n<=56319){if(e.length>1){var o=1024*(n-55296)+(e.charCodeAt(t+1)-56320)+65536;if(118784<=o&&o<=128895)return!0}}else if(e.length>1){if(8419==e.charCodeAt(t+1))return!0}else{if(8448<=n&&n<=10239)return!0;if(11013<=n&&n<=11015)return!0;if(10548<=n&&n<=10549)return!0;if(12951<=n&&n<=12953)return!0;if(169==n||174==n||12349==n||12336==n||11093==n||11036==n||11035==n||11088==n)return!0}}},t.insretNewLine=function(e,t){if(e.length>t){var n=Array.from(e);return n.splice(Math.ceil(n.length/2),0,"\n"),n.join("")}return e},t=n=i([c],t)}(cc.Component));n.default=l,String.prototype.insert=function(e,t){return this.slice(0,e)+t+this.slice(e)},cc._RF.pop()},{"../../manager/AudioManager":"AudioManager","../../manager/DataManager":"DataManager"}],VideoPlayerEx:[function(e,t,n){"use strict";cc._RF.push(t,"23f19u4S55N5Y2QOGwfWag9","VideoPlayerEx");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,s=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype._updateVideoSource=function(){var e="";this.resourceType===cc.VideoPlayer.ResourceType.REMOTE?e=this.remoteURL:this._clip&&(e=this._clip.url||""),this._impl.setURL(e,this._mute||0===this._volume)},t=i([r],t)}(cc.VideoPlayer));n.default=s,cc._RF.pop()},{}],VipPrivilege:[function(e,t,n){"use strict";cc._RF.push(t,"dcd5bMdbbhPL4fe0GI+yF3h","VipPrivilege");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},a=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{c(o.next(e))}catch(e){a(e)}}function s(e){try{c(o.throw(e))}catch(e){a(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(r,s)}c((o=o.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var n,o,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return c([e,t])}}function c(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(i=2&a[0]?o.return:a[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,o=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(e){a=[6,e],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(n,"__esModule",{value:!0});var s=e("../base/PopupView"),c=e("../common/componet/ButtonEx"),l=e("../../manager/DataManager"),p=e("../../manager/UIManager"),u=e("../../common/UIHelper"),h=e("../../manager/NetManager"),d=e("../../manager/EventManager"),g=e("../../net/NetCmd"),f=e("../../manager/ResManager"),m=e("../../Define"),_=cc._decorator,y=_.ccclass,v=_.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pageview=null,t.pageContent=null,t.PageNode=null,t.pageIndexNode=null,t.progressBar=null,t.now_level=null,t.next_level=null,t.next_info=null,t.next_level_recharge=null,t}return o(t,e),t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this)},t.prototype.start=function(){return a(this,void 0,void 0,function(){return r(this,function(e){return h.NetManager.protocolHall.sendGetVipListInfoReq(),this.updateUserInfo(),[2]})})},t.prototype.updateUserInfo=function(){return a(this,void 0,void 0,function(){var e,t,n;return r(this,function(o){switch(o.label){case 0:return(e=l.DataManager.userInfo)?(u.default.setHeadIcon(e.headimgurl,this.getItem("img_head")),t=e.vip_level&&e.vip_level||0,[4,f.ResManager.loadResAsync("view/common/img_touxiangkuang_v"+t,cc.SpriteFrame,!1)]):[2];case 1:return(n=o.sent())&&(this.getItem("img_frame").getComponent(cc.Sprite).spriteFrame=n),u.default.setVipLevel(t,this.getItem("img_vip")),this.showProgressInfo(),[2]}})})},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.onClickClose.bind(this)),this.getItem("btn_recharge").registerClick(this.onClickRecharge.bind(this)),this.getItem("btn_upgrade").registerClick(this.onClickUpgrade.bind(this)),this.getItem("btn_left").registerClick(this.onClickLeft.bind(this)),this.getItem("btn_right").registerClick(this.onClickRight.bind(this))},t.prototype.initEvent=function(){d.EventManager.on(this,g.ProtocolHallCmd.GetGetVipListInfoRes,this.onGetGetVipListInfoRes.bind(this)),d.EventManager.on(this,g.ProtocolHallCmd.GetVipLevelInfoResp,this.onGetVipLevelInfoResp.bind(this)),d.EventManager.on(this,g.ProtocolHallCmd.GetVipLevelRewardResp,this.onGetVipLevelRewardResp.bind(this)),d.EventManager.on(this,g.ProtocolAccountCmd.UserVipChangeNotify,this.onUserVipChangeNotify.bind(this)),d.EventManager.on(this,m.EventDef.UpdateUserInfo,this.updateUserInfo.bind(this)),this.pageview.node.on("page-turning",this.onPageViewEnd.bind(this))},t.prototype.onUserVipChangeNotify=function(e){var t=this.pageview.getCurrentPageIndex();h.NetManager.protocolHall.sendGetVipLevelInfoReq(t+1)},t.prototype.onPageViewEnd=function(){var e=this.pageview.getCurrentPageIndex();cc.log("onPageViewEnd:",e);var t=e+1;this.now_level.string=t.toString(),h.NetManager.protocolHall.sendGetVipLevelInfoReq(t)},t.prototype.onGetGetVipListInfoRes=function(e){this.updateView()},t.prototype.onGetVipLevelInfoResp=function(e){if(e.vip_info.length>0){var t=e.vip_info[0].vip_level-1;this.updatePage(t)}},t.prototype.onGetVipLevelRewardResp=function(e){var t=this.pageview.getCurrentPageIndex();this.updatePage(t)},t.prototype.onClickClose=function(){this.close()},t.prototype.onClickRecharge=function(){h.NetManager.protocolBank.sendRechargePlatformReq()},t.prototype.onClickUpgrade=function(){p.UIManager.popup("prefabs/account/VipUpgrade")},t.prototype.onClickLeft=function(){var e=this.pageview.getCurrentPageIndex();this.pageview.scrollToPage(e-1,.3)},t.prototype.onClickRight=function(){var e=this.pageview.getCurrentPageIndex();this.pageview.scrollToPage(e+1,.3)},t.prototype.updateView=function(){this.showProgressInfo(),this.showVipPageList()},t.prototype.updatePage=function(e){var t=this,n=l.DataManager.vipInfos[e],o=this.pageview.getPages();if(n&&o[e]){o[e].destroyAllChildren(),o[e].removeAllChildren();var i=cc.instantiate(this.PageNode);o[e].addChild(i),i.active=!0;for(var a=function(e){var o=i.getChildByName("node_"+e.type),a=o.getChildByName("label_score").getComponent(cc.Label),r=o.getChildByName("btn_recive").getComponent(c.default),s=o.getChildByName("btn_disable").getComponent(c.default),p=o.getChildByName("btn_recived").getComponent(c.default),u=o.getChildByName("btn_more").getComponent(c.default),d=o.getChildByName("img_score"),g=o.getChildByName("img_yuanbao");a.string=e.reward,d.active=1==e.reward_type,g.active=2==e.reward_type,s.node.active=0==e.status,r.node.active=1==e.status,p.node.active=2==e.status,u.node.active=3==e.status,r.registerClick(function(){h.NetManager.protocolHall.sendGetVipLevelReward(e.type,e.reward_type,n.vip_level,n.need_score)}),s.registerClick(function(){h.NetManager.protocolHall.sendGetVipLevelReward(e.type,e.reward_type,n.vip_level,n.need_score)}),u.registerClick(function(){var e=0==l.DataManager.userInfo.vip_level?0:l.DataManager.userInfo.vip_level-1;t.pageview.scrollToPage(e,.3)})},r=0,s=n.reward_info;r<s.length;r++){a(s[r])}}},t.prototype.createOnePage=function(e,t,n){void 0===n&&(n=!0);var o=new cc.Node;o.setContentSize(this.PageNode.getContentSize()),this.pageview.addPage(o)},t.prototype.showVipPageList=function(e){var t=l.DataManager.vipInfos;null==e&&(e=0==l.DataManager.userInfo.vip_level?0:l.DataManager.userInfo.vip_level-1,this.now_level.string=0==l.DataManager.userInfo.vip_level?"1":l.DataManager.userInfo.vip_level.toString());for(var n=0;n<t.length;n++){var o=new cc.Node;o.setContentSize(this.PageNode.getContentSize()),this.pageview.addPage(o)}this.pageview.scrollToPage(e,.01),h.NetManager.protocolHall.sendGetVipLevelInfoReq(e+1)},t.prototype.showProgressInfo=function(){if(l.DataManager.vipInfos){var e=l.DataManager.userInfo,t=l.DataManager.vipInfos.length+1,n=e.vip_level+1,o=l.DataManager.getVipInfoByLevel(n),i=n==t,a=i?0:o.need_score-e.vip_score;this.next_level.string=n==t?"9":n.toString(),this.next_level_recharge.string=a.toString(),n>=t?(this.next_info.node.active=!0,this.getItem("node_need").active=!1):(this.next_info.node.active=!1,this.getItem("node_need").active=!0);var r=i?1:e.vip_score/o.need_score;this.progressBar.getComponent(cc.ProgressBar).progress=r}},i([v(cc.PageView)],t.prototype,"pageview",void 0),i([v(cc.Node)],t.prototype,"pageContent",void 0),i([v(cc.Node)],t.prototype,"PageNode",void 0),i([v(cc.Node)],t.prototype,"pageIndexNode",void 0),i([v(cc.Node)],t.prototype,"progressBar",void 0),i([v(cc.Label)],t.prototype,"now_level",void 0),i([v(cc.Label)],t.prototype,"next_level",void 0),i([v(cc.Label)],t.prototype,"next_info",void 0),i([v(cc.Label)],t.prototype,"next_level_recharge",void 0),t=i([y],t)}(s.default);n.default=b,cc._RF.pop()},{"../../Define":"Define","../../common/UIHelper":"UIHelper","../../manager/DataManager":"DataManager","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../manager/ResManager":"ResManager","../../manager/UIManager":"UIManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView","../common/componet/ButtonEx":"ButtonEx"}],VipTips:[function(e,t,n){"use strict";cc._RF.push(t,"5577eeP/BVK+ZEvx/LBMU4B","VipTips");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../base/PopupView"),r=cc._decorator,s=r.ccclass,c=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isAnimation=!1,t}return o(t,e),t.prototype.initComponent=function(){this.getItem("btn_sure").registerClick(this.close.bind(this))},t.prototype.start=function(){this.getItem("label_vip").string=this.data,this.getItem("sp_vip_up").addAnimation(0,"animation2",!0)},t=i([s],t)}(a.default));n.default=c,cc._RF.pop()},{"../base/PopupView":"PopupView"}],VipUpgrade:[function(e,t,n){"use strict";cc._RF.push(t,"72cb63Px/xEEbK9ge+ODVTb","VipUpgrade");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../manager/DataManager"),r=e("../base/PopupView"),s=e("../common/List"),c=cc._decorator,l=c.ccclass,p=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll_upgrade=null,t}return o(t,e),t.prototype.initEvent=function(){},t.prototype.initComponent=function(){this.getItem("btn_close").registerClick(this.close.bind(this))},t.prototype.start=function(){a.DataManager.vipInfos&&(this.scroll_upgrade.numItems=a.DataManager.vipInfos.length)},t.prototype.onListRender=function(e,t){var n=e.getChildByName("label_vip_level").getComponent(cc.Label),o=e.getChildByName("img_speed_no"),i=e.getChildByName("img_speed_yes"),r=e.getChildByName("img_service_no"),s=e.getChildByName("img_service_yes"),c=a.DataManager.vipInfos[t];n.string="VIP"+c.vip_level;for(var l=0,p=c.reward_info;l<p.length;l++){var u=p[l],h=e.getChildByName("label_"+u.type).getComponent(cc.Label),d=2==u.reward_type?"\u91d1\u5e01":"\u79ef\u5206";h.string=u.reward+d}o.active=0==c.accelerate_switch,i.active=1==c.accelerate_switch,r.active=0==c.customer_switch,s.active=1==c.customer_switch},i([p(s.default)],t.prototype,"scroll_upgrade",void 0),t=i([l],t)}(r.default);n.default=u,cc._RF.pop()},{"../../manager/DataManager":"DataManager","../base/PopupView":"PopupView","../common/List":"List"}],WebView:[function(e,t,n){"use strict";cc._RF.push(t,"81287w18WBLkbzp43jRYbuA","WebView");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=e("../../manager/AudioManager"),r=e("../base/PopupView"),s=e("../../manager/NetManager"),c=e("../../common/log/LogWrap"),l=e("../../manager/EventManager"),p=e("../../net/NetCmd"),u=cc._decorator,h=u.ccclass,d=u.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isAnimation=!1,t.webView=null,t}return o(t,e),t.prototype.onLoad=function(){e.prototype.onLoad.call(this)},t.prototype.start=function(){this.initWebView(this.data.url,this.data.game_type)},t.prototype.initComponent=function(){l.EventManager.on(this,p.ProtocolAccountCmd.LoginResp,this.onLoginResp.bind(this))},t.prototype.onLoginResp=function(e){var t=!1;e.joined_game_info&&e.joined_game_info.has&&e.joined_game_info.ky_game_url&&(t=!0),t||this.close(!1)},t.prototype.close=function(t){void 0===t&&(t=!0),e.prototype.close.call(this,t),a.AudioManager.playHallBGM()},t.prototype.initWebView=function(e,t){var n=this;this.webView.setJavascriptInterfaceScheme("kyqpkey"),this.webView.setOnJSCallback(function(e,o){"close"==o.replace("kyqpkey://","")&&(n.close(!1),s.NetManager.protocolHall.sendLeaveKYGameHallPush(t))}),this.webView.node.on("loaded",function(){c.LogWrap.log("webView->>>>>>>>>>>>>>loaded")}),this.webView.node.on("loading",function(){c.LogWrap.log("webView->>>>>>>>>>>>>>loading")}),this.webView.node.on("error",function(){c.LogWrap.log("webView->>>>>>>>>>>>>>error"),n.close(!1)}),this.webView.url=e,a.AudioManager.stopBGM()},i([d(cc.WebView)],t.prototype,"webView",void 0),t=i([h],t)}(r.default);n.default=g,cc._RF.pop()},{"../../common/log/LogWrap":"LogWrap","../../manager/AudioManager":"AudioManager","../../manager/EventManager":"EventManager","../../manager/NetManager":"NetManager","../../net/NetCmd":"NetCmd","../base/PopupView":"PopupView"}],XXTea:[function(e,t,n){"use strict";cc._RF.push(t,"5e1b8lhbcpPE44yrKnkwAqF","XXTea"),Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(){}return e.xxtea_encrypt=function(e,t){if(""==e)return"";var n=s(e=i(e),!0),o=s(t,!1);o.length<4&&(o.length=4);for(var a,l,p,u=n.length-1,h=n[u],d=n[0],g=Math.floor(6+52/(u+1)),f=0;0<g--;){for(l=(f=f+2654435769&4294967295)>>>2&3,p=0;p<u;p++)a=(h>>>5^(d=n[p+1])<<2)+(d>>>3^h<<4)^(f^d)+(o[3&p^l]^h),h=n[p]=n[p]+a&4294967295;a=(h>>>5^(d=n[0])<<2)+(d>>>3^h<<4)^(f^d)+(o[3&p^l]^h),h=n[u]=n[u]+a&4294967295}return c(e=r(n,!1))},e.xxtea_decrypt=function(e,t){if(""==e)return"";var n=s(e=l(e),!1),o=s(t,!1);o.length<4&&(o.length=4);for(var i,c,p,u=n.length-1,h=n[u],d=n[0],g=2654435769*Math.floor(6+52/(u+1))&4294967295;0!=g;){for(c=g>>>2&3,p=u;p>0;p--)i=((h=n[p-1])>>>5^d<<2)+(d>>>3^h<<4)^(g^d)+(o[3&p^c]^h),d=n[p]=n[p]-i&4294967295;i=((h=n[u])>>>5^d<<2)+(d>>>3^h<<4)^(g^d)+(o[3&p^c]^h),d=n[0]=n[0]-i&4294967295,g=g-2654435769&4294967295}var f=r(n,!0);return f=a(f)},e}();function i(e){var t,n,o,i;for(t="",o=e.length,n=0;n<o;n++)(i=e.charCodeAt(n))>=1&&i<=127?t+=e.charAt(n):i>2047?(t+=String.fromCharCode(224|i>>12&15),t+=String.fromCharCode(128|i>>6&63),t+=String.fromCharCode(128|i>>0&63)):(t+=String.fromCharCode(192|i>>6&31),t+=String.fromCharCode(128|i>>0&63));return t}function a(e){var t,n,o,i,a,r;for(t="",o=e.length,n=0;n<o;)switch((i=e.charCodeAt(n++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(n-1);break;case 12:case 13:a=e.charCodeAt(n++),t+=String.fromCharCode((31&i)<<6|63&a);break;case 14:a=e.charCodeAt(n++),r=e.charCodeAt(n++),t+=String.fromCharCode((15&i)<<12|(63&a)<<6|(63&r)<<0)}return t}function r(e,t){var n=e.length,o=n-1<<2;if(t){var i=e[n-1];if(i<o-3||i>o)return null;o=i}for(var a=0;a<n;a++)e[a]=String.fromCharCode(255&e[a],e[a]>>8&255,e[a]>>16&255,e[a]>>24&255);return t?e.join("").substring(0,o):e.join("")}function s(e,t){for(var n=e.length,o=[],i=0;i<n;i+=4)o[i>>2]=e.charCodeAt(i)|e.charCodeAt(i+1)<<8|e.charCodeAt(i+2)<<16|e.charCodeAt(i+3)<<24;return t&&(o[o.length]=n),o}function c(e){var t,n,o,i,a,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",s="",c="",l="",p=0;do{o=(t=e.charCodeAt(p++))>>2,i=(3&t)<<4|(n=e.charCodeAt(p++))>>4,a=(15&n)<<2|(c=e.charCodeAt(p++))>>6,l=63&c,isNaN(n)?a=l=64:isNaN(c)&&(l=64),s=s+r.charAt(o)+r.charAt(i)+r.charAt(a)+r.charAt(l),t=n=c="",o=i=a=l=""}while(p<e.length);return s}function l(e){var t,n,o,i,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="",s="",c="",l=0;/[^A-Za-z0-9\+\/\=\n]/g.exec(e)&&alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{t=a.indexOf(e.charAt(l++))<<2|(o=a.indexOf(e.charAt(l++)))>>4,n=(15&o)<<4|(i=a.indexOf(e.charAt(l++)))>>2,s=(3&i)<<6|(c=a.indexOf(e.charAt(l++))),r+=String.fromCharCode(t),64!=i&&(r+=String.fromCharCode(n)),64!=c&&(r+=String.fromCharCode(s)),t=n=s="",o=i=c=""}while(l<e.length);return r}n.default=o,cc._RF.pop()},{}],bytebuffer:[function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cc._RF.push(t,"fb991ulYfNJNJClMexTWK8G","bytebuffer"),function(n,i){"function"==typeof define&&define.amd?define(["long"],i):"function"==typeof e&&"object"===(void 0===t?"undefined":o(t))&&t&&t.exports?t.exports=function(){var t;try{t=e("./long")}catch(e){}return i(t)}():((void 0).dcodeIO=(void 0).dcodeIO||{}).ByteBuffer=i((void 0).dcodeIO.Long)}(0,function(e){var t=function e(t,n,o){if(void 0===t&&(t=e.DEFAULT_CAPACITY),void 0===n&&(n=e.DEFAULT_ENDIAN),void 0===o&&(o=e.DEFAULT_NOASSERT),!o){if((t|=0)<0)throw RangeError("Illegal capacity");n=!!n,o=!!o}this.buffer=0===t?i:new ArrayBuffer(t),this.view=0===t?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=t,this.littleEndian=n,this.noAssert=o};t.VERSION="5.0.1",t.LITTLE_ENDIAN=!0,t.BIG_ENDIAN=!1,t.DEFAULT_CAPACITY=16,t.DEFAULT_ENDIAN=t.BIG_ENDIAN,t.DEFAULT_NOASSERT=!1,t.Long=e||null;var n=t.prototype;n.__isByteBuffer__,Object.defineProperty(n,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var i=new ArrayBuffer(0),a=String.fromCharCode;function r(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function s(){var e=[],t=[];return function(){if(0===arguments.length)return t.join("")+a.apply(String,e);e.length+arguments.length>1024&&(t.push(a.apply(String,e)),e.length=0),Array.prototype.push.apply(e,arguments)}}function c(e,t,n,o,i){var a,r,s=8*i-o-1,c=(1<<s)-1,l=c>>1,p=-7,u=n?i-1:0,h=n?-1:1,d=e[t+u];for(u+=h,a=d&(1<<-p)-1,d>>=-p,p+=s;p>0;a=256*a+e[t+u],u+=h,p-=8);for(r=a&(1<<-p)-1,a>>=-p,p+=o;p>0;r=256*r+e[t+u],u+=h,p-=8);if(0===a)a=1-l;else{if(a===c)return r?NaN:1/0*(d?-1:1);r+=Math.pow(2,o),a-=l}return(d?-1:1)*r*Math.pow(2,a-o)}function l(e,t,n,o,i,a){var r,s,c,l=8*a-i-1,p=(1<<l)-1,u=p>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=o?0:a-1,g=o?1:-1,f=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,r=p):(r=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-r))<1&&(r--,c*=2),(t+=r+u>=1?h/c:h*Math.pow(2,1-u))*c>=2&&(r++,c/=2),r+u>=p?(s=0,r=p):r+u>=1?(s=(t*c-1)*Math.pow(2,i),r+=u):(s=t*Math.pow(2,u-1)*Math.pow(2,i),r=0));i>=8;e[n+d]=255&s,d+=g,s/=256,i-=8);for(r=r<<i|s,l+=i;l>0;e[n+d]=255&r,d+=g,r/=256,l-=8);e[n+d-g]|=128*f}t.accessor=function(){return Uint8Array},t.allocate=function(e,n,o){return new t(e,n,o)},t.concat=function(e,n,o,i){"boolean"!=typeof n&&"string"==typeof n||(i=o,o=n,n=void 0);for(var a,r=0,s=0,c=e.length;s<c;++s)t.isByteBuffer(e[s])||(e[s]=t.wrap(e[s],n)),(a=e[s].limit-e[s].offset)>0&&(r+=a);if(0===r)return new t(0,o,i);var l,p=new t(r,o,i);for(s=0;s<c;)(a=(l=e[s++]).limit-l.offset)<=0||(p.view.set(l.view.subarray(l.offset,l.limit),p.offset),p.offset+=a);return p.limit=p.offset,p.offset=0,p},t.isByteBuffer=function(e){return!0===(e&&e.__isByteBuffer__)},t.type=function(){return ArrayBuffer},t.wrap=function(e,i,a,r){if("string"!=typeof i&&(r=a,a=i,i=void 0),"string"==typeof e)switch(void 0===i&&(i="utf8"),i){case"base64":return t.fromBase64(e,a);case"hex":return t.fromHex(e,a);case"binary":return t.fromBinary(e,a);case"utf8":return t.fromUTF8(e,a);case"debug":return t.fromDebug(e,a);default:throw Error("Unsupported encoding: "+i)}if(null===e||"object"!==o(e))throw TypeError("Illegal buffer");var s;if(t.isByteBuffer(e))return(s=n.clone.call(e)).markedOffset=-1,s;if(e instanceof Uint8Array)s=new t(0,a,r),e.length>0&&(s.buffer=e.buffer,s.offset=e.byteOffset,s.limit=e.byteOffset+e.byteLength,s.view=new Uint8Array(e.buffer));else if(e instanceof ArrayBuffer)s=new t(0,a,r),e.byteLength>0&&(s.buffer=e,s.offset=0,s.limit=e.byteLength,s.view=e.byteLength>0?new Uint8Array(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");(s=new t(e.length,a,r)).limit=e.length;for(var c=0;c<e.length;++c)s.view[c]=e[c]}return s},n.writeBitSet=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if(!(e instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var o,i=t,a=e.length,r=a>>3,s=0;for(t+=this.writeVarint32(a,t);r--;)o=1&!!e[s++]|(1&!!e[s++])<<1|(1&!!e[s++])<<2|(1&!!e[s++])<<3|(1&!!e[s++])<<4|(1&!!e[s++])<<5|(1&!!e[s++])<<6|(1&!!e[s++])<<7,this.writeByte(o,t++);if(s<a){var c=0;for(o=0;s<a;)o|=(1&!!e[s++])<<c++;this.writeByte(o,t++)}return n?(this.offset=t,this):t-i},n.readBitSet=function(e){var t=void 0===e;t&&(e=this.offset);var n,o=this.readVarint32(e),i=o.value,a=i>>3,r=0,s=[];for(e+=o.length;a--;)n=this.readByte(e++),s[r++]=!!(1&n),s[r++]=!!(2&n),s[r++]=!!(4&n),s[r++]=!!(8&n),s[r++]=!!(16&n),s[r++]=!!(32&n),s[r++]=!!(64&n),s[r++]=!!(128&n);if(r<i){var c=0;for(n=this.readByte(e++);r<i;)s[r++]=!!(n>>c++&1)}return t&&(this.offset=e),s},n.readBytes=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+e+") <= "+this.buffer.byteLength)}var o=this.slice(t,t+e);return n&&(this.offset+=e),o},n.writeBytes=n.append,n.writeInt8=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=1,this.view[t]=e,n&&(this.offset+=1),this},n.writeByte=n.writeInt8,n.readInt8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=this.view[e];return 128==(128&n)&&(n=-(255-n+1)),t&&(this.offset+=1),n},n.readByte=n.readInt8,n.writeUint8=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=1,this.view[t]=e,n&&(this.offset+=1),this},n.writeUInt8=n.writeUint8,n.readUint8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=this.view[e];return t&&(this.offset+=1),n},n.readUInt8=n.readUint8,n.writeInt16=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),n&&(this.offset+=2),this},n.writeShort=n.writeInt16,n.readInt16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e],n|=this.view[e+1]<<8):(n=this.view[e]<<8,n|=this.view[e+1]),32768==(32768&n)&&(n=-(65535-n+1)),t&&(this.offset+=2),n},n.readShort=n.readInt16,n.writeUint16=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),n&&(this.offset+=2),this},n.writeUInt16=n.writeUint16,n.readUint16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e],n|=this.view[e+1]<<8):(n=this.view[e]<<8,n|=this.view[e+1]),t&&(this.offset+=2),n},n.readUInt16=n.readUint16,n.writeInt32=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),n&&(this.offset+=4),this},n.writeInt=n.writeInt32,n.readInt32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0),n|=0,t&&(this.offset+=4),n},n.readInt=n.readInt32,n.writeUint32=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),n&&(this.offset+=4),this},n.writeUInt32=n.writeUint32,n.readUint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=0;return this.littleEndian?(n=this.view[e+2]<<16,n|=this.view[e+1]<<8,n|=this.view[e],n+=this.view[e+3]<<24>>>0):(n=this.view[e+1]<<16,n|=this.view[e+2]<<8,n|=this.view[e+3],n+=this.view[e]<<24>>>0),t&&(this.offset+=4),n},n.readUInt32=n.readUint32,e&&(n.writeInt64=function(t,n){var o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),n+=8;var i=this.buffer.byteLength;n>i&&this.resize((i*=2)>n?i:n),n-=8;var a=t.low,r=t.high;return this.littleEndian?(this.view[n+3]=a>>>24&255,this.view[n+2]=a>>>16&255,this.view[n+1]=a>>>8&255,this.view[n]=255&a,n+=4,this.view[n+3]=r>>>24&255,this.view[n+2]=r>>>16&255,this.view[n+1]=r>>>8&255,this.view[n]=255&r):(this.view[n]=r>>>24&255,this.view[n+1]=r>>>16&255,this.view[n+2]=r>>>8&255,this.view[n+3]=255&r,n+=4,this.view[n]=a>>>24&255,this.view[n+1]=a>>>16&255,this.view[n+2]=a>>>8&255,this.view[n+3]=255&a),o&&(this.offset+=8),this},n.writeLong=n.writeInt64,n.readInt64=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var o=0,i=0;this.littleEndian?(o=this.view[t+2]<<16,o|=this.view[t+1]<<8,o|=this.view[t],o+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,o=this.view[t+1]<<16,o|=this.view[t+2]<<8,o|=this.view[t+3],o+=this.view[t]<<24>>>0);var a=new e(o,i,!1);return n&&(this.offset+=8),a},n.readLong=n.readInt64,n.writeUint64=function(t,n){var o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),n+=8;var i=this.buffer.byteLength;n>i&&this.resize((i*=2)>n?i:n),n-=8;var a=t.low,r=t.high;return this.littleEndian?(this.view[n+3]=a>>>24&255,this.view[n+2]=a>>>16&255,this.view[n+1]=a>>>8&255,this.view[n]=255&a,n+=4,this.view[n+3]=r>>>24&255,this.view[n+2]=r>>>16&255,this.view[n+1]=r>>>8&255,this.view[n]=255&r):(this.view[n]=r>>>24&255,this.view[n+1]=r>>>16&255,this.view[n+2]=r>>>8&255,this.view[n+3]=255&r,n+=4,this.view[n]=a>>>24&255,this.view[n+1]=a>>>16&255,this.view[n+2]=a>>>8&255,this.view[n+3]=255&a),o&&(this.offset+=8),this},n.writeUInt64=n.writeUint64,n.readUint64=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var o=0,i=0;this.littleEndian?(o=this.view[t+2]<<16,o|=this.view[t+1]<<8,o|=this.view[t],o+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,o=this.view[t+1]<<16,o|=this.view[t+2]<<8,o|=this.view[t+3],o+=this.view[t]<<24>>>0);var a=new e(o,i,!0);return n&&(this.offset+=8),a},n.readUInt64=n.readUint64),n.writeFloat32=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=4,l(this.view,e,t,this.littleEndian,23,4),n&&(this.offset+=4),this},n.writeFloat=n.writeFloat32,n.readFloat32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=c(this.view,e,this.littleEndian,23,4);return t&&(this.offset+=4),n},n.readFloat=n.readFloat32,n.writeFloat64=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=8;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=8,l(this.view,e,t,this.littleEndian,52,8),n&&(this.offset+=8),this},n.writeDouble=n.writeFloat64,n.readFloat64=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var n=c(this.view,e,this.littleEndian,52,8);return t&&(this.offset+=8),n},n.readDouble=n.readFloat64,t.MAX_VARINT32_BYTES=5,t.calculateVarint32=function(e){return(e>>>=0)<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5},t.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},t.zigZagDecode32=function(e){return e>>>1^-(1&e)|0},n.writeVarint32=function(e,n){var o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var i,a=t.calculateVarint32(e);n+=a;var r=this.buffer.byteLength;for(n>r&&this.resize((r*=2)>n?r:n),n-=a,e>>>=0;e>=128;)i=127&e|128,this.view[n++]=i,e>>>=7;return this.view[n++]=e,o?(this.offset=n,this):a},n.writeVarint32ZigZag=function(e,n){return this.writeVarint32(t.zigZagEncode32(e),n)},n.readVarint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n,o=0,i=0;do{if(!this.noAssert&&e>this.limit){var a=Error("Truncated");throw a.truncated=!0,a}n=this.view[e++],o<5&&(i|=(127&n)<<7*o),++o}while(0!=(128&n));return i|=0,t?(this.offset=e,i):{value:i,length:o}},n.readVarint32ZigZag=function(e){var n=this.readVarint32(e);return"object"===o(n)?n.value=t.zigZagDecode32(n.value):n=t.zigZagDecode32(n),n},e&&(t.MAX_VARINT64_BYTES=10,t.calculateVarint64=function(t){"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t));var n=t.toInt()>>>0,o=t.shiftRightUnsigned(28).toInt()>>>0,i=t.shiftRightUnsigned(56).toInt()>>>0;return 0==i?0==o?n<16384?n<128?1:2:n<1<<21?3:4:o<16384?o<128?5:6:o<1<<21?7:8:i<128?9:10},t.zigZagEncode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},t.zigZagDecode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},n.writeVarint64=function(n,o){var i=void 0===o;if(i&&(o=this.offset),!this.noAssert){if("number"==typeof n)n=e.fromNumber(n);else if("string"==typeof n)n=e.fromString(n);else if(!(n&&n instanceof e))throw TypeError("Illegal value: "+n+" (not an integer or Long)");if("number"!=typeof o||o%1!=0)throw TypeError("Illegal offset: "+o+" (not an integer)");if((o>>>=0)<0||o+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+o+" (+0) <= "+this.buffer.byteLength)}"number"==typeof n?n=e.fromNumber(n,!1):"string"==typeof n?n=e.fromString(n,!1):!1!==n.unsigned&&(n=n.toSigned());var a=t.calculateVarint64(n),r=n.toInt()>>>0,s=n.shiftRightUnsigned(28).toInt()>>>0,c=n.shiftRightUnsigned(56).toInt()>>>0;o+=a;var l=this.buffer.byteLength;switch(o>l&&this.resize((l*=2)>o?l:o),o-=a,a){case 10:this.view[o+9]=c>>>7&1;case 9:this.view[o+8]=9!==a?128|c:127&c;case 8:this.view[o+7]=8!==a?s>>>21|128:s>>>21&127;case 7:this.view[o+6]=7!==a?s>>>14|128:s>>>14&127;case 6:this.view[o+5]=6!==a?s>>>7|128:s>>>7&127;case 5:this.view[o+4]=5!==a?128|s:127&s;case 4:this.view[o+3]=4!==a?r>>>21|128:r>>>21&127;case 3:this.view[o+2]=3!==a?r>>>14|128:r>>>14&127;case 2:this.view[o+1]=2!==a?r>>>7|128:r>>>7&127;case 1:this.view[o]=1!==a?128|r:127&r}return i?(this.offset+=a,this):a},n.writeVarint64ZigZag=function(e,n){return this.writeVarint64(t.zigZagEncode64(e),n)},n.readVarint64=function(t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var o=t,i=0,a=0,r=0,s=0;if(i=127&(s=this.view[t++]),128&s&&(i|=(127&(s=this.view[t++]))<<7,(128&s||this.noAssert&&void 0===s)&&(i|=(127&(s=this.view[t++]))<<14,(128&s||this.noAssert&&void 0===s)&&(i|=(127&(s=this.view[t++]))<<21,(128&s||this.noAssert&&void 0===s)&&(a=127&(s=this.view[t++]),(128&s||this.noAssert&&void 0===s)&&(a|=(127&(s=this.view[t++]))<<7,(128&s||this.noAssert&&void 0===s)&&(a|=(127&(s=this.view[t++]))<<14,(128&s||this.noAssert&&void 0===s)&&(a|=(127&(s=this.view[t++]))<<21,(128&s||this.noAssert&&void 0===s)&&(r=127&(s=this.view[t++]),(128&s||this.noAssert&&void 0===s)&&(r|=(127&(s=this.view[t++]))<<7,128&s||this.noAssert&&void 0===s))))))))))throw Error("Buffer overrun");var c=e.fromBits(i|a<<28,a>>>4|r<<24,!1);return n?(this.offset=t,c):{value:c,length:t-o}},n.readVarint64ZigZag=function(n){var o=this.readVarint64(n);return o&&o.value instanceof e?o.value=t.zigZagDecode64(o.value):o=t.zigZagDecode64(o),o}),n.writeCString=function(e,t){var n=void 0===t;n&&(t=this.offset);var o,i=e.length;if(!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(o=0;o<i;++o)if(0===e.charCodeAt(o))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}i=u.calculateUTF16asUTF8(r(e))[1],t+=i+1;var a=this.buffer.byteLength;return t>a&&this.resize((a*=2)>t?a:t),t-=i+1,u.encodeUTF16toUTF8(r(e),function(e){this.view[t++]=e}.bind(this)),this.view[t++]=0,n?(this.offset=t,this):i},n.readCString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n,o=e,i=-1;return u.decodeUTF8toUTF16(function(){if(0===i)return null;if(e>=this.limit)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.limit);return 0===(i=this.view[e++])?null:i}.bind(this),n=s(),!0),t?(this.offset=e,n()):{string:n(),length:e-o}},n.writeIString=function(e,t){var n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var o,i=t;o=u.calculateUTF16asUTF8(r(e),this.noAssert)[1],t+=4+o;var a=this.buffer.byteLength;if(t>a&&this.resize((a*=2)>t?a:t),t-=4+o,this.littleEndian?(this.view[t+3]=o>>>24&255,this.view[t+2]=o>>>16&255,this.view[t+1]=o>>>8&255,this.view[t]=255&o):(this.view[t]=o>>>24&255,this.view[t+1]=o>>>16&255,this.view[t+2]=o>>>8&255,this.view[t+3]=255&o),t+=4,u.encodeUTF16toUTF8(r(e),function(e){this.view[t++]=e}.bind(this)),t!==i+4+o)throw RangeError("Illegal range: Truncated data, "+t+" == "+(t+4+o));return n?(this.offset=t,this):t-i},n.readIString=function(e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var o=e,i=this.readUint32(e),a=this.readUTF8String(i,t.METRICS_BYTES,e+=4);return e+=a.length,n?(this.offset=e,a.string):{string:a.string,length:e-o}},t.METRICS_CHARS="c",t.METRICS_BYTES="b",n.writeUTF8String=function(e,t){var n,o=void 0===t;if(o&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var i=t;n=u.calculateUTF16asUTF8(r(e))[1],t+=n;var a=this.buffer.byteLength;return t>a&&this.resize((a*=2)>t?a:t),t-=n,u.encodeUTF16toUTF8(r(e),function(e){this.view[t++]=e}.bind(this)),o?(this.offset=t,this):t-i},n.writeString=n.writeUTF8String,t.calculateUTF8Chars=function(e){return u.calculateUTF16asUTF8(r(e))[0]},t.calculateString=t.calculateUTF8Bytes=function(e){return u.calculateUTF16asUTF8(r(e))[1]},n.readUTF8String=function(e,n,o){"number"==typeof n&&(o=n,n=void 0);var i=void 0===o;if(i&&(o=this.offset),void 0===n&&(n=t.METRICS_CHARS),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof o||o%1!=0)throw TypeError("Illegal offset: "+o+" (not an integer)");if((o>>>=0)<0||o+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+o+" (+0) <= "+this.buffer.byteLength)}var a,r=0,c=o;if(n===t.METRICS_CHARS){if(a=s(),u.decodeUTF8(function(){return r<e&&o<this.limit?this.view[o++]:null}.bind(this),function(e){++r,u.UTF8toUTF16(e,a)}),r!==e)throw RangeError("Illegal range: Truncated data, "+r+" == "+e);return i?(this.offset=o,a()):{string:a(),length:o-c}}if(n===t.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof o||o%1!=0)throw TypeError("Illegal offset: "+o+" (not an integer)");if((o>>>=0)<0||o+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+o+" (+"+e+") <= "+this.buffer.byteLength)}var l=o+e;if(u.decodeUTF8toUTF16(function(){return o<l?this.view[o++]:null}.bind(this),a=s(),this.noAssert),o!==l)throw RangeError("Illegal range: Truncated data, "+o+" == "+l);return i?(this.offset=o,a()):{string:a(),length:o-c}}throw TypeError("Unsupported metrics: "+n)},n.readString=n.readUTF8String,n.writeVString=function(e,n){var o=void 0===n;if(o&&(n=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var i,a,s=n;i=u.calculateUTF16asUTF8(r(e),this.noAssert)[1],a=t.calculateVarint32(i),n+=a+i;var c=this.buffer.byteLength;if(n>c&&this.resize((c*=2)>n?c:n),n-=a+i,n+=this.writeVarint32(i,n),u.encodeUTF16toUTF8(r(e),function(e){this.view[n++]=e}.bind(this)),n!==s+i+a)throw RangeError("Illegal range: Truncated data, "+n+" == "+(n+i+a));return o?(this.offset=n,this):n-s},n.readVString=function(e){var n=void 0===e;if(n&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var o=e,i=this.readVarint32(e),a=this.readUTF8String(i.value,t.METRICS_BYTES,e+=i.length);return e+=a.length,n?(this.offset=e,a.string):{string:a.string,length:e-o}},n.append=function(e,n,o){"number"!=typeof n&&"string"==typeof n||(o=n,n=void 0);var i=void 0===o;if(i&&(o=this.offset),!this.noAssert){if("number"!=typeof o||o%1!=0)throw TypeError("Illegal offset: "+o+" (not an integer)");if((o>>>=0)<0||o+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+o+" (+0) <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,n));var a=e.limit-e.offset;if(a<=0)return this;o+=a;var r=this.buffer.byteLength;return o>r&&this.resize((r*=2)>o?r:o),o-=a,this.view.set(e.view.subarray(e.offset,e.limit),o),e.offset+=a,i&&(this.offset+=a),this},n.appendTo=function(e,t){return e.append(this,t),this},n.assert=function(e){return this.noAssert=!e,this},n.capacity=function(){return this.buffer.byteLength},n.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},n.clone=function(e){var n=new t(0,this.littleEndian,this.noAssert);return e?(n.buffer=new ArrayBuffer(this.buffer.byteLength),n.view=new Uint8Array(n.buffer)):(n.buffer=this.buffer,n.view=this.view),n.offset=this.offset,n.markedOffset=this.markedOffset,n.limit=this.limit,n},n.compact=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(0===e&&t===this.buffer.byteLength)return this;var n=t-e;if(0===n)return this.buffer=i,this.view=null,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this;var o=new ArrayBuffer(n),a=new Uint8Array(o);return a.set(this.view.subarray(e,t)),this.buffer=o,this.view=a,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=n,this},n.copy=function(e,n){if(void 0===e&&(e=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,e<0||e>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+n+" <= "+this.buffer.byteLength)}if(e===n)return new t(0,this.littleEndian,this.noAssert);var o=n-e,i=new t(o,this.littleEndian,this.noAssert);return i.offset=0,i.limit=o,i.markedOffset>=0&&(i.markedOffset-=e),this.copyTo(i,0,e,n),i},n.copyTo=function(e,n,o,i){var a,r;if(!this.noAssert&&!t.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");if(n=(r=void 0===n)?e.offset:0|n,o=(a=void 0===o)?this.offset:0|o,i=void 0===i?this.limit:0|i,n<0||n>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+n+" <= "+e.buffer.byteLength);if(o<0||i>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+o+" <= "+this.buffer.byteLength);var s=i-o;return 0===s?e:(e.ensureCapacity(n+s),e.view.set(this.view.subarray(o,i),n),a&&(this.offset+=s),r&&(e.offset+=s),this)},n.ensureCapacity=function(e){var t=this.buffer.byteLength;return t<e?this.resize((t*=2)>e?t:e):this},n.fill=function(e,t,n){var o=void 0===t;if(o&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===n&&(n=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal end: Not an integer");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(t>=n)return this;for(;t<n;)this.view[t++]=e;return o&&(this.offset=t),this},n.flip=function(){return this.limit=this.offset,this.offset=0,this},n.mark=function(e){if(e=void 0===e?this.offset:e,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=e,this},n.order=function(e){if(!this.noAssert&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!e,this},n.LE=function(e){return this.littleEndian=void 0===e||!!e,this},n.BE=function(e){return this.littleEndian=void 0!==e&&!e,this},n.prepend=function(e,n,o){"number"!=typeof n&&"string"==typeof n||(o=n,n=void 0);var i=void 0===o;if(i&&(o=this.offset),!this.noAssert){if("number"!=typeof o||o%1!=0)throw TypeError("Illegal offset: "+o+" (not an integer)");if((o>>>=0)<0||o+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+o+" (+0) <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,n));var a=e.limit-e.offset;if(a<=0)return this;var r=a-o;if(r>0){var s=new ArrayBuffer(this.buffer.byteLength+r),c=new Uint8Array(s);c.set(this.view.subarray(o,this.buffer.byteLength),a),this.buffer=s,this.view=c,this.offset+=r,this.markedOffset>=0&&(this.markedOffset+=r),this.limit+=r,o+=r}else new Uint8Array(this.buffer);return this.view.set(e.view.subarray(e.offset,e.limit),o-a),e.offset=e.limit,i&&(this.offset-=a),this},n.prependTo=function(e,t){return e.prepend(this,t),this},n.printDebug=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},n.remaining=function(){return this.limit-this.offset},n.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},n.resize=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if((e|=0)<0)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new ArrayBuffer(e),n=new Uint8Array(t);n.set(this.view),this.buffer=t,this.view=n}return this},n.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t?this:(Array.prototype.reverse.call(this.view.subarray(e,t)),this)},n.skip=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.noAssert&&(t<0||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},n.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n=this.clone();return n.offset=e,n.limit=t,n},n.toBuffer=function(e){var t=this.offset,n=this.limit;if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal limit: Not an integer");if(n>>>=0,t<0||t>n||n>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+n+" <= "+this.buffer.byteLength)}if(!e&&0===t&&n===this.buffer.byteLength)return this.buffer;if(t===n)return i;var o=new ArrayBuffer(n-t);return new Uint8Array(o).set(new Uint8Array(this.buffer).subarray(t,n),0),o},n.toArrayBuffer=n.toBuffer,n.toString=function(e,t,n){if(void 0===e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof e&&(n=t=e="utf8"),e){case"utf8":return this.toUTF8(t,n);case"base64":return this.toBase64(t,n);case"hex":return this.toHex(t,n);case"binary":return this.toBinary(t,n);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}};var p=function(){for(var e={},t=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],n=[],o=0,i=t.length;o<i;++o)n[t[o]]=o;return e.encode=function(e,n){for(var o,i;null!==(o=e());)n(t[o>>2&63]),i=(3&o)<<4,null!==(o=e())?(n(t[63&((i|=o>>4&15)|o>>4&15)]),i=(15&o)<<2,null!==(o=e())?(n(t[63&(i|o>>6&3)]),n(t[63&o])):(n(t[63&i]),n(61))):(n(t[63&i]),n(61),n(61))},e.decode=function(e,t){var o,i,a;function r(e){throw Error("Illegal character code: "+e)}for(;null!==(o=e());)if(void 0===(i=n[o])&&r(o),null!==(o=e())&&(void 0===(a=n[o])&&r(o),t(i<<2>>>0|(48&a)>>4),null!==(o=e()))){if(void 0===(i=n[o])){if(61===o)break;r(o)}if(t((15&a)<<4>>>0|(60&i)>>2),null!==(o=e())){if(void 0===(a=n[o])){if(61===o)break;r(o)}t((3&i)<<6>>>0|a)}}},e.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)},e}();n.toBase64=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity||e>t)throw RangeError("begin, end");var n;return p.encode(function(){return e<t?this.view[e++]:null}.bind(this),n=s()),n()},t.fromBase64=function(e,n){if("string"!=typeof e)throw TypeError("str");var o=new t(e.length/4*3,n),i=0;return p.decode(r(e),function(e){o.view[i++]=e}),o.limit=i,o},t.btoa=function(e){return t.fromBinary(e).toBase64()},t.atob=function(e){return t.fromBase64(e).toBinary()},n.toBinary=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity()||e>t)throw RangeError("begin, end");if(e===t)return"";for(var n=[],o=[];e<t;)n.push(this.view[e++]),n.length>=1024&&(o.push(String.fromCharCode.apply(String,n)),n=[]);return o.join("")+String.fromCharCode.apply(String,n)},t.fromBinary=function(e,n){if("string"!=typeof e)throw TypeError("str");for(var o,i=0,a=e.length,r=new t(a,n);i<a;){if((o=e.charCodeAt(i))>255)throw RangeError("illegal char code: "+o);r.view[i++]=o}return r.limit=a,r},n.toDebug=function(e){for(var t,n=-1,o=this.buffer.byteLength,i="",a="",r="";n<o;){if(-1!==n&&(i+=(t=this.view[n])<16?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(a+=t>32&&t<127?String.fromCharCode(t):".")),++n,e&&n>0&&n%16==0&&n!==o){for(;i.length<51;)i+=" ";r+=i+a+"\n",i=a=""}n===this.offset&&n===this.limit?i+=n===this.markedOffset?"!":"|":n===this.offset?i+=n===this.markedOffset?"[":"<":n===this.limit?i+=n===this.markedOffset?"]":">":i+=n===this.markedOffset?"'":e||0!==n&&n!==o?" ":""}if(e&&" "!==i){for(;i.length<51;)i+=" ";r+=i+a+"\n"}return e?r:i},t.fromDebug=function(e,n,o){for(var i,a,r=e.length,s=new t((r+1)/3|0,n,o),c=0,l=0,p=!1,u=!1,h=!1,d=!1,g=!1;c<r;){switch(i=e.charAt(c++)){case"!":if(!o){if(u||h||d){g=!0;break}u=h=d=!0}s.offset=s.markedOffset=s.limit=l,p=!1;break;case"|":if(!o){if(u||d){g=!0;break}u=d=!0}s.offset=s.limit=l,p=!1;break;case"[":if(!o){if(u||h){g=!0;break}u=h=!0}s.offset=s.markedOffset=l,p=!1;break;case"<":if(!o){if(u){g=!0;break}u=!0}s.offset=l,p=!1;break;case"]":if(!o){if(d||h){g=!0;break}d=h=!0}s.limit=s.markedOffset=l,p=!1;break;case">":if(!o){if(d){g=!0;break}d=!0}s.limit=l,p=!1;break;case"'":if(!o){if(h){g=!0;break}h=!0}s.markedOffset=l,p=!1;break;case" ":p=!1;break;default:if(!o&&p){g=!0;break}if(a=parseInt(i+e.charAt(c++),16),!o&&(isNaN(a)||a<0||a>255))throw TypeError("Illegal str: Not a debug encoded string");s.view[l++]=a,p=!0}if(g)throw TypeError("Illegal str: Invalid symbol at "+c)}if(!o){if(!u||!d)throw TypeError("Illegal str: Missing offset or limit");if(l<s.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+l+" < "+r)}return s},n.toHex=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var n,o=new Array(t-e);e<t;)(n=this.view[e++])<16?o.push("0",n.toString(16)):o.push(n.toString(16));return o.join("")},t.fromHex=function(e,n,o){if(!o){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var i,a=e.length,r=new t(a/2|0,n),s=0,c=0;s<a;s+=2){if(i=parseInt(e.substring(s,s+2),16),!o&&(!isFinite(i)||i<0||i>255))throw TypeError("Illegal str: Contains non-hex characters");r.view[c++]=i}return r.limit=c,r};var u=function(){var e={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<128?t(127&n):n<2048?(t(n>>6&31|192),t(63&n|128)):n<65536?(t(n>>12&15|224),t(n>>6&63|128),t(63&n|128)):(t(n>>18&7|240),t(n>>12&63|128),t(n>>6&63|128),t(63&n|128)),n=null},decodeUTF8:function(e,t){for(var n,o,i,a,r=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(n=e());)if(0==(128&n))t(n);else if(192==(224&n))null===(o=e())&&r([n,o]),t((31&n)<<6|63&o);else if(224==(240&n))(null===(o=e())||null===(i=e()))&&r([n,o,i]),t((15&n)<<12|(63&o)<<6|63&i);else{if(240!=(248&n))throw RangeError("Illegal starting byte: "+n);(null===(o=e())||null===(i=e())||null===(a=e()))&&r([n,o,i,a]),t((7&n)<<18|(63&o)<<12|(63&i)<<6|63&a)}},UTF16toUTF8:function(e,t){for(var n,o=null;null!==(n=null!==o?o:e());)n>=55296&&n<=57343&&null!==(o=e())&&o>=56320&&o<=57343?(t(1024*(n-55296)+o-56320+65536),o=null):t(n);null!==o&&t(o)},UTF8toUTF16:function(e,t){var n=null;for("number"==typeof e&&(n=e,e=function(){return null});null!==n||null!==(n=e());)n<=65535?t(n):(t(55296+((n-=65536)>>10)),t(n%1024+56320)),n=null},encodeUTF16toUTF8:function(t,n){e.UTF16toUTF8(t,function(t){e.encodeUTF8(t,n)})},decodeUTF8toUTF16:function(t,n){e.decodeUTF8(t,function(t){e.UTF8toUTF16(t,n)})},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(e){for(var t,n=0;null!==(t=e());)n+=t<128?1:t<2048?2:t<65536?3:4;return n},calculateUTF16asUTF8:function(t){var n=0,o=0;return e.UTF16toUTF8(t,function(e){++n,o+=e<128?1:e<2048?2:e<65536?3:4}),[n,o]}};return e}();return n.toUTF8=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var n;try{u.decodeUTF8toUTF16(function(){return e<t?this.view[e++]:null}.bind(this),n=s())}catch(n){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return n()},t.fromUTF8=function(e,n,o){if(!o&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var i=new t(u.calculateUTF16asUTF8(r(e),!0)[1],n,o),a=0;return u.encodeUTF16toUTF8(r(e),function(e){i.view[a++]=e}),i.limit=a,i},t}),cc._RF.pop()},{"./long":"long"}],createPoker:[function(e,t,n){"use strict";cc._RF.push(t,"24e09clkmlLYaA+E9UmtDKB","createPoker");var o=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),i=this&&this.__decorate||function(e,t,n,o){var i,a=arguments.length,r=a<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,o);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(r=(a<3?i(r):a>3?i(t,n,r):i(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r};Object.defineProperty(n,"__esModule",{value:!0});var a=cc._decorator,r=a.ccclass,s=a.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pokerAtlas=null,t.card_bg=null,t.num=null,t.color1=null,t.color2=null,t.dawang=null,t.xiaowang=null,t.grey=null,t.back=null,t._cbCardData=0,t._bShoot=!1,t}return o(t,e),t.prototype.onLoad=function(){},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.TOUCH_END,function(e){})},t.prototype.createPoker=function(e,t){if(void 0===t&&(t=!1),e=e||0,this._cbCardData=e,this.card_bg.stopAllActions(),this.back.stopAllActions(),this.card_bg.setScale(1),this.back.setScale(1),this.back.color=cc.color(255,255,255),this.grey.active=!1,0==e)return this.card_bg.active=!1,this.back.active=!0,void this.back.setScale(1);this.card_bg.active=!0,this.back.active=!1,this.card_bg.getComponent(cc.Sprite).spriteFrame=this.pokerAtlas.getSpriteFrame("card_bg"),this.num.active=!0,this.color1.active=!0,this.color2.active=!0,this.dawang.active=!1,this.xiaowang.active=!1;var n=parseInt((240&e)/16+""),o=15&e;if(o>=14)this.num.active=!1,this.color1.active=!1,this.color2.active=!1,14==o?this.xiaowang.active=!0:15==o&&(this.dawang.active=!0);else if(n<=3){var i="";0==n||2==n?i="red_"+o:1!=n&&3!=n||(i="black_"+o);var a="small_"+n,r="large_"+n;this.num.getComponent(cc.Sprite).spriteFrame=this.pokerAtlas.getSpriteFrame(i),this.color1.getComponent(cc.Sprite).spriteFrame=this.pokerAtlas.getSpriteFrame(a),this.color2.getComponent(cc.Sprite).spriteFrame=this.pokerAtlas.getSpriteFrame(r)}else console.log("create Poker  DATA error!",e)},t.prototype.setShoot=function(e,t){if(1==e){var n=t||35;this._bShoot=!0,console.log("\u6311\u8d77\u624b\u724c\u7684\u724c\u503c\uff1a\uff1a"+this._cbCardData),this.node.setPosition(cc.v2(this.node.getPosition().x,n))}else this._bShoot=!1,this.node.setPosition(cc.v2(this.node.getPosition().x,0))},t.prototype.setGrey=function(e,t){void 0===t&&(t=70),this.grey.active=e,this.grey.opacity=t},t.prototype.setCardAni=function(e){var t=this;if(0!=e){this.createPoker(e),this.back.active=!0;var n=this.node.y,o=this.node.getScale(cc.v2()),i=cc.sequence(cc.scaleTo(.2,.2,o.y),cc.callFunc(function(){t.back.active=!1,t.card_bg.active=!0}),cc.scaleTo(.2,o.x,o.y),cc.callFunc(function(){t.node.y=n}));this.node.runAction(i)}},t.prototype.getCardValue=function(){return this._cbCardData},t.prototype.getShoot=function(){return this._bShoot},t.prototype.getCardLogicValue=function(){return 15&this._cbCardData},i([s(cc.SpriteAtlas)],t.prototype,"pokerAtlas",void 0),i([s(cc.Node)],t.prototype,"card_bg",void 0),i([s(cc.Node)],t.prototype,"num",void 0),i([s(cc.Node)],t.prototype,"color1",void 0),i([s(cc.Node)],t.prototype,"color2",void 0),i([s(cc.Node)],t.prototype,"dawang",void 0),i([s(cc.Node)],t.prototype,"xiaowang",void 0),i([s(cc.Node)],t.prototype,"grey",void 0),i([s(cc.Node)],t.prototype,"back",void 0),t=i([r],t)}(cc.Component);n.default=c,cc._RF.pop()},{}],long:[function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cc._RF.push(t,"586deJaoz9OLLRnTrPgEPnz","long"),function(n,i){"function"==typeof define&&define.amd?define([],i):"function"==typeof e&&"object"===(void 0===t?"undefined":o(t))&&t&&t.exports?t.exports=i():((void 0).dcodeIO=(void 0).dcodeIO||{}).Long=i()}(0,function(){function e(e,t,n){this.low=0|e,this.high=0|t,this.unsigned=!!n}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var n={},o={};function i(e,t){var i,a,s;return t?(s=0<=(e>>>=0)&&e<256)&&(a=o[e])?a:(i=r(e,(0|e)<0?-1:0,!0),s&&(o[e]=i),i):(s=-128<=(e|=0)&&e<128)&&(a=n[e])?a:(i=r(e,e<0?-1:0,!1),s&&(n[e]=i),i)}function a(e,t){if(isNaN(e)||!isFinite(e))return t?f:g;if(t){if(e<0)return f;if(e>=u)return b}else{if(e<=-h)return C;if(e+1>=h)return v}return e<0?a(-e,t).neg():r(e%p|0,e/p|0,t)}function r(t,n,o){return new e(t,n,o)}e.fromInt=i,e.fromNumber=a,e.fromBits=r;var s=Math.pow;function c(e,t,n){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(n=t,t=!1):t=!!t,(n=n||10)<2||36<n)throw RangeError("radix");var o;if((o=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===o)return c(e.substring(1),t,n).neg();for(var i=a(s(n,8)),r=g,l=0;l<e.length;l+=8){var p=Math.min(8,e.length-l),u=parseInt(e.substring(l,l+p),n);if(p<8){var h=a(s(n,p));r=r.mul(h).add(a(u))}else r=(r=r.mul(i)).add(a(u))}return r.unsigned=t,r}function l(t){return t instanceof e?t:"number"==typeof t?a(t):"string"==typeof t?c(t):r(t.low,t.high,t.unsigned)}e.fromString=c,e.fromValue=l;var p=4294967296,u=p*p,h=u/2,d=i(1<<24),g=i(0);e.ZERO=g;var f=i(0,!0);e.UZERO=f;var m=i(1);e.ONE=m;var _=i(1,!0);e.UONE=_;var y=i(-1);e.NEG_ONE=y;var v=r(-1,2147483647,!1);e.MAX_VALUE=v;var b=r(-1,-1,!0);e.MAX_UNSIGNED_VALUE=b;var C=r(0,-2147483648,!1);e.MIN_VALUE=C;var M=e.prototype;return M.toInt=function(){return this.unsigned?this.low>>>0:this.low},M.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},M.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(C)){var t=a(e),n=this.div(t),o=n.mul(t).sub(this);return n.toString(e)+o.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=a(s(e,6),this.unsigned),r=this,c="";;){var l=r.div(i),p=(r.sub(l.mul(i)).toInt()>>>0).toString(e);if((r=l).isZero())return p+c;for(;p.length<6;)p="0"+p;c=""+p+c}},M.getHighBits=function(){return this.high},M.getHighBitsUnsigned=function(){return this.high>>>0},M.getLowBits=function(){return this.low},M.getLowBitsUnsigned=function(){return this.low>>>0},M.getNumBitsAbs=function(){if(this.isNegative())return this.eq(C)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},M.isZero=function(){return 0===this.high&&0===this.low},M.isNegative=function(){return!this.unsigned&&this.high<0},M.isPositive=function(){return this.unsigned||this.high>=0},M.isOdd=function(){return 1==(1&this.low)},M.isEven=function(){return 0==(1&this.low)},M.equals=function(e){return t(e)||(e=l(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&(this.high===e.high&&this.low===e.low)},M.eq=M.equals,M.notEquals=function(e){return!this.eq(e)},M.neq=M.notEquals,M.lessThan=function(e){return this.comp(e)<0},M.lt=M.lessThan,M.lessThanOrEqual=function(e){return this.comp(e)<=0},M.lte=M.lessThanOrEqual,M.greaterThan=function(e){return this.comp(e)>0},M.gt=M.greaterThan,M.greaterThanOrEqual=function(e){return this.comp(e)>=0},M.gte=M.greaterThanOrEqual,M.compare=function(e){if(t(e)||(e=l(e)),this.eq(e))return 0;var n=this.isNegative(),o=e.isNegative();return n&&!o?-1:!n&&o?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},M.comp=M.compare,M.negate=function(){return!this.unsigned&&this.eq(C)?C:this.not().add(m)},M.neg=M.negate,M.add=function(e){t(e)||(e=l(e));var n=this.high>>>16,o=65535&this.high,i=this.low>>>16,a=65535&this.low,s=e.high>>>16,c=65535&e.high,p=e.low>>>16,u=0,h=0,d=0,g=0;return d+=(g+=a+(65535&e.low))>>>16,h+=(d+=i+p)>>>16,u+=(h+=o+c)>>>16,u+=n+s,r((d&=65535)<<16|(g&=65535),(u&=65535)<<16|(h&=65535),this.unsigned)},M.subtract=function(e){return t(e)||(e=l(e)),this.add(e.neg())},M.sub=M.subtract,M.multiply=function(e){if(this.isZero())return g;if(t(e)||(e=l(e)),e.isZero())return g;if(this.eq(C))return e.isOdd()?C:g;if(e.eq(C))return this.isOdd()?C:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(d)&&e.lt(d))return a(this.toNumber()*e.toNumber(),this.unsigned);var n=this.high>>>16,o=65535&this.high,i=this.low>>>16,s=65535&this.low,c=e.high>>>16,p=65535&e.high,u=e.low>>>16,h=65535&e.low,f=0,m=0,_=0,y=0;return _+=(y+=s*h)>>>16,m+=(_+=i*h)>>>16,_&=65535,m+=(_+=s*u)>>>16,f+=(m+=o*h)>>>16,m&=65535,f+=(m+=i*u)>>>16,m&=65535,f+=(m+=s*p)>>>16,f+=n*h+o*u+i*p+s*c,r((_&=65535)<<16|(y&=65535),(f&=65535)<<16|(m&=65535),this.unsigned)},M.mul=M.multiply,M.divide=function(e){if(t(e)||(e=l(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?f:g;var n,o,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return f;if(e.gt(this.shru(1)))return _;i=f}else{if(this.eq(C))return e.eq(m)||e.eq(y)?C:e.eq(C)?m:(n=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?m:y:(o=this.sub(e.mul(n)),i=n.add(o.div(e)));else if(e.eq(C))return this.unsigned?f:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(o=this;o.gte(e);){n=Math.max(1,Math.floor(o.toNumber()/e.toNumber()));for(var r=Math.ceil(Math.log(n)/Math.LN2),c=r<=48?1:s(2,r-48),p=a(n),u=p.mul(e);u.isNegative()||u.gt(o);)u=(p=a(n-=c,this.unsigned)).mul(e);p.isZero()&&(p=m),i=i.add(p),o=o.sub(u)}return i},M.div=M.divide,M.modulo=function(e){return t(e)||(e=l(e)),this.sub(this.div(e).mul(e))},M.mod=M.modulo,M.not=function(){return r(~this.low,~this.high,this.unsigned)},M.and=function(e){return t(e)||(e=l(e)),r(this.low&e.low,this.high&e.high,this.unsigned)},M.or=function(e){return t(e)||(e=l(e)),r(this.low|e.low,this.high|e.high,this.unsigned)},M.xor=function(e){return t(e)||(e=l(e)),r(this.low^e.low,this.high^e.high,this.unsigned)},M.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?r(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):r(0,this.low<<e-32,this.unsigned)},M.shl=M.shiftLeft,M.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?r(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):r(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},M.shr=M.shiftRight,M.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0===(e&=63))return this;var n=this.high;return e<32?r(this.low>>>e|n<<32-e,n>>>e,this.unsigned):r(32===e?n:n>>>e-32,0,this.unsigned)},M.shru=M.shiftRightUnsigned,M.toSigned=function(){return this.unsigned?r(this.low,this.high,!1):this},M.toUnsigned=function(){return this.unsigned?this:r(this.low,this.high,!0)},M.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},M.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&e,e>>>8&255,e>>>16&255,e>>>24&255]},M.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},e}),cc._RF.pop()},{}],pbkiller:[function(e,t,n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cc._RF.push(t,"e4099gKXxRE2afyH/PKbklC","pbkiller");var i=e("protobufjs");i.Util.IS_NODE=cc.sys.isNative;var a=parseFloat(cc.ENGINE_VERSION.match(/\d+\.\d+/,"")[0]);i.Util.IS_NODE=!1,i.Util.fetch=cc.loader.getRes.bind(cc.loader);var r=i.loadProto.bind(i);i.loadProto=function(e,t,n){try{"string"==typeof e?r(e,t,n):e.text&&r(e.text,t,n)}catch(e){cc.warn("".concat(n,": protobuf syntax error"))}},i.loadJsonFile=function(e,t,n){if(t&&"object"===o(t)?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return i.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,function(o){if(null!==o)try{t(null,i.loadJson(JSON.parse(o),n,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))});var a,r="object"===o(e)?e.root+"/"+e.file:e;if(i.preloaded){var s=cc.loader.getRes(r,cc.JsonAsset);s&&(a=cc.JsonAsset?s.json:s)}else{var c=i.Util.fetch(r);c&&(a=JSON.parse(c))}return a?i.loadJson(a,n,e):null},t.exports={root:"pb",preload:function(e){cc.loader.loadResDir(this.root,function(t,n){i.preloaded=!t,e()})},loadFromFile:function(e,t){"string"==typeof e&&(e=[e]);var n=i.newBuilder();return a>=2||a>=1.1&&a<1.2&&i.preloaded?n.importRoot=this.root:n.importRoot=cc.url.raw("resources/".concat(this.root)),e.forEach(function(e){var t=cc.path.extname(e),o="".concat(n.importRoot,"/").concat(e);".proto"===t?i.loadProtoFile(o,n):".json"===t?i.loadJsonFile(o,n):cc.log("nonsupport file extname, only support 'proto' or 'json'")}),n.build(t)},loadAll:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"proto",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=[];return(this.root.endsWith("/")||this.root.endsWith("\\"))&&(this.root=this.root.substr(0,this.root.length-1)),cc.loader._assetTables.assets.getUuidArray(this.root,null,o),o=o.map(function(n){var o=n.substr(e.root.length+1);return"".concat(o,".").concat(t)}),this.loadFromFile(o,n)},loadData:function(e,t){if(cc.sys.isNative){var n=jsb.fileUtils.getDataFromFile(e);setTimeout(function(){t(n)},0)}else{var o=i.Util.XHR();if(o.open("GET",e,!0),o.setRequestHeader("Accept","text/plain"),o.responseType="arraybuffer","function"==typeof o.overrideMimeType&&o.overrideMimeType("text/plain"),t){if(o.onreadystatechange=function(){4==o.readyState&&(200==o.status||0==o.status?t(o.response):t(null))},4==o.readyState)return;o.send(null)}}},loadProtoDir:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"proto",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=[];return this.root=e,(e.endsWith("/")||e.endsWith("\\"))&&(e=e.substr(0,e.length-1)),cc.loader._assetTables.assets.getUuidArray(e,null,o),o=o.map(function(n){var o=n.substr(e.length+1);return"".concat(o,".").concat(t)}),this.loadFromFile(o,n)}},cc._RF.pop()},{protobufjs:"protobufjs"}],protobufjs:[function(e,t,n){(function(n){"use strict";function o(e){"@babel/helpers - typeof";return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}cc._RF.push(t,"b6570xNGFdCEIIAM3kcu6sG","protobufjs"),function(n,i){"function"==typeof define&&define.amd?define(["bytebuffer"],i):"function"==typeof e&&"object"===(void 0===t?"undefined":o(t))&&t&&t.exports?t.exports=i(e("./bytebuffer"),!0):((void 0).dcodeIO=(void 0).dcodeIO||{}).ProtoBuf=i((void 0).dcodeIO.ByteBuffer)}(0,function(t,i){var a={};return a.ByteBuffer=t,a.Long=t.Long||null,a.VERSION="5.0.2",a.WIRE_TYPES={},a.WIRE_TYPES.VARINT=0,a.WIRE_TYPES.BITS64=1,a.WIRE_TYPES.LDELIM=2,a.WIRE_TYPES.STARTGROUP=3,a.WIRE_TYPES.ENDGROUP=4,a.WIRE_TYPES.BITS32=5,a.PACKABLE_WIRE_TYPES=[a.WIRE_TYPES.VARINT,a.WIRE_TYPES.BITS64,a.WIRE_TYPES.BITS32],a.TYPES={int32:{name:"int32",wireType:a.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:a.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:a.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:a.WIRE_TYPES.VARINT,defaultValue:a.Long?a.Long.ZERO:void 0},uint64:{name:"uint64",wireType:a.WIRE_TYPES.VARINT,defaultValue:a.Long?a.Long.UZERO:void 0},sint64:{name:"sint64",wireType:a.WIRE_TYPES.VARINT,defaultValue:a.Long?a.Long.ZERO:void 0},bool:{name:"bool",wireType:a.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:"double",wireType:a.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:a.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:a.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:a.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:a.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:a.WIRE_TYPES.BITS64,defaultValue:a.Long?a.Long.UZERO:void 0},sfixed64:{name:"sfixed64",wireType:a.WIRE_TYPES.BITS64,defaultValue:a.Long?a.Long.ZERO:void 0},float:{name:"float",wireType:a.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:"enum",wireType:a.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:a.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:a.WIRE_TYPES.STARTGROUP,defaultValue:null}},a.MAP_KEY_TYPES=[a.TYPES.int32,a.TYPES.sint32,a.TYPES.sfixed32,a.TYPES.uint32,a.TYPES.fixed32,a.TYPES.int64,a.TYPES.sint64,a.TYPES.sfixed64,a.TYPES.uint64,a.TYPES.fixed64,a.TYPES.bool,a.TYPES.string,a.TYPES.bytes],a.ID_MIN=1,a.ID_MAX=536870911,a.convertFieldsToCamelCase=!1,a.populateAccessors=!0,a.populateDefaults=!0,a.Util=function(){var t={};return t.IS_NODE=!("object"!==(void 0===n?"undefined":o(n))||n+""!="[object process]"||n.browser),t.XHR=function(){for(var e=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],t=null,n=0;n<e.length;n++){try{t=e[n]()}catch(e){continue}break}if(!t)throw Error("XMLHttpRequest is not supported");return t},t.fetch=function(n,o){if(o&&"function"!=typeof o&&(o=null),t.IS_NODE){var i=e("fs");if(o)i.readFile(n,function(e,t){o(e?null:""+t)});else try{return i.readFileSync(n)}catch(e){return null}}else{var a=t.XHR();if(a.open("GET",n,!!o),a.setRequestHeader("Accept","text/plain"),"function"==typeof a.overrideMimeType&&a.overrideMimeType("text/plain"),!o)return a.send(null),200==a.status||0==a.status&&"string"==typeof a.responseText?a.responseText:null;if(a.onreadystatechange=function(){4==a.readyState&&(200==a.status||0==a.status&&"string"==typeof a.responseText?o(a.responseText):o(null))},4==a.readyState)return;a.send(null)}},t.toCamelCase=function(e){return e.replace(/_([a-zA-Z])/g,function(e,t){return t.toUpperCase()})},t}(),a.Lang={DELIM:/[\s\{\}=;:\[\],'"\(\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,STRING_DQ:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,STRING_SQ:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g},a.DotProto=function(e,t){var n={},o=function(e){this.source=e+"",this.index=0,this.line=1,this.stack=[],this._stringOpen=null},i=o.prototype;i._readString=function(){var e='"'===this._stringOpen?t.STRING_DQ:t.STRING_SQ;e.lastIndex=this.index-1;var n=e.exec(this.source);if(!n)throw Error("unterminated string");return this.index=e.lastIndex,this.stack.push(this._stringOpen),this._stringOpen=null,n[1]},i.next=function(){if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this._stringOpen)return this._readString();var e,n,o;do{for(e=!1;t.WHITESPACE.test(o=this.source.charAt(this.index));)if("\n"===o&&++this.line,++this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if(++this.index,"/"===this.source.charAt(this.index)){for(;"\n"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,e=!0}else{if("*"!==(o=this.source.charAt(this.index)))return"/";do{if("\n"===o&&++this.line,++this.index===this.source.length)return null;n=o,o=this.source.charAt(this.index)}while("*"!==n||"/"!==o);++this.index,e=!0}}while(e);if(this.index===this.source.length)return null;var i=this.index;if(t.DELIM.lastIndex=0,!t.DELIM.test(this.source.charAt(i++)))for(;i<this.source.length&&!t.DELIM.test(this.source.charAt(i));)++i;var a=this.source.substring(this.index,this.index=i);return'"'!==a&&"'"!==a||(this._stringOpen=a),a},i.peek=function(){if(0===this.stack.length){var e=this.next();if(null===e)return null;this.stack.push(e)}return this.stack[0]},i.skip=function(e){var t=this.next();if(t!==e)throw Error("illegal '"+t+"', '"+e+"' expected")},i.omit=function(e){return this.peek()===e&&(this.next(),!0)},i.toString=function(){return"Tokenizer ("+this.index+"/"+this.source.length+" at line "+this.line+")"},n.Tokenizer=o;var a=function(e){this.tn=new o(e),this.proto3=!1},r=a.prototype;function s(e,n){var o=-1,i=1;if("-"==e.charAt(0)&&(i=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))o=parseInt(e);else if(t.NUMBER_HEX.test(e))o=parseInt(e.substring(2),16);else{if(!t.NUMBER_OCT.test(e))throw Error("illegal id value: "+(i<0?"-":"")+e);o=parseInt(e.substring(1),8)}if(o=i*o|0,!n&&o<0)throw Error("illegal id value: "+(i<0?"-":"")+e);return o}function c(e){var n=1;if("-"==e.charAt(0)&&(n=-1,e=e.substring(1)),t.NUMBER_DEC.test(e))return n*parseInt(e,10);if(t.NUMBER_HEX.test(e))return n*parseInt(e.substring(2),16);if(t.NUMBER_OCT.test(e))return n*parseInt(e.substring(1),8);if("inf"===e)return n*(1/0);if("nan"===e)return NaN;if(t.NUMBER_FLT.test(e))return n*parseFloat(e);throw Error("illegal number value: "+(n<0?"-":"")+e)}function l(e,t,n){void 0===e[t]?e[t]=n:(Array.isArray(e[t])||(e[t]=[e[t]]),e[t].push(n))}return r.parse=function(){var e,n,o={name:"[ROOT]",package:null,messages:[],enums:[],imports:[],options:{},services:[]},i=!0;try{for(;e=this.tn.next();)switch(e){case"package":if(!i||null!==o.package)throw Error("unexpected 'package'");if(e=this.tn.next(),!t.TYPEREF.test(e))throw Error("illegal package name: "+e);this.tn.skip(";"),o.package=e;break;case"import":if(!i)throw Error("unexpected 'import'");("public"===(e=this.tn.peek())||(n="weak"===e))&&this.tn.next(),e=this._readString(),this.tn.skip(";"),n||o.imports.push(e);break;case"syntax":if(!i)throw Error("unexpected 'syntax'");this.tn.skip("="),"proto3"===(o.syntax=this._readString())&&(this.proto3=!0),this.tn.skip(";");break;case"message":this._parseMessage(o,null),i=!1;break;case"enum":this._parseEnum(o),i=!1;break;case"option":this._parseOption(o);break;case"service":this._parseService(o);break;case"extend":this._parseExtend(o);break;default:throw Error("unexpected '"+e+"'")}}catch(e){throw e.message="Parse error at line "+this.tn.line+": "+e.message,e}return delete o.name,o},a.parse=function(e){return new a(e).parse()},r._readString=function(){var e,t,n="";do{if("'"!==(t=this.tn.next())&&'"'!==t)throw Error("illegal string delimiter: "+t);n+=this.tn.next(),this.tn.skip(t),e=this.tn.peek()}while('"'===e||'"'===e);return n},r._readValue=function(e){var n=this.tn.peek();if('"'===n||"'"===n)return this._readString();if(this.tn.next(),t.NUMBER.test(n))return c(n);if(t.BOOL.test(n))return"true"===n.toLowerCase();if(e&&t.TYPEREF.test(n))return n;throw Error("illegal value: "+n)},r._parseOption=function(e,n){var o=this.tn.next(),i=!1;if("("===o&&(i=!0,o=this.tn.next()),!t.TYPEREF.test(o))throw Error("illegal option name: "+o);var a=o;i&&(this.tn.skip(")"),a="("+a+")",o=this.tn.peek(),t.FQTYPEREF.test(o)&&(a+=o,this.tn.next())),this.tn.skip("="),this._parseOptionValue(e,a),n||this.tn.skip(";")},r._parseOptionValue=function(e,n){var o=this.tn.peek();if("{"!==o)l(e.options,n,this._readValue(!0));else for(this.tn.skip("{");"}"!==(o=this.tn.next());){if(!t.NAME.test(o))throw Error("illegal option name: "+n+"."+o);this.tn.omit(":")?l(e.options,n+"."+o,this._readValue(!0)):this._parseOptionValue(e,n+"."+o)}},r._parseService=function(e){var n=this.tn.next();if(!t.NAME.test(n))throw Error("illegal service name at line "+this.tn.line+": "+n);var o={name:n,rpc:{},options:{}};for(this.tn.skip("{");"}"!==(n=this.tn.next());)if("option"===n)this._parseOption(o);else{if("rpc"!==n)throw Error("illegal service token: "+n);this._parseServiceRPC(o)}this.tn.omit(";"),e.services.push(o)},r._parseServiceRPC=function(e){var n=this.tn.next();if(!t.NAME.test(n))throw Error("illegal rpc service method name: "+n);var o=n,i={request:null,response:null,request_stream:!1,response_stream:!1,options:{}};if(this.tn.skip("("),"stream"===(n=this.tn.next()).toLowerCase()&&(i.request_stream=!0,n=this.tn.next()),!t.TYPEREF.test(n))throw Error("illegal rpc service request type: "+n);if(i.request=n,this.tn.skip(")"),"returns"!==(n=this.tn.next()).toLowerCase())throw Error("illegal rpc service request type delimiter: "+n);if(this.tn.skip("("),"stream"===(n=this.tn.next()).toLowerCase()&&(i.response_stream=!0,n=this.tn.next()),i.response=n,this.tn.skip(")"),"{"===(n=this.tn.peek())){for(this.tn.next();"}"!==(n=this.tn.next());){if("option"!==n)throw Error("illegal rpc service token: "+n);this._parseOption(i)}this.tn.omit(";")}else this.tn.skip(";");void 0===e.rpc&&(e.rpc={}),e.rpc[o]=i},r._parseMessage=function(e,n){var o=!!n,i=this.tn.next(),a={name:"",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!t.NAME.test(i))throw Error("illegal "+(o?"group":"message")+" name: "+i);for(a.name=i,o&&(this.tn.skip("="),n.id=s(this.tn.next()),a.isGroup=!0),"["===(i=this.tn.peek())&&n&&this._parseFieldOptions(n),this.tn.skip("{");"}"!==(i=this.tn.next());)if(t.RULE.test(i))this._parseMessageField(a,i);else if("oneof"===i)this._parseMessageOneOf(a);else if("enum"===i)this._parseEnum(a);else if("message"===i)this._parseMessage(a);else if("option"===i)this._parseOption(a);else if("service"===i)this._parseService(a);else if("extensions"===i)a.hasOwnProperty("extensions")?a.extensions=a.extensions.concat(this._parseExtensionRanges()):a.extensions=this._parseExtensionRanges();else if("reserved"===i)this._parseIgnored();else if("extend"===i)this._parseExtend(a);else{if(!t.TYPEREF.test(i))throw Error("illegal message token: "+i);if(!this.proto3)throw Error("illegal field rule: "+i);this._parseMessageField(a,"optional",i)}return this.tn.omit(";"),e.messages.push(a),a},r._parseIgnored=function(){for(;";"!==this.tn.peek();)this.tn.next();this.tn.skip(";")},r._parseMessageField=function(e,n,o){if(!t.RULE.test(n))throw Error("illegal message field rule: "+n);var i,a={rule:n,type:"",name:"",options:{},id:0};if("map"===n){if(o)throw Error("illegal type: "+o);if(this.tn.skip("<"),i=this.tn.next(),!t.TYPE.test(i)&&!t.TYPEREF.test(i))throw Error("illegal message field type: "+i);if(a.keytype=i,this.tn.skip(","),i=this.tn.next(),!t.TYPE.test(i)&&!t.TYPEREF.test(i))throw Error("illegal message field: "+i);if(a.type=i,this.tn.skip(">"),i=this.tn.next(),!t.NAME.test(i))throw Error("illegal message field name: "+i);a.name=i,this.tn.skip("="),a.id=s(this.tn.next()),"["===(i=this.tn.peek())&&this._parseFieldOptions(a),this.tn.skip(";")}else if("group"===(o=void 0!==o?o:this.tn.next())){var r=this._parseMessage(e,a);if(!/^[A-Z]/.test(r.name))throw Error("illegal group name: "+r.name);a.type=r.name,a.name=r.name.toLowerCase(),this.tn.omit(";")}else{if(!t.TYPE.test(o)&&!t.TYPEREF.test(o))throw Error("illegal message field type: "+o);if(a.type=o,i=this.tn.next(),!t.NAME.test(i))throw Error("illegal message field name: "+i);a.name=i,this.tn.skip("="),a.id=s(this.tn.next()),"["===(i=this.tn.peek())&&this._parseFieldOptions(a),this.tn.skip(";")}return e.fields.push(a),a},r._parseMessageOneOf=function(e){var n=this.tn.next();if(!t.NAME.test(n))throw Error("illegal oneof name: "+n);var o,i=n,a=[];for(this.tn.skip("{");"}"!==(n=this.tn.next());)(o=this._parseMessageField(e,"optional",n)).oneof=i,a.push(o.id);this.tn.omit(";"),e.oneofs[i]=a},r._parseFieldOptions=function(e){this.tn.skip("[");for(var t=!0;"]"!==this.tn.peek();)t||this.tn.skip(","),this._parseOption(e,!0),t=!1;this.tn.next()},r._parseEnum=function(e){var n={name:"",values:[],options:{}},o=this.tn.next();if(!t.NAME.test(o))throw Error("illegal name: "+o);for(n.name=o,this.tn.skip("{");"}"!==(o=this.tn.next());)if("option"===o)this._parseOption(n);else{if(!t.NAME.test(o))throw Error("illegal name: "+o);this.tn.skip("=");var i={name:o,id:s(this.tn.next(),!0)};"["===(o=this.tn.peek())&&this._parseFieldOptions({options:{}}),this.tn.skip(";"),n.values.push(i)}this.tn.omit(";"),e.enums.push(n)},r._parseExtensionRanges=function(){var t,n,o,i=[];do{for(n=[];;){switch(t=this.tn.next()){case"min":o=e.ID_MIN;break;case"max":o=e.ID_MAX;break;default:o=c(t)}if(n.push(o),2===n.length)break;if("to"!==this.tn.peek()){n.push(o);break}this.tn.next()}i.push(n)}while(this.tn.omit(","));return this.tn.skip(";"),i},r._parseExtend=function(e){var n=this.tn.next();if(!t.TYPEREF.test(n))throw Error("illegal extend reference: "+n);var o={ref:n,fields:[]};for(this.tn.skip("{");"}"!==(n=this.tn.next());)if(t.RULE.test(n))this._parseMessageField(o,n);else{if(!t.TYPEREF.test(n))throw Error("illegal extend token: "+n);if(!this.proto3)throw Error("illegal field rule: "+n);this._parseMessageField(o,"optional",n)}return this.tn.omit(";"),e.messages.push(o),o},r.toString=function(){return"Parser at line "+this.tn.line},n.Parser=a,n}(a,a.Lang),a.Reflect=function(e){var n={},i=function(e,t,n){this.builder=e,this.parent=t,this.name=n,this.className},a=i.prototype;a.fqn=function(){for(var e=this.name,t=this;;){if(null==(t=t.parent))break;e=t.name+"."+e}return e},a.toString=function(e){return(e?this.className+" ":"")+this.fqn()},a.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},n.T=i;var r=function(e,t,n,o,a){i.call(this,e,t,n),this.className="Namespace",this.children=[],this.options=o||{},this.syntax=a||"proto2"},s=r.prototype=Object.create(i.prototype);s.getChildren=function(e){if(null==(e=e||null))return this.children.slice();for(var t=[],n=0,o=this.children.length;n<o;++n)this.children[n]instanceof e&&t.push(this.children[n]);return t},s.addChild=function(e){var t;if(t=this.getChild(e.name))if(t instanceof u.Field&&t.name!==t.originalName&&null===this.getChild(t.originalName))t.name=t.originalName;else{if(!(e instanceof u.Field&&e.name!==e.originalName&&null===this.getChild(e.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+e.name);e.name=e.originalName}this.children.push(e)},s.getChild=function(e){for(var t="number"==typeof e?"id":"name",n=0,o=this.children.length;n<o;++n)if(this.children[n][t]===e)return this.children[n];return null},s.resolve=function(e,t){var o,i="string"==typeof e?e.split("."):e,a=this,r=0;if(""===i[r]){for(;null!==a.parent;)a=a.parent;r++}do{do{if(!(a instanceof n.Namespace)){a=null;break}if(!(o=a.getChild(i[r]))||!(o instanceof n.T)||t&&!(o instanceof n.Namespace)){a=null;break}a=o,r++}while(r<i.length);if(null!=a)break;if(null!==this.parent)return this.parent.resolve(e,t)}while(null!=a);return a},s.qn=function(e){var t=[],o=e;do{t.unshift(o.name),o=o.parent}while(null!==o);for(var i=1;i<=t.length;i++){var a=t.slice(t.length-i);if(e===this.resolve(a,e instanceof n.Namespace))return a.join(".")}return e.fqn()},s.build=function(){for(var e,t={},n=this.children,o=0,i=n.length;o<i;++o)(e=n[o])instanceof r&&(t[e.name]=e.build());return Object.defineProperty&&Object.defineProperty(t,"$options",{value:this.buildOpt()}),t},s.buildOpt=function(){for(var e={},t=Object.keys(this.options),n=0,o=t.length;n<o;++n){var i=t[n],a=this.options[t[n]];e[i]=a}return e},s.getOption=function(e){return void 0===e?this.options:void 0!==this.options[e]?this.options[e]:null},n.Namespace=r;var c=function(t,n,o,i,a){if(this.type=t,this.resolvedType=n,this.isMapKey=o,this.syntax=i,this.name=a,o&&e.MAP_KEY_TYPES.indexOf(t)<0)throw Error("Invalid map key type: "+t.name)},l=c.prototype;function p(t,n){if(t&&"number"==typeof t.low&&"number"==typeof t.high&&"boolean"==typeof t.unsigned&&t.low==t.low&&t.high==t.high)return new e.Long(t.low,t.high,void 0===n?t.unsigned:n);if("string"==typeof t)return e.Long.fromString(t,n||!1,10);if("number"==typeof t)return e.Long.fromNumber(t,n||!1);throw Error("not convertible to Long")}c.defaultFieldValue=function(n){if("string"==typeof n&&(n=e.TYPES[n]),void 0===n.defaultValue)throw Error("default value for type "+n.name+" is not supported");return n==e.TYPES.bytes?new t(0):n.defaultValue},l.toString=function(){return(this.name||"")+(this.isMapKey?"map":"value")+" element"},l.verifyValue=function(n){var i=this;function a(e,t){throw Error("Illegal value for "+i.toString(!0)+" of type "+i.type.name+": "+e+" ("+t+")")}switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:return("number"!=typeof n||n==n&&n%1!=0)&&a(o(n),"not an integer"),n>4294967295?0|n:n;case e.TYPES.uint32:case e.TYPES.fixed32:return("number"!=typeof n||n==n&&n%1!=0)&&a(o(n),"not an integer"),n<0?n>>>0:n;case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:if(e.Long)try{return p(n,!1)}catch(e){a(o(n),e.message)}else a(o(n),"requires Long.js");case e.TYPES.uint64:case e.TYPES.fixed64:if(e.Long)try{return p(n,!0)}catch(e){a(o(n),e.message)}else a(o(n),"requires Long.js");case e.TYPES.bool:return"boolean"!=typeof n&&a(o(n),"not a boolean"),n;case e.TYPES.float:case e.TYPES.double:return"number"!=typeof n&&a(o(n),"not a number"),n;case e.TYPES.string:return"string"==typeof n||n&&n instanceof String||a(o(n),"not a string"),""+n;case e.TYPES.bytes:return t.isByteBuffer(n)?n:t.wrap(n,"base64");case e.TYPES.enum:var r=this.resolvedType.getChildren(e.Reflect.Enum.Value);for(c=0;c<r.length;c++){if(r[c].name==n)return r[c].id;if(r[c].id==n)return r[c].id}if("proto3"===this.syntax)return("number"!=typeof n||n==n&&n%1!=0)&&a(o(n),"not an integer"),(n>4294967295||n<0)&&a(o(n),"not in range for uint32"),n;a(n,"not a valid enum value");case e.TYPES.group:case e.TYPES.message:if(n&&"object"===o(n)||a(o(n),"object expected"),n instanceof this.resolvedType.clazz)return n;if(n instanceof e.Builder.Message){var s={};for(var c in n)n.hasOwnProperty(c)&&(s[c]=n[c]);n=s}return new this.resolvedType.clazz(n)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+n+" (undefined type "+this.type+")")},l.calculateLength=function(n,o){if(null===o)return 0;var i;switch(this.type){case e.TYPES.int32:return o<0?t.calculateVarint64(o):t.calculateVarint32(o);case e.TYPES.uint32:return t.calculateVarint32(o);case e.TYPES.sint32:return t.calculateVarint32(t.zigZagEncode32(o));case e.TYPES.fixed32:case e.TYPES.sfixed32:case e.TYPES.float:return 4;case e.TYPES.int64:case e.TYPES.uint64:return t.calculateVarint64(o);case e.TYPES.sint64:return t.calculateVarint64(t.zigZagEncode64(o));case e.TYPES.fixed64:case e.TYPES.sfixed64:return 8;case e.TYPES.bool:return 1;case e.TYPES.enum:return t.calculateVarint32(o);case e.TYPES.double:return 8;case e.TYPES.string:return i=t.calculateUTF8Bytes(o),t.calculateVarint32(i)+i;case e.TYPES.bytes:if(o.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+o.remaining()+" bytes remaining");return t.calculateVarint32(o.remaining())+o.remaining();case e.TYPES.message:return i=this.resolvedType.calculate(o),t.calculateVarint32(i)+i;case e.TYPES.group:return(i=this.resolvedType.calculate(o))+t.calculateVarint32(n<<3|e.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+o+" (unknown type)")},l.encodeValue=function(n,o,i){if(null===o)return i;switch(this.type){case e.TYPES.int32:o<0?i.writeVarint64(o):i.writeVarint32(o);break;case e.TYPES.uint32:i.writeVarint32(o);break;case e.TYPES.sint32:i.writeVarint32ZigZag(o);break;case e.TYPES.fixed32:i.writeUint32(o);break;case e.TYPES.sfixed32:i.writeInt32(o);break;case e.TYPES.int64:case e.TYPES.uint64:i.writeVarint64(o);break;case e.TYPES.sint64:i.writeVarint64ZigZag(o);break;case e.TYPES.fixed64:i.writeUint64(o);break;case e.TYPES.sfixed64:i.writeInt64(o);break;case e.TYPES.bool:"string"==typeof o?i.writeVarint32("false"===o.toLowerCase()?0:!!o):i.writeVarint32(o?1:0);break;case e.TYPES.enum:i.writeVarint32(o);break;case e.TYPES.float:i.writeFloat32(o);break;case e.TYPES.double:i.writeFloat64(o);break;case e.TYPES.string:i.writeVString(o);break;case e.TYPES.bytes:if(o.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+o.remaining()+" bytes remaining");var a=o.offset;i.writeVarint32(o.remaining()),i.append(o),o.offset=a;break;case e.TYPES.message:var r=(new t).LE();this.resolvedType.encode(o,r),i.writeVarint32(r.offset),i.append(r.flip());break;case e.TYPES.group:this.resolvedType.encode(o,i),i.writeVarint32(n<<3|e.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+o+" (unknown type)")}return i},l.decode=function(t,n,o){if(n!=this.type.wireType)throw Error("Unexpected wire type for element");var i,a;switch(this.type){case e.TYPES.int32:return 0|t.readVarint32();case e.TYPES.uint32:return t.readVarint32()>>>0;case e.TYPES.sint32:return 0|t.readVarint32ZigZag();case e.TYPES.fixed32:return t.readUint32()>>>0;case e.TYPES.sfixed32:return 0|t.readInt32();case e.TYPES.int64:return t.readVarint64();case e.TYPES.uint64:return t.readVarint64().toUnsigned();case e.TYPES.sint64:return t.readVarint64ZigZag();case e.TYPES.fixed64:return t.readUint64();case e.TYPES.sfixed64:return t.readInt64();case e.TYPES.bool:return!!t.readVarint32();case e.TYPES.enum:return t.readVarint32();case e.TYPES.float:return t.readFloat();case e.TYPES.double:return t.readDouble();case e.TYPES.string:return t.readVString();case e.TYPES.bytes:if(a=t.readVarint32(),t.remaining()<a)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+a+" required but got only "+t.remaining());return(i=t.clone()).limit=i.offset+a,t.offset+=a,i;case e.TYPES.message:return a=t.readVarint32(),this.resolvedType.decode(t,a);case e.TYPES.group:return this.resolvedType.decode(t,-1,o)}throw Error("[INTERNAL] Illegal decode type")},l.valueFromString=function(n){if(!this.isMapKey)throw Error("valueFromString() called on non-map-key element");switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:case e.TYPES.uint32:case e.TYPES.fixed32:return this.verifyValue(parseInt(n));case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:case e.TYPES.uint64:case e.TYPES.fixed64:return this.verifyValue(n);case e.TYPES.bool:return"true"===n;case e.TYPES.string:return this.verifyValue(n);case e.TYPES.bytes:return t.fromBinary(n)}},l.valueToString=function(t){if(!this.isMapKey)throw Error("valueToString() called on non-map-key element");return this.type===e.TYPES.bytes?t.toString("binary"):t.toString()},n.Element=c;var u=function(e,t,n,o,i,a){r.call(this,e,t,n,o,a),this.className="Message",this.extensions=void 0,this.clazz=null,this.isGroup=!!i,this._fields=null,this._fieldsById=null,this._fieldsByName=null},h=u.prototype=Object.create(r.prototype);function d(t,n){var o=n.readVarint32(),i=7&o,a=o>>>3;switch(i){case e.WIRE_TYPES.VARINT:do{o=n.readUint8()}while(128==(128&o));break;case e.WIRE_TYPES.BITS64:n.offset+=8;break;case e.WIRE_TYPES.LDELIM:o=n.readVarint32(),n.offset+=o;break;case e.WIRE_TYPES.STARTGROUP:d(a,n);break;case e.WIRE_TYPES.ENDGROUP:if(a===t)return!1;throw Error("Illegal GROUPEND after unknown group: "+a+" ("+t+" expected)");case e.WIRE_TYPES.BITS32:n.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+t+": "+i)}return!0}h.build=function(n){if(this.clazz&&!n)return this.clazz;var i=function(e,n){var i=n.getChildren(e.Reflect.Message.Field),a=n.getChildren(e.Reflect.Message.OneOf),r=function r(s,c){e.Builder.Message.call(this);for(var l=0,p=a.length;l<p;++l)this[a[l].name]=null;for(l=0,p=i.length;l<p;++l){var u=i[l];this[u.name]=u.repeated?[]:u.map?new e.Map(u):null,!u.required&&"proto3"!==n.syntax||null===u.defaultValue||(this[u.name]=u.defaultValue)}var h;if(arguments.length>0)if(1!==arguments.length||null===s||"object"!==o(s)||!("function"!=typeof s.encode||s instanceof r)||Array.isArray(s)||s instanceof e.Map||t.isByteBuffer(s)||s instanceof ArrayBuffer||e.Long&&s instanceof e.Long)for(l=0,p=arguments.length;l<p;++l)void 0!==(h=arguments[l])&&this.$set(i[l].name,h);else this.$set(s)},s=r.prototype=Object.create(e.Builder.Message.prototype);s.add=function(t,o,i){var a=n._fieldsByName[t];if(!i){if(!a)throw Error(this+"#"+t+" is undefined");if(!(a instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+a.toString(!0));if(!a.repeated)throw Error(this+"#"+t+" is not a repeated field");o=a.verifyValue(o,!0)}return null===this[t]&&(this[t]=[]),this[t].push(o),this},s.$add=s.add,s.set=function(t,i,a){if(t&&"object"===o(t)){for(var r in a=i,t)t.hasOwnProperty(r)&&void 0!==(i=t[r])&&void 0===n._oneofsByName[r]&&this.$set(r,i,a);return this}var s=n._fieldsByName[t];if(a)this[t]=i;else{if(!s)throw Error(this+"#"+t+" is not a field: undefined");if(!(s instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+s.toString(!0));this[s.name]=i=s.verifyValue(i)}if(s&&s.oneof){var c=this[s.oneof.name];null!==i?(null!==c&&c!==s.name&&(this[c]=null),this[s.oneof.name]=s.name):c===t&&(this[s.oneof.name]=null)}return this},s.$set=s.set,s.get=function(t,o){if(o)return this[t];var i=n._fieldsByName[t];if(!(i&&i instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: undefined");if(!(i instanceof e.Reflect.Message.Field))throw Error(this+"#"+t+" is not a field: "+i.toString(!0));return this[i.name]},s.$get=s.get;for(var c=0;c<i.length;c++){var l=i[c];l instanceof e.Reflect.Message.ExtensionField||n.builder.options.populateAccessors&&function(e){var t=e.originalName.replace(/(_[a-zA-Z])/g,function(e){return e.toUpperCase().replace("_","")});t=t.substring(0,1).toUpperCase()+t.substring(1);var o=e.originalName.replace(/([A-Z])/g,function(e){return"_"+e}),i=function(t,n){return this[e.name]=n?t:e.verifyValue(t),this},a=function(){return this[e.name]};null===n.getChild("set"+t)&&(s["set"+t]=i),null===n.getChild("set_"+o)&&(s["set_"+o]=i),null===n.getChild("get"+t)&&(s["get"+t]=a),null===n.getChild("get_"+o)&&(s["get_"+o]=a)}(l)}function p(n,i,a,r){if(null===n||"object"!==o(n)){if(r&&r instanceof e.Reflect.Enum){var s=e.Reflect.Enum.getName(r.object,n);if(null!==s)return s}return n}if(t.isByteBuffer(n))return i?n.toBase64():n.toBuffer();if(e.Long.isLong(n))return a?n.toString():e.Long.fromValue(n);var c;if(Array.isArray(n))return c=[],n.forEach(function(e,t){c[t]=p(e,i,a,r)}),c;if(c={},n instanceof e.Map){for(var l=n.entries(),u=l.next();!u.done;u=l.next())c[n.keyElem.valueToString(u.value[0])]=p(u.value[1],i,a,n.valueElem.resolvedType);return c}var h=n.$type,d=void 0;for(var g in n)n.hasOwnProperty(g)&&(h&&(d=h.getChild(g))?c[g]=p(n[g],i,a,d.resolvedType):c[g]=p(n[g],i,a));return c}return s.encode=function(e,o){"boolean"==typeof e&&(o=e,e=void 0);var i=!1;e||(e=new t,i=!0);var a=e.littleEndian;try{return n.encode(this,e.LE(),o),(i?e.flip():e).LE(a)}catch(t){throw e.LE(a),t}},r.encode=function(e,t,n){return new r(e).encode(t,n)},s.calculate=function(){return n.calculate(this)},s.encodeDelimited=function(e,o){var i=!1;e||(e=new t,i=!0);var a=(new t).LE();return n.encode(this,a,o).flip(),e.writeVarint32(a.remaining()),e.append(a),i?e.flip():e},s.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toArrayBuffer()),e}},s.toArrayBuffer=s.encodeAB,s.encodeNB=function(){try{return this.encode().toBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBuffer()),e}},s.toBuffer=s.encodeNB,s.encode64=function(){try{return this.encode().toBase64()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBase64()),e}},s.toBase64=s.encode64,s.encodeHex=function(){try{return this.encode().toHex()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toHex()),e}},s.toHex=s.encodeHex,s.toRaw=function(e,t){return p(this,!!e,!!t,this.$type)},s.encodeJSON=function(){return JSON.stringify(p(this,!0,!0,this.$type))},r.decode=function(e,o,i){"string"==typeof o&&(i=o,o=-1),"string"==typeof e?e=t.wrap(e,i||"base64"):t.isByteBuffer(e)||(e=t.wrap(e));var a=e.littleEndian;try{var r=n.decode(e.LE(),o);return e.LE(a),r}catch(t){throw e.LE(a),t}},r.decodeDelimited=function(e,o){if("string"==typeof e?e=t.wrap(e,o||"base64"):t.isByteBuffer(e)||(e=t.wrap(e)),e.remaining()<1)return null;var i=e.offset,a=e.readVarint32();if(e.remaining()<a)return e.offset=i,null;try{var r=n.decode(e.slice(e.offset,e.offset+a).LE());return e.offset+=a,r}catch(t){throw e.offset+=a,t}},r.decode64=function(e){return r.decode(e,"base64")},r.decodeHex=function(e){return r.decode(e,"hex")},r.decodeJSON=function(e){return new r(JSON.parse(e))},s.toString=function(){return n.toString()},Object.defineProperty&&(Object.defineProperty(r,"$options",{value:n.buildOpt()}),Object.defineProperty(s,"$options",{value:r.$options}),Object.defineProperty(r,"$type",{value:n}),Object.defineProperty(s,"$type",{value:n})),r}(e,this);this._fields=[],this._fieldsById={},this._fieldsByName={},this._oneofsByName={};for(var a,r=0,s=this.children.length;r<s;r++)if((a=this.children[r])instanceof _||a instanceof u||a instanceof b){if(i.hasOwnProperty(a.name))throw Error("Illegal reflect child of "+this.toString(!0)+": "+a.toString(!0)+" cannot override static property '"+a.name+"'");i[a.name]=a.build()}else if(a instanceof u.Field)a.build(),this._fields.push(a),this._fieldsById[a.id]=a,this._fieldsByName[a.name]=a;else if(a instanceof u.OneOf)this._oneofsByName[a.name]=a;else if(!(a instanceof u.OneOf||a instanceof v))throw Error("Illegal reflect child of "+this.toString(!0)+": "+this.children[r].toString(!0));return this.clazz=i},h.encode=function(e,t,n){for(var o,i,a=null,r=0,s=this._fields.length;r<s;++r)i=e[(o=this._fields[r]).name],o.required&&null===i?null===a&&(a=o):o.encode(n?i:o.verifyValue(i),t,e);if(null!==a){var c=Error("Missing at least one required field for "+this.toString(!0)+": "+a);throw c.encoded=t,c}return t},h.calculate=function(e){for(var t,n,o=0,i=0,a=this._fields.length;i<a;++i){if(n=e[(t=this._fields[i]).name],t.required&&null===n)throw Error("Missing at least one required field for "+this.toString(!0)+": "+t);o+=t.calculate(n,e)}return o},h.decode=function(t,n,o){"number"!=typeof n&&(n=-1);for(var i,a,r,s,c=t.offset,l=new this.clazz;t.offset<c+n||-1===n&&t.remaining()>0;){if(r=(i=t.readVarint32())>>>3,(a=7&i)===e.WIRE_TYPES.ENDGROUP){if(r!==o)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+r+" ("+(o?o+" expected":"not a group")+")");break}if(s=this._fieldsById[r]){if(s.repeated&&!s.options.packed)l[s.name].push(s.decode(a,t));else if(s.map){var p=s.decode(a,t);l[s.name].set(p[0],p[1])}else if(l[s.name]=s.decode(a,t),s.oneof){var u=l[s.oneof.name];null!==u&&u!==s.name&&(l[u]=null),l[s.oneof.name]=s.name}}else switch(a){case e.WIRE_TYPES.VARINT:t.readVarint32();break;case e.WIRE_TYPES.BITS32:t.offset+=4;break;case e.WIRE_TYPES.BITS64:t.offset+=8;break;case e.WIRE_TYPES.LDELIM:var h=t.readVarint32();t.offset+=h;break;case e.WIRE_TYPES.STARTGROUP:for(;d(r,t););break;default:throw Error("Illegal wire type for unknown field "+r+" in "+this.toString(!0)+"#decode: "+a)}}for(var g=0,f=this._fields.length;g<f;++g)if(null===l[(s=this._fields[g]).name])if("proto3"===this.syntax)l[s.name]=s.defaultValue;else{if(s.required){var m=Error("Missing at least one required field for "+this.toString(!0)+": "+s.name);throw m.decoded=l,m}e.populateDefaults&&null!==s.defaultValue&&(l[s.name]=s.defaultValue)}return l},n.Message=u;var g=function(t,n,o,a,r,s,c,l,p,h){i.call(this,t,n,s),this.className="Message.Field",this.required="required"===o,this.repeated="repeated"===o,this.map="map"===o,this.keyType=a||null,this.type=r,this.resolvedType=null,this.id=c,this.options=l||{},this.defaultValue=null,this.oneof=p||null,this.syntax=h||"proto2",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof u.ExtensionField||(this.name=e.Util.toCamelCase(this.name))},f=g.prototype=Object.create(i.prototype);f.build=function(){this.element=new c(this.type,this.resolvedType,!1,this.syntax,this.name),this.map&&(this.keyElement=new c(this.keyType,void 0,!0,this.syntax,this.name)),"proto3"!==this.syntax||this.repeated||this.map?void 0!==this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=c.defaultFieldValue(this.type)},f.verifyValue=function(t,n){n=n||!1;var i,a=this;function r(e,t){throw Error("Illegal value for "+a.toString(!0)+" of type "+a.type.name+": "+e+" ("+t+")")}if(null===t)return this.required&&r(o(t),"required"),"proto3"===this.syntax&&this.type!==e.TYPES.message&&r(o(t),"proto3 field without field presence cannot be null"),null;if(this.repeated&&!n){Array.isArray(t)||(t=[t]);var s=[];for(i=0;i<t.length;i++)s.push(this.element.verifyValue(t[i]));return s}return this.map&&!n?t instanceof e.Map?t:(t instanceof Object||r(o(t),"expected ProtoBuf.Map or raw object for map field"),new e.Map(this,t)):(!this.repeated&&Array.isArray(t)&&r(o(t),"no array expected"),this.element.verifyValue(t))},f.hasWirePresence=function(t,n){if("proto3"!==this.syntax)return null!==t;if(this.oneof&&n[this.oneof.name]===this.name)return!0;switch(this.type){case e.TYPES.int32:case e.TYPES.sint32:case e.TYPES.sfixed32:case e.TYPES.uint32:case e.TYPES.fixed32:return 0!==t;case e.TYPES.int64:case e.TYPES.sint64:case e.TYPES.sfixed64:case e.TYPES.uint64:case e.TYPES.fixed64:return 0!==t.low||0!==t.high;case e.TYPES.bool:return t;case e.TYPES.float:case e.TYPES.double:return 0!==t;case e.TYPES.string:return t.length>0;case e.TYPES.bytes:return t.remaining()>0;case e.TYPES.enum:return 0!==t;case e.TYPES.message:return null!==t;default:return!0}},f.encode=function(n,i,a){if(null===this.type||"object"!==o(this.type))throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===n||this.repeated&&0==n.length)return i;try{var r;if(this.repeated)if(this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){i.writeVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),i.ensureCapacity(i.offset+=1);var s=i.offset;for(r=0;r<n.length;r++)this.element.encodeValue(this.id,n[r],i);var c=i.offset-s,l=t.calculateVarint32(c);if(l>1){var p=i.slice(s,i.offset);s+=l-1,i.offset=s,i.append(p)}i.writeVarint32(c,s-l)}else for(r=0;r<n.length;r++)i.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,n[r],i);else this.map?n.forEach(function(n,o,a){var r=t.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,o)+t.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,n);i.writeVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),i.writeVarint32(r),i.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,o,i),i.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,n,i)},this):this.hasWirePresence(n,a)&&(i.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,n,i))}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+n+" ("+e+")")}return i},f.calculate=function(n,i){if(n=this.verifyValue(n),null===this.type||"object"!==o(this.type))throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===n||this.repeated&&0==n.length)return 0;var a=0;try{var r,s;if(this.repeated)if(this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(a+=t.calculateVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),s=0,r=0;r<n.length;r++)s+=this.element.calculateLength(this.id,n[r]);a+=t.calculateVarint32(s),a+=s}else for(r=0;r<n.length;r++)a+=t.calculateVarint32(this.id<<3|this.type.wireType),a+=this.element.calculateLength(this.id,n[r]);else this.map?n.forEach(function(n,o,i){var r=t.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,o)+t.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,n);a+=t.calculateVarint32(this.id<<3|e.WIRE_TYPES.LDELIM),a+=t.calculateVarint32(r),a+=r},this):this.hasWirePresence(n,i)&&(a+=t.calculateVarint32(this.id<<3|this.type.wireType),a+=this.element.calculateLength(this.id,n))}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+n+" ("+e+")")}return a},f.decode=function(t,n,o){var i,a;if(!(!this.map&&t==this.type.wireType||!o&&this.repeated&&this.options.packed&&t==e.WIRE_TYPES.LDELIM||this.map&&t==e.WIRE_TYPES.LDELIM))throw Error("Illegal wire type for field "+this.toString(!0)+": "+t+" ("+this.type.wireType+" expected)");if(t==e.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&e.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!o){a=n.readVarint32(),a=n.offset+a;for(var r=[];n.offset<a;)r.push(this.decode(this.type.wireType,n,!0));return r}if(this.map){var s=c.defaultFieldValue(this.keyType);if(i=c.defaultFieldValue(this.type),a=n.readVarint32(),n.remaining()<a)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+a+" required but got only "+n.remaining());var l=n.clone();for(l.limit=l.offset+a,n.offset+=a;l.remaining()>0;){var p=l.readVarint32();t=7&p;var u=p>>>3;if(1===u)s=this.keyElement.decode(l,t,u);else{if(2!==u)throw Error("Unexpected tag in map field key/value submessage");i=this.element.decode(l,t,u)}}return[s,i]}return this.element.decode(n,t,this.id)},n.Message.Field=g;var m=function(e,t,n,o,i,a,r){g.call(this,e,t,n,null,o,i,a,r),this.extension};m.prototype=Object.create(g.prototype),n.Message.ExtensionField=m;n.Message.OneOf=function(e,t,n){i.call(this,e,t,n),this.fields=[]};var _=function(e,t,n,o,i){r.call(this,e,t,n,o,i),this.className="Enum",this.object=null};_.getName=function(e,t){for(var n,o=Object.keys(e),i=0;i<o.length;++i)if(e[n=o[i]]===t)return n;return null},(_.prototype=Object.create(r.prototype)).build=function(t){if(this.object&&!t)return this.object;for(var n=new e.Builder.Enum,o=this.getChildren(_.Value),i=0,a=o.length;i<a;++i)n[o[i].name]=o[i].id;return Object.defineProperty&&Object.defineProperty(n,"$options",{value:this.buildOpt(),enumerable:!1}),this.object=n},n.Enum=_;var y=function(e,t,n,o){i.call(this,e,t,n),this.className="Enum.Value",this.id=o};y.prototype=Object.create(i.prototype),n.Enum.Value=y;var v=function(e,t,n,o){i.call(this,e,t,n),this.field=o};v.prototype=Object.create(i.prototype),n.Extension=v;var b=function(e,t,n,o){r.call(this,e,t,n,o),this.className="Service",this.clazz=null};(b.prototype=Object.create(r.prototype)).build=function(n){return this.clazz&&!n?this.clazz:this.clazz=function(e,n){for(var i=function(t){e.Builder.Service.call(this),this.rpcImpl=t||function(e,t,n){setTimeout(n.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},a=i.prototype=Object.create(e.Builder.Service.prototype),r=n.getChildren(e.Reflect.Service.RPCMethod),s=0;s<r.length;s++)(function(e){a[e.name]=function(i,a){try{try{i=e.resolvedRequestType.clazz.decode(t.wrap(i))}catch(e){if(!(e instanceof TypeError))throw e}if(null===i||"object"!==o(i))throw Error("Illegal arguments");i instanceof e.resolvedRequestType.clazz||(i=new e.resolvedRequestType.clazz(i)),this.rpcImpl(e.fqn(),i,function(t,o){if(t)a(t);else{null===o&&(o="");try{o=e.resolvedResponseType.clazz.decode(o)}catch(e){}o&&o instanceof e.resolvedResponseType.clazz?a(null,o):a(Error("Illegal response type received in service method "+n.name+"#"+e.name))}})}catch(e){setTimeout(a.bind(this,e),0)}},i[e.name]=function(t,n,o){new i(t)[e.name](n,o)},Object.defineProperty&&(Object.defineProperty(i[e.name],"$options",{value:e.buildOpt()}),Object.defineProperty(a[e.name],"$options",{value:i[e.name].$options}))})(r[s]);return Object.defineProperty&&(Object.defineProperty(i,"$options",{value:n.buildOpt()}),Object.defineProperty(a,"$options",{value:i.$options}),Object.defineProperty(i,"$type",{value:n}),Object.defineProperty(a,"$type",{value:n})),i}(e,this)},n.Service=b;var C=function(e,t,n,o){i.call(this,e,t,n),this.className="Service.Method",this.options=o||{}};(C.prototype=Object.create(i.prototype)).buildOpt=s.buildOpt,n.Service.Method=C;var M=function(e,t,n,o,i,a,r,s){C.call(this,e,t,n,s),this.className="Service.RPCMethod",this.requestName=o,this.responseName=i,this.requestStream=a,this.responseStream=r,this.resolvedRequestType=null,this.resolvedResponseType=null};return M.prototype=Object.create(C.prototype),n.Service.RPCMethod=M,n}(a),a.Builder=function(t,n,i){var a=function(e){this.ns=new i.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=e||{}},r=a.prototype;function s(e){e.messages&&e.messages.forEach(function(t){t.syntax=e.syntax,s(t)}),e.enums&&e.enums.forEach(function(t){t.syntax=e.syntax})}return a.isMessage=function(e){return"string"==typeof e.name&&(void 0===e.values&&void 0===e.rpc)},a.isMessageField=function(e){return"string"==typeof e.rule&&"string"==typeof e.name&&"string"==typeof e.type&&void 0!==e.id},a.isEnum=function(e){return"string"==typeof e.name&&!(void 0===e.values||!Array.isArray(e.values)||0===e.values.length)},a.isService=function(e){return!("string"!=typeof e.name||"object"!==o(e.rpc)||!e.rpc)},a.isExtend=function(e){return"string"==typeof e.ref},r.reset=function(){return this.ptr=this.ns,this},r.define=function(e){if("string"!=typeof e||!n.TYPEREF.test(e))throw Error("illegal namespace: "+e);return e.split(".").forEach(function(e){var t=this.ptr.getChild(e);null===t&&this.ptr.addChild(t=new i.Namespace(this,this.ptr,e)),this.ptr=t},this),this},r.create=function(e){if(!e)return this;if(Array.isArray(e)){if(0===e.length)return this;e=e.slice()}else e=[e];for(var n=[e];n.length>0;){if(e=n.pop(),!Array.isArray(e))throw Error("not a valid namespace: "+JSON.stringify(e));for(;e.length>0;){var r=e.shift();if(a.isMessage(r)){var s=new i.Message(this,this.ptr,r.name,r.options,r.isGroup,r.syntax),c={};r.oneofs&&Object.keys(r.oneofs).forEach(function(e){s.addChild(c[e]=new i.Message.OneOf(this,s,e))},this),r.fields&&r.fields.forEach(function(e){if(null!==s.getChild(0|e.id))throw Error("duplicate or invalid field id in "+s.name+": "+e.id);if(e.options&&"object"!==o(e.options))throw Error("illegal field options in "+s.name+"#"+e.name);var t=null;if("string"==typeof e.oneof&&!(t=c[e.oneof]))throw Error("illegal oneof in "+s.name+"#"+e.name+": "+e.oneof);e=new i.Message.Field(this,s,e.rule,e.keytype,e.type,e.name,e.id,e.options,t,r.syntax),t&&t.fields.push(e),s.addChild(e)},this);var l=[];if(r.enums&&r.enums.forEach(function(e){l.push(e)}),r.messages&&r.messages.forEach(function(e){l.push(e)}),r.services&&r.services.forEach(function(e){l.push(e)}),r.extensions&&("number"==typeof r.extensions[0]?s.extensions=[r.extensions]:s.extensions=r.extensions),this.ptr.addChild(s),l.length>0){n.push(e),e=l,l=null,this.ptr=s,s=null;continue}l=null}else if(a.isEnum(r))s=new i.Enum(this,this.ptr,r.name,r.options,r.syntax),r.values.forEach(function(e){s.addChild(new i.Enum.Value(this,s,e.name,e.id))},this),this.ptr.addChild(s);else if(a.isService(r))s=new i.Service(this,this.ptr,r.name,r.options),Object.keys(r.rpc).forEach(function(e){var t=r.rpc[e];s.addChild(new i.Service.RPCMethod(this,s,e,t.request,t.response,!!t.request_stream,!!t.response_stream,t.options))},this),this.ptr.addChild(s);else{if(!a.isExtend(r))throw Error("not a valid definition: "+JSON.stringify(r));if(s=this.ptr.resolve(r.ref,!0))r.fields.forEach(function(e){if(null!==s.getChild(0|e.id))throw Error("duplicate extended field id in "+s.name+": "+e.id);if(s.extensions){var n=!1;if(s.extensions.forEach(function(t){e.id>=t[0]&&e.id<=t[1]&&(n=!0)}),!n)throw Error("illegal extended field id in "+s.name+": "+e.id+" (not within valid ranges)")}var o=e.name;this.options.convertFieldsToCamelCase&&(o=t.Util.toCamelCase(o));var a=new i.Message.ExtensionField(this,s,e.rule,e.type,this.ptr.fqn()+"."+o,e.id,e.options),r=new i.Extension(this,this.ptr,e.name,a);a.extension=r,this.ptr.addChild(r),s.addChild(a)},this);else if(!/\.?google\.protobuf\./.test(r.ref))throw Error("extended message "+r.ref+" is not defined")}r=null,s=null}e=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},r.import=function(n,i){var a="/";if("string"==typeof i){if(t.Util.IS_NODE&&(i=e("path").resolve(i)),!0===this.files[i])return this.reset();this.files[i]=!0}else if("object"===o(i)){var r,c=i.root;if(t.Util.IS_NODE&&(c=e("path").resolve(c)),(c.indexOf("\\")>=0||i.file.indexOf("\\")>=0)&&(a="\\"),r=t.Util.IS_NODE?e("path").join(c,i.file):c+a+i.file,!0===this.files[r])return this.reset();this.files[r]=!0}if(n.imports&&n.imports.length>0){var l,p=!1;"object"===o(i)?(this.importRoot=i.root,p=!0,l=this.importRoot,i=i.file,(l.indexOf("\\")>=0||i.indexOf("\\")>=0)&&(a="\\")):"string"==typeof i?this.importRoot?l=this.importRoot:i.indexOf("/")>=0?""===(l=i.replace(/\/[^\/]*$/,""))&&(l="/"):i.indexOf("\\")>=0?(l=i.replace(/\\[^\\]*$/,""),a="\\"):l=".":l=null;for(var u=0;u<n.imports.length;u++)if("string"==typeof n.imports[u]){if(!l)throw Error("cannot determine import root");var h=n.imports[u];if("google/protobuf/descriptor.proto"===h)continue;if(h=t.Util.IS_NODE?e("path").join(l,h):l+a+h,!0===this.files[h])continue;/\.proto$/i.test(h)&&!t.DotProto&&(h=h.replace(/\.proto$/,".json"));var d=t.Util.fetch(h);if(null===d)throw Error("failed to import '"+h+"' in '"+i+"': file not found");/\.json$/i.test(h)?this.import(JSON.parse(d+""),h):this.import(t.DotProto.Parser.parse(d),h)}else i?/\.(\w+)$/.test(i)?this.import(n.imports[u],i.replace(/^(.+)\.(\w+)$/,function(e,t,n){return t+"_import"+u+"."+n})):this.import(n.imports[u],i+"_import"+u):this.import(n.imports[u]);p&&(this.importRoot=null)}n.package&&this.define(n.package),n.syntax&&s(n);var g=this.ptr;return n.options&&Object.keys(n.options).forEach(function(e){g.options[e]=n.options[e]}),n.messages&&(this.create(n.messages),this.ptr=g),n.enums&&(this.create(n.enums),this.ptr=g),n.services&&(this.create(n.services),this.ptr=g),n.extends&&this.create(n.extends),this.reset()},r.resolveAll=function(){var e;if(null==this.ptr||"object"===o(this.ptr.type))return this;if(this.ptr instanceof i.Namespace)this.ptr.children.forEach(function(e){this.ptr=e,this.resolveAll()},this);else if(this.ptr instanceof i.Message.Field){if(n.TYPE.test(this.ptr.type))this.ptr.type=t.TYPES[this.ptr.type];else{if(!n.TYPEREF.test(this.ptr.type))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(!(e=(this.ptr instanceof i.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error("unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=e,e instanceof i.Enum){if(this.ptr.type=t.TYPES.enum,"proto3"===this.ptr.syntax&&"proto3"!==e.syntax)throw Error("proto3 message cannot reference proto2 enum")}else{if(!(e instanceof i.Message))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=e.isGroup?t.TYPES.group:t.TYPES.message}}if(this.ptr.map){if(!n.TYPE.test(this.ptr.keyType))throw Error("illegal key type for map field in "+this.ptr.toString(!0)+": "+this.ptr.keyType);this.ptr.keyType=t.TYPES[this.ptr.keyType]}"proto3"===this.ptr.syntax&&this.ptr.repeated&&void 0===this.ptr.options.packed&&-1!==t.PACKABLE_WIRE_TYPES.indexOf(this.ptr.type.wireType)&&(this.ptr.options.packed=!0)}else if(this.ptr instanceof t.Reflect.Service.Method){if(!(this.ptr instanceof t.Reflect.Service.RPCMethod))throw Error("illegal service type in "+this.ptr.toString(!0));if(!((e=this.ptr.parent.resolve(this.ptr.requestName,!0))&&e instanceof t.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=e,!((e=this.ptr.parent.resolve(this.ptr.responseName,!0))&&e instanceof t.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=e}else if(!(this.ptr instanceof t.Reflect.Message.OneOf||this.ptr instanceof t.Reflect.Extension||this.ptr instanceof t.Reflect.Enum.Value))throw Error("illegal object in namespace: "+o(this.ptr)+": "+this.ptr);return this.reset()},r.build=function(e){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!e)return this.result;for(var t="string"==typeof e?e.split("."):e,n=this.result,o=0;o<t.length;o++){if(!n[t[o]]){n=null;break}n=n[t[o]]}return n},r.lookup=function(e,t){return e?this.ns.resolve(e,t):this.ns},r.toString=function(){return"Builder"},a.Message=function(){},a.Enum=function(){},a.Service=function(){},a}(a,a.Lang,a.Reflect),a.Map=function(e,t){var n=function(e,n){if(!e.map)throw Error("field is not a map");if(this.field=e,this.keyElem=new t.Element(e.keyType,null,!0,e.syntax),this.valueElem=new t.Element(e.type,e.resolvedType,!1,e.syntax),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),n)for(var o=Object.keys(n),i=0;i<o.length;i++){var a=this.keyElem.valueFromString(o[i]),r=this.valueElem.verifyValue(n[o[i]]);this.map[this.keyElem.valueToString(a)]={key:a,value:r}}},o=n.prototype;function i(e){var t=0;return{next:function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}}return o.clear=function(){this.map={}},o.delete=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e)),n=t in this.map;return delete this.map[t],n},o.entries=function(){for(var e,t=[],n=Object.keys(this.map),o=0;o<n.length;o++)t.push([(e=this.map[n[o]]).key,e.value]);return i(t)},o.keys=function(){for(var e=[],t=Object.keys(this.map),n=0;n<t.length;n++)e.push(this.map[t[n]].key);return i(e)},o.values=function(){for(var e=[],t=Object.keys(this.map),n=0;n<t.length;n++)e.push(this.map[t[n]].value);return i(e)},o.forEach=function(e,t){for(var n,o=Object.keys(this.map),i=0;i<o.length;i++)e.call(t,(n=this.map[o[i]]).value,n.key,this)},o.set=function(e,t){var n=this.keyElem.verifyValue(e),o=this.valueElem.verifyValue(t);return this.map[this.keyElem.valueToString(n)]={key:n,value:o},this},o.get=function(e){var t=this.keyElem.valueToString(this.keyElem.verifyValue(e));if(t in this.map)return this.map[t].value},o.has=function(e){return this.keyElem.valueToString(this.keyElem.verifyValue(e))in this.map},n}(0,a.Reflect),a.loadProto=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=void 0),a.loadJson(a.DotProto.Parser.parse(e),t,n)},a.protoFromString=a.loadProto,a.loadProtoFile=function(e,t,n){if(t&&"object"===o(t)?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return a.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,function(o){if(null!==o)try{t(null,a.loadProto(o,n,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))});var i=a.Util.fetch("object"===o(e)?e.root+"/"+e.file:e);return null===i?null:a.loadProto(i,n,e)},a.protoFromFile=a.loadProtoFile,a.newBuilder=function(e){return void 0===(e=e||{}).convertFieldsToCamelCase&&(e.convertFieldsToCamelCase=a.convertFieldsToCamelCase),void 0===e.populateAccessors&&(e.populateAccessors=a.populateAccessors),new a.Builder(e)},a.loadJson=function(e,t,n){return("string"==typeof t||t&&"string"==typeof t.file&&"string"==typeof t.root)&&(n=t,t=null),t&&"object"===o(t)||(t=a.newBuilder()),"string"==typeof e&&(e=JSON.parse(e)),t.import(e,n),t.resolveAll(),t},a.loadJsonFile=function(e,t,n){if(t&&"object"===o(t)?(n=t,t=null):t&&"function"==typeof t||(t=null),t)return a.Util.fetch("string"==typeof e?e:e.root+"/"+e.file,function(o){if(null!==o)try{t(null,a.loadJson(JSON.parse(o),n,e))}catch(e){t(e)}else t(Error("Failed to fetch file"))});var i=a.Util.fetch("object"===o(e)?e.root+"/"+e.file:e);return null===i?null:a.loadJson(JSON.parse(i),n,e)},a}),cc._RF.pop()}).call(this,e("_process"))},{"./bytebuffer":"bytebuffer",_process:2,fs:void 0,path:1}],"test-pbkiller":[function(e,t,n){"use strict";cc._RF.push(t,"56a3fUUQJxDGZ7UmkQsRicW","test-pbkiller");var o=e("../src/pbkiller");cc.Class({extends:cc.Component,properties:{textLabel:cc.Label},onLoad:function(){},log:function(e){cc.log(e),this.textLabel.string+="".concat(e,"\n")},loadProto:function(){var e=o.loadAll();this.log(JSON.stringify(e.grace.proto.msg,null,4)),e=o.loadAll("proto","grace.proto.msg"),this.log(JSON.stringify(new e.Player,null,4)),e=o.loadFromFile("Player.proto","grace.proto.msg"),this.log(JSON.stringify(new e.Player,null,4)),e=o.loadFromFile(["Player.proto","ActionCode.proto"],"grace.proto.msg"),this.log(JSON.stringify(new e.PBMessage,null,4)),e=o.loadFromFile(["Player2.json","ActionCode.proto"],"grace.proto.msg"),this.log(JSON.stringify(new e.Player,null,4))},decode:function(){var e=o.loadFromFile("Player2.json","grace.proto.msg"),t=new e.Player;t.id=1e3,t.name="ShawnZhang",t.enterTime=Date.now(),this.log("-----decode-----"),this.log("\u5e8f\u5217\u5316\u524d\uff1a".concat(JSON.stringify(t,null,4)));var n=t.toArrayBuffer(),i=e.Player.decode(n);this.log("\u53cd\u5e8f\u5217\u5316\u540e\uff1a".concat(JSON.stringify(i,null,4))),this.log("int64\u7c7b\u578b\u7684\u8bfb\u53d6\uff1a".concat(i.enterTime))},decodeFile:function(){var e=this;if(cc.sys.platform!==cc.sys.WECHAT_GAME){var t=o.loadFromFile("puzzle_config.proto","WePuzzle");o.loadData(cc.url.raw("resources/pb/bin/testPuzzle.bin"),function(n){var o=t.PuzzleConfig.decode(n);e.log(JSON.stringify(o))})}else this.log("decode\u4e8c\u8fdb\u5236\u6587\u4ef6\u4e0d\u80fd\u5728\u5fae\u4fe1\u5c0f\u6e38\u620f\u73af\u5883\u6267\u884c")},asyncLoad:function(){var e=this;o.preload(function(){e.loadProto()})}}),cc._RF.pop()},{"../src/pbkiller":"pbkiller"}],use_reversed_rotateTo:[function(e,t,n){"use strict";cc._RF.push(t,"f5733nhUFpCmotaPT3jCv6t","use_reversed_rotateTo"),cc.RotateTo._reverse=!0,cc._RF.pop()},{}]},{},["use_reversed_rotateTo","AppStart","Define","Test","Device","Text","UIHelper","ErrorLog","LogWrap","Base64","LocalStorage","MD5","NativeUtil","QRCode","Utils","XXTea","MJCPBase","MJCPGAreaBase","MJCPGBase","MJCardBase","MJData","MJDefine","MJGangBase","MJHandAreaBase","MJOperBase","MJOutAreaBase","MJOutEffect","MJShowAreaBase","BorderTime","CardTypeList","GPSView","GameLoading","GameRuleList","MulMenuPanel","PersonalInfo","SetBringGold","ShareBalance","TimeClock","UpBankerList","UpBankerView","createPoker","bytebuffer","long","protobufjs","pbkiller","test-pbkiller","AudioManager","DataManager","EventManager","FileManager","NetManager","ResManager","UIManager","UpdateManager","NetCmd","ProtocolAccount","ProtocolBank","ProtocolBase","ProtocolChat","ProtocolClub","ProtocolGameCommon","ProtocolHall","Socket","HallView","LoginView","RoomView","SelectView","UpdateView","Achievement","AlertPhoneNum","BindInviteCode","BindPhoneNum","ChangePasswordPopup","ChangeSafeCodePopup","EditNickName","EditReplaceHead","ForgotSafeCodePopup","HomePage","SetPasswordPopup","SetSafeCodePopup","VipPrivilege","VipTips","VipUpgrade","Bank","BankAddCard","BankHistory","BankSafeBox","BankTransfer","BankWithdraw","BaseView","PopupView","ClubCreatePopup","ClubCreateRoomPopup","ClubEditNamePopup","ClubExitLeaguePopup","ClubHelpPopup","ClubInvitePlayerPopup","ClubInvitePopup","ClubJoinLeaguePopup","ClubJoinPopup","ClubJoinRoomPopup","ClubListPopup","ClubMessagePopup","ClubNoticePopup","ClubPlayerAuditPopup","ClubPlayerListPopup","ClubProfitPopup","ClubSetPopup","ClubTable","ClubView","Chat","ClubChat","CountDown","DynamicList","GameChat","GameDownload","List","ListEx","ListItem","Marquee","SelectList","TipsPopup","TipsServerPopup","WebView","ButtonEx","DestorySelf","NodeAdapter","NotchAdapter","SpineAdapter","VideoPlayerEx","BattleFriendsHelp","CreateRoom","GameItem","GameRecord","GoldenGoose","HallSetting","JoinRoom","Mail","MailDetail","QuickRechargeTips","QuickRechargeView","Rank","RechargeAction","RechargeView","RedPacketRain","RegisterAction","RegisterBindAction","Activity","ActivityAchievement","ActivityBindInviteCode","ActivityClubInvite","ActivityCommon","ActivityDeficit","ActivityExchange","ActivityGift","ActivityRebate","ActivityRecharge","ActivitySingleRecharge","ActivityValidBet","Promotion","PromotionDetail","PromotionGuide","PromotionInfo","PromotionRank","PromotionSelect","CodeLogin","CodeLoginPopup","ForgotPasswordPopup","LoginPopup","PasswordLogin","PasswordLoginPopup","Register"]);